window.__require=function e(t,a,n){function i(s,r){if(!a[s]){if(!t[s]){var l=s.split("/");if(l=l[l.length-1],!t[l]){var c="function"==typeof __require&&__require;if(!r&&c)return c(l,!0);if(o)return o(l,!0);throw new Error("Cannot find module '"+s+"'")}s=l}var d=a[s]={exports:{}};t[s][0].call(d.exports,function(e){return i(t[s][1][e]||e)},d,d.exports,e,t,a,n)}return a[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<n.length;s++)i(n[s]);return i}({AState:[function(e,t){"use strict";cc._RF.push(t,"ce431fnyCFEwbUEzeU6jzxg","AState");var a=e("State");cc.Class({extends:a,onStateEnter:function(){this._super()},onStateExit:function(){this._super()}}),cc._RF.pop()},{State:"State"}],AToB:[function(e,t){"use strict";cc._RF.push(t,"13eccKdFdlEOLEuAw/Y+luv","AToB");var a=e("Transition");cc.Class({extends:a,properties:{},onLoad:function(){}}),cc._RF.pop()},{Transition:"Transition"}],AbstractScreen:[function(e,t){"use strict";cc._RF.push(t,"51660YOCt5N84a6ikB19mdq","AbstractScreen"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},onShow:function(e){this.data=e},onHide:function(){},onButtonClickEvent:function(){},onDestroy:function(){}}),cc._RF.pop()},{}],ActivateFullScreen:[function(e,t){"use strict";cc._RF.push(t,"0629f/fPzVIzKk3CI+FUtme","ActivateFullScreen"),e("PopUpManager").PopUpManager,e("PopUpManager").PopUpType,cc.Class({extends:cc.Component,properties:{heightNode:{default:null,type:cc.Node}},onLoad:function(){window.GameScreen=null,cc.sys.platform==cc.sys.MOBILE_BROWSER&&cc.sys.os==cc.sys.OS_IOS?this.heightNode.height=790:this.heightNode.height=1080,this.listener=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:function(){cc.sys.platform==cc.sys.MOBILE_BROWSER&&cc.sys.os!=cc.sys.OS_OSX&&cc.sys.os!=cc.sys.OS_IOS&&cc.screen.autoFullScreen(cc.game.frame)}}),cc.eventManager.addListener(this.listener,this.node)}}),cc._RF.pop()},{PopUpManager:"PopUpManager"}],AdjustSpriteOrder:[function(e,t){"use strict";cc._RF.push(t,"f0738fNsc1H1L/atXHqo94E","AdjustSpriteOrder"),cc.Class({extends:cc.Component,properties:{zOrder:-1,isLocal:!0,isRelative:!0},onEnable:function(){this.isLocal?this.isRelative?this.node.setLocalZOrder(this.node.getLocalZOrder()+this.zOrder):this.node.setLocalZOrder(this.zOrder):this.isRelative?this.node.setGlobalZOrder(this.node.getGlobalZOrder()+this.zOrder):this.node.setGlobalZOrder(this.zOrder)}}),cc._RF.pop()},{}],AdminNoticePopup:[function(e,t){"use strict";cc._RF.push(t,"f6c7bZJUr9I47S0LhOcSVW6","AdminNoticePopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase");cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},title:{default:null,type:cc.Label},label:{default:null,type:cc.Label}},onShow:function(e){console.log("onShow",e),this.title.string=e.title,this.label.string=e.content,this.callback=e.callback},onLoad:function(){},onClose:function(){this.popUpManager.hide(n.AdminNoticePopup,function(){}),this.callback&&this.callback()}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],Advancefilter:[function(e,t){"use strict";cc._RF.push(t,"eac08cvrXdBd4Z8yMrT1dTw","Advancefilter"),e("PopUpManager").PopUpManager,e("PopUpManager").PopUpType;var a=e("PopUpBase"),n=(e("SliderTouch"),e("CustomEditBox"),e("EditBoxUtil"),e("PostTypes").SetPlayerValData,cc.Class({extends:a,properties:{minStake:{default:null,type:cc.EditBox},maxStake:{default:null,type:cc.EditBox},buyInUltraLow:{default:null,type:cc.Node},buyInLow:{default:null,type:cc.Node},buyInMedium:{default:null,type:cc.Node},buyInHigh:{default:null,type:cc.Node},player2:{default:null,type:cc.Node},player3:{default:null,type:cc.Node},player4:{default:null,type:cc.Node},player5:{default:null,type:cc.Node},player6:{default:null,type:cc.Node},player7:{default:null,type:cc.Node},player8:{default:null,type:cc.Node},player9:{default:null,type:cc.Node},rit:{default:null,type:cc.Node},noLimit:{default:null,type:cc.Node},limit:{default:null,type:cc.Node},activeSprite:{default:null,type:cc.SpriteFrame},inactiveSprite:{default:null,type:cc.SpriteFrame},activeColor:{default:new cc.Color},inactiveColor:{default:new cc.Color}},statics:{config:{stakes:{min:"",max:""},players:{2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:!1,9:!1},buyin:{UltraLow:!1,Low:!1,Medium:!1,High:!1},format:{rit:!1},limit:{NoLimit:!1,PotLimit:!1},enabled:!1}},onDestroy:function(){},onEnable:function(){},onLoad:function(){},onPlayers:function(e,t){1==n.config.players[t]?n.config.players[t]=!1:n.config.players[t]=!0,this.updateFilters()},onBuyin:function(e,t){1==n.config.buyin[t]?n.config.buyin[t]=!1:n.config.buyin[t]=!0,this.updateFilters()},onFormat:function(e,t){1==n.config.format[t]?n.config.format[t]=!1:n.config.format[t]=!0,this.updateFilters()},onLimitTypes:function(e,t){1==n.config.limit[t]?n.config.limit[t]=!1:n.config.limit[t]=!0,this.updateFilters()},onMin:function(){n.config.stakes.min=this.minStake.string},onMax:function(){n.config.stakes.max=this.maxStake.string},onShow:function(){this.updateFilters()},updateFilters:function(){this.minStake.string=n.config.stakes.min,this.maxStake.string=n.config.stakes.max,n.config.buyin.UltraLow?this.setActiveButton(this.buyInUltraLow):this.setInActiveButton(this.buyInUltraLow),n.config.buyin.Low?this.setActiveButton(this.buyInLow):this.setInActiveButton(this.buyInLow),n.config.buyin.Medium?this.setActiveButton(this.buyInMedium):this.setInActiveButton(this.buyInMedium),n.config.buyin.High?this.setActiveButton(this.buyInHigh):this.setInActiveButton(this.buyInHigh),n.config.players[2]?this.setActiveButton(this.player2):this.setInActiveButton(this.player2),n.config.players[3]?this.setActiveButton(this.player3):this.setInActiveButton(this.player3),n.config.players[4]?this.setActiveButton(this.player4):this.setInActiveButton(this.player4),n.config.players[5]?this.setActiveButton(this.player5):this.setInActiveButton(this.player5),n.config.players[6]?this.setActiveButton(this.player6):this.setInActiveButton(this.player6),n.config.players[7]?this.setActiveButton(this.player7):this.setInActiveButton(this.player7),n.config.players[8]?this.setActiveButton(this.player8):this.setInActiveButton(this.player8),n.config.players[9]?this.setActiveButton(this.player9):this.setInActiveButton(this.player9),n.config.format.rit?this.setActiveButton(this.rit):this.setInActiveButton(this.rit),n.config.limit.NoLimit?this.setActiveButton(this.noLimit):this.setInActiveButton(this.noLimit),n.config.limit.PotLimit?this.setActiveButton(this.limit):this.setInActiveButton(this.limit)},setActiveButton:function(e){e.getChildByName("scaler").getChildByName("off").active=!1,e.getChildByName("scaler").getChildByName("on").active=!0},setInActiveButton:function(e){e.getChildByName("scaler").getChildByName("off").active=!0,e.getChildByName("scaler").getChildByName("on").active=!1},onClearAll:function(){n.config={stakes:{min:"",max:""},players:{2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:!1,9:!1},buyin:{UltraLow:!1,Low:!1,Medium:!1,High:!1},format:{rit:!1},limit:{NoLimit:!1,PotLimit:!1},enabled:!1},this.updateFilters()},onApply:function(){0==n.config.players[2]&&0==n.config.players[3]&&0==n.config.players[4]&&0==n.config.players[5]&&0==n.config.players[6]&&0==n.config.players[7]&&0==n.config.players[8]&&0==n.config.players[9]&&0==n.config.buyin.UltraLow&&0==n.config.buyin.Low&&0==n.config.buyin.Medium&&0==n.config.buyin.High&&0==n.config.format.rit&&0==n.config.limit.NoLimit&&0==n.config.limit.PotLimit&&""==n.config.stakes.min&&""==n.config.stakes.max?n.config.enabled=!1:n.config.enabled=!0,GameManager.emit("AdvancefilterUpdated"),this.node.active=!1},onClose:function(){this.node.active=!1}}));cc._RF.pop()},{CustomEditBox:"CustomEditBox",EditBoxUtil:"EditBoxUtil",PopUpBase:"PopUpBase",PopUpManager:"PopUpManager",PostTypes:"PostTypes",SliderTouch:"SliderTouch"}],AnimBase:[function(e,t){"use strict";cc._RF.push(t,"c2487weeKNBTYg1LY5JTWCX","AnimBase"),cc.Class({extends:cc.Component,properties:{animCtrl:{default:null,type:cc.Animation},callBack:{default:null,visible:!1}},onLoad:function(){},play:function(e,t){this.callBack=t,this.animCtrl.play(e,0)},stop:function(){this.animCtrl.stop()},onAnimFinished:function(){this.callBack()}}),cc._RF.pop()},{}],AvatarPopup:[function(e,t){"use strict";cc._RF.push(t,"5d0e4UmdPxAKYDgBGvSmrxu","AvatarPopup");var a=window,n=e("PopUpManager").PopUpManager,i=e("PopUpManager").PopUpType,o=e("PopUpBase"),s=e("AvatarSelection");cc.Class({extends:o,properties:{popUpManager:{default:null,type:n},avatarGridParent:{default:null,type:cc.Node},avatars:{default:[],type:s},selectedAvatarID:0,downloadedSprite:{default:null,type:cc.Sprite},isAvatarTab:!0,imageLoaded:!1,okBtn:{default:null,type:cc.Button},avatarScrollViewRef:{default:null,type:cc.Node}},onLoad:function(){this.loadAvatars(),this.on("SelectedAvatar",this.onSelectAvatar.bind(this)),a.AvatarPopup=this,this.avatars.forEach(function(e){e.unSelectAvatar()},this)},loadAvatars:function(){for(var e=0;e<GameManager.avatarPool.length;e++)this.avatarGridParent.addChild(GameManager.avatarPool[e]),GameManager.avatarPool[e].active=!0,GameManager.avatarPool[e].getComponent("AvatarSelection").AvatarPopUp=this,this.avatars.push(GameManager.avatarPool[e].getComponent("AvatarSelection"))},onShow:function(e){var t;this.soundValue=null,null!=e&&(this.soundValue=e),GameManager.isMobile,this.avatars.forEach(function(e){e.unSelectAvatar()}),this.selectedAvatarID=-1,GameManager.isMobile||cc.sys.os===cc.sys.OS_WINDOWS&&!cc.sys.isBrowser?(0==(t=parseInt(GameManager.user.profileImage))||t||(t=0),this.onAvatarTab(),t>=0&&(t>this.avatars.length-1&&(t=0),this.selectedAvatarID=t,this.avatars[t].selection.active=!0)):0==(t=parseInt(GameManager.user.profileImage))||t?(this.getComponent("TabBtnUtil").onShowTab_01(),this.onAvatarTab(),t>=0&&(this.selectedAvatarID=t,this.avatars[t].selection.active=!0)):(this.getComponent("TabBtnUtil").onShowTab_02(),this.onCustomImageTab(),this.imageLoaded=!0,this.downloadedSprite.spriteFrame=GameManager.user.urlImg)},onAvatarTab:function(){null!=this.soundValue&&0!=this.soundValue||GameManager.playSound(K.Sounds.click),this.isAvatarTab||(this.isAvatarTab=!0,this.okBtn.interactable=!0,this.okBtn.interactable=this.selectedAvatarID>=0)},onCustomImageTab:function(){null!=this.soundValue&&0!=this.soundValue||GameManager.playSound(K.Sounds.click),this.isAvatarTab&&(this.isAvatarTab=!1,this.okBtn.interactable=this.imageLoaded)},onSelectAvatar:function(e){this.avatars.forEach(function(e){e.unSelectAvatar()}),this.avatars[e].showSelection(),this.selectedAvatarID=e,this.okBtn.interactable=this.selectedAvatarID>=0},onConfirm:function(){this.updateAvatar(),null!=this.soundValue&&0!=this.soundValue||GameManager.playSound(K.Sounds.click)},onBrowseAvatar:function(){WebImageUpload.loadImage(function(e){this.okBtn.interactable=!0,this.imageLoaded=!0,this.downloadedSprite.spriteFrame=e}.bind(this))},updateAvatar:function(){var e={query:{playerId:"hsdfhd"},updateKeys:{profileImage:"0"}};e.query.playerId=GameManager.user.playerId,this.isAvatarTab?e.updateKeys.profileImage=this.selectedAvatarID.toString():e.updateKeys.profileImage=WebImageUpload.base64Data,this.isAvatarTab?ServerCom.pomeloRequest(K.PomeloAPI.updateProfile,e,function(e){e.success&&(this.isAvatarTab?(GameManager.user.profileImage=this.selectedAvatarID,GameManager.user.urlImg=GameManager.avatarImages[GameManager.user.profileImage]):(GameManager.user.profileImage=WebImageUpload.base64Data,GameManager.user.urlImg=WebImageUpload.spriteLoaded),GameManager.emit("image-loaded",GameManager.user),this.popUpManager.hide(i.AvatarDialog,function(){}))}.bind(this)):ServerCom.httpPostRequest(K.ServerAddress.ipAddress+":"+K.ServerAddress.port+K.ServerAPI.imageUpload,{playerId:GameManager.user.playerId,base64Image:WebImageUpload.base64Data},function(e){e.success&&this.popUpManager.hide(i.AvatarDialog,function(){})}.bind(this))},onCancel:function(){this.popUpManager.hide(i.AvatarDialog,function(){AvatarPopup.avatars.forEach(function(e){e.unSelectAvatar()},this)}),null!=this.soundValue&&0!=this.soundValue||GameManager.playSound(K.Sounds.click)},registerUPandDOWN:function(){},onHide:function(){GameManager.isMobile}}),cc._RF.pop()},{AvatarSelection:"AvatarSelection",PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],AvatarSelection:[function(e,t){"use strict";cc._RF.push(t,"3f7f4qwR4JMoIzxMoHoNe8+","AvatarSelection");var a=e("EventEmitter");cc.Class({extends:a,properties:{selection:{default:null,type:cc.Node},avatarImg:{default:null,type:cc.Sprite},id:null},onLoad:function(){},selectAvatar:function(){this.showSelection(),GameManager.emit("SelectedAvatar",this.id)},showSelection:function(){this.selection.active=!0},setAvatarImg:function(e,t){this.avatarImg.spriteFrame=e,this.id=t},unSelectAvatar:function(){this.selection.active=!1}}),cc._RF.pop()},{EventEmitter:"EventEmitter"}],BState:[function(e,t){"use strict";cc._RF.push(t,"c1e47V7pGpJKaI7GM9K9QfE","BState");var a=e("State");cc.Class({extends:a,onStateEnter:function(){this._super()},onStateExit:function(){this._super()}}),cc._RF.pop()},{State:"State"}],BetBtnUtil:[function(e,t){"use strict";cc._RF.push(t,"288b7CcjMtEVoBchnc3DNzV","BetBtnUtil");var a=e("SliderTouch");cc.Class({extends:cc.Component,properties:{pokerPresenter:{default:null},betSlider:{default:null,type:a},minAmount:{default:0},maxAmount:{default:0},potAmount:{default:0},allinmaxLbl:{default:null,type:cc.Label},editBox:{default:null,type:cc.EditBox},isWindows:!1,minButton:{default:null,type:cc.Button},halfPotButton:{default:null,type:cc.Button},potButton:{default:null,type:cc.Button},maxButton:{default:null,type:cc.Button},fullPotButton:{default:null,type:cc.Button},bbButton:{default:null,type:cc.Button},playerChips:{default:0},bb:0,last:"",blured:!1,roundName:"",raiseBtn:{default:null,type:cc.Button},betBtn:{default:null,type:cc.Button},raiseLbl:{default:null,type:cc.Label},betLbl:{default:null,type:cc.Label},mobEditBox:{default:null,type:cc.EditBox},holdemBtns:{default:null,type:cc.Node},omahaBtns:{type:cc.Node,default:null},holdemPreflopBtns:{type:cc.Node,default:null}},onLoad:function(){this.isMobile=cc.sys.isMobile&&!cc.sys.isBrowser,this.isMobile&&(this.editBox.InputFlag=cc.EditBox.InputFlag.SENSITIVE,this.editBox.InputMode=cc.EditBox.InputMode.NUMERIC),this.betSlider.callback=this.onSliderChange.bind(this),GameManager.on("switchBB",this.switchBBNow.bind(this))},start:function(){var e=this;setTimeout(function(){cc.isValid(e.node)&&e.editBox._textLabel&&(e.editBox._textLabel.overflow=cc.Label.Overflow.SHRINK,e.editBox._placeholderLabel.overflow=cc.Label.Overflow.SHRINK)},100)},updateDefaultEditMax:function(){if(isNaN(this.editBox.string)){var e="";if(n=this.editBox.string.match(/\d+/g))for(var t=0;t<n.length;t++)e+=n[t];this.editBox.string=e}else{if(/\s/.test(this.editBox.string)){var a=this.editBox.string.toString().trim();this.editBox.string=a}var n;e="e",-1!=this.editBox.string.indexOf(e)&&(n=(n=this.editBox.string).replace("e",""),this.editBox.string=n),e="-",-1!=this.editBox.string.indexOf(e)&&(n=(n=this.editBox.string).replace("-",""),this.editBox.string=n)}""==this.editBox.string.trim()&&(this.editBox.string=this.minAmount+""),Number(this.editBox.string)>=this.minAmount&&Number(this.editBox.string)<=this.maxAmount&&(this.betBtn.interactable=!0,this.raiseBtn.interactable=!0,this.betLbl.string=this.editBox.string,this.raiseLbl.string=this.editBox.string),Number(this.editBox.string)>this.maxAmount?(this.editBox.string=this.maxAmount+"",this.betBtn.interactable=!1,this.raiseBtn.interactable=!1,this.betLbl.string=this.maxAmount+"",this.raiseLbl.string=this.maxAmount+""):Number(this.editBox.string)<this.minAmount&&(this.betBtn.interactable=!1,this.raiseBtn.interactable=!1,this.betLbl.string=this.minAmount+"",this.raiseLbl.string=this.minAmount+"")},updateDefaultEditMin:function(){this.blured?this.blured=!1:(this.editBox.string<this.minAmount&&(this.editBox.string=this.minAmount.toString()),this.maxAmount==this.minAmount?this.betSlider.setSliderValue(1):this.betSlider.setSliderValue((this.editBox.string-this.minAmount)/(this.maxAmount-this.minAmount)))},updateMobEditMax:function(){if(isNaN(this.editBox.string))return this.betBtn.interactable=!1,void(this.raiseBtn.interactable=!1);this.editBox.string>=this.minAmount&&this.editBox.string<=this.maxAmount&&(this.betBtn.interactable=!0,this.raiseBtn.interactable=!0,this.betLbl.string=this.editBox.string,this.raiseLbl.string=this.editBox.string),this.editBox.string>this.maxAmount?(this.betBtn.interactable=!1,this.raiseBtn.interactable=!1,this.betLbl.string=this.maxAmount,this.raiseLbl.string=this.maxAmount):this.editBox.string<this.minAmount&&(this.betBtn.interactable=!1,this.raiseBtn.interactable=!1,this.betLbl.string=this.minAmount,this.raiseLbl.string=this.minAmount)},updateMobEditMin:function(){if(isNaN(this.editBox.string))return this.betBtn.interactable=!1,void(this.raiseBtn.interactable=!1);if(-1!=this.editBox.string.indexOf("e")){var e=this.editBox.string;e=e.replace("e",""),this.editBox.string=e}this.editBox.string<this.minAmount&&(this.editBox.string=this.minAmount.toString()),this.maxAmount==this.minAmount?this.betSlider.setSliderValue(1):this.betSlider.setSliderValue((this.editBox.string-this.minAmount)/(this.maxAmount-this.minAmount))},updateData:function(e,t,a){this.step=0,this.minAmount=e.minAmount,this.maxAmount=e.maxAmount,this.potAmount=e.potAmount||0,this.editBox.string=this.minAmount.toString(),this.roundName=e.roundName,this.bb=e.bb,this.roundName.toUpperCase(),this.roundMaxBet=e.roundMaxBet,this.fullPotButton.node.active=t,this.omahaBtns.active=t,this.holdemBtns.active=!t,this.playerChips=e.playerChips,this.roundBet=e.roundBet,this.holdemPreflopBtns.active=a,this.adjustBtns(),this.betSlider.setSliderValue(0)},adjustBtns:function(){var e=this.minAmount<this.maxAmount,t=this.omahaBtns.active?this.omahaBtns:this.holdemBtns;"FullButton"==t.children[0].name&&(t.children[0].getComponent(cc.Button).interactable=this.maxAmount>=this.minAmount&&this.maxAmount<=this.playerChips&&this.maxAmount<=this.maxAmount&&e),t.children[1].getComponent(cc.Button).interactable=this.potAmount/2>=this.minAmount&&this.potAmount/2<=this.playerChips&&this.potAmount/2<=this.maxAmount&&e,t.children[2].getComponent(cc.Button).interactable=3*this.potAmount/4>=this.minAmount&&3*this.potAmount/4<=this.playerChips&&3*this.potAmount/4<=this.maxAmount&&e,this.maxAmount>=this.playerChips+this.roundBet?this.maxButton.node.children[0].getChildByName("Label").getComponent(cc.Label).string=LocalizedManager.t("TXT_ALL_IN"):this.maxButton.node.children[0].getChildByName("Label").getComponent(cc.Label).string=LocalizedManager.t("TXT_MAX")},onIncrementSlider:function(){this.holdemPreflopBtns.active,cc.log(this.betSlider.getSliderValue());var e=parseFloat(this.editBox.string)+this.bb;e>this.maxAmount&&(e=this.maxAmount),this.betSlider.setSliderValue((e-this.minAmount)/(this.maxAmount-this.minAmount),!0,!0)},onDecrementSlider:function(){this.holdemPreflopBtns.active;var e=parseFloat(this.editBox.string)-this.bb;e<this.minAmount&&(e=this.minAmount),this.betSlider.setSliderValue((e-this.minAmount)/(this.maxAmount-this.minAmount),!0,!0)},onMin:function(){this.betSlider.setSliderValue(0),this.editBox.node.parent.stopAllActions(),this.editBox.node.parent.scale=1,this.editBox.node.parent.runAction(cc.sequence(cc.scaleTo(.1,.9),cc.scaleTo(.1,1.1),cc.scaleTo(.1,1)))},onMax:function(){this.betSlider.setSliderValue(1),this.editBox.node.parent.stopAllActions(),this.editBox.node.parent.scale=1,this.editBox.node.parent.runAction(cc.sequence(cc.scaleTo(.1,.9),cc.scaleTo(.1,1.1),cc.scaleTo(.1,1)))},onPot:function(){this.maxAmount==this.minAmount?this.betSlider.setSliderValue(1):this.betSlider.setSliderValue((3*this.potAmount/4-this.minAmount)/(this.maxAmount-this.minAmount)),this.editBox.node.parent.stopAllActions(),this.editBox.node.parent.scale=1,this.editBox.node.parent.runAction(cc.sequence(cc.scaleTo(.1,.9),cc.scaleTo(.1,1.1),cc.scaleTo(.1,1)))},onHalfPot:function(){this.maxAmount==this.minAmount?this.betSlider.setSliderValue(1):this.betSlider.setSliderValue((this.potAmount/2-this.minAmount)/(this.maxAmount-this.minAmount)),this.editBox.node.parent.stopAllActions(),this.editBox.node.parent.scale=1,this.editBox.node.parent.runAction(cc.sequence(cc.scaleTo(.1,.9),cc.scaleTo(.1,1.1),cc.scaleTo(.1,1)))},on3BB:function(){this.maxAmount==this.minAmount?this.betSlider.setSliderValue(1):this.betSlider.setSliderValue((3*this.bb-this.minAmount)/(this.maxAmount-this.minAmount)),this.editBox.node.parent.stopAllActions(),this.editBox.node.parent.scale=1,this.editBox.node.parent.runAction(cc.sequence(cc.scaleTo(.1,.9),cc.scaleTo(.1,1.1),cc.scaleTo(.1,1)))},onFullPot:function(){this.onMax(),this.editBox.node.parent.stopAllActions(),this.editBox.node.parent.scale=1,this.editBox.node.parent.runAction(cc.sequence(cc.scaleTo(.1,.9),cc.scaleTo(.1,1.1),cc.scaleTo(.1,1)))},onTwiceBet:function(){this.betSlider.setSliderValue((2*this.roundMaxBet-this.minAmount)/(this.maxAmount-this.minAmount)),this.editBox.node.parent.stopAllActions(),this.editBox.node.parent.scale=1,this.editBox.node.parent.runAction(cc.sequence(cc.scaleTo(.1,.9),cc.scaleTo(.1,1.1),cc.scaleTo(.1,1)))},onThriceBet:function(){this.betSlider.setSliderValue((3*this.roundMaxBet-this.minAmount)/(this.maxAmount-this.minAmount)),this.editBox.node.parent.stopAllActions(),this.editBox.node.parent.scale=1,this.editBox.node.parent.runAction(cc.sequence(cc.scaleTo(.1,.9),cc.scaleTo(.1,1.1),cc.scaleTo(.1,1)))},onQuintupleBet:function(){this.betSlider.setSliderValue((5*this.roundMaxBet-this.minAmount)/(this.maxAmount-this.minAmount)),this.editBox.node.parent.stopAllActions(),this.editBox.node.parent.scale=1,this.editBox.node.parent.runAction(cc.sequence(cc.scaleTo(.1,.9),cc.scaleTo(.1,1.1),cc.scaleTo(.1,1)))},onBet:function(){if(this.isWindows){if(this.amountEditLbl.string<this.minAmount)return void(this.amountEditLbl.string=this.minAmount);this.pokerPresenter.onBet(this.amountEditLbl.string,K.PlayerMove.Bet)}else this.editBox.string<this.minAmount&&(this.editBox.string=this.minAmount),this.editBox.string>this.maxAmount&&(this.editBox.string=this.minAmount),this.pokerPresenter.onBet(this.editBox.string,K.PlayerMove.Bet)},onTextChanged:function(){this.updateDefaultEditMax(),this.betSlider.setSliderValue((this.editBox.string-this.minAmount)/(this.maxAmount-this.minAmount))},onTextBegan:function(){this.blured=!1,this.last=this.editBox.string},onRaise:function(){if(this.isWindows){if(this.amountEditLbl.string<this.minAmount)return void(this.amountEditLbl.string=this.minAmount);this.pokerPresenter.onBet(this.amountEditLbl.string,K.PlayerMove.Raise)}else this.editBox.string<this.minAmount&&(this.editBox.string=this.minAmount),this.editBox.string>this.maxAmount&&(this.editBox.string=this.minAmount),this.pokerPresenter.onBet(this.editBox.string,K.PlayerMove.Raise)},onSubmitRaiseOrBet:function(){this.scheduleOnce(function(){this.betBtn.node.active?this.onBet():this.raiseBtn.node.active&&this.onRaise()},.1)},onSliderChange:function(e){var t=((e=(e=e<0?0:e)>1?1:e)*(this.maxAmount-this.minAmount)+this.minAmount).roundOff(2);t<=this.minAmount&&(t=this.minAmount),t>=this.maxAmount&&(t=this.maxAmount),this.holdemPreflopBtns.active,this.maxAmount,this.editBox.string=t.toString(),this.betBtn.interactable=!0,this.raiseBtn.interactable=!0,this.raiseLbl.string=t.toString(),this.betLbl.string=t.toString(),this.updateBB(),t==this.maxAmount?(this.editBox.node.active=!1,this.allinmaxLbl.node.active=!0,this.holdemBtns.active?this.allinmaxLbl.string="All in":this.allinmaxLbl.string="Max"):(this.allinmaxLbl.node.active=!1,this.editBox.node.active=!0)},onSliderChange2:function(e,t){this.holdemPreflopBtns.active?this.editBox.string=t?Math.ceil(e.toString()):e.toString():this.editBox.string=e.toString(),this.betBtn.interactable=!0,this.raiseBtn.interactable=!0,this.raiseLbl.string=e.toString(),this.betLbl.string=e.toString()},updateBB:function(){this.pokerPresenter&&(this.raiseLbl.node.parent.getChildByName("bb").getComponent(cc.Label).string=(Number(this.raiseLbl.string)/this.pokerPresenter.model.gameData.tableDetails.bigBlind).toFixed(1)+"BB",this.betLbl.node.parent.getChildByName("bb").getComponent(cc.Label).string=(Number(this.betLbl.string)/this.pokerPresenter.model.gameData.tableDetails.bigBlind).toFixed(1)+"BB",this.editBox.node.getChildByName("bb").getComponent(cc.Label).string=(Number(this.editBox.string)/this.pokerPresenter.model.gameData.tableDetails.bigBlind).toFixed(1)+"BB",GameManager.isBB&&GameManager.user.settings.stackInBB?(this.raiseLbl.node.scale=0,this.betLbl.node.scale=0,this.editBox.node.getChildByName("TEXT_LABEL").scale=0,this.raiseLbl.node.parent.getChildByName("bb").scale=.5,this.betLbl.node.parent.getChildByName("bb").scale=.5,this.editBox.node.getChildByName("bb").scale=.5):(this.raiseLbl.node.scale=.5,this.betLbl.node.scale=.5,this.editBox.node.getChildByName("TEXT_LABEL").scale=.5,this.raiseLbl.node.parent.getChildByName("bb").scale=0,this.betLbl.node.parent.getChildByName("bb").scale=0,this.editBox.node.getChildByName("bb").scale=0))},switchBBNow:function(){this.updateBB()}}),cc._RF.pop()},{SliderTouch:"SliderTouch"}],BlindsChangedPopUp:[function(e,t){"use strict";cc._RF.push(t,"a70f5QqYnxJTpp5U0QHGH5g","BlindsChangedPopUp");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase");cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},smallBlindLbl:{default:null,type:cc.Label},bigBlindLbl:{default:null,type:cc.Label}},onShow:function(e){null!=e&&(this.smallBlindLbl.string=e.tableSmallBlind,this.bigBlindLbl.string=e.tableBigBlind,this.scheduleOnce(function(){this.popUpManager.hide(n.BlindChangedPopup,function(){})}.bind(this),1))}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],BuddiesItemContent:[function(e,t){"use strict";cc._RF.push(t,"e5d42H2+6BCO79MCVcAL9Wh","BuddiesItemContent"),cc.Class({extends:cc.Component,properties:{bg_1:{default:null,type:cc.Node},bg_2:{default:null,type:cc.Node},playerNameLbl:{default:null,type:cc.Label},statusLbl:{default:null,type:cc.Label},onlineStat:{default:null,type:cc.Node},offlineStat:{default:null,type:cc.Node},buddiesStatus:{default:null,type:cc.Node},inviteStatus:{default:null,type:cc.Node},addFriendStatus:{default:null,type:cc.Node},avatarImage:{default:null,type:cc.Sprite},addFriendBtn:{default:null,type:cc.Button},playerName:""},onLoad:function(){this.friendId=""},loadAvatar:function(e){var t,a=this;console.log("Load Avatar 1111 , ",e),isNaN(e)&&isNaN(parseInt(e))&&""!=e?cc.loader.load(e+"?w=125&h=125",function(e,n){t=e?GameManager.avatarImages[1]:new cc.SpriteFrame(n),console.log("Load Avatar 22222222 , ",t),a.avatarImage.spriteFrame=t}):(""==e&&(e=1),t=GameManager.avatarImages[e],console.log("Load Avatar 3333333333 , ",t),a.avatarImage.spriteFrame=t)},initInfo:function(e,t){this.bg_1.active=e.index%2==0,this.bg_2.active=e.index%2!=0,this.playerNameLbl.string=this.playerName=e.userName,this.statusLbl.string=e.megaPointLevel,this.statusLbl.node.active=t,this.onlineStat.active=t&&e.isOnline,this.offlineStat.active=t&&!e.isOnline,this.buddiesStatus.active=t,this.inviteStatus.active=!t&&!e.isAddFriend,this.addFriendStatus.active=!t&&e.isAddFriend,this.loadAvatar(e.profileImage),this.friendId=e.playerId},onClickRemoveBtn:function(){this.removeFriend()},onClickAcceptBtn:function(){this.acceptFriendRequest()},onClickRejectBtn:function(){this.rejectFriendRequest()},onClickAddFriendBtn:function(){this.addFriendRequest()},acceptFriendRequest:function(){var e=this,t={};t.playerId=GameManager.user.playerId,t.friendId=this.friendId,ServerCom.pomeloRequest(K.BuddyAPI.acceptFriendRequest,t,function(t){console.log("acceptFriendRequest reponse",t),t.success&&(e.node.parent=null,e.node.destroy())},null,5e3,!1)},getName:function(){return this.playerName},rejectFriendRequest:function(){var e=this,t={};t.playerId=GameManager.user.playerId,t.friendId=this.friendId,ServerCom.pomeloRequest(K.BuddyAPI.rejectFriendRequest,t,function(t){console.log("rejectFriendRequest reponse",t),t.success&&(e.node.parent=null,e.node.destroy())},null,5e3,!1)},addFriendRequest:function(){var e=this,t={};t.playerId=GameManager.user.playerId,t.friendId=this.friendId;var a=function(){e.addFriendBtn.interactable=!1;var t=e.addFriendBtn.node.children[0];LocalizedManager.setTextKey(t,"TXT_SENT")};ServerCom.pomeloRequest(K.BuddyAPI.sendFriendRequest,t,function(e){console.log("addFriendRequest reponse",e),e.success&&a()},null,5e3,!1)},removeFriend:function(){var e=this,t={};t.playerId=GameManager.user.playerId,t.friendId=this.friendId,ServerCom.pomeloRequest(K.BuddyAPI.removeFriend,t,function(t){console.log("removeFriend reponse",t),t.success&&(e.node.parent=null,e.node.destroy())},null,5e3,!1)}}),cc._RF.pop()},{}],BuddiesItemIngame:[function(e,t){"use strict";cc._RF.push(t,"78a23pd7RdOlI2UHDgh92vE","BuddiesItemIngame"),cc.Class({extends:cc.Component,properties:{playerNameLbl:{default:null,type:cc.Label},onlineStat:{default:null,type:cc.Node},offlineStat:{default:null,type:cc.Node},avatarImage:{default:null,type:cc.Sprite},inviteBtn:{default:null,type:cc.Node},invitedBtn:{default:null,type:cc.Node}},onLoad:function(){this.friendId="",this.invitedBtn.active=!1},loadAvatar:function(e){var t,a=this;console.log("Load Avatar 1111 , ",e),isNaN(e)&&isNaN(parseInt(e))&&""!=e?cc.loader.load(e+"?w=125&h=125",function(e,n){t=e?GameManager.avatarImages[1]:new cc.SpriteFrame(n),console.log("Load Avatar 22222222 , ",t),a.avatarImage.spriteFrame=t}):(""==e&&(e=1),t=GameManager.avatarImages[e],console.log("Load Avatar 3333333333 , ",t),a.avatarImage.spriteFrame=t)},initInfo:function(e){cc.log("initInfo(data)  ",e),this.playerNameLbl.string=this.playerName=e.userName,this.onlineStat.active=e.isOnline,this.offlineStat.active=!e.isOnline,this.friendId=e.playerId,this.channelId=e.channelId,this.loadAvatar(e.profileImage)},onClickInviteBtn:function(){this.clientSendInvitePlayRequest()},clientSendInvitePlayRequest:function(){var e={},t=this;e.playerId=GameManager.user.playerId,e.friendId=this.friendId,e.channelId=this.channelId,console.log("clientSendInvitePlayRequest payload",e);var a=function(e){t.invitedBtn.active=!0,t.inviteBtn.active=!1,console.log("playWithFriend requestCallback  reponse",e)};ServerCom.pomeloRequest(K.BuddyAPI.playWithFriend,e,function(e){console.log("playWithFriend reponse",e),e.success&&a(e)},null,5e3,!1)},getName:function(){return this.playerName},rejectFriendRequest:function(){var e=this,t={};t.playerId=GameManager.user.playerId,t.friendId=this.friendId,ServerCom.pomeloRequest(K.BuddyAPI.rejectFriendRequest,t,function(t){console.log("rejectFriendRequest reponse",t),t.success&&(e.node.parent=null,e.node.destroy())},null,5e3,!1)},addFriendRequest:function(){var e={};e.playerId=GameManager.user.playerId,e.friendId=this.friendId,ServerCom.pomeloRequest(K.BuddyAPI.sendFriendRequest,e,function(e){console.log("addFriendRequest reponse",e),e.success&&BuddiesTablePresenter.showInvitesList()},null,5e3,!1)},removeFriend:function(){var e=this,t={};t.playerId=GameManager.user.playerId,t.friendId=this.friendId,ServerCom.pomeloRequest(K.BuddyAPI.removeFriend,t,function(t){console.log("removeFriend reponse",t),t.success&&(e.node.parent=null,e.node.destroy())},null,5e3,!1)}}),cc._RF.pop()},{}],BuddiesPopup:[function(e,t){"use strict";cc._RF.push(t,"0a8f2/HQ6FN0rn1UhPjsTTC","BuddiesPopup"),cc.Class({extends:cc.Component,properties:{skipButton:{default:null,type:cc.Button,visible:!0},contentHolder:{default:null,type:cc.Node},buddiesItemContent:{default:null,type:cc.Prefab},inputName:{default:null,type:cc.EditBox},channelId:""},onLoad:function(){},createBuddiesList:function(e){var t=this;if(this.currentTableData=e||[],this.contentHolder.removeAllChildren(),0===e.length)return LocalizedManager.setTextKey(this.bottomInfoLbl.node,"TXT_NO_BUDDIES_AVAILABLE"),void(this.bottomInfo.active=!0);e.forEach(function(e,a){var n=cc.instantiate(t.buddiesItemContent);n.setPosition(0,0),n.active=!0,t.contentHolder.addChild(n);var i=n.getComponent("BuddiesItemIngame");e.index=a,e.channelId=t.channelId,i.initInfo(e)})},getBuddiesListData:function(){var e=this,t={};t.playerId=GameManager.user.playerId,console.log("getBuddiesListData ",t);var a=function(t){console.log("sendFriendRequest requestCallback reponse",t),e.createBuddiesList(t.friends||t.result)};ServerCom.pomeloRequest(K.BuddyAPI.getFriendList,t,function(e){console.log("sendFriendRequest reponse",e),e.success&&a(e)},null,5e3,!1)},start:function(){this.defaultPos=this.node.getPosition(),this.skipButton.interactable=!1,this.skipButton.getComponent(cc.Widget).target=this.node.parent},init:function(e){this.channelId=e,this.getBuddiesListData(),this.show()},autoSearch:function(){console.log("autoSearch autoSearch");var e=this.inputName.string,t=this.contentHolder.children;""===this.inputName.string&&this.contentHolder.children.length>0?t.forEach(function(e){e.active=!0}):null!=this.inputName.string&&""!=this.inputName.string&&null!=this.inputName.string?t.forEach(function(t){t.active=-1!=t.getComponent("BuddiesItemIngame").getName().toLowerCase().indexOf(e.toLowerCase())}):t.forEach(function(e){e.active=!0})},findLocalPlayer:function(){var e=this.inputName.string,t=this.contentHolder.children;null!=this.inputName.string&&""!=this.inputName.string&&null!=this.inputName.string?t.forEach(function(t){t.active=-1!=t.getComponent("BuddiesItemIngame").getName().toLowerCase().indexOf(e.toLowerCase())}):t.forEach(function(e){e.active=!0})},show:function(){this.isShowing=!0,this.inputName.string="",this.node.active=!0;var e=this.node.parent.getChildByName("DummyStickerPop").getPosition(),t=this;cc.tween(this.node).to(.3,{position:e},{easing:"circIn"}).call(function(){t.skipButton.interactable=!0}).start()},hideIfShowing:function(){this.isShowing&&(this.node.active=!1,this.hide())},hide:function(){this.isShowing=!0,this.skipButton.interactable=!1;var e=this.defaultPos,t=this;cc.tween(this.node).to(.3,{position:e},{easing:"circOut"}).call(function(){t.node.active=!1}).start()},sendInviteAll:function(){this.contentHolder.children,this.curInvite=0;var e=this;(function t(){console.log("sendInvite for player ",e.curInvite),e.curInvite!=e.contentHolder.children.length&&(e.contentHolder.children[e.curInvite].getComponent("BuddiesItemIngame").onClickInviteBtn(t),e.curInvite++)})()}}),cc._RF.pop()},{}],BuddiesTablePresenter:[function(e,t){"use strict";cc._RF.push(t,"41db6zt6atIdqp7y1OcDnQr","BuddiesTablePresenter"),cc.Class({extends:cc.Component,properties:{findBtn:{default:null,type:cc.Button},contentHolder:{default:null,type:cc.Node},buddiesItemContent:{default:null,type:cc.Node},tabBtnLbl:{default:[],type:cc.Label},activeColor:{default:new cc.Color},inactiveColor:{default:new cc.Color},inputName:{default:null,type:cc.EditBox},bottomInfo:{default:null,type:cc.Node},bottomInfoLbl:{default:null,type:cc.Label},isBuddiesListTab:!0,curTab:0,currentTableData:[]},onEnable:function(){this.showBuddiesList()},onLoad:function(){window.BuddiesTablePresenter=this,this.currentTableData=[],this.isBuddiesListTab=!0,this.buddiesData=[],this.invitesData=[],this.showBuddiesList()},setActiveButton:function(e){console.log("setActiveButton ",e),this.tabBtnLbl[0].node.color=e?this.activeColor:this.inactiveColor,this.tabBtnLbl[1].node.color=e?this.inactiveColor:this.activeColor},showBuddiesList:function(){this.inputName.string="",this.bottomInfo.active=!1,this.isBuddiesListTab=!0,this.getBuddiesListData(),this.setActiveButton(!0),this.removeTableContent(),this.findBtn.node.active=!1},showInvitesList:function(){this.inputName.string="",this.bottomInfo.active=!1,this.isBuddiesListTab=!1,this.getInvitesListData(),this.setActiveButton(!1),this.removeTableContent(),this.findBtn.node.active=!0},getBuddiesListData:function(){var e=this,t={};t.playerId=GameManager.user.playerId,console.log("getBuddiesListData ",t);var a=function(t){console.log("sendFriendRequest requestCallback reponse",t),e.createBuddiesList(t.friends||t.result)};ServerCom.pomeloRequest(K.BuddyAPI.getFriendList,t,function(e){console.log("sendFriendRequest reponse",e),e.success&&a(e)},null,5e3,!1)},getInvitesListData:function(){var e=this,t={};t.playerId=GameManager.user.playerId,console.log("getBuddiesListData ",t);var a=function(t){console.log("sendFriendRequest requestCallback reponse",t),e.createInvitesList(t.result)};ServerCom.pomeloRequest(K.BuddyAPI.getFriendRequests,t,function(e){console.log("sendFriendRequest reponse",e),e.success&&a(e)},null,5e3,!1)},removeTableContent:function(){this.contentHolder.removeAllChildren()},createBuddiesList:function(e){var t=this;if(this.currentTableData=e||[],0===e.length)return LocalizedManager.setTextKey(this.bottomInfoLbl.node,"TXT_NO_BUDDIES_AVAILABLE"),void(this.bottomInfo.active=!0);e.forEach(function(e,a){var n=cc.instantiate(t.buddiesItemContent);n.setPosition(0,0),n.active=!0,t.contentHolder.addChild(n);var i=n.getComponent("BuddiesItemContent");e.index=a,i.initInfo(e,t.isBuddiesListTab)})},createInvitesList:function(e){var t=this;if(this.currentTableData=e||[],0===e.length)return LocalizedManager.setTextKey(this.bottomInfoLbl.node,"TXT_NO_FRIEND_INVITE_AVAILABLE"),void(this.bottomInfo.active=!0);e.forEach(function(e,a){var n=cc.instantiate(t.buddiesItemContent);n.setPosition(0,0),n.active=!0,t.contentHolder.addChild(n);var i=n.getComponent("BuddiesItemContent");e.index=a,i.initInfo(e,t.isBuddiesListTab)})},createFriend:function(e){var t=this;if(0===e.length)return LocalizedManager.setTextKey(this.bottomInfoLbl.node,"TXT_USERNAME_NOT_EXIST"),void(this.bottomInfo.active=!0);this.bottomInfo.active=!1,e.forEach(function(e,a){var n=cc.instantiate(t.buddiesItemContent);n.setPosition(0,0),n.active=!0,t.contentHolder.addChild(n);var i=n.getComponent("BuddiesItemContent");e.index=a,e.isAddFriend=!0,i.initInfo(e,t.isBuddiesListTab)})},autoSearch:function(){this.isBuddiesListTab&&(""===this.inputName.string&&this.contentHolder.children.length>0?this.showAllContent():this.inputName.string!==GameManager.user.userName&&null!==this.inputName.string&&""!==this.inputName.string&&(this.isBuddiesListTab?this.findLocalPlayer(this.inputName.string)?console.log("isBuddiesListTab: ",this.isBuddiesListTab,"   FOUND"):console.log("isBuddiesListTab: ",this.isBuddiesListTab,"  NOT FOUND"):this.findLocalPlayer(this.inputName.string)?console.log("isBuddiesListTab: ",this.isBuddiesListTab,"   FOUND"):(console.log("isBuddiesListTab: ",this.isBuddiesListTab,"  NOT FOUND"),this.findRemotePlayer(this.inputName.string))))},onClickFindBtn:function(){""===this.inputName.string&&this.contentHolder.children.length>0?this.showAllContent():this.inputName.string!==GameManager.user.userName&&null!==this.inputName.string&&""!==this.inputName.string&&(this.isBuddiesListTab?this.findLocalPlayer(this.inputName.string)?console.log("isBuddiesListTab: ",this.isBuddiesListTab,"   FOUND"):console.log("isBuddiesListTab: ",this.isBuddiesListTab,"  NOT FOUND"):this.findLocalPlayer(this.inputName.string)?console.log("isBuddiesListTab: ",this.isBuddiesListTab,"   FOUND"):(console.log("isBuddiesListTab: ",this.isBuddiesListTab,"  NOT FOUND"),this.findRemotePlayer(this.inputName.string)))},showAllContent:function(){null!=this.inputName.string&&""!=this.inputName.string&&null!=this.inputName.string||this.contentHolder.children.forEach(function(e){e.active=!0})},findLocalPlayer:function(e){var t=this.contentHolder.children,a=!1;return t.forEach(function(t){-1!=t.getComponent("BuddiesItemContent").getName().toLowerCase().indexOf(e.toLowerCase())&&(a=!0),t.active=-1!=t.getComponent("BuddiesItemContent").getName().toLowerCase().indexOf(e.toLowerCase())}),a},findRemotePlayer:function(e){var t=this,a={};a.userName=e,a.playerId=GameManager.user.playerId,console.log("findPlayer ",a);var n=function(e){console.log("findRemotePlayer requestCallback reponse",e),t.createFriend(e.result)};ServerCom.pomeloRequest(K.BuddyAPI.searchPlayer,a,function(e){e.success&&n(e)},null,5e3,!1)}}),cc._RF.pop()},{}],BuildTime:[function(e,t){"use strict";cc._RF.push(t,"78b31tWeQpDWrTEwt5MtDRP","BuildTime"),cc.Class({extends:cc.Component,properties:{},start:function(){},goToWebsite:function(){var e="";GameManager.isSD?e="https://pokerbuddy365.com":GameManager.isJ&&(e="https://pokerbuddy365.com"),window.open(e,"_self")}}),cc._RF.pop()},{}],BuyInPopup:[function(e,t){"use strict";cc._RF.push(t,"47f0bFPcFdD7JAk2rAYyuV+","BuyInPopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase"),o=e("SliderTouch"),s=(e("CustomEditBox"),e("EditBoxUtil")),r=e("PostTypes").SetPlayerValData;cc.Class({extends:i,properties:{goldSprite:{default:null,type:cc.SpriteFrame},diamondSprite:{default:null,type:cc.SpriteFrame},autoBuyIn:{default:null,type:cc.Node},disable:{default:null,type:cc.Node},buyinContent:{default:null,type:cc.Node},rebuyContent:{default:null,type:cc.Node},rebuyMyChipsLbl:{default:null,type:cc.Label},rebuyChipsLbl:{default:null,type:cc.Label},rebuyAmountLbl:{default:null,type:cc.Label},rebuyHoursFeeLbl:{default:null,type:cc.Label},rebuyTotalChipsLbl:{default:null,type:cc.Label},rebuyTimer:{default:null,type:cc.Label},popUpManager:{default:null,type:a},totalChipsLbl:{default:null,type:cc.Label},buyInLbl:{default:null,type:cc.Label},defaultBuyInLbl:{default:null,type:cc.Label},minLbl:{default:null,type:cc.Label},maxLbl:{default:null,type:cc.Label},sliderTouch:{default:null,type:o},checkBox:{default:null,type:cc.Toggle},editBox:{default:null,type:cc.EditBox},defaultBuyInEdit:{default:null,type:s},callback:{default:null,visible:!1},index:{default:0,visible:!1},minAmount:{default:0,visible:!1},maxAmount:{default:10,visible:!1},onSitHere:!1,isWindows:!1,checkMinUpdatedInAndroid:!1,playerStandUp:!1,disableUI:{default:null,type:cc.Node},msgLbl:{default:null,type:cc.Label},confirmBtn:{default:null,type:cc.Button},buyChipsButton:{default:null,type:cc.Button},claimButton:{default:null,type:cc.Button},cancelCallback:null,playerInfoRef:null,lbs:{default:[],type:[cc.Label]},tiledSize:0,untiledSize:0,rebuyTimerCount:0,isMobile:!1,mobEditBox:{default:null,type:cc.EditBox},dialogHeadingText:{default:null,type:cc.Label},topHeadingLbl:{default:null,type:cc.Label},timeDonw:{default:null,type:cc.Label}},gridRefreshed:function(){},onDestroy:function(){GameManager.off("playerInfo",this.playerInfoRef)},onEnable:function(){},onPlayerInfo:function(e){if(void 0===e&&(e=null),e.channelId&&GameScreen&&ScreenManager.currentScreen==K.ScreenEnum.GamePlayScreen){for(var t=0;t<GameScreen.gameModel.activePokerModels.length;t++)if(e.channelId===GameScreen.gameModel.activePokerModels[t].gameData.channelId)return void GameScreen.gameModel.activePokerModels[t].popUpManager.hide(n.BuyInPopup,function(){})}else this.popUpManager.hide(n.BuyInPopup,function(){})},onClickEnter:function(){this.onConfirm()},onLoad:function(){this.isMobile=cc.sys.isMobile&&!cc.sys.isBrowser,this.isMobile&&(this.editBox.InputFlag=cc.EditBox.InputFlag.SENSITIVE,this.editBox.InputMode=cc.EditBox.InputMode.NUMERIC),this.playerInfoRef=this.onPlayerInfo.bind(this),GameManager.on("playerInfo",this.playerInfoRef),this.sliderTouch.registerCallback(this.onSliderValueChange.bind(this))},updateRebuy:function(){this.rebuyTimerCount-=1,this.rebuyTimerCount<=0&&(this.rebuyTimerCount=0,this.unschedule(this.updateRebuy)),this.rebuyTimer.string="("+this.rebuyTimerCount+"s)"},onShow:function(e){if(this.data=e,GameManager.emit("disablePageView"),this.claimButton.node.active=!1,"GOLD"==GameManager.user.category?(cc.find("Container/header/r2/icon",this.node).getComponent(cc.Sprite).spriteFrame=this.goldSprite,cc.find("Container/Cashier/icon",this.node).getComponent(cc.Sprite).spriteFrame=this.goldSprite,cc.find("Container/Center/InputBox/editbox/chips",this.node).getComponent(cc.Sprite).spriteFrame=this.goldSprite,cc.find("Container/min/icon",this.node).getComponent(cc.Sprite).spriteFrame=this.goldSprite,cc.find("Container/max/icon",this.node).getComponent(cc.Sprite).spriteFrame=this.goldSprite):(cc.find("Container/header/r2/icon",this.node).getComponent(cc.Sprite).spriteFrame=this.diamondSprite,cc.find("Container/Cashier/icon",this.node).getComponent(cc.Sprite).spriteFrame=this.diamondSprite,cc.find("Container/Center/InputBox/editbox/chips",this.node).getComponent(cc.Sprite).spriteFrame=this.diamondSprite,cc.find("Container/min/icon",this.node).getComponent(cc.Sprite).spriteFrame=this.diamondSprite,cc.find("Container/max/icon",this.node).getComponent(cc.Sprite).spriteFrame=this.diamondSprite),e.isRebuy)this.buyinContent.active=!1,this.rebuyContent.active=!0,this.callback=e.confirm,this.rebuyMyChipsLbl.string=GameManager.convertChips(e.totalChips),this.rebuyChipsLbl.string=GameManager.convertChips(e.rebuyChips),this.rebuyAmountLbl.string=GameManager.convertChips(e.rebuyAmount),this.rebuyHoursFeeLbl.string=GameManager.convertChips(e.rebuyHoursFee),this.rebuyTotalChipsLbl.string=GameManager.convertChips(e.rebuyTotalChips),this.rebuyTimerCount=e.rebuyTimer,this.updateRebuy(),this.schedule(this.updateRebuy,1);else{this.buyinContent.active=!0,this.rebuyContent.active=!1,!0===e.quickSeat||(cc.find("Container/header/r1/vari",this.node).getComponent(cc.Label).string=e.config.channelName,cc.find("Container/header/r2/blind",this.node).getComponent(cc.Label).string=e.config.smallBlind+"/"+e.config.bigBlind),cc.find("Container/min/realMoney",this.node).getComponent(cc.Label).string=e.minValue,cc.find("Container/max/realMoney",this.node).getComponent(cc.Label).string=e.maxValue,this.sound=e.playSound,this.topHeadingLbl.string=e.topHeading;var t=e.maxValue<=0?"":LocalizedManager.t("TXT_FUNDS_INSUFFICIENT");e.minValue<=0&&(e.minValue=1),e.maxValue>0&&(e.maxValue=e.maxValue<e.totalChips?e.maxValue:e.totalChips),this.disableView(e.maxValue<e.minValue,t,e.maxValue<=0&&!e.quickSeat),e.maxValue<e.minValue&&(e.minValue=0,e.maxValue=0),e.minValue=Math.floor(e.minValue),e.maxValue=Math.floor(e.maxValue),this.editBox.string=e.minValue.toString(),this.minLbl.string=e.minValue.toString(),this.maxLbl.string=e.maxValue.toString(),this.minAmount=e.minValue,this.maxAmount=e.maxValue;var a=(this.minAmount+this.maxAmount)/2;e.isAllInAndFold&&(a=this.minAmount),a>0&&(e.isAllInAndFold?this.sliderTouch.setSliderValue(0):this.sliderTouch.setSliderValue(a/(this.maxAmount+this.minAmount))),this.totalChipsLbl.string=GameManager.convertChips(e.totalChips),this.callback=e.confirm,this.index=e.index,this.onSitHere=e.onSitHere,this.cancelCallback=e.cancelCallback,this.channelId=e.channelId,this.playerStandUp=e.playerStandUp,this.disableUI.active=e.maxValue==e.minValue,this.checkBox.node.parent.active=!this.disableUI.active,e.isAllInAndFold?(this.disable.active=!0,this.msgLbl.string="You can not change buyin amount in this room",this.checkBox.node.parent.active=!1):this.disable.active=!1}e.isRealMoney||(this.claimButton.node.active=!0),!0===e.isAddChips?(this.timeDonw.string="",this.unschedule(this.updateTimeDown)):this.startCountdown(10)},updateDefaultEditMax:function(){if(isNaN(this.editBox.string)){var e="";if(n=this.editBox.string.match(/\d+/g))for(var t=0;t<n.length;t++)e+=n[t];this.editBox.string=e}else{if(/\s/.test(this.editBox.string)){var a=this.editBox.string.toString().trim();this.editBox.string=a}var n;e=".",-1!=this.editBox.string.indexOf(e)&&(n=(n=this.editBox.string).replace(".",""),this.editBox.string=n),e="e",-1!=this.editBox.string.indexOf(e)&&(n=(n=this.editBox.string).replace("e",""),this.editBox.string=n),e="-",-1!=this.editBox.string.indexOf(e)&&(n=(n=this.editBox.string).replace("-",""),this.editBox.string=n),(this.editBox.string.length>1?/[0-9]/:/[1-9]/).test(this.editBox.string)||(n=(n=this.editBox.string).replace("0",""),this.editBox.string=n)}this.editBox.string>=this.minAmount&&this.editBox.string<=this.maxAmount&&(this.confirmBtn.interactable=!0,this.msgLbl.string=""),this.editBox.string>this.maxAmount?this.msgLbl.string=LocalizedManager.t("TEXT_CANNOT_MORE_CHIPS"):this.editBox.string<this.minAmount&&(this.confirmBtn.interactable=!1,this.msgLbl.string=LocalizedManager.t("TXT_CANNOT_LESS_CHIPS"))},updateDefaultEditMin:function(){this.editBox.string<this.minAmount?(this.msgLbl.string=LocalizedManager.t("TXT_CANNOT_LESS_CHIPS"),this.confirmBtn.interactable=!1):this.editBox.string>this.maxAmount?(this.msgLbl.string=LocalizedManager.t("TEXT_CANNOT_MORE_CHIPS"),this.confirmBtn.interactable=!1):this.msgLbl.string="",this.sliderTouch.setSliderValue((this.editBox.string-this.minAmount)/(this.maxAmount-this.minAmount))},updateTimeDown:function(){if(this.timeDonw){var e=parseInt(this.timeDonw.string.split(":").reduce(function(e,t){return 60*e+ +t}));if(isNaN(e)&&(e=0),e>0){e-=1;var t=Math.floor(e/60),a=e%60;this.timeDonw.string=(t<10?"0":"")+t+":"+(a<10?"0":"")+a}else this.unschedule(this.updateTimeDown),this.onCancel()}},startCountdown:function(e){var t=Math.floor(e/60),a=e%60;this.timeDonw.string=(t<10?"0":"")+t+":"+(a<10?"0":"")+a,this.schedule(this.updateTimeDown,1)},updateMobEditMax:function(){if(isNaN(this.editBox.string))return this.msgLbl.string=LocalizedManager.t("TXT_ENTER_VALID_CHIPS"),void(this.confirmBtn.interactable=!1);this.editBox.string>=this.minAmount&&this.editBox.string<=this.maxAmount&&(this.confirmBtn.interactable=!0,this.msgLbl.string=""),this.editBox.string>this.maxAmount?(this.msgLbl.string=LocalizedManager.t("TEXT_CANNOT_MORE_CHIPS"),this.confirmBtn.interactable=!1):this.editBox.string<this.minAmount&&(this.confirmBtn.interactable=!1,this.msgLbl.string=LocalizedManager.t("TXT_CANNOT_LESS_CHIPS"))},updateMobEditMin:function(){if(isNaN(this.editBox.string))return this.msgLbl.string=LocalizedManager.t("TXT_ENTER_VALID_CHIPS"),void(this.confirmBtn.interactable=!1);this.editBox.string<this.minAmount?(this.msgLbl.string=LocalizedManager.t("TXT_CANNOT_LESS_CHIPS"),this.confirmBtn.interactable=!1):this.editBox.string>this.maxAmount?(this.msgLbl.string=LocalizedManager.t("TEXT_CANNOT_MORE_CHIPS"),this.confirmBtn.interactable=!1):this.msgLbl.string="",this.sliderTouch.setSliderValue((this.editBox.string-this.minAmount)/(this.maxAmount-this.minAmount+1))},onSliderValueChange:function(e){e=(e=e<0?0:e)>1?1:e;var t=Math.floor(e*(this.maxAmount-this.minAmount+1)+this.minAmount);t=t>this.maxAmount?this.maxAmount:t,this.editBox.string=isNaN(t.toString())?"0":t.toString(),this.confirmBtn.interactable=!0},onAutoBuySelected:function(){if(GameManager.user.autoBuyIn=this.checkBox.isChecked,!this.playerStandUp){var e=new r(this.channelId,GameManager.user.playerId,"isAutoReBuy",GameManager.user.autoBuyIn);ServerCom.pomeloRequest(K.PomeloAPI.setPlayerValOnTable,e,function(e){e.success},null,5e3,!1,!1)}this.sound&&this.sound(K.Sounds.click)},onMin:function(){this.sliderTouch.setSliderValue(0),this.editBox.string=this.minAmount.toString()},onMax:function(){this.sliderTouch.setSliderValue(1),this.editBox.string=this.maxAmount.toString()},onIncrementSlider:function(){this.sliderTouch.setSliderValue(this.sliderTouch.getSliderValue()+.1),this.sound&&this.sound(K.Sounds.click)},onDecrementSlider:function(){this.sliderTouch.setSliderValue(this.sliderTouch.getSliderValue()-.1),this.sound&&this.sound(K.Sounds.click)},onConfirm:function(){this.checkVal()&&(this.callback(this.index,this.editBox.string),GameManager.emit("enablePageView"),this.popUpManager.hide(n.BuyInPopup,function(){}),this.sound&&this.sound(K.Sounds.click))},onConfirmRebuy:function(){this.callback(),GameManager.emit("enablePageView"),this.popUpManager.hide(n.BuyInPopup,function(){})},onCancel:function(){this.rebuyContent.active||(null!=this.cancelCallback&&this.cancelCallback(),GameManager.emit("enablePageView"),this.popUpManager.hide(n.BuyInPopup,function(){}),this.sound&&this.sound(K.Sounds.click))},checkVal:function(){var e=this.editBox.string;return this.disableView(!1),isNaN(e)?(this.msgLbl.string=LocalizedManager.t("TXT_ENTER_VALID_CHIPS"),!1):e>=this.minAmount?e<=this.maxAmount||(this.msgLbl.string=LocalizedManager.t("TEXT_CANNOT_MORE_CHIPS"),!1):(this.msgLbl.string=LocalizedManager.t("TXT_CANNOT_LESS_CHIPS"),!1)},disableView:function(e,t,a){if(void 0===t&&(t=""),void 0===a&&(a=!1),this.disableUI.active=e,this.checkBox.node.parent.active=!e,a?(this.confirmBtn.interactable=!1,this.buyChipsButton.interactable=!0,this.buyChipsButton.node.active=!0):(this.confirmBtn.interactable=!0,this.buyChipsButton.interactable=!1,this.buyChipsButton.node.active=!1),t=t||LocalizedManager.t("TXT_ALREADY_MAXIMUM_CHIP"),this.msgLbl.string=e?t:"",this.confirmBtn.interactable=!e,this.confirmBtn.interactable)this.confirmBtn.node.color=cc.Color.WHITE;else{var n=new cc.Color(27,53,15);this.confirmBtn.node.color=n}},onBuyMoreChips:function(){this.popUpManager.hide(n.BuyInPopup,function(){}),GameManager.emit("onDashboardAddCash")},onClaim:function(){var e=this;ServerCom.pomeloRequest("connector.entryHandler.playerClaimFreeChips",{playerId:GameManager.user.playerId},function(t){console.log("onClaim",JSON.parse(JSON.stringify(t))),t.success?(GameManager.popUpManager.show(n.NotificationPopup,"Claim free chips succeeded!",function(){}),GameManager.user.freeChips=t.result.freeChips,e.data.totalChips=GameManager.user.freeChips,e.onShow(e.data)):GameManager.popUpManager.show(n.CommonDialog,{title:"Error!",content:t.message},function(){})},null,5e3,!1)}}),cc._RF.pop()},{CustomEditBox:"CustomEditBox",EditBoxUtil:"EditBoxUtil",PopUpBase:"PopUpBase",PopUpManager:"PopUpManager",PostTypes:"PostTypes",SliderTouch:"SliderTouch"}],CClick:[function(e,t){"use strict";cc._RF.push(t,"6bb72qgXxlDapwkUKaIDibc","CClick"),cc.Class({extends:cc.Component,properties:{},start:function(){this.node.on(cc.Node.EventType.MOUSE_DOWN,function(){console.log("click detected")}.bind(this))}}),cc._RF.pop()},{}],CardDistributer:[function(e,t){"use strict";cc._RF.push(t,"f521eFwz9VEU4U7SbJNfz+Z","CardDistributer"),cc.Class({extends:cc.Component,properties:{dealer:{default:null,type:cc.Node},cardPrefab:{default:null,type:cc.Prefab},timersToKill:[]},distributeCards:function(e,t,a){this.timersToKill=[];for(var n=0,i=this,o=0;o<e;o++)t.forEach(function(s){var r=s.targetNode.getChildByName("HandPlayer").getChildByName("Cards").children;r.length<1&&(r=s.targetNode.getChildByName("HandPlayer").getChildByName("MyCards").children);var l=r[o],c=l.getPosition(),d=this.dealer.parent.convertToWorldSpaceAR(cc.v2(this.dealer.getPosition()));l.setPosition(l.parent.convertToNodeSpaceAR(d)),l.opacity=0;var h,u,p,m=cc.repeat(cc.rotateBy(.1,360),2).easing(cc.easeCubicActionOut()),g=cc.sequence(cc.skewTo(.1,22,0).easing(cc.easeCubicActionOut()),cc.skewTo(.1,0,0).easing(cc.easeCubicActionOut())),f=cc.spawn(m,g,cc.moveTo(.2,cc.v2(c.x,c.y)).easing(cc.easeCubicActionOut())),y=cc.fadeIn(.2).easing(cc.easeCubicActionOut()),b=cc.delayTime(.121*n),v=cc.callFunc(function(){l.setPosition(c),t.length,l.CountTag},this),C=cc.callFunc(function(){l.opacity=145,a.playAudio(K.Sounds.playerCardFlip)}),S=cc.sequence(C,f,v);l.runAction(cc.sequence(b,S)),l.runAction(cc.sequence(b,y)),h=l,u=c,p=1e3*(.5+.121*n),i.timersToKill.push(setTimeout(function(){cc.isValid(h)&&(h.stopAllActions(),h.setPosition(u),h.setScale(1),h.opacity=255,h.skewX=0,h.skewY=0,e*t.length==h.CountTag&&a.forceAddPlayerCards())},p)),n++,l.CountTag=n},this)},clearTimers:function(){this.timersToKill.forEach(function(e){clearTimeout(e)},this),this.timersToKill=[]}}),cc._RF.pop()},{}],CardMovement:[function(e,t){"use strict";cc._RF.push(t,"6d3f0hPuyFHRqXpwIJVCBX/","CardMovement");var a=e("EventEmitter");cc.Class({extends:a,properties:{dropZones:{default:[],type:[cc.Node]},dragging:!1,dropZone:{default:null,type:cc.Node},enableDragging:!0,DragManager:null},onLoad:function(){},registerTouchInput:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(){this.dragging=!0,this.dropZone=null,this.target=null,0==this.disableDrag&&DragManager.emit("onCardDragStart",this.dropZone,this.node)},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){if(this.dragging&&0==this.disableDrag){var t=e.touch;this.target=this.node.parent.convertTouchToNodeSpaceAR(t)}},this),this.node.on(cc.Node.EventType.TOUCH_END,function(){this.dragging&&(this.dragging=!1,this.stopDrag())},this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(){this.dragging&&(this.dragging=!1,this.stopDrag())},this)},onEnable:function(){this.checkCollisions(),this.touchListener=this.registerTouchInput()},dragCard:function(e){this.node.position=this.node.position.lerp(this.target,20*e),this.node.setLocalZOrder(15),this.node.scale=new cc.Vec2(1,1),this.node.rotation=0,this.checkCollisions()},addDropZone:function(e){this.dropZones.push(e)},removeDropZone:function(e){this.dropZones.splice(this.dropZones.indexOf(e),1)},checkCollisions:function(){if(null!=this.node){for(var e,t=this.node.parent.convertToWorldSpaceAR(this.node.position),a=new cc.Rect(t.x-this.node.width/2,t.y-this.node.height/2,this.node.width,this.node.height),n=[],i=[],o=0;o<DragManager.dropZones.length;o++)if(DragManager.dropZones[o]&&DragManager.dropZones[o]!=this.node&&DragManager.dropZones[o].active){var s=DragManager.dropZones[o].parent.convertToWorldSpaceAR(DragManager.dropZones[o].position),r=new cc.Rect(s.x-DragManager.dropZones[o].width/2,s.y-DragManager.dropZones[o].height/2,DragManager.dropZones[o].width,DragManager.dropZones[o].height);if(r.intersects(a)){n.push(DragManager.dropZones[o]);var l=cc.rectIntersection(a,r),c=l.width*l.height/(r.width*r.height);i.push(c)}}var d=Math.max.apply(null,i);(e=n[i.indexOf(d)])&&this.dropZone!=e?(this.dropZone&&DragManager.emit("exitDropZone",this.dropZone,this.node),this.dropZone=e,DragManager.emit("enterDropZone",this.dropZone,this.node)):!e&&this.dropZone&&(DragManager.emit("exitDropZone",this.dropZone),this.dropZone=e)}},update:function(e){this.target&&this.dragging&&0==this.disableDrag&&this.dragCard(e)},stopDrag:function(){this.DragManager.emit("onCardDragStop",this.dropZone,this.node)},onDestroy:function(){},onDisable:function(){cc.eventManager.removeListener(this.touchListener)}}),cc._RF.pop()},{EventEmitter:"EventEmitter"}],CardPool:[function(e,t){"use strict";cc._RF.push(t,"df7eeuPrI1IdbWwOrEga7PX","CardPool"),cc.Class({extends:cc.Component,properties:{cardPrefabs:{default:[],type:cc.Prefab},cardPPrefabs:{default:[],type:cc.Prefab},usedCardList:{default:[],type:cc.Node,visible:!1},handCardPool:{default:[],type:cc.Node,visible:!1},poolSize:100},onLoad:function(){this.poolSize=100,window.CardPool=this,this.cardPools=new Array(2),this.cardPPools=new Array(2),this.createPool()},createPool:function(){this.cardPools[0]=[],this.cardPools[1]=[];for(var e=0;e<this.poolSize;e++)(t=cc.instantiate(this.cardPrefabs[0])).parent=GameManager.node,t.name=this.cardPrefabs[0].name,t.active=!1,this.cardPools[0].push(t),(a=cc.instantiate(this.cardPrefabs[1])).name=this.cardPrefabs[1].name,a.parent=GameManager.node,a.active=!1,this.cardPools[1].push(a);var t,a;K.PORTRAIT},generateCard:function(e,t){if(t&&t(),K.PORTRAIT,e==this.cardPrefabs[0].name){if(0==this.cardPools[0].length){(i=cc.instantiate(this.cardPrefabs[0])).parent=GameManager.node,i.name=this.cardPrefabs[0].name,i.active=!0,this.usedCardList.push(i),i.setPosition(cc.Vec2.ZERO),i.setScale(1);for(var a=0;a<GameManager.cardBackImages.length;a++){var n=GameManager.cardBackImages[a];""!=GameManager.user.defaultCard&&GameManager.user.defaultCard._id&&n.___data._id==GameManager.user.defaultCard._id&&(i.getChildByName("BackFace").getComponent(cc.Sprite).spriteFrame=GameManager.cardBackImages[a])}return i}var i=this.cardPools[0].pop();for(this.usedCardList.push(i),i.active=!0,i.setPosition(cc.Vec2.ZERO),i.getChildByName("FrontFace").color=cc.Color.WHITE,i.getChildByName("FrontFace").getChildByName("Big_Suit").color=cc.Color.WHITE,i.getChildByName("CardGlow").active=!1,i.opacity=255,i.setScale(1),i.rotation=0,i.skewX=0,i.skewY=0,a=0;a<GameManager.cardBackImages.length;a++){var o=GameManager.cardBackImages[a];""!=GameManager.user.defaultCard&&GameManager.user.defaultCard._id&&o.___data._id==GameManager.user.defaultCard._id&&(i.getChildByName("BackFace").getComponent(cc.Sprite).spriteFrame=GameManager.cardBackImages[a])}return i}if(e==this.cardPrefabs[1].name){var s=this.cardPools[1].pop();return this.usedCardList.push(s),s.active=!0,s}},destroyCard:function(e,t){var a;K.PORTRAIT,!e||e.name!=this.cardPrefabs[0].name&&e.name!=this.cardPrefabs[1].name||t&&(t(),e.getComponent("Card").resetCardColor(),e.parent=GameManager.node,e.opacity=255,e.active=!1,-1!==(a=this.usedCardList.indexOf(e))&&(e.name==this.cardPrefabs[0].name?(this.usedCardList.splice(a,1),this.cardPools[0].push(e)):e.name==this.cardPrefabs[1].name&&(this.usedCardList.splice(a,1),this.cardPools[1].push(e))))},destroyAllCards:function(e){e&&e(),K.PORTRAIT;for(var t=0;t<this.usedCardList.length;t++)this.usedCardList[t].getComponent("Card").resetCardColor(),this.usedCardList[t].parent=GameManager.node,this.usedCardList[t].active=!1,this.usedCardList[t].name==this.cardPrefabs[0].name?this.cardPools[0].push(this.usedCardList[t]):this.usedCardList[t].name==this.cardPrefabs[1].name&&this.cardPools[1].push(this.usedCardList[t]);this.usedCardList=[]},destroyAllHandCards:function(e){e&&e(),K.PORTRAIT;for(var t=0;t<this.usedCardList.length;t++)this.usedCardList[t].name==this.cardPrefabs[1].name&&(this.usedCardList[t].getComponent("Card").resetCardColor(),this.usedCardList[t].parent=GameManager.node,this.usedCardList[t].active=!1,this.cardPools[1].push(this.usedCardList[t]),this.usedCardList.splice(t,1))}}),cc._RF.pop()},{}],CardTypes:[function(e,t){"use strict";cc._RF.push(t,"3a015TS4V5J4qP9cZFoD3zo","CardTypes");var a="NAN,A,2,3,4,5,6,7,8,9,10,J,Q,K".split(",");function n(e,t){Object.defineProperties(this,{point:{value:e,writable:!1},suit:{value:t,writable:!1},id:{value:13*(t-1)+(e-1),writable:!1},pointName:{get:function(){return a[this.point]}},suitName:{get:function(){return K.Suit[this.suit]}},isBlackSuit:{get:function(){return this.suit===K.Suit.Spade||this.suit===K.Suit.Club}},isRedSuit:{get:function(){return this.suit===K.Suit.Heart||this.suit===K.Suit.Diamond}}})}n.prototype.toString=function(){return this.suitName+" "+this.pointName},t.exports={Card:n},cc._RF.pop()},{}],Card:[function(e,t){"use strict";cc._RF.push(t,"5e058tT1gVMM5QDsAFxEWIo","Card");var a=e("EventEmitter");cc.Class({extends:a,properties:{point:{default:null,type:cc.Label},bigSuit:{default:null,type:cc.Sprite},smallSuit:{default:null,type:cc.Sprite},backFace:{default:null,type:cc.Sprite},frontFace:{default:null,type:cc.Sprite},texFaces:{default:[],type:cc.SpriteFrame},texRedFaces:{default:[],type:cc.SpriteFrame},texBlueFaces:{default:[],type:cc.SpriteFrame},texGreenFaces:{default:[],type:cc.SpriteFrame},texSuitBig:{default:[],type:cc.SpriteFrame},texSuitSmall:{default:[],type:cc.SpriteFrame},suit:{default:null},isFaceCard:{default:!1},cardColorChangeCb:{default:null},cardRank:0,redTextColor:cc.Color.WHITE,blackTextColor:cc.Color.WHITE,blueTextColor:cc.Color.WHITE,greenTextColor:cc.Color.WHITE,cardData:null,model:null,isCommunityCard:!1},onLoad:function(){this.setOriginalPosition()},onDestroy:function(){this.model&&this.model.off(K.GameEvents.onCardColorChange,this.cardColorChangeCb),GameManager.off("updateCardBackImage",this.onUpdateCardBackImage.bind(this))},init:function(e,t,a){void 0===a&&(a=!1),this.isCommunityCard=!1,this.model=t,this.toBePlayerCards=a&&GameManager.isMobile,this.cardColorChangeCb=function(e,t){this.model==t&&this.setCardColor(e)}.bind(this),this.model.off(K.GameEvents.onCardColorChange,this.cardColorChangeCb),this.model.on(K.PokerEvents.onCardColorChange,this.cardColorChangeCb),this.onUpdateCardBackImage(),e&&(this.card=e,this.isFaceCard=e.point>10,this.cardRank=e.point,this.suit=e.suit,this.isFaceCard=!1,this.isFaceCard&&!this.toBePlayerCards?(this.suit===K.Suit.Heart||this.suit===K.Suit.Diamond?this.bigSuit.spriteFrame=this.texRedFaces[e.point-10-1]:this.bigSuit.spriteFrame=this.texFaces[e.point-10-1],K.PORTRAIT,this.bigSuit.node.setPosition(0,-17.8),this.bigSuit.node.getComponent(cc.Widget).left=-.0015,this.bigSuit.node.getComponent(cc.Widget).right=-.0015,this.bigSuit.node.getComponent(cc.Widget).top=.2599,this.bigSuit.node.getComponent(cc.Widget).bottom=0):(this.bigSuit.spriteFrame=this.texSuitBig[e.suit-1],K.PORTRAIT,this.bigSuit.node.setPosition(10.8,-23.5),this.bigSuit.node.getComponent(cc.Widget).left=.253,this.bigSuit.node.getComponent(cc.Widget).right=.0391,this.bigSuit.node.getComponent(cc.Widget).top=.3962,this.bigSuit.node.getComponent(cc.Widget).bottom=.0531),this.point.string=e.pointName,this.smallSuit.spriteFrame=this.texSuitSmall[e.suit-1],this.model.gameData.settings.cardColor?this.setCardColor(K.CardColoring.FourCardColor):this.setCardColor(K.CardColoring.TwoCardColor),GameManager.off("updateCardBackImage",this.onUpdateCardBackImage.bind(this)),GameManager.on("updateCardBackImage",this.onUpdateCardBackImage.bind(this)),this.onUpdateCardBackImage(),this.isCommunityCard?(this.smallSuit.node.active=!1,this.bigSuit.node.y=-20):(this.smallSuit.node.active=!0,this.bigSuit.node.y=-30))},reveal:function(e){this.point.node.active=e,this.bigSuit.node.active=e,this.smallSuit.node.active=e,this.frontFace.node.active=e,this.backFace.node.active=!e,this.isCommunityCard?(this.smallSuit.node.active=!1,this.bigSuit.node.y=-20):(this.smallSuit.node.active=!0,this.bigSuit.node.y=-30)},setCardColor:function(e){null!==this.suit&&(e===K.CardColoring.TwoCardColor?(!this.isFaceCard||this.toBePlayerCards?this.suit===K.Suit.Heart||this.suit===K.Suit.Diamond?this.bigSuit.node.color=this.redTextColor:this.bigSuit.node.color=this.blackTextColor:this.suit===K.Suit.Heart||this.suit===K.Suit.Diamond?this.bigSuit.spriteFrame=this.texRedFaces[this.cardRank-10-1]:this.bigSuit.spriteFrame=this.texFaces[this.cardRank-10-1],this.suit===K.Suit.Heart||this.suit===K.Suit.Diamond?(this.point.node.color=this.redTextColor,this.smallSuit.node.color=this.redTextColor):(this.point.node.color=this.blackTextColor,this.smallSuit.node.color=this.blackTextColor)):(!this.isFaceCard||this.toBePlayerCards?this.suit===K.Suit.Heart?this.bigSuit.node.color=this.redTextColor:this.suit===K.Suit.Diamond?this.bigSuit.node.color=this.blueTextColor:this.suit===K.Suit.Spade?this.bigSuit.node.color=this.blackTextColor:this.bigSuit.node.color=this.greenTextColor:this.suit===K.Suit.Heart?this.bigSuit.spriteFrame=this.texRedFaces[this.cardRank-10-1]:this.suit===K.Suit.Diamond?this.bigSuit.spriteFrame=this.texBlueFaces[this.cardRank-10-1]:this.suit===K.Suit.Spade?this.bigSuit.spriteFrame=this.texFaces[this.cardRank-10-1]:this.bigSuit.spriteFrame=this.texGreenFaces[this.cardRank-10-1],this.suit===K.Suit.Heart?(this.point.node.color=this.redTextColor,this.smallSuit.node.color=this.redTextColor):this.suit===K.Suit.Diamond?(this.point.node.color=this.blueTextColor,this.smallSuit.node.color=this.blueTextColor):this.suit===K.Suit.Spade?(this.point.node.color=this.blackTextColor,this.smallSuit.node.color=this.blackTextColor):(this.point.node.color=this.greenTextColor,this.smallSuit.node.color=this.greenTextColor)))},resetCardColor:function(){this.point.node.color=cc.Color.WHITE,this.smallSuit.node.color=cc.Color.WHITE,this.bigSuit.node.color=cc.Color.WHITE,this.node.scale=1,this.node.opacity=255,this.node.children[0].getComponent(cc.Sprite).enabled=!0,this.reveal(!1),this.restoreGray()},setOriginalPosition:function(){this.originalPosition=this.node.position,this.originalScale=1},returnToOriginalPosition:function(){this.node.position=this.originalPosition},onUpdateCardBackImage:function(){if(this.backFace&&this.model&&this.model.presenter)for(var e=0;e<GameManager.cardBackImages.length;e++){var t=GameManager.cardBackImages[e];""!=GameManager.user.defaultCard&&GameManager.user.defaultCard._id&&t.___data._id==GameManager.user.defaultCard._id&&(this.backFace.spriteFrame=GameManager.cardBackImages[e])}},gray:function(){this.point.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")),this.bigSuit.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")),this.smallSuit.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")),this.backFace.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")),this.frontFace.node.color=(new cc.Color).fromHEX("#BBBBBB")},restoreGray:function(){this.point.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),this.bigSuit.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),this.smallSuit.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),this.backFace.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),this.frontFace.node.color=(new cc.Color).fromHEX("#FFFFFF")}}),cc._RF.pop()},{EventEmitter:"EventEmitter"}],CashRoom:[function(e,t){"use strict";cc._RF.push(t,"ebab6zWEWpL0L5fV6mkmh+p","CashRoom"),e("PostTypes").JoinChannel,e("Table"),e("TableContent");var a=e("Advancefilter"),n=(e("DropDown"),cc.Enum({None:-1,TexasHoldem:1,Omaha:2,OmahaHiLo:3,OpenFaceChinesePoker:4}));cc.Enum({CashGames:1,SitAndGo:2,Tournaments:3}),cc.Class({extends:cc.Component,properties:{dblClk:!1,filter:{default:null,type:cc.Node},top:{default:null,type:cc.Node},top2:{default:null,type:cc.Node},contentHolder:{default:null,type:cc.Node},original:{default:null,type:cc.Node},cashierTable:{default:null,type:cc.Node},variation:n.TexasHoldem,isShowHoldem:!1,isShowPLO:!1,isShowMega:!1,isShowAllIn:!1,isShowFast:!1,isShowAll:!0,lockClick:!1},statics:{init:!1,prevSelection:null,isPriactice:!1},onLoad:function(){ServerCom.pomeloBroadcast("newRoomAdd",this.onNewRoomAdd.bind(this)),ServerCom.pomeloBroadcast("deleteRoom",this.onDeleteRoom.bind(this)),GameManager.on("onRoomUpdate2",this.onRoomUpdate2.bind(this)),GameManager.on("AdvancefilterUpdated",this.onAdvancefilterUpdated.bind(this)),cc.systemEvent.on("leaveLobby",this.leaveLobby,this)},leaveLobby:function(){this.contentHolder.removeAllChildren(!0)},onClick:function(){},onNewRoomAdd:function(e){console.log("onNewRoomAdd",e),e=e.updated;var t=cc.instantiate(this.original);t.active=!0,t.setPosition(0,0),cc.find("TableName",t).getComponent(cc.Label).string=e.channelName,cc.find("avgPot",t).getComponent(cc.Label).string=GameManager.convertChips(e.smallBlind)+"/"+GameManager.convertChips(e.bigBlind),cc.find("l/vari/vari",t).getComponent(cc.Label).string=e.channelVariation,"Texas Hold\u2019em"==e.channelVariation?(cc.find("l/vari/vari",t).getComponent(cc.Label).string="Hold\u2019em",cc.loader.loadRes("tags/holdem",cc.SpriteFrame,function(e,a){e||(cc.find("l/vari",t).getComponent(cc.Sprite).spriteFrame=a)})):"Omaha"==e.channelVariation?(cc.find("l/vari/vari",t).getComponent(cc.Label).string="PLO",cc.loader.loadRes("tags/plo",cc.SpriteFrame,function(e,a){e||(cc.find("l/vari",t).getComponent(cc.Sprite).spriteFrame=a)})):"Omaha 5"==e.channelVariation?(cc.find("l/vari/vari",t).getComponent(cc.Label).string="PLO 5",cc.loader.loadRes("tags/plo5",cc.SpriteFrame,function(e,a){e||(cc.find("l/vari",t).getComponent(cc.Sprite).spriteFrame=a)})):"Omaha 6"==e.channelVariation?(cc.find("l/vari/vari",t).getComponent(cc.Label).string="PLO 6",cc.loader.loadRes("tags/plo6",cc.SpriteFrame,function(e,a){e||(cc.find("l/vari",t).getComponent(cc.Sprite).spriteFrame=a)})):"Mega Hold\u2019em"==e.channelVariation?(cc.find("l/vari/vari",t).getComponent(cc.Label).string="Mega Hold\u2019em",cc.loader.loadRes("tags/mega",cc.SpriteFrame,function(e,a){e||(cc.find("l/vari",t).getComponent(cc.Sprite).spriteFrame=a)})):cc.loader.loadRes("tags/holdem",cc.SpriteFrame,function(e,a){e||(cc.find("l/vari",t).getComponent(cc.Sprite).spriteFrame=a)}),e.roomImage&&(cc.find("icon",t).roomImage=e.roomImage,cc.loader.load(K.ServerAddress.assets_server_s+e.roomImage,function(e,a){e||(cc.find("icon",t).getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(a))})),cc.find("Rit_Icon",t).active=e.isRunItTwice,cc.find("allin_Icon",t).active=e.isAllInAndFold,cc.find("go/Background/MinMax",t).getComponent(cc.Label).string=GameManager.convertChips(e.minBuyIn),cc.find("players/plyrLbl",t).getComponent(cc.Label).string=e.totalPlayer||0,cc.find("sta",t).active=!1,cc.find("go",t).getComponent(cc.Button).clickEvents[0].customEventData=e._id,t.getComponent(cc.Button).clickEvents[0].customEventData=e._id,this.contentHolder.addChild(t)},onRoomUpdate2:function(e){console.log("onRoomUpdate2",e);for(var t=0;t<this.contentHolder.children.length;t++){var a=this.contentHolder.children[t];if(cc.find("go",a).getComponent(cc.Button).clickEvents[0].customEventData==e._id){e.updated&&null!=e.updated.playingPlayers&&null!=e.updated.playingPlayers&&(cc.find("players/plyrLbl",a).getComponent(cc.Label).string=e.updated.playingPlayers);break}}},onDeleteRoom:function(e){console.log("onDeleteRoom",e);for(var t=0;t<this.contentHolder.children.length;t++){var a=this.contentHolder.children[t];if(cc.find("go",a).getComponent(cc.Button).clickEvents[0].customEventData==e._id){a.removeFromParent(!0);break}}},onEnable:function(){a.config.enabled,GameManager.isMobile},onEnable2:function(e,t){void 0===t&&(t=!0),t=!1,a.config.enabled,GameManager.isMobile,this.populateTable(e,t)},onGetTableData:function(e){void 0===e&&(e=null);var t=this;ServerCom.pomeloRequest("connector.entryHandler.getLobbyRooms",{isRealMoney:!1,channelVariation:"All",playerId:GameManager.user.playerId,isLoggedIn:!0,access_token:K.Token.access_token},function(e){console.log("TABLE DATA IS ",JSON.parse(JSON.stringify(e))),e.success&&e.result&&t.populateTable(e.result)},null,5e3,!1)},populateTable:function(e,t){var n=this;void 0===t&&(t=!0),t=!1,console.log("isShowHoldem",this.isShowHoldem),console.log("isShowPLO",this.isShowPLO),console.log("isShowMega",this.isShowMega),console.log("isShowAllIn",this.isShowAllIn),console.log("isShowFast",this.isShowFast),console.log("isShowAll",this.isShowAll),this.contentHolder.removeAllChildren(!0),this.cashierTable.getComponent("Table").roomData=e;for(var i=function(){var i=!1;if(n.isShowAll)i=!0;else if(n.isShowHoldem&&"Texas Hold\u2019em"==e[o].gameInfo.GameVariation&&!e[o].isAllInAndFold&&(i=!0),!n.isShowPLO||"Omaha"!=e[o].gameInfo.GameVariation&&"Omaha 5"!=e[o].gameInfo.GameVariation&&"Omaha 6"!=e[o].gameInfo.GameVariation||(i=!0),n.isShowMega&&"Mega Hold\u2019em"==e[o].gameInfo.GameVariation&&(i=!0),n.isShowFast&&10==e[o].turnTime&&(i=!0),n.isShowAllIn&&e[o].isAllInAndFold&&(i=!0),!i)return"continue";var s=!1;if(a.config.enabled&&(a.config.players[2]&&2==e[o].maxPlayers&&(s=!0),a.config.players[3]&&3==e[o].maxPlayers&&(s=!0),a.config.players[4]&&4==e[o].maxPlayers&&(s=!0),a.config.players[5]&&5==e[o].maxPlayers&&(s=!0),a.config.players[6]&&6==e[o].maxPlayers&&(s=!0),a.config.players[7]&&7==e[o].maxPlayers&&(s=!0),a.config.players[8]&&8==e[o].maxPlayers&&(s=!0),a.config.players[9]&&9==e[o].maxPlayers&&(s=!0),a.config.buyin.UltraLow&&e[o].minBuyIn>0&&e[o].minBuyIn<=1&&(s=!0),a.config.buyin.Low&&e[o].minBuyIn>1&&e[o].minBuyIn<=20&&(s=!0),a.config.buyin.Medium&&e[o].minBuyIn>20&&e[o].minBuyIn<=100&&(s=!0),a.config.buyin.High&&e[o].minBuyIn>100&&(s=!0),a.config.limit.NoLimit&&!e[o].isPotLimit&&(s=!0),a.config.limit.PotLimit&&e[o].isPotLimit&&(s=!0),a.config.format.rit&&e[o].isRunItTwice&&(s=!0),""!=a.config.stakes.min&&""!=a.config.stakes.max?e[o].smallBlind>=Number(a.config.stakes.min)&&e[o].smallBlind<=Number(a.config.stakes.max)&&(s=!0):""!=a.config.stakes.max&&e[o].smallBlind<=Number(a.config.stakes.max)?s=!0:""!=a.config.stakes.min&&e[o].smallBlind>=Number(a.config.stakes.min)&&(s=!0),!s))return"continue";var r=cc.instantiate(n.original);r.active=!0,t&&(r.opacity=0),cc.find("TableName",r).getComponent(cc.Label).string=e[o].roomName,cc.find("avgPot",r).getComponent(cc.Label).string=GameManager.convertChips(e[o].smallBlind)+"/"+GameManager.convertChips(e[o].bigBlind),cc.find("l/vari/vari",r).getComponent(cc.Label).string=e[o].gameInfo.GameVariation,"Texas Hold\u2019em"==e[o].gameInfo.GameVariation?(cc.find("l/vari/vari",r).getComponent(cc.Label).string="Hold\u2019em",cc.loader.loadRes("tags/holdem",cc.SpriteFrame,function(e,t){e||(cc.find("l/vari",r).getComponent(cc.Sprite).spriteFrame=t)})):"Omaha"==e[o].gameInfo.GameVariation?(cc.find("l/vari/vari",r).getComponent(cc.Label).string="PLO",cc.loader.loadRes("tags/plo",cc.SpriteFrame,function(e,t){e||(cc.find("l/vari",r).getComponent(cc.Sprite).spriteFrame=t)})):"Omaha 5"==e[o].gameInfo.GameVariation?(cc.find("l/vari/vari",r).getComponent(cc.Label).string="PLO 5",cc.loader.loadRes("tags/plo5",cc.SpriteFrame,function(e,t){e||(cc.find("l/vari",r).getComponent(cc.Sprite).spriteFrame=t)})):"Omaha 6"==e[o].gameInfo.GameVariation?(cc.find("l/vari/vari",r).getComponent(cc.Label).string="PLO 6",cc.loader.loadRes("tags/plo6",cc.SpriteFrame,function(e,t){e||(cc.find("l/vari",r).getComponent(cc.Sprite).spriteFrame=t)})):"Mega Hold\u2019em"==e[o].gameInfo.GameVariation?(cc.find("l/vari/vari",r).getComponent(cc.Label).string="Mega Hold\u2019em",cc.loader.loadRes("tags/mega",cc.SpriteFrame,function(e,t){e||(cc.find("l/vari",r).getComponent(cc.Sprite).spriteFrame=t)})):cc.loader.loadRes("tags/holdem",cc.SpriteFrame,function(e,t){e||(cc.find("l/vari",r).getComponent(cc.Sprite).spriteFrame=t)}),cc.find("Rit_Icon",r).active=e[o].isRunItTwice,cc.find("allin_Icon",r).active=e[o].isAllInAndFold,cc.find("go/Background/MinMax",r).getComponent(cc.Label).string=e[o].gameInfo.BuyIn,cc.find("players/plyrLbl",r).getComponent(cc.Label).string=e[o].totalPlayer,cc.find("sta",r).active=!1,cc.find("go",r).getComponent(cc.Button).clickEvents[0].customEventData=e[o]._id,r.getComponent(cc.Button).clickEvents[0].customEventData=e[o]._id,e[o].roomImage&&(cc.find("icon",r).getComponent(cc.Sprite).spriteFrame?e[o].roomImage==cc.find("icon",r).roomImage||cc.loader.load(K.ServerAddress.assets_server_s+e[o].roomImage,function(t,a){t||(cc.find("icon",r).roomImage=e[o].roomImage,cc.find("icon",r).getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(a))}):(cc.find("icon",r).roomImage=e[o].roomImage,cc.loader.load(K.ServerAddress.assets_server_s+e[o].roomImage,function(e,t){e||(cc.find("icon",r).getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t))}))),n.contentHolder.addChild(r),t&&n.scheduleOnce(function(){r.x=1e3,r.opacity=255,r.runAction(cc.sequence(cc.moveTo(.3,cc.v2(0,r.y)),cc.callFunc(function(){})))},.05*o)},o=0;o<e.length;o++)i()},tableContentClick:function(){},addTable:function(e){e.updated.channelType==K.ChannelType.Normal&&this._super(e)},makeContent:function(e){if(this.variation==K.Variation.OpenFaceChinesePoker)var t=[e.channelName,e.chipsPointRatio,e.channelVariation,GameManager.getGameTypeByValue(e.turnTime),e.minBuyIn,e.maxBuyIn,e.playingPlayers+"/"+e.maxPlayers,e.queuePlayers];else{e&&e.avgPot&&(e.avgStack=e.avgPot);var a=e.channelVariation;switch(e.channelVariation){case K.Variation.TexasHoldem:a=LocalizedManager.t("TXT_HOLDEM");break;case K.Variation.Omaha:a=LocalizedManager.t("TXT_OMAHA");break;case K.Variation.OmahaHiLo:a=LocalizedManager.t("TXT_OMAHA_HI_LO");break;default:a=e.channelVariation}if(GameManager.isMobile)t=[e.channelName,e.smallBlind+"/"+e.bigBlind+", "+a,LocalizedManager.t("TXT_AVG_POT")+": "+e.avgStack,e.minBuyIn+"/"+e.maxBuyIn,LocalizedManager.t("TXT_PLAYERS"),e.playingPlayers+"/"+e.maxPlayers];else t=[e.channelName,e.smallBlind+"/"+e.bigBlind,a,e.minBuyIn,e.maxBuyIn,e.playingPlayers+"/"+e.maxPlayers,e.queuePlayers," "+e.avgStack,parseInt(e.flopPercent)]}return t},getTableData2:function(e,t,a){ServerCom.pomeloRequest("connector.entryHandler.getTableByRoomId",{isRealMoney:!0,channelVariation:t,playerId:GameManager.user.playerId,isLoggedIn:!0,access_token:K.Token.access_token,roomId:e},a,null,5e3,!1)},goto:function(e,t){var a=this;if(!this.lockClick){this.lockClick=!0,this.scheduleOnce(function(){a.lockClick=!1},1),console.log("goto",t);var n=this;n.cashierTable.getComponent("Table").roomId=t,this.getTableData2(t,1,function(e){ServerCom.loading.active=!1,n.cashierTable.getComponent("Table").onEnable2(e.result),n.cashierTable.active=!0,n.node.scale=0,n.top.active=!1,n.top2.active=!0})}},onAdvancefilterUpdated:function(){a.config.enabled?cc.find("filter",this.filter).color=new cc.color(255,166,39):cc.find("filter",this.filter).color=new cc.color(255,255,255),this.onGetTableData()}}),cc._RF.pop()},{Advancefilter:"Advancefilter",DropDown:"DropDown",PostTypes:"PostTypes",Table:"Table",TableContent:"TableContent"}],CashTablePresenter:[function(e,t){"use strict";cc._RF.push(t,"fbf7476b3lKUq68DsODlJrF","CashTablePresenter");var a=e("PostTypes").JoinChannel,n=e("Table"),i=e("TableContent"),o=e("DropDown"),s=e("PostTypes").Login,r=e("PopUpManager").PopUpType;cc.Class({extends:n,properties:{top:{default:null,type:cc.Node},top2:{default:null,type:cc.Node},room:{default:null,type:cc.Label},tables:{default:null,type:cc.Label},blinds:{default:null,type:cc.Label},players:{default:null,type:cc.Label},minbuyin:{default:null,type:cc.Label},buyCounter:{default:0,visible:!1},playerCounter:{default:0,visible:!1},gameTypeDropdown:{default:null,type:o},stakesDropdown:{default:null,type:o},maxPlayersDropdown:{default:null,type:o},hideFullTablesCB:{default:null,type:cc.Toggle},favTableCB:{default:null,type:cc.Toggle},sideTableInfoPrefab:{default:null,type:cc.Node},tableInfoHolder:{default:null,type:cc.Node},favPrimaryCB:{default:null,type:cc.Toggle},sideTableNameLbl:{default:null,type:cc.Label},sideTableInfo:{default:null,type:cc.Node},selectedTableDetails:{default:null,type:cc.Node},selectedTableDetailsTour:{default:null,type:cc.Node},joinWaitingListBtn:{default:null,type:cc.Button},joinBtn:{default:null,type:cc.Node},avgPotLbl:{default:null,type:cc.Label},numWaitingPlayers:{default:null,type:cc.Label}},statics:{init:!1},onEnable:function(){this._super(),GameManager.isMobile,!GameManager.isMobile&&this.DropDownData,GameManager.on("waiting_List_Event",function(e,t){null!==i.prevSelection&&i.prevSelection.channelData._id==e&&this.onAlreadyJoined(t)}.bind(this))},onRoomUpdate:function(e){console.log("onRoomUpdate",e),GameManager.emit("onRoomUpdate2",e),e._id==this.roomId&&e.updated},tableContentClick:function(){null!==i.prevSelection&&(this.tempSelection=this.contentPool.indexOf(i.prevSelection.node))},addTable:function(e){e.updated.channelType==K.ChannelType.Normal&&this._super(e)},onHFTSound:function(){GameManager.playSound(K.Sounds.click),this.applyFilter()},formatNumber:function(e){return e<1e3?e:e<1e6?1e3==e?"1k":(e/1e3).toFixed(1)+"k":(e/1e6).toFixed(1)+"m"},makeContent:function(e){if(this.variation==K.Variation.OpenFaceChinesePoker)var t=[e.channelName,e.chipsPointRatio,e.channelVariation,GameManager.getGameTypeByValue(e.turnTime),e.minBuyIn,e.maxBuyIn,e.playingPlayers+"/"+e.maxPlayers,e.queuePlayers];else{switch(e&&e.avgPot&&(e.avgStack=e.avgPot),e.channelVariation,e.channelVariation){case K.Variation.TexasHoldem:LocalizedManager.t("TXT_HOLDEM");break;case K.Variation.Omaha:LocalizedManager.t("TXT_OMAHA");break;case K.Variation.OmahaHiLo:LocalizedManager.t("TXT_OMAHA_HI_LO");break;default:e.channelVariation}t=[e.channelName,e.smallBlind+"/"+e.bigBlind,""+e.minBuyIn,"","",e.playingPlayers+"/"+e.maxPlayers]}return t},onJoinTable:function(){if(null!==i.prevSelection){var t=new a(i.prevSelection.channelData);console.log("onJoinTable ",t);var n=K.PomeloAPI.joinChannel;this.variation==window.K.Variation.OpenFaceChinesePoker&&(n=e("OFCConfigs").PomeloAPI.joinChannel),GameManager.join(i.prevSelection.channelData._id,n,t)}},onJoinWaitingList:function(){if(null!==i.prevSelection){var e=this.joinWaitingListBtn.node.children[0].children[2].getComponent(cc.Label).string==LocalizedManager.t("TXT_JOIN_WAITTING");if("true"==i.prevSelection.channelData.isPrivateTabel&&!i.prevSelection.joinEffect.active&&e){var t=function(t,a){t.success&&(GameManager.emit("waiting_List_Event",t.channelId,e),a())}.bind(this),a={type:"WAITING_LIST",flag:e,id:i.prevSelection.channelData._id,cb:t,toCallFunction:this.handler.joinWaitingList};GameManager.popUpManager.show(30,a,function(){})}else this.handler.joinWaitingList(e,i.prevSelection.channelData._id,function(t){t.success&&GameManager.emit("waiting_List_Event",t.channelId,e)}.bind(this),function(){})}},onAlreadyJoined:function(e){GameManager.isMobile||(this.joinWaitingListBtn.node.children[0].children[2].getComponent(cc.Label).string=e?LocalizedManager.t("TXT_UNJOIN_WAITTING"):LocalizedManager.t("TXT_JOIN_WAITTING"))},onAutoSit:function(){if(null!==i.prevSelection){var t=new a(i.prevSelection.channelData);t.seatIndex=GameManager.getPreferredSeat(t.maxPlayers),t.imageAvtar="";var n=K.PomeloAPI.autoSit;this.variation==window.K.Variation.OpenFaceChinesePoker&&(n=e("OFCConfigs").PomeloAPI.autoSit),GameManager.join(i.prevSelection.channelData._id,n,t)}},onSideTableUpdate:function(e){if(null!=i.prevSelection&&0!=this.contentPool.length&&!e.tournamentId&&i.prevSelection.channelData._id==e._id&&this.currentSideTableData)switch(e.event){case"TABLEVIEWNEWPLAYER":e.updated.playerId=e.playerId,this.currentSideTableData.players.push(e.updated),this.currentSideTableData.isTableFull=i.prevSelection.channelData.maxPlayers==this.currentSideTableData.players.length,this.currentSideTableData.isAlreadyPlaying||(this.currentSideTableData.isAlreadyPlaying=e.playerId==GameManager.user.playerId);break;case"TABLEVIEWLEFTPLAYER":this.removePlayer(e.playerId,this.currentSideTableData.players),this.currentSideTableData.isTableFull=i.prevSelection.channelData.maxPlayers==this.currentSideTableData.players.length,e.playerId==GameManager.user.playerId&&(this.currentSideTableData.isAlreadyPlaying=!1);break;case"TABLEVIEWCHIPSUPDATE":this.updateChips(e.playerId,e.updated.chips);break;case"TABLEVIEWNEWWAITINGPLAYER":e.updated.playerId=e.playerId,this.currentSideTableData.waitingPlayer.push(e.updated),this.currentSideTableData.isJoinedWaitingList||(this.currentSideTableData.isJoinedWaitingList=e.playerId==GameManager.user.playerId);break;case"TABLEVIEWLEFTWAITINGPLAYER":this.removePlayer(e.playerId,this.currentSideTableData.waitingPlayer),e.playerId==GameManager.user.playerId&&(this.currentSideTableData.isJoinedWaitingList=!1)}},setSideTableData:function(e){if(GameManager.removeAllChildren(this.tableInfoHolder),null==i.prevSelection||GameManager.isMobile||(this.sideTableNameLbl.string=i.prevSelection.channelData.channelName),e.success){if(this.currentSideTableData=e,this.joinWaitingListBtn.node.active=e.isTableFull,this.onAlreadyJoined(e.isJoinedWaitingList),this.joinBtn.active=!e.isAlreadyPlaying,this.avgPotLbl.string=e.avgStack,this.numWaitingPlayers.string=e.waitingPlayer.length,e.isAlreadyPlaying&&(this.joinWaitingListBtn.node.active=!e.isAlreadyPlaying),null!=i.prevSelection&&"true"==i.prevSelection.channelData.isPrivateTabel&&!i.prevSelection.joinEffect.active)return;if(!GameManager.isMobile){if(e.players.length>0)for(var t=0;t<e.players.length;t++)this.addPlayerInView(e.players[t]);if(e.waitingPlayer.length>0)for(t=0;t<e.waitingPlayer.length;t++)this.addPlayerInView(e.waitingPlayer[t],!0)}}},addPlayerInView:function(e,t){if(void 0===t&&(t=!1),!GameManager.isMobile){var a=cc.instantiate(this.sideTableInfoPrefab);a.active=!0,this.tableInfoHolder.addChild(a),a.getChildByName("Name").getComponent(cc.Label).string=e.playerName;var n=t?"Waiting":(e.chips||e.points||0).roundOff(2);a.getChildByName("Chips").getComponent(cc.Label).string=n}},removePlayer:function(e,t){if(t.length>0){for(var a=-1,n=0;n<t.length;n++)if(t[n].playerId==e){a=n;break}-1!=a&&t.splice(a,1)}},updateChips:function(e,t){if(this.currentSideTableData.players.length>0){for(var a=-1,n=0;n<this.currentSideTableData.players.length;n++)if(this.currentSideTableData.players[n].playerId==e){a=n;break}-1!=a&&(this.currentSideTableData.players[a].chips=t)}},onBuyInConfirm:function(e,t){ServerCom.pomeloRequest("room.channelHandler.quickSeat",{roomId:this.roomId,isLoggedIn:!0,access_token:K.Token.access_token,imageAvtar:"",chips:Number(t),playerId:GameManager.user.playerId,playerName:GameManager.user.userName,isRequested:!0},function(e){console.log(e);var t=K.PomeloAPI.joinChannel;GameManager.join2(e.data.channelId,t,{channelId:e.data.channelId,isRequested:!0,channelType:e.data.channelType,tableId:"",playerId:GameManager.user.playerId,playerName:GameManager.user.userName,networkIp:s.ipV4Address,maxPlayers:5,isPrivateTable:!1})})},quickSeat:function(){console.log(this.roomData);for(var e=null,t=0;t<this.roomData.length;t++)if(this.roomData[t]._id==this.roomId){e=this.roomData[t];break}if(e)if(null!=GameScreen?GameManager.isMobile?GameManager.activeTableCount=GameScreen.gridParent.getComponent(cc.PageView).getPages().length:GameManager.activeTableCount=GameScreen.gridParent.children.length:GameManager.activeTableCount=0,GameManager.activeTableCount>=GameManager.maxTableCounts)GameManager.popUpManager.show(r.MaxTablesJoinedPopup,null,function(){});else{var a={};a.minValue=e.minBuyIn,a.maxValue=e.maxBuyIn;var n=LocalizedManager.t("TXT_AVAILABLE_CHIPS")+":";"DIAMOND"==GameManager.user.category?a.totalChips=GameManager.user.realChips:a.totalChips=GameManager.user.freeChips,a.dialogHeadingText=n,a.autoBuyIn=GameManager.user.autoBuyIn,a.confirm=this.onBuyInConfirm.bind(this),a.channelId=e._id,a.isRealMoney=!0,a.autoConfirm=!0,a.isAllInAndFold=e.isAllInAndFold,a.topHeading=LocalizedManager.t("TXT_BUY_IN"),a.quickSeat=!0,GameManager.popUpManager.show(r.BuyInPopup,a,function(){})}},leaveLobby:function(){this.contentHolder.removeAllChildren()}}),cc._RF.pop()},{DropDown:"DropDown",OFCConfigs:"OFCConfigs",PopUpManager:"PopUpManager",PostTypes:"PostTypes",Table:"Table",TableContent:"TableContent"}],CashierPopUp:[function(e,t){"use strict";cc._RF.push(t,"d5a1920wy9EmpQcSW5tWx1S","CashierPopUp");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase"),o=(e("SliderTouch"),e("Checkbox"),cc.Enum({Bronze:0,Chrome:1,Silver:2,Gold:3,Diamond:4,Platinum:5}));cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},playerID:{default:null,type:cc.Label},email:{default:null,type:cc.Label},TournamentEarningsUnclaimed:{default:null,type:cc.Label},megaBonusUnclaimed:{default:null,type:cc.Label},megaBonusClaimed:{default:null,type:cc.Label},megaChipsAvailable:{default:null,type:cc.Label},megaChipsInPlay:{default:null,type:cc.Label},megaChips:{default:null,type:cc.Label},playChipsInPlay:{default:null,type:cc.Label},playChipsAvailable:{default:null,type:cc.Label},playChips:{default:null,type:cc.Label},megaPoints:{default:null,type:cc.Label},megaChipsClaimed:{default:null,type:cc.Label},megaPointLevel:{default:null,type:cc.Label},megaLevelSprites:{default:[],type:cc.SpriteFrame},circleInScene:{default:null,type:cc.Sprite},cashierView:{default:null,type:cc.Node},cashoutView:{default:null,type:cc.Node},cashoutAmount:{default:null,type:cc.EditBox},affiliateId:{default:null,type:cc.Label},stars:{default:[],type:cc.Sprite},playerImg:{default:null,type:cc.Sprite},temporary:{default:null,type:cc.Label},buttons:{default:null,type:cc.Node},instantBonusChips:{default:null,type:cc.Label},withdrawableChips:{default:null,type:cc.Label}},onLoad:function(){var e=cc.Color.BLACK;this.colorObj={Bronze:e.fromHEX("#B76316"),Chrome:e.fromHEX("#685F2D"),Silver:e.fromHEX("#606060"),Gold:e.fromHEX("#BB8000"),Diamond:e.fromHEX("#32C1CE"),Platinum:e.fromHEX("#653A38")}},onShow:function(e){null!=e&&(this.playerID.string=e.userName,this.megaBonusUnclaimed.string=parseInt(e.unClaimedMegaBonus),this.megaBonusClaimed.string=parseInt(e.claimedMegaBonus),this.playChipsAvailable.string=Number(e.freeChips.toFixed(2)),this.megaPointLevel.string=e.megaPointLevel,this.playerImg.spriteFrame=GameManager.user.urlImg,this.cb=e.restoreActiveTab,this.megaStarsUpdateInView(),this.temporary.string=Number(e.realChips.toFixed(2)),this.instantBonusChips.string=e.instantBonusAmount?e.instantBonusAmount.roundOff(2):0,this.withdrawableChips.string=Number(e.withdrawableChips.toFixed(2)),GameManager.isP&&(this.cashierView.active=!1,this.cashoutView.active=!0,this.buttons.active=!1,this.onShowCashout()))},onCashout:function(){if(null!=GameManager.user.affiliateId||GameManager.isMobile)this.popUpManager.show(n.CashoutPopup,null,function(){});else{var e=K.ServerAddress.cashier_CashOut_URL;cc.sys.openURL(e)}},onWithdrawChips:function(){GameManager.playSound(K.Sounds.click),this.cashoutView.active||(GameManager.user.isCashout?(this.cashierView.active=!1,this.cashoutView.active=!0,this.onShowCashout()):cc.sys.openURL(K.ServerAddress.cashier_CashOut_URL))},onAddChips:function(){this.cashierView.active||(this.cashoutView.active=!1,this.cashierView.active=!0)},onAddCash:function(){GameManager.playSound(K.Sounds.click);var e=K.ServerAddress.cashier_AddCash_URL;cc.sys.openURL(e)},onMyTransactions:function(){GameManager.playSound(K.Sounds.click);var e=K.ServerAddress.cashier_MyTransaction_URL;cc.sys.openURL(e)},onMyTickets:function(){GameManager.playSound(K.Sounds.click),this.showComingSoonPopup()},onMerchandise:function(){this.showComingSoonPopup()},onTournamentHistory:function(){GameManager.playSound(K.Sounds.click),this.showComingSoonPopup()},showComingSoonPopup:function(){GameManager.playSound(K.Sounds.click);var e={code:K.Error.FeatureComingSoon,response:"Feature Coming Soon!!!"};GameManager.popUpManager.show(n.DisconnectDialog,e,function(){})},onInfo:function(){console.log("info clicked"),GameManager.playSound(K.Sounds.click);var e=K.ServerAddress.cashier_Profile_URL;cc.sys.openURL(e)},onQuit:function(){GameManager.playSound(K.Sounds.click),this.popUpManager.hide(n.CashierPopup,function(){})},onShowCashout:function(){GameManager.user.affiliateId?this.affiliateId.string=GameManager.user.affiliateId:this.affiliateId.string="Not an Affiliate.",this.cashoutAmount.string=""},getAmount:function(){var e=Number(GameManager.user.realChips.toFixed(2));if(isNaN(this.cashoutAmount.string)){var t="";if(i=this.cashoutAmount.string.match(/\d+/g))for(var a=0;a<i.length;a++)t+=i[a];this.cashoutAmount.string=t}else{if(/\s/.test(this.cashoutAmount.string)){var n=this.cashoutAmount.string.toString().trim();this.cashoutAmount.string=n}var i;t=".",-1!=this.cashoutAmount.string.indexOf(t)&&(i=(i=this.cashoutAmount.string).replace(".",""),this.cashoutAmount.string=i),t="e",-1!=this.cashoutAmount.string.indexOf(t)&&(i=(i=this.cashoutAmount.string).replace("e",""),this.cashoutAmount.string=i),t="-",-1!=this.cashoutAmount.string.indexOf(t)&&(i=(i=this.cashoutAmount.string).replace("-",""),this.cashoutAmount.string=i),(this.cashoutAmount.string.length>1?/[0-9]/:/[1-9]/).test(this.cashoutAmount.string)||(i=(i=this.cashoutAmount.string).replace("0",""),this.cashoutAmount.string=i)}this.cashoutAmount.string>=1&&this.cashoutAmount.string<=e&&(this.submitButton.interactable=!0)},onSubmit:function(){if("Not an Affiliate."!=this.affiliateId.string){var e=parseInt(this.cashoutAmount.string),t={playerId:GameManager.user.playerId,realChips:e};ServerCom.pomeloRequest(K.PomeloAPI.cashoutRequest,t,function(e){e.success&&this.popUpManager.hide(n.CashierPopup,function(){})}.bind(this),null)}},onHide:function(){this.cashoutView.active=!1,this.cashierView.active=!0,this.cb&&this.cb()},fillStar:function(e,t){for(var a=0;a<e;a++)this.stars[a].fillRange=1;this.stars[e].fillRange=t/100},megaStarsUpdateInView:function(){for(var e=0;e<5;e++)this.stars[e].spriteFrame=this.megaLevelSprites[o[GameManager.user.megaPointDetail.megaPointLevel]],this.stars[e].fillRange=0;var t=GameManager.user.megaPointDetail.megaPointsPercent,a=t%20*5;t<=20?this.fillStar(0,a):t>20&&t<=40?this.fillStar(1,a):t>40&&t<=60?this.fillStar(2,a):t>60&&t<=80?this.fillStar(3,a):this.fillStar(4,a)},validateCashoutAmount:function(){var e=this.cashoutAmount.string,t=parseInt(e.getDecimal());this.cashoutAmount.string=isNaN(t)?"":t.toString()}}),cc._RF.pop()},{Checkbox:"Checkbox",PopUpBase:"PopUpBase",PopUpManager:"PopUpManager",SliderTouch:"SliderTouch"}],CashoutPopup:[function(e,t){"use strict";cc._RF.push(t,"6be5bWSK/5Be60WmSayKuW3","CashoutPopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase");e("SliderTouch"),e("Checkbox"),cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},cashoutAmount:{default:null,type:cc.EditBox},affiliateId:{default:null,type:cc.Label},submitButton:{default:null,type:cc.Button},quitButton:{default:null,type:cc.Button}},onLoad:function(){},onShow:function(){GameManager.user.affiliateId?this.affiliateId.string=GameManager.user.affiliateId:this.affiliateId.string="Not an Affiliate.",this.cashoutAmount.string=""},onQuit:function(){this.popUpManager.hide(n.CashoutPopup,function(){})},getAmount:function(){var e=parseInt(GameManager.user.realChips);if(isNaN(this.cashoutAmount.string)){var t="";if(i=this.cashoutAmount.string.match(/\d+/g))for(var a=0;a<i.length;a++)t+=i[a];this.cashoutAmount.string=t}else{if(/\s/.test(this.cashoutAmount.string)){var n=this.cashoutAmount.string.toString().trim();this.cashoutAmount.string=n}var i;t=".",-1!=this.cashoutAmount.string.indexOf(t)&&(i=(i=this.cashoutAmount.string).replace(".",""),this.cashoutAmount.string=i),t="e",-1!=this.cashoutAmount.string.indexOf(t)&&(i=(i=this.cashoutAmount.string).replace("e",""),this.cashoutAmount.string=i),t="-",-1!=this.cashoutAmount.string.indexOf(t)&&(i=(i=this.cashoutAmount.string).replace("-",""),this.cashoutAmount.string=i),(this.cashoutAmount.string.length>1?/[0-9]/:/[1-9]/).test(this.cashoutAmount.string)||(i=(i=this.cashoutAmount.string).replace("0",""),this.cashoutAmount.string=i)}this.cashoutAmount.string>=1&&this.cashoutAmount.string<=e&&(this.submitButton.interactable=!0)},onSubmit:function(){var e=parseInt(this.cashoutAmount.string),t={playerId:GameManager.user.playerId,realChips:e};ServerCom.pomeloRequest(K.PomeloAPI.cashoutRequest,t,function(e){e.success&&this.popUpManager.hide(n.CashoutPopup,function(){})}.bind(this),null)}}),cc._RF.pop()},{Checkbox:"Checkbox",PopUpBase:"PopUpBase",PopUpManager:"PopUpManager",SliderTouch:"SliderTouch"}],ChatInfoPanel:[function(e,t){"use strict";cc._RF.push(t,"8a2a7Z7Tm1HgYBNP1ov8ng4","ChatInfoPanel"),e("ChatPanel");var a=e("PostTypes").ChatData;cc.Class({extends:cc.Component,properties:{empty:{default:null,type:cc.Node},chatLbl:{default:null,type:cc.EditBox},chatPrefab:{default:null,type:cc.Prefab},chatGridParent:{default:null,type:cc.Node},chat:[],richTexts:{default:[],type:cc.RichText},emoticonBox:{default:null,type:cc.Node},emoticons:{default:[],type:cc.SpriteFrame},emoticonPrefab:{default:null,type:cc.Node},emotParent:{default:null,type:cc.Node},pokerModel:{default:null,type:cc.Node},pokerGame:null,otherPopup:{default:null,type:cc.Node},emotiBtns:{default:null,type:cc.Node},chatContent:{default:null,type:cc.Prefab},chatMeContent:{default:null,type:cc.Prefab},chatPopUp:null,onChatFunc:null,isLoaded:!1,editBoxData:"",loaded:!1,playerNameColor:new cc.Color(0,0,0,255),textColor:new cc.Color(0,0,0,255)},onLoad:function(){this.loaded||(this.loaded=!0,this.___height=this.node.height,this.otherPopup&&this.otherPopup.getComponent("ChatInfoPanel").onLoad(),this.onChatFunc=this.onChat.bind(this),this.pokerGame=this.pokerModel.getComponent("PokerModel"),this.generateEmoticons(),this.registerBroadcast(),this.isLoaded=!0,this.empty.active=!0,this.pokerGame.chat&&(this.generateChat(this.pokerGame.chat),this.scrollToBottom()))},onEnable:function(){this.scheduleOnce(function(){this.chatLbl.string=this.editBoxData},.2),K.PORTRAIT&&(0==this.chatGridParent.children.length?this.empty.active=!0:this.empty.active=!1)},enableotherPopup:function(){if(!this.otherPopup.getComponent("ChatInfoPanel").isLoaded){var e=[];this.chatGridParent.children.forEach(function(t){e.push(t.getComponent(cc.RichText).string)},this),this.otherPopup.getComponent("ChatInfoPanel").showBackUp(e)}this.otherPopup.active=!0,this.node.active=!1},showBackUp:function(e){e.forEach(function(e){this.generateChat(e)},this),this.scrollToBottom()},close:function(){this.onEditEnd(),this.node.active=!1},showChatPopUp:function(){this.node.active=!0},showMessages:function(e){this.unscheduleAllCallbacks(),this.pokerGame&&(this.generateChat(e),this.scrollToBottom())},generateChat:function(e){if(this.empty.active=!1,K.PORTRAIT){var t=null;if(!(t=e.split("|")[3]==GameManager.user.playerId?cc.instantiate(this.chatMeContent):cc.instantiate(this.chatContent)).children[1].children[1].getComponent(cc.RichText))return;t.children[1].children[1].getComponent(cc.RichText).string=e.split("|")[1],t.children[1].children[0].children[0].getComponent(cc.Label).string=e.split("|")[0];var a=new Date,n=a.getHours()+":"+a.getMinutes();if(t.children[1].children[0].children[1].getComponent(cc.Label).string=n,this.chatGridParent.addChild(t),e.split("|")[2])t.children[0].children[1].children[0].getComponent(cc.Sprite).spriteFrame=GameManager.avatarImages[parseInt(e.split("|")[2])];else{var i=Math.round(Math.random()*GameManager.avatarImages.length-1);t.children[0].children[1].children[0].getComponent(cc.Sprite).spriteFrame=GameManager.avatarImages[i]}}else(t=cc.instantiate(this.chatContent)).getComponent(cc.RichText).string=e,this.chatGridParent.addChild(t)},scrollToBottom:function(){this.chatGridParent.parent.parent.getComponent(cc.ScrollView).scrollToBottom(.5)},onSubmit:function(){this.onEditEnd(),this.pokerGame.gameData.settings.muteGameSound||GameManager.playSound(K.Sounds.click),this.emoticonBox.active=!1;var e=this.chatLbl.string.trim();if(!this.pokerGame.gameData.settings.playerChat||this.pokerGame.isPlayerStandUp())return this.chatLbl.string="",void(this.chatLbl.string=this.chatLbl.string.trim());if(""!=e){var t=e,n=t.split(">");n.length>0&&n.forEach(function(e){if(e){var a=e.split("<");a[1]&&(t=t.replace("<"+a[1]+">","<img src = '"+a[1]+"'/>"))}},this);var i=new a(GameManager.user.playerId,GameManager.user.userName,this.pokerGame.gameData.channelId,t);ServerCom.pomeloRequest(K.PomeloAPI.chatRequest,i,function(e){e.success}.bind(this),null,5e3,!1),this.chatLbl.string="",this.chatLbl.string=this.chatLbl.string.trim(),GameScreen.isMobile||this.chatLbl.setFocus()}this.editBoxData="",this.pokerGame.presenter.onClose()},registerBroadcast:function(){this.pokerGame||(this.pokerGame=this.pokerModel.getComponent("PokerModel")),this.pokerGame.off(K.PokerEvents.OnChat,this.onChat.bind(this)),this.pokerGame.on(K.PokerEvents.OnChat,this.onChat.bind(this))},getPlayerName:function(e){for(var t=0;t<this.pokerGame.gameData.tableDetails.players.length;t++)if(this.pokerGame.gameData.tableDetails.players[t].playerId==e)return this.pokerGame.gameData.tableDetails.players[t].playerName;return"N/A"},getPlayerAvatar:function(e){for(var t=0;t<this.pokerGame.gameData.tableDetails.players.length;t++)if(this.pokerGame.gameData.tableDetails.players[t].playerId==e)return this.pokerGame.gameData.tableDetails.players[t].imageAvtar;return null},onChat:function(e){var t="<color=#"+this.playerNameColor.toHEX("#rrggbb")+">"+this.getPlayerName(e.playerId)+": </c><color=#"+this.textColor.toHEX("#rrggbb")+">"+e.message+"</c>";K.PORTRAIT&&(t=this.getPlayerName(e.playerId)+"|"+e.message+"|"+(Number(e.profileImage)-1)+"|"+e.playerId),this.showMessages(t)},onShowEmoticons:function(){this.emoticonBox&&(this.emoticonBox.active=!this.emoticonBox.active)},recordMessage:function(){this.editBoxData=this.chatLbl.string},disableEmoticons:function(){this.emoticonBox.active=!1,this.emotiBtns.active=!1},enableEmoticons:function(){this.emotiBtns.active=!0},onEmoticonClicked:function(e){GameScreen.isMobile||this.chatLbl.setFocus();var t=e.target.getComponent(cc.Sprite).spriteFrame.name,a=this.chatLbl.string;(a+="<"+t+">").length>140||(this.chatLbl.string+="<"+t+">",this.recordMessage())},generateEmoticons:function(){this.emotParent&&GameManager.removeAllChildren(this.emotParent);for(var e=null,t=0;t<this.emoticons.length;t++)(e=cc.instantiate(this.emoticonPrefab)).active=!0,e.getComponent(cc.Sprite).spriteFrame=this.emoticons[t],this.emotParent.addChild(e)},onEditBegan:function(){},onEditEnd:function(){}}),cc._RF.pop()},{ChatPanel:"ChatPanel",PostTypes:"PostTypes"}],ChatPanel:[function(e,t){"use strict";cc._RF.push(t,"333ca0DbEdAlZGvnHb2pkTn","ChatPanel");var a=e("PostTypes").reportIssue;e("TabBtnUtil"),cc.Class({extends:cc.Component,properties:{isVisible:!0,reportLabel:{default:null,type:cc.EditBox},infoLabel:{default:null,type:cc.Label},indicator:{default:null,type:cc.Node},isMobile:!1,isMobileView:!1,bgA:{default:null,type:cc.Node},onHideCallBack:null},onLoad:function(){window.ChatPanel=this,this.actA=cc.moveTo(.1,new cc.Vec2(0,-177));var e=this.johnnyMobile?5:0;this.actB=cc.moveTo(.1,new cc.Vec2(0,e)),this.isMobile=!1,this.johnnyMobile=GameScreen.isMobile,this.isMobileView?(this.isVisible=!1,setTimeout(function(){}.bind(this),500),this.onHideCallBack=function(){1==GameScreen.viewType&&GameManager.activeTableCount>1||this.hideMobileView(),1==GameScreen.viewType&&this.isMobileView&&(2==GameManager.activeTableCount?this.node.getComponent(cc.Widget).right=.319:this.node.getComponent(cc.Widget).right=-.0124)}.bind(this),GameManager.on(K.GameEvents.OnTableClosed,this.onHideCallBack),GameScreen.node.on("grid-refreshed",this.onHideCallBack)):this.isVisible=!1},onDestroy:function(){this.isMobileView&&(GameManager.off(K.GameEvents.OnTableClosed,this.onHideCallBack),GameScreen.node.off("grid-refreshed",this.onHideCallBack))},onHide:function(){if(!this.isMobile)if(this.node.stopAllActions(),1==GameScreen.viewType&&GameManager.activeTableCount>1&&this.isMobileView)this.switchMobileView();else if(this.isMobileView)this.hideMobileView();else{var e=this.isVisible?-150:0;this.johnnyMobile&&(e=this.isVisible?-162:5);var t=cc.moveTo(.1,new cc.Vec2(0,e));this.node.runAction(t),this.isVisible=!this.isVisible}},hideMobileView:function(){var e=cc.callFunc(function(){},this),t=cc.moveTo(.2,431,-67),a=cc.sequence(t,e);this.node.parent.runAction(a),this.isVisible=!1,this.switchBg()},showMobileView:function(){this.node.parent.runAction(cc.moveTo(.2,431,113.5)),this.isVisible=!0,this.switchBg()},switchMobileView:function(){this.isMobileView&&(this.isVisible?this.hideMobileView():this.showMobileView())},showPanel:function(){if(!this.isMobile)if(1==GameScreen.viewType&&GameManager.activeTableCount>1)this.isVisible||(this.node.stopAllActions(),this.isVisible=!0,this.switchBg(),this.node.runAction(this.actB));else if(!this.isVisible){this.node.stopAllActions();var e=0;this.johnnyMobile&&(e=5);var t=cc.moveTo(.1,new cc.Vec2(0,e));this.node.runAction(t),this.isVisible=!0}},onEnable:function(){this.node.getComponent("TabBtnUtil")&&this.node.getComponent("TabBtnUtil").onShowTab_01()},reportIssue:function(){if(""!=this.reportIssue.string){var e=new a(GameManager.user.playerId,this.reportLabel.string);ServerCom.pomeloRequest(K.PomeloAPI.reportIssue,e,function(e){e.success}),this.reportLabel.string=""}},mobClosePanel:function(){if(this.bgA.active=!1,this.isVisible){var e=cc.callFunc(function(){},this),t=cc.sequence(this.actA,e);this.node.runAction(t),this.isVisible=!this.isVisible}},switchBg:function(){this.bgA&&(this.isVisible?this.bgA.active=!0:this.bgA.active=!1)}}),cc._RF.pop()},{PostTypes:"PostTypes",TabBtnUtil:"TabBtnUtil"}],Checkbox:[function(e,t){"use strict";cc._RF.push(t,"fab60HmBEJMvpzN1e51z7mV","Checkbox"),cc.Class({extends:cc.Component,properties:{tickNode:{default:null,type:cc.Node},isSelected:{default:!1,visible:!1},initValue:{default:!1},group:{default:[],type:cc.Node},callbackNode:{default:null,type:cc.Node},callbackComponent:{default:""},callbacks:{default:[],visible:!1},valForced:{visible:!1,default:!1}},onLoad:function(){this.isSelected=this.initValue},start:function(){this.valForced||this.setSelection(this.initValue)},onClick:function(){this.isSelected?(this.isSelected=!1,this.tickNode.active=!1):(this.isSelected=!0,this.tickNode.active=!0),this.updateGroup(this.isSelected),this.onValueChange()},registerCallback:function(e){this.callbacks.push(e)},deregisterCallback:function(e){var t=this.callbacks.indexOf(e);this.callbacks.splice(t,1)},updateGroup:function(e){this.group.length>0&&(e?this.group.forEach(function(t){t.getComponent("Checkbox").setSelection(!e)},this):(this.isSelected=!0,this.tickNode.active=!0))},onValueChange:function(){null!==this.callbackNode&&this.callbackNode.getComponent(this.callbackComponent).onValueChange(),this.callbacks.length>0&&this.callbacks.forEach(function(e){e(this.tickNode)},this)},setSelection:function(e){console.trace("setSelection",e),this.valForced=!0,this.isSelected=!!e,this.tickNode.active=!!e},getSelection:function(){return this.isSelected}}),cc._RF.pop()},{}],CommonPopup:[function(e,t){"use strict";cc._RF.push(t,"6a57c6GYClCj4Ye3hxkwEUx","CommonPopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase");cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},title:{default:null,type:cc.Label},label:{default:null,type:cc.Label}},onShow:function(e){console.log("onShow",e),this.title.string=e.title,this.label.string=e.content,this.callback=e.callback},onLoad:function(){},onClose:function(){this.popUpManager.hide(n.CommonDialog,function(){}),this.callback&&this.callback()}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],ConfirmQuickSeatSitNGo:[function(e,t){"use strict";cc._RF.push(t,"7f5a4hRRpdHy6xempefwIHv","ConfirmQuickSeatSitNGo");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase");cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},avlblMoneyLbl:{default:null,type:cc.Label},chargeLbl:{default:null,type:cc.Label},buyInLbl:{default:null,type:cc.Label},entryFeeLbl:{default:null,type:cc.Label},nameLbl:{default:null,type:cc.Label},prizePoolLbl:{default:null,type:cc.Label}},onShow:function(e){null!=e&&(this.data=e),this.nameLbl.string=e.result.channelName,this.buyInLbl.string=e.result.entryfees,this.entryFeeLbl.string=e.result.housefees+e.result.bountyfees,this.chargeLbl.string=e.result.buyIn;var t=parseInt(e.data.buyIn)*parseInt(e.data.maxPlayersForTournament)*.85;this.prizePoolLbl.string="Prize Pool: "+(e.result.prizePool||t),this.avlblMoneyLbl.string=e.data.isRealMoney?GameManager.user.realChips:GameManager.user.freeChips},onConfirm:function(){var e={};e._id=this.data.result._id,e.gameVersionCount=this.data.result.gameVersionCount,TournamentHandler.registerTournament(e,function(e){if(e.success){var t={};t.heading=this.nameLbl.string,t.info="You are registered",GameManager.popUpManager.show(n.PlayerInfoPopup,t,function(){})}this.onExit()}.bind(this),function(){},!1)},onExit:function(){this.popUpManager.hide(n.ConfirmDialogQuickSeatSitNGo,function(){})}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],CountryCodes:[function(e,t){"use strict";cc._RF.push(t,"61c33z9BMJGTYOEZDu5k2OH","CountryCodes"),window.CountryCodes=[{code:"AD",label:"Andorra",dial_code:"376",phoneLength:6},{code:"AE",label:"United Arab Emirates",dial_code:"971",phoneLength:9},{code:"AF",label:"Afghanistan",dial_code:"93",phoneLength:9},{code:"AG",label:"Antigua and Barbuda",dial_code:"1-268",phoneLength:10},{code:"AI",label:"Anguilla",dial_code:"1-264",phoneLength:10},{code:"AL",label:"Albania",dial_code:"355",phoneLength:9},{code:"AM",label:"Armenia",dial_code:"374",phoneLength:6},{code:"AO",label:"Angola",dial_code:"244",phoneLength:9},{code:"AQ",label:"Antarctica",dial_code:"672",phoneLength:6},{code:"AR",label:"Argentina",dial_code:"54",phoneLength:[6,7,8]},{code:"AS",label:"American Samoa",dial_code:"1-684",phoneLength:10},{code:"AT",label:"Austria",dial_code:"43",phoneLength:[10,11]},{code:"AU",label:"Australia",dial_code:"61",suggested:!0,phoneLength:9},{code:"AW",label:"Aruba",dial_code:"297",phoneLength:7},{code:"AX",label:"Alland Islands",dial_code:"358",min:7,max:10},{code:"AZ",label:"Azerbaijan",dial_code:"994",phoneLength:9},{code:"BA",label:"Bosnia and Herzegovina",dial_code:"387",phoneLength:8},{code:"BB",label:"Barbados",dial_code:"1-246",phoneLength:10},{code:"BD",label:"Bangladesh",dial_code:"880",phoneLength:10},{code:"BE",label:"Belgium",dial_code:"32",phoneLength:9},{code:"BF",label:"Burkina Faso",dial_code:"226",phoneLength:8},{code:"BG",label:"Bulgaria",dial_code:"359",phoneLength:9},{code:"BH",label:"Bahrain",dial_code:"973",phoneLength:8},{code:"BI",label:"Burundi",dial_code:"257",phoneLength:8},{code:"BJ",label:"Benin",dial_code:"229",phoneLength:8},{code:"BL",label:"Saint Barthelemy",dial_code:"590",phoneLength:9},{code:"BM",label:"Bermuda",dial_code:"1-441",phoneLength:10},{code:"BN",label:"Brunei Darussalam",dial_code:"673",phoneLength:7},{code:"BO",label:"Bolivia",dial_code:"591",phoneLength:9},{code:"BR",label:"Brazil",dial_code:"55",phoneLength:11},{code:"BS",label:"Bahamas",dial_code:"1-242",phoneLength:10},{code:"BT",label:"Bhutan",dial_code:"975",phoneLength:7},{code:"BV",label:"Bouvet Island",dial_code:"47",phoneLength:10},{code:"BW",label:"Botswana",dial_code:"267",phoneLength:7},{code:"BY",label:"Belarus",dial_code:"375",phoneLength:9},{code:"BZ",label:"Belize",dial_code:"501",phoneLength:7},{code:"CA",label:"Canada",dial_code:"1",suggested:!0,phoneLength:10},{code:"CC",label:"Cocos (Keeling) Islands",dial_code:"61",phoneLength:10},{code:"CD",label:"Congo, Democratic Republic of the",dial_code:"243",phoneLength:7},{code:"CF",label:"Central African Republic",dial_code:"236",phoneLength:8},{code:"CG",label:"Congo, Republic of the",dial_code:"242",phoneLength:9},{code:"CH",label:"Switzerland",dial_code:"41",phoneLength:9},{code:"CI",label:"Cote d'Ivoire",dial_code:"225",phoneLength:8},{code:"CK",label:"Cook Islands",dial_code:"682",phoneLength:5},{code:"CL",label:"Chile",dial_code:"56",phoneLength:9},{code:"CM",label:"Cameroon",dial_code:"237",phoneLength:9},{code:"CN",label:"China",dial_code:"86",phoneLength:11},{code:"CO",label:"Colombia",dial_code:"57",phoneLength:10},{code:"CR",label:"Costa Rica",dial_code:"506",phoneLength:8},{code:"CU",label:"Cuba",dial_code:"53",phoneLength:8},{code:"CV",label:"Cape Verde",dial_code:"238",phoneLength:7},{code:"CW",label:"Curacao",dial_code:"599",phoneLength:7},{code:"CX",label:"Christmas Island",dial_code:"61",phoneLength:9},{code:"CY",label:"Cyprus",dial_code:"357",phoneLength:8},{code:"CZ",label:"Czech Republic",dial_code:"420",phoneLength:9},{code:"DE",label:"Germany",dial_code:"49",suggested:!0,phoneLength:10},{code:"DJ",label:"Djibouti",dial_code:"253",phoneLength:10},{code:"DK",label:"Denmark",dial_code:"45",phoneLength:8},{code:"DM",label:"Dominica",dial_code:"1-767",phoneLength:10},{code:"DO",label:"Dominican Republic",dial_code:"1-809",phoneLength:10},{code:"DZ",label:"Algeria",dial_code:"213",phoneLength:9},{code:"EC",label:"Ecuador",dial_code:"593",phoneLength:9},{code:"EE",label:"Estonia",dial_code:"372",phoneLength:8},{code:"EG",label:"Egypt",dial_code:"20",phoneLength:10},{code:"EH",label:"Western Sahara",dial_code:"212",phoneLength:9},{code:"ER",label:"Eritrea",dial_code:"291",phoneLength:7},{code:"ES",label:"Spain",dial_code:"34",phoneLength:9},{code:"ET",label:"Ethiopia",dial_code:"251",phoneLength:9},{code:"FI",label:"Finland",dial_code:"358",min:9,max:11},{code:"FJ",label:"Fiji",dial_code:"679",phoneLength:7},{code:"FK",label:"Falkland Islands (Malvinas)",dial_code:"500",phoneLength:5},{code:"FM",label:"Micronesia, Federated States of",dial_code:"691",phoneLength:7},{code:"FO",label:"Faroe Islands",dial_code:"298",phoneLength:5},{code:"FR",label:"France",dial_code:"33",suggested:!0,phoneLength:9},{code:"GA",label:"Gabon",dial_code:"241",phoneLength:7},{code:"GB",label:"United Kingdom",dial_code:"44",phoneLength:10},{code:"GD",label:"Grenada",dial_code:"1-473",phoneLength:10},{code:"GE",label:"Georgia",dial_code:"995",phoneLength:9},{code:"GF",label:"French Guiana",dial_code:"594",phoneLength:9},{code:"GG",label:"Guernsey",dial_code:"44",phoneLength:10},{code:"GH",label:"Ghana",dial_code:"233",phoneLength:9},{code:"GI",label:"Gibraltar",dial_code:"350",phoneLength:8},{code:"GL",label:"Greenland",dial_code:"299",phoneLength:6},{code:"GM",label:"Gambia",dial_code:"220",phoneLength:7},{code:"GN",label:"Guinea",dial_code:"224",phoneLength:9},{code:"GP",label:"Guadeloupe",dial_code:"590",phoneLength:9},{code:"GQ",label:"Equatorial Guinea",dial_code:"240",phoneLength:9},{code:"GR",label:"Greece",dial_code:"30",phoneLength:10},{code:"GS",label:"South Georgia and the South Sandwich Islands",dial_code:"500",phoneLength:5},{code:"GT",label:"Guatemala",dial_code:"502",phoneLength:8},{code:"GU",label:"Guam",dial_code:"1-671",phoneLength:10},{code:"GW",label:"Guinea-Bissau",dial_code:"245",phoneLength:9},{code:"GY",label:"Guyana",dial_code:"592",phoneLength:7},{code:"HK",label:"Hong Kong",dial_code:"852",phoneLength:8},{code:"HM",label:"Heard Island and McDonald Islands",dial_code:"672",phoneLength:10},{code:"HN",label:"Honduras",dial_code:"504",phoneLength:8},{code:"HR",label:"Croatia",dial_code:"385",phoneLength:9},{code:"HT",label:"Haiti",dial_code:"509",phoneLength:8},{code:"HU",label:"Hungary",dial_code:"36",phoneLength:9},{code:"ID",label:"Indonesia",dial_code:"62",phoneLength:11},{code:"IE",label:"Ireland",dial_code:"353",phoneLength:9},{code:"IL",label:"Israel",dial_code:"972",phoneLength:9},{code:"IM",label:"Isle of Man",dial_code:"44",phoneLength:10},{code:"IN",label:"India",dial_code:"91",phoneLength:10},{code:"IO",label:"British Indian Ocean Territory",dial_code:"246",phoneLength:7},{code:"IQ",label:"Iraq",dial_code:"964",phoneLength:10},{code:"IR",label:"Iran, Islamic Republic of",dial_code:"98",phoneLength:11},{code:"IS",label:"Iceland",dial_code:"354",phoneLength:7},{code:"IT",label:"Italy",dial_code:"39",phoneLength:10},{code:"JE",label:"Jersey",dial_code:"44",phoneLength:10},{code:"JM",label:"Jamaica",dial_code:"1-876",phoneLength:10},{code:"JO",label:"Jordan",dial_code:"962",phoneLength:[8,9]},{code:"JP",label:"Japan",dial_code:"81",suggested:!0},{code:"KE",label:"Kenya",dial_code:"254",phoneLength:10},{code:"KG",label:"Kyrgyzstan",dial_code:"996",phoneLength:9},{code:"KH",label:"Cambodia",dial_code:"855",phoneLength:9},{code:"KI",label:"Kiribati",dial_code:"686",phoneLength:8},{code:"KM",label:"Comoros",dial_code:"269",phoneLength:7},{code:"KN",label:"Saint Kitts and Nevis",dial_code:"1-869",phoneLength:10},{code:"KP",label:"Korea, Democratic People's Republic of",dial_code:"850",phoneLength:[4,6,7,13]},{code:"KR",label:"Korea, Republic of",dial_code:"82",phoneLength:[7,8]},{code:"KW",label:"Kuwait",dial_code:"965",phoneLength:8},{code:"KY",label:"Cayman Islands",dial_code:"1-345",phoneLength:7},{code:"KZ",label:"Kazakhstan",dial_code:"7",phoneLength:10},{code:"LA",label:"Lao People's Democratic Republic",dial_code:"856",phoneLength:[8,9]},{code:"LB",label:"Lebanon",dial_code:"961",phoneLength:[7,8]},{code:"LC",label:"Saint Lucia",dial_code:"1-758",phoneLength:7},{code:"LI",label:"Liechtenstein",dial_code:"423",phoneLength:7},{code:"LK",label:"Sri Lanka",dial_code:"94",phoneLength:7},{code:"LR",label:"Liberia",dial_code:"231",phoneLength:[8,9]},{code:"LS",label:"Lesotho",dial_code:"266",phoneLength:8},{code:"LT",label:"Lithuania",dial_code:"370",phoneLength:8},{code:"LU",label:"Luxembourg",dial_code:"352",phoneLength:9},{code:"LV",label:"Latvia",dial_code:"371",phoneLength:8},{code:"LY",label:"Libya",dial_code:"218",phoneLength:10},{code:"MA",label:"Morocco",dial_code:"212",phoneLength:9},{code:"MC",label:"Monaco",dial_code:"377",phoneLength:8},{code:"MD",label:"Moldova, Republic of",dial_code:"373",phoneLength:8},{code:"ME",label:"Montenegro",dial_code:"382",phoneLength:8},{code:"MF",label:"Saint Martin (French part)",dial_code:"590",phoneLength:6},{code:"MG",label:"Madagascar",dial_code:"261",phoneLength:7},{code:"MH",label:"Marshall Islands",dial_code:"692",phoneLength:7},{code:"MK",label:"Macedonia, the Former Yugoslav Republic of",dial_code:"389",phoneLength:8},{code:"ML",label:"Mali",dial_code:"223",phoneLength:8},{code:"MM",label:"Myanmar",dial_code:"95",min:7,max:10},{code:"MN",label:"Mongolia",dial_code:"976",phoneLength:8},{code:"MO",label:"Macao",dial_code:"853",phoneLength:8},{code:"MP",label:"Northern Mariana Islands",dial_code:"1-670",phoneLength:7},{code:"MQ",label:"Martinique",dial_code:"596",phoneLength:9},{code:"MR",label:"Mauritania",dial_code:"222",phoneLength:8},{code:"MS",label:"Montserrat",dial_code:"1-664",phoneLength:10},{code:"MT",label:"Malta",dial_code:"356",phoneLength:8},{code:"MU",label:"Mauritius",dial_code:"230",phoneLength:8},{code:"MV",label:"Maldives",dial_code:"960",phoneLength:7},{code:"MW",label:"Malawi",dial_code:"265",phoneLength:[7,8,9]},{code:"MX",label:"Mexico",dial_code:"52",phoneLength:10},{code:"MY",label:"Malaysia",dial_code:"60",phoneLength:7},{code:"MZ",label:"Mozambique",dial_code:"258",phoneLength:12},{code:"NA",label:"Namibia",dial_code:"264",phoneLength:7},{code:"NC",label:"New Caledonia",dial_code:"687",phoneLength:6},{code:"NE",label:"Niger",dial_code:"227",phoneLength:8},{code:"NF",label:"Norfolk Island",dial_code:"672",phoneLength:6},{code:"NG",label:"Nigeria",dial_code:"234",phoneLength:8},{code:"NI",label:"Nicaragua",dial_code:"505",phoneLength:8},{code:"NL",label:"Netherlands",dial_code:"31",phoneLength:9},{code:"NO",label:"Norway",dial_code:"47",phoneLength:8},{code:"NP",label:"Nepal",dial_code:"977",phoneLength:10},{code:"NR",label:"Nauru",dial_code:"674",phoneLength:7},{code:"NU",label:"Niue",dial_code:"683",phoneLength:4},{code:"NZ",label:"New Zealand",dial_code:"64",phoneLength:[8,9]},{code:"OM",label:"Oman",dial_code:"968",phoneLength:8},{code:"PA",label:"Panama",dial_code:"507",phoneLength:8},{code:"PE",label:"Peru",dial_code:"51",phoneLength:9},{code:"PF",label:"French Polynesia",dial_code:"689",phoneLength:8},{code:"PG",label:"Papua New Guinea",dial_code:"675",phoneLength:8},{code:"PH",label:"Philippines",dial_code:"63",phoneLength:10},{code:"PK",label:"Pakistan",dial_code:"92",phoneLength:10},{code:"PL",label:"Poland",dial_code:"48",phoneLength:9},{code:"PM",label:"Saint Pierre and Miquelon",dial_code:"508",phoneLength:6},{code:"PN",label:"Pitcairn",dial_code:"870",phoneLength:9},{code:"PR",label:"Puerto Rico",dial_code:"1",phoneLength:10},{code:"PS",label:"Palestine, State of",dial_code:"970",phoneLength:9},{code:"PT",label:"Portugal",dial_code:"351",phoneLength:9},{code:"PW",label:"Palau",dial_code:"680",phoneLength:7},{code:"PY",label:"Paraguay",dial_code:"595",phoneLength:9},{code:"QA",label:"Qatar",dial_code:"974",phoneLength:8},{code:"RE",label:"Reunion",dial_code:"262",phoneLength:10},{code:"RO",label:"Romania",dial_code:"40",phoneLength:10},{code:"RS",label:"Serbia",dial_code:"381",phoneLength:9},{code:"RU",label:"Russian Federation",dial_code:"7",phoneLength:10},{code:"RW",label:"Rwanda",dial_code:"250",phoneLength:9},{code:"SA",label:"Saudi Arabia",dial_code:"966",phoneLength:9},{code:"SB",label:"Solomon Islands",dial_code:"677",phoneLength:7},{code:"SC",label:"Seychelles",dial_code:"248",phoneLength:7},{code:"SD",label:"Sudan",dial_code:"249",phoneLength:7},{code:"SE",label:"Sweden",dial_code:"46",phoneLength:7},{code:"SG",label:"Singapore",dial_code:"65",phoneLength:8},{code:"SH",label:"Saint Helena",dial_code:"290",phoneLength:4},{code:"SI",label:"Slovenia",dial_code:"386",phoneLength:9},{code:"SJ",label:"Svalbard and Jan Mayen",dial_code:"47",phoneLength:8},{code:"SK",label:"Slovakia",dial_code:"421",phoneLength:9},{code:"SL",label:"Sierra Leone",dial_code:"232",phoneLength:8},{code:"SM",label:"San Marino",dial_code:"378",phoneLength:10},{code:"SN",label:"Senegal",dial_code:"221",phoneLength:9},{code:"SO",label:"Somalia",dial_code:"252",phoneLength:[8,9]},{code:"SR",label:"Suriname",dial_code:"597",phoneLength:[6,7]},{code:"SS",label:"South Sudan",dial_code:"211",phoneLength:7},{code:"ST",label:"Sao Tome and Principe",dial_code:"239",phoneLength:7},{code:"SV",label:"El Salvador",dial_code:"503",phoneLength:8},{code:"SX",label:"Sint Maarten (Dutch part)",dial_code:"1-721",phoneLength:10},{code:"SY",label:"Syrian Arab Republic",dial_code:"963",phoneLength:7},{code:"SZ",label:"Swaziland",dial_code:"268",phoneLength:8},{code:"TC",label:"Turks and Caicos Islands",dial_code:"1-649",phoneLength:10},{code:"TD",label:"Chad",dial_code:"235",phoneLength:6},{code:"TF",label:"French Southern Territories",dial_code:"262",phoneLength:10},{code:"TG",label:"Togo",dial_code:"228",phoneLength:8},{code:"TH",label:"Thailand",dial_code:"66",phoneLength:9},{code:"TJ",label:"Tajikistan",dial_code:"992",phoneLength:9},{code:"TK",label:"Tokelau",dial_code:"690",phoneLength:5},{code:"TL",label:"Timor-Leste",dial_code:"670",phoneLength:7},{code:"TM",label:"Turkmenistan",dial_code:"993",phoneLength:8},{code:"TN",label:"Tunisia",dial_code:"216",phoneLength:8},{code:"TO",label:"Tonga",dial_code:"676",phoneLength:5},{code:"TR",label:"Turkey",dial_code:"90",phoneLength:11},{code:"TT",label:"Trinidad and Tobago",dial_code:"1-868",phoneLength:7},{code:"TV",label:"Tuvalu",dial_code:"688",phoneLength:5},{code:"TW",label:"Taiwan, Province of China",dial_code:"886",phoneLength:9},{code:"TZ",label:"United Republic of Tanzania",dial_code:"255",phoneLength:7},{code:"UA",label:"Ukraine",dial_code:"380",phoneLength:9},{code:"UG",label:"Uganda",dial_code:"256",phoneLength:7},{code:"US",label:"United States",dial_code:"1",suggested:!0,phoneLength:10},{code:"UY",label:"Uruguay",dial_code:"598",phoneLength:8},{code:"UZ",label:"Uzbekistan",dial_code:"998",phoneLength:9},{code:"VA",label:"Holy See (Vatican City State)",dial_code:"379",phoneLength:10},{code:"VC",label:"Saint Vincent and the Grenadines",dial_code:"1-784",phoneLength:7},{code:"VE",label:"Venezuela",dial_code:"58",phoneLength:7},{code:"VG",label:"British Virgin Islands",dial_code:"1-284",phoneLength:7},{code:"VI",label:"US Virgin Islands",dial_code:"1-340",phoneLength:10},{code:"VN",label:"Vietnam",dial_code:"84",phoneLength:9},{code:"VU",label:"Vanuatu",dial_code:"678",phoneLength:5},{code:"WF",label:"Wallis and Futuna",dial_code:"681",phoneLength:6},{code:"WS",label:"Samoa",dial_code:"685",phoneLength:[5,6,7]},{code:"XK",label:"Kosovo",dial_code:"383",phoneLength:8},{code:"YE",label:"Yemen",dial_code:"967",phoneLength:9},{code:"YT",label:"Mayotte",dial_code:"262",phoneLength:9},{code:"ZA",label:"South Africa",dial_code:"27",phoneLength:9},{code:"ZM",label:"Zambia",dial_code:"260",phoneLength:9},{code:"ZW",label:"Zimbabwe",dial_code:"263",phoneLength:9}],cc._RF.pop()},{}],CustomEditBox:[function(e,t){"use strict";cc._RF.push(t,"9fd72sVESNOH6jBSvePatHM","CustomEditBox");var a=null,n=e("EventEmitter");cc.Class({extends:n,properties:{displayLbl:{default:null,type:cc.Label},cancelBtn:{default:null,type:cc.Node},isNumeric:!1,isPassword:!1,pwd:"",isEmail:!1,limit:50,isEditing:!1,callbacks:[],callbacksMaxCheck:[],isSelected:!1},onLoad:function(){this.rgstrKbInput(),GameManager.on("registerInput",this.registerThisInput.bind(this)),GameManager.on("posClicked",this.test.bind(this)),this.cursorAdded=!1,this.editorClicked=!1,a=this.blink},registerThisInput:function(e){this.isSelected=e==this},onCLick:function(){this.editorClicked=!0,this.schedule(a,.6,cc.macro.REPEAT_FOREVER,0),GameManager.emit("registerInput",this)},blink:function(){this.removeCursor()||(this.displayLbl.string+="|",this.cursorAdded=!0)},removeCursor:function(){return!!this.cursorAdded&&(this.displayLbl.string=this.displayLbl.string.slice(0,this.displayLbl.string.length-1),this.cursorAdded=!1,!0)},test:function(e){if(this.editorClicked){var t=this.node.width,a=this.node.height,n=cc.rect(0,0,t,a),i=this.node.getNodeToWorldTransform();cc._rectApplyAffineTransformIn(n,i);var o=e.x-n.x,s=n.x+n.width-e.x,r=e.y-n.y,l=n.y+n.height-e.y;o>=0&&s>=0&&l>=0&&r>=0||this.removeKbInput()}},rgstrKbInput:function(){if(!this.isEditing){var e=this;cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(t){if(e.removeCursor(),e.isSelected){e.isEditing=!0;var a=t.split("!+");if("Backspace"==a[1]||"Delete"==a[1]){var n=e.displayLbl.string;e.displayLbl.string=n.toString().slice(0,n.length-1),e.isPassword&&(e.pwd=e.pwd.slice(0,e.pwd.length-1))}else if(a[1].length<2)if(e.isNumeric){var i=/[1-9]/;e.displayLbl.string.length>0&&(i=/[0-9]/),i.test(a[1])&&e.displayLbl.string.toString().length<e.limit&&(e.displayLbl.string+=a[1]),e.onValueChange()}else e.isEmail&&e.displayLbl.string.toString().length<e.limit?e.displayLbl.string+=a[1]:e.isPassword&&e.displayLbl.string.toString().length<e.limit?(e.displayLbl.string+="*",e.pwd+=a[1]):e.displayLbl.string.toString().length<e.limit&&(e.displayLbl.string+=a[1]);else"Enter"==a[1]&&e.removeKbInput()}}},this.node)}},onValueChangeEnd:function(){this.callbacks.forEach(function(e){null==e&&null==e||e()},this)},registerCallbacksEnd:function(e){null==e&&null==e||this.callbacks.push(e)},removeKbInput:function(){this.removeCursor(),this.cursorAdded=!1,this.unschedule(a),this.isEditing=!1,this.isSelected=!1,this.onValueChangeEnd(),this.editorClicked=!1},onValueChange:function(){this.callbacksMaxCheck.forEach(function(e){null==e&&null==e||e()},this)},registerCallbacks:function(e){null==e&&null==e||this.callbacksMaxCheck.push(e)},onDisable:function(){this.isEditing=!1,this.isSelected=!1},getPassword:function(){return this.pwd},setPassword:function(e){this.pwd=e}}),cc._RF.pop()},{EventEmitter:"EventEmitter"}],DealerChatPanel:[function(e,t){"use strict";cc._RF.push(t,"04161yEt31Me7zPygVl06Xk","DealerChatPanel"),e("JohnyChat"),cc.Class({extends:cc.Component,properties:{pokerModel:{default:null,type:cc.Node},pokerGame:null,chatGridParent:{default:null,type:cc.Node},chatContent:{default:null,type:cc.Prefab},other:{default:null,type:cc.Node},loaded:!1},onLoad:function(){this.loaded||(this.loaded=!0,this.pokerGame=this.pokerModel.getComponent("PokerModel"),this.registerBroadcast(),this.other&&this.other.getComponent("JohnyChat").onLoad())},onEnable:function(){0==this.chatGridParent.children.length?this.node.parent.children[2].active=!0:this.node.parent.children[2].active=!1},start:function(){},onDestroy:function(){this.pokerGame||this.pokerGame.off(K.PokerEvents.OnDealerChat,this.onChatFunc)},generateChat:function(e){var t=cc.instantiate(this.chatContent);t.getComponent(cc.RichText).string=e,this.chatGridParent.addChild(t)},registerBroadcast:function(){this.pokerGame&&(this.pokerGame.off(K.PokerEvents.OnDealerChat,this.onChat.bind(this)),this.pokerGame.on(K.PokerEvents.OnDealerChat,this.onChat.bind(this)))},onChat:function(e){var t="<color=#000000>"+e.message+"</c>";this.showMessages(t)},showMessages:function(e){this.unscheduleAllCallbacks(),this.pokerGame&&this.generateChat(e)},showTabHistory:function(){this.pokerGame.showHandHistoryDetail()}}),cc._RF.pop()},{JohnyChat:"JohnyChat"}],Decks:[function(e,t){"use strict";cc._RF.push(t,"437c6QaLtVGsp2JpTMlpRdq","Decks");var a=e("CardTypes");function n(e){this._numberOfDecks=e,this._cardIds=new Array(52*e),this.reset()}n.prototype.reset=function(){this._cardIds.length=52*this._numberOfDecks;for(var e=0,t=a.Card.fromId,n=0;n<this._numberOfDecks;++n)for(var i=0;i<52;++i)this._cardIds[e]=t(i),++e},n.prototype.draw=function(){var e=this._cardIds,t=e.length;if(0===t)return null;var a=Math.random()*t||0,n=e[a],i=e[t-1];return e[a]=i,e.length=t-1,n},t.exports=n,cc._RF.pop()},{CardTypes:"CardTypes"}],DepositOne:[function(e,t){"use strict";cc._RF.push(t,"24cd8O/L6BI3bS9r2J69Cg1","DepositOne"),e("PopUpManager").PopUpManager;var a=e("PopUpManager").PopUpType,n=e("PopUpBase");cc.Class({extends:n,properties:{bankHolderList:{default:null,type:cc.Node},scrollViewEmpty:{default:null,type:cc.Node},scrollView:{default:null,type:cc.Node},scrollViewItem:{default:null,type:cc.Node},vpHistoryNode:{default:null,type:cc.Node},vpSuccess:{default:null,type:cc.Node},vpSuccessItem:{default:null,type:cc.Node},vpErrorMessage:{default:null,type:cc.Label},vpSubmit:{default:null,type:cc.Button},vpPhone:{default:null,type:cc.EditBox},vpWithdrawAmount:{default:null,type:cc.EditBox},vpWithdrawAccount:{default:null,type:cc.EditBox},playerName:{default:null,type:cc.Label},playerId:{default:null,type:cc.Label},playerImg:{default:null,type:cc.Sprite},flagScrollView:{default:null,type:cc.Node},flagScrollViewContent:{default:null,type:cc.Node},flagItem:{default:null,type:cc.Node},selectedBankNode:{default:null,type:cc.Node},selectedBankNodePlaceHolder:{default:null,type:cc.Node}},onLoad:function(){var e=this;this.playerName.string=GameManager.user.userName,this.playerId.string=GameManager.user.playerId,GameManager.getBankList(function(t){console.log("GameManager.getBankList",t.data),e.flagScrollViewContent.removeAllChildren();for(var a=0;a<t.data.length;a++){var n=cc.instantiate(e.flagItem);n.setPosition(0,0),n.active=!0,function(e,t){cc.loader.load(e,function(e,a){t.children[0].getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(a)})}(K.ServerAddress.assets_server_s+t.data[a].bankIcon,n),n.children[1].getComponent(cc.Label).string=t.data[a].bankName,n.getComponent(cc.Button).clickEvents[0].customEventData=t.data[a].id,n.parent=e.flagScrollViewContent,n.__data=t.data[a]}})},onEnable:function(){this.playerImg.spriteFrame=GameManager.user.urlImg},onShow:function(e){this.data=e,this.vpWithdrawAmount.string=this.data.price+" MNT"},onDeposit:function(){var e=this;this.vpErrorMessage.string="",GameManager.createRequest(this.vpWithdrawAccount.string,"+976"+this.vpPhone.string,this.selectedBankNode.productId,this.selectedBankNode.bankId,function(t){console.log("GameManager.createRequest",t),1==t.success||"success"==t.status?(e.vpErrorMessage.string="",e.vpSuccess.active=!0,e.vpSuccessItem.children[0].getComponent(cc.Sprite).spriteFrame=e.selectedBankNode.children[0].getComponent(cc.Sprite).spriteFrame,e.vpSuccessItem.children[1].getComponent(cc.Label).string=t.data.referenceId):(e.vpErrorMessage.node.active=!0,t.message?e.vpErrorMessage.string=t.message:e.vpErrorMessage.string=t.error[0].message)})},onHistory:function(){var e=this;GameManager.getHistory(function(t){if(console.log("GameManager.getHistory",t),e.vpHistoryNode.active=!0,1==t.success||"success"==t.status)if(e.scrollView.removeAllChildren(),0==t.data.history.length)e.scrollViewEmpty.active=!0;else{e.scrollViewEmpty.active=!1;for(var a=0;a<t.data.history.length;a++){var n=cc.instantiate(e.scrollViewItem);n.setPosition(0,0),n.active=!0,n.children[0].getComponent(cc.Label).string=(i=t.data.history[a].updatedAt,o=void 0,o=new Date(i),String(o.getDate()).padStart(2,"0")+"-"+String(o.getMonth()+1).padStart(2,"0")+"-"+o.getFullYear()+" "+String(o.getHours()).padStart(2,"0")+":"+String(o.getMinutes()).padStart(2,"0")),n.children[1].getComponent(cc.Label).string=t.data.history[a].depositAmount,n.children[2].getComponent(cc.Label).string=t.data.history[a].chipsValue,n.children[3].getComponent(cc.Label).string=t.data.history[a].referenceId,"PENDING"==t.data.history[a].status?(n.children[4].active=!1,n.children[5].active=!0,n.children[6].active=!1):"APPROVED"==t.data.history[a].status?(n.children[4].active=!0,n.children[5].active=!1,n.children[6].active=!1):(n.children[4].active=!1,n.children[5].active=!1,n.children[6].active=!0),n.parent=e.scrollView,n.children[7].active=!0,t.data.history.length-1==a&&(n.children[7].active=!1)}}var i,o})},onCloseSuccess:function(){this.vpSuccess.active=!1,cc.sys.openURL(this.selectedBankNode.redirectLink)},onBack:function(){this.node.active=!1,this.vpWithdrawAccount.string="",this.vpPhone.string="",this.selectedBankNode.active=!1,this.selectedBankNode.children[0].getComponent(cc.Sprite).spriteFrame=null,this.selectedBankNode.children[1].getComponent(cc.Label).string="",this.selectedBankNode.children[3].getComponent(cc.Label).string="",this.selectedBankNodePlaceHolder.active=!0,this.vpSubmit.interactable=!1,this.flagScrollViewContent.children.forEach(function(e){e.children[2].getComponent(cc.Toggle).isChecked=!1},this)},onHistoryBack:function(){this.vpHistoryNode.active=!1},onCopy:function(){window.navigator.clipboard.writeText(this.playerId.string).then(function(){console.log("PlayerId copied to clipboard")}).catch(function(e){console.error("Could not copy playerId: ",e)}),GameManager.popUpManager.show(a.NotificationPopup,"PlayerId copied!",function(){})},onCopyIBan:function(){window.navigator.clipboard.writeText(this.vpSuccessItem.children[1].getComponent(cc.Label).string).then(function(){console.log("PlayerId copied to clipboard")}).catch(function(e){console.error("Could not copy playerId: ",e)}),GameManager.popUpManager.show(a.NotificationPopup,"PlayerId copied!",function(){})},showFlagScrollView:function(){this.flagScrollView.active=!this.flagScrollView.active},hideFlagScrollView:function(){this.flagScrollView.active=!1},onSelectButton:function(e,t){console.log("onSelectButton",t),this.flagScrollViewContent.children.forEach(function(e){e.children[2].getComponent(cc.Toggle).isChecked=!1},this),e.target.children[2].getComponent(cc.Toggle).isChecked=!0,this.hideFlagScrollView(),this.selectedBankNode.active=!0,this.selectedBankNode.children[0].getComponent(cc.Sprite).spriteFrame=e.target.children[0].getComponent(cc.Sprite).spriteFrame,this.selectedBankNode.children[1].getComponent(cc.Label).string=e.target.__data.bankName,this.selectedBankNode.children[3].getComponent(cc.Label).string=e.target.__data.ibanNumber,this.selectedBankNode.bankId=e.target.__data.id,this.selectedBankNode.productId=this.data._id,this.selectedBankNode.redirectLink=e.target.__data.redirectLink,this.selectedBankNode.ibanNumber=e.target.__data.ibanNumber,this.selectedBankNodePlaceHolder.active=!1,this.onCheck()},onCheck:function(){this.vpSubmit.interactable=!1,""!==this.vpPhone.string&&""!==this.vpWithdrawAccount.string&&this.selectedBankNode.active&&(this.vpSubmit.interactable=!0)}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],DisableScrollOnButton:[function(e,t){"use strict";cc._RF.push(t,"7d871OLfztAxajc5QSa2836","DisableScrollOnButton"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchmove",this.onTouchMove,this),this.node.on("touchend",this.onTouchEnd,this),this.node.on("touchcancel",this.onTouchCancel,this)},onTouchStart:function(){GameScreen.gridParent.getComponent(cc.PageView)._unregisterEvent()},onTouchMove:function(){},onTouchEnd:function(){GameScreen.gridParent.getComponent(cc.PageView)._registerEvent()},onTouchCancel:function(){GameScreen.gridParent.getComponent(cc.PageView)._registerEvent()}}),cc._RF.pop()},{}],DisconnectPopup:[function(e,t){"use strict";cc._RF.push(t,"9c422ySvWpItqMXdgB3VIHf","DisconnectPopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase");cc.Class({extends:i,properties:{preLogin:{default:null,type:cc.Node},popUpManager:{default:null,type:a},popUpHeading:{default:null,type:cc.Label},infoLbl:{default:null,type:cc.Label},code:{default:0},retryNode:{default:null,type:cc.Node},simpleNode:{default:null,type:cc.Node},quitNode:{default:null,type:cc.Node}},onShow:function(e){if(console.log("max disconnect",JSON.stringify(e)),!this.holdSessionPopup&&(this.preserveState=!1,null!=e))switch(this.retryNode.active=!1,this.simpleNode.active=!1,this.infoLbl.string=e.response||"",this.code=e.code||0,this.errorType=e.errorType||"",this.popUpHeading.string=LocalizedManager.t("TXT_INFORMATION"),this.code){case 9999:this.infoLbl.string=e.response,this.simpleNode.active=!0;break;case 6666:this.infoLbl.string=e.response,this.simpleNode.active=!0;case 3333:this.infoLbl.string=e.response,this.simpleNode.active=!0;break;case K.Error.TimeOutError:this.infoLbl.string=LocalizedManager.t("TXT_CHECK_YOUR_CONNECTION");break;case K.Error.ConnectionError:this.quitNode.active=!1,this.simpleNode.active=!1,this.retryNode.active=!0,this.infoLbl.string=LocalizedManager.t("TXT_CONNECTION_LOST");break;case K.Error.SuccessFalseError:this.quitNode.active=!1,this.retryNode.active=e.isRetry,this.simpleNode.active=!e.isRetry,this.infoLbl.string=e.response;break;case K.Error.KeyMissingBroadcasts:this.retryNode.active=!0,this.infoLbl.string=LocalizedManager.t("TXT_CONNECTION_LOST");break;case K.Error.PlayerSessionShiftedOnServer:this.simpleNode.active=!0,this.infoLbl.string=e.response,this.holdSessionPopup=!0;break;case K.Error.FeatureComingSoon:this.simpleNode.active=!0,this.infoLbl.string=e.response;break;case K.Error.ServerDown:this.quitNode.active=!1,this.retryNode.active=!1,this.simpleNode.active=!0,this.infoLbl.string=e.response,this.popUpHeading.string=e.heading,this.holdSessionPopup=!0,this.preserveState=e.preserveState;break;case K.Error.SessionError:this.retryNode.active=!1,this.simpleNode.active=!0,this.quitNode.active=!1,this.infoLbl.string=e.response,this.errorType=K.Error.SessionError;break;default:this.retryNode.active=!0,this.infoLbl.string=LocalizedManager.t("TXT_CONNECTION_LOST")}},onLoad:function(){this.holdSessionPopup=!1,this.preserveState=!1},onClickEnter:function(){},onCancel:function(){GameManager.logout()},onIgnore:function(){return GameManager.playSound(K.Sounds.click),this.popUpManager.hide(n.DisconnectDialog,function(){}),this.errorType==K.Error.UpdateAvailable&&(GameManager.isMobile?cc.sys.openURL(K.ServerAddress.update_Required_URL):GameManager.logout()),9999==this.errorType||3333==this.errorType?(this.holdSessionPopup&&(this.holdSessionPopup=!1),void GameManager.logout3()):this.errorType==K.Error.SessionError?(this.holdSessionPopup&&(this.holdSessionPopup=!1),this.popUpManager.hideAllPopUps(),cc.systemEvent.emit("leaveLobby"),cc.sys.localStorage.setItem("auto_login_token",null),cc.sys.localStorage.setItem("auto_login_refresh_token",null),cc.sys.localStorage.setItem("auto_login_access_token_expire_at",null),cc.sys.localStorage.setItem("auto_login_refresh_token_expire_at",null),cc.sys.localStorage.setItem("auto_login_username",null),void ScreenManager.showScreen(K.ScreenEnum.LoginScreen,!1,function(){(cc.sys.os!==cc.sys.OS_WINDOWS||cc.sys.isBrowser)&&self&&(ServerCom.inGame=!0)})):(this.holdSessionPopup&&!this.preserveState&&(this.holdSessionPopup=!1,GameManager.isMobile,GameManager.logout()),this.holdSessionPopup&&(this.holdSessionPopup=!1),this.code==K.Error.SessionError&&window.location.reload(),void(9999==this.code&&GameManager.logout()))},onDownload:function(){GameManager.playSound(K.Sounds.click),this.popUpManager.hide(n.DisconnectDialog,function(){}),cc.sys.openURL("https://metamask.io/download/")},onWhite:function(){GameManager.playSound(K.Sounds.click),this.popUpManager.hide(n.DisconnectDialog,function(){}),GameManager.logout()},onRetryCancel:function(){GameManager.logout()},onRetry:function(){this.popUpManager.hide(n.DisconnectDialog,function(){}),this.preLogin.active=!0,socketIO.socket.disconnect(),socketIO.socket.connect()}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],DragManager:[function(e,t){"use strict";cc._RF.push(t,"48790KZt1lBiqmEYJdQ0mFB","DragManager");var a=e("EventEmitter");cc.Class({extends:a,properties:{dropZones:{default:[],type:[cc.Node]},dragElements:{default:[],type:[cc.Node]}},onLoad:function(){},addDropZone:function(e){-1==this.dropZones.indexOf(e)&&this.dropZones.push(e)},removeDropZone:function(e){-1!=this.dropZones.indexOf(e)&&this.dropZones.splice(this.dropZones.indexOf(e),1)},addDragElement:function(e){-1==this.dragElements.indexOf(e)&&this.dragElements.push(e)},removeDragElement:function(e){-1!=this.dragElements.indexOf(e)&&this.dragElements.splice(this.dragElements.indexOf(e),1)},removeAllCards:function(){for(;this.dropZones.length>5;)this.dropZones.pop()}}),cc._RF.pop()},{EventEmitter:"EventEmitter"}],DropDownOption:[function(e,t){"use strict";cc._RF.push(t,"2f22cqQD5ZMgqLPyqUB0alL","DropDownOption");var a=e("DropDown"),n=e("DropList");cc.Class({extends:cc.Component,properties:{dropDownRef:{default:null,type:a},dropListRef:{default:null,type:n},label:{default:null,type:cc.Label}},onLoad:function(){this.label=this.node.getComponentInChildren(cc.Label),this.setMouseEventListeners(),this.node.color=new cc.Color(36,36,36)},setMouseEventListeners:function(){this.node.on("mouseenter",function(){this.node.color=new cc.Color(167,24,25)},this),this.node.on("mouseleave",function(){this.node.color=new cc.Color(36,36,36)},this)},onClick:function(){var e={option:this.dropDownRef.isColor?this.node.children[0].color:this.label.string,node:this.node};this.dropDownRef.onOptionSelect(e),this.dropListRef.popOut()},setOptionLabel:function(e){null===this.label&&(this.label=this.node.getComponentInChildren(cc.Label)),this.label.string=e},setOptionColor:function(e){this.node.children[0].color=e}}),cc._RF.pop()},{DropDown:"DropDown",DropList:"DropList"}],DropDown:[function(e,t){"use strict";cc._RF.push(t,"45311eXwXdC8Zz8xYg/YJ+X","DropDown"),cc.Class({extends:cc.Component,properties:{optionLabel:{default:null,type:cc.Label},optionColor:{default:null,type:cc.Node},prevSelection:{default:null},callback:{default:null},original:{default:null,type:cc.Node},contentHolder:{default:null,type:cc.Node},isColor:{default:!1}},onLoad:function(){this.contentHolder.children.length>0&&this.showDefault()},onClick:function(){GameManager.playSound(K.Sounds.click)},reset:function(){this.isColor||(this.optionLabel.string="")},showDefault:function(e){if(void 0===e&&(e=!0),this.reset(),e)if(null!==this.prevSelection&&null!=this.prevSelection.node)this.onOptionSelect(this.prevSelection);else{var t=this.contentHolder.children[0];if(null!=t){var a={option:this.isColor?t.children[0].color:t.getComponentInChildren(cc.Label).string,node:t};this.onOptionSelect(a)}else this.reset()}},setColor:function(e,t){for(var a=0;a<this.contentHolder.children.length;a++){var n=this.contentHolder.children[a].children[0];if(n.color.r==e.r&&n.color.g==e.g&&n.color.b==e.b){var i={option:e,node:n};t?this.onOptionSelect(i):(this.optionColor.color=object.option,this.prevSelection=object)}}},onOptionSelect:function(e){this.isColor?this.optionColor.color=e.option:this.optionLabel.string=e.option,this.prevSelection=e,null!==this.callback&&void 0!==this.prevSelection.node&&this.callback(e.option)},setContent:function(e,t){void 0===t&&(t=!0),this.unscheduleAllCallbacks(),this.contentHolder.parent.parent.scaleY=.001,this.contentHolder.parent.parent.opacity=0,this.clearContent();var a=0,n=null;for(a=0;a<e.length;a++)(n=this.createContent(e[a])).active=!0,this.contentHolder.addChild(n);this.scheduleOnce(function(){this.contentHolder.parent.parent.scaleY=0,this.contentHolder.parent.parent.opacity=255}.bind(this),.5),a==e.length&&a>0&&this.showDefault(t)},clearContent:function(){this.contentHolder.children,this.contentHolder.removeAllChildren(),this.reset()},createContent:function(e){var t=cc.instantiate(this.original);return this.isColor?t.getComponent("DropDownOption").setOptionColor(e):t.getComponent("DropDownOption").setOptionLabel(e),t},registerCallback:function(e){this.callback=e},removeAllCallbacks:function(){this.callback=null},getSelection:function(){return this.isColor?this.optionColor.color:this.optionLabel.string}}),cc._RF.pop()},{}],DropList:[function(e,t){"use strict";cc._RF.push(t,"fbb63LMN0BPiKHp4/sbEl5u","DropList"),cc.Class({extends:cc.Component,properties:{reverse:{default:!1,visible:!1},ifClicked:!1,listener:null},onLoad:function(){this.dropAct=this.dropAction(),this.liftAct=this.liftAction(),GameManager.node.on("dropdown-out",function(e){e!=this&&this.popIn()}.bind(this));var e=this;this.listener=cc.EventListener.create({event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:function(t,a){var n=t.getLocation();!e.ifClicked||e.testNodeClicked(e.node,n,!0)||e.testNodeClicked(e.node.parent.getChildByName("Button"),n,!1)||(e.popIn(),a.stopPropagation())}}),cc.eventManager.addListener(this.listener,this.node)},testNodeClicked:function(e,t,a){var n=e.width,i=a?e.height+this.node.parent.height:e.height,o=cc.rect(0,0,n,i),s=t.x-o.x,r=o.x+o.width-t.x,l=t.y-o.y,c=o.y+o.height-t.y;return s>=0&&r>=0&&c>=0&&l>=0},dropAction:function(){return cc.scaleBy(.35,1,100).easing(cc.easeCubicActionOut())},liftAction:function(){var e=this,t=cc.scaleBy(.35,1,0).easing(cc.easeCubicActionOut());return cc.sequence(t,cc.callFunc(function(){e.node.active=!1}))},popOut:function(){this.node.stopAllActions(),this.reverse?this.popIn():(GameManager.node.emit("dropdown-out",this),this.node.scaleY=.01,this.node.active=!0,this.node.runAction(this.dropAct),this.reverse=!0,this.ifClicked=!0)},popIn:function(){this.reverse&&(this.ifClicked=!1,this.node.scaleY=1,this.node.runAction(this.liftAct),this.reverse=!1)},rectApplyAffineTransformIn:function(e,t){var a=e.x,n=e.y,i=a+e.width,o=n+e.height,s=t.a*a+t.c*n+t.tx,r=t.b*a+t.d*n+t.ty,l=t.a*i+t.c*n+t.tx,c=t.b*i+t.d*n+t.ty,d=t.a*a+t.c*o+t.tx,h=t.b*a+t.d*o+t.ty,u=t.a*i+t.c*o+t.tx,p=t.b*i+t.d*o+t.ty,m=Math.min(s,l,d,u),g=Math.max(s,l,d,u),f=Math.min(r,c,h,p),y=Math.max(r,c,h,p);return e.x=m,e.y=f,e.width=g-m,e.height=y-f,e}}),cc._RF.pop()},{}],EditBoxUtil:[function(e,t){"use strict";cc._RF.push(t,"849baNY0nlIVJTASl8YkMRL","EditBoxUtil"),cc.Class({extends:cc.Component,properties:{editBox:{default:null,type:cc.EditBox},defaultString:{default:null,type:cc.Label},default:{default:""},isNumericOnly:!1,isModifyLabel:!1,callbacks:[],callbacksMinCheck:[]},onLoad:function(){this.defaultString&&""==this.defaultString.string&&(this.defaultString.string=this.default.string)},onEditStarted:function(){this.defaultString.string=""},onTextChanged:function(){if(this.isNumericOnly){if(isNaN(this.editBox.string))e=(e=this.editBox.string).slice(0,e.length-1),this.editBox.string=e;else{this.editBox.string=this.editBox.string.toString().trim();var e=".";-1!=this.editBox.string.indexOf(e)&&(t=(t=this.editBox.string).slice(0,t.length-1),this.editBox.string=t);var t,a=/[1-9]/;this.editBox.string.length>1&&(a=/[0-9]/),a.test(this.editBox.string)||(t=(t=this.editBox.string).slice(0,t.length-1),this.editBox.string=t)}this.onValueChange()}},onEditEnd:function(){""===this.editBox.string&&this.default?this.defaultString.string=this.default:this.isModifyLabel&&(this.defaultString.string=this.editBox.string,this.editBox.string=""),this.onValueChangeEnd()},onValueChange:function(){this.callbacks.forEach(function(e){null==e&&null==e||e()},this)},registerCallbacks:function(e){null==e&&null==e||this.callbacks.push(e)},onValueChangeEnd:function(){this.callbacksMinCheck.forEach(function(e){null==e&&null==e||e()},this)},registerCallbacksEnd:function(e){null==e&&null==e||this.callbacksMinCheck.push(e)}}),cc._RF.pop()},{}],Emitter:[function(e,t){"use strict";function a(e){if(e)return n(e)}function n(e){for(var t in a.prototype)e[t]=a.prototype[t];return e}cc._RF.push(t,"354a9wuZ0lImaecNtPbRcfu","Emitter"),t.exports=a,a.prototype.on=a.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},a.prototype.once=function(e,t){var a=this;function n(){a.off(e,n),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},a.prototype.off=a.prototype.removeListener=a.prototype.removeAllListeners=a.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var a,n=this._callbacks[e];if(!n)return this;if(1==arguments.length)return delete this._callbacks[e],this;for(var i=0;i<n.length;i++)if((a=n[i])===t||a.fn===t){n.splice(i,1);break}return this},a.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),a=this._callbacks[e];if(a)for(var n=0,i=(a=a.slice(0)).length;n<i;++n)a[n].apply(this,t);return this},a.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},a.prototype.hasListeners=function(e){return!!this.listeners(e).length},cc._RF.pop()},{}],EnterPasswordPopup:[function(e,t){"use strict";cc._RF.push(t,"527d6rOC7RAGZ74TMK6wlSr","EnterPasswordPopup"),e("PopUpManager").PopUpManager;var a=e("PopUpManager").PopUpType,n=e("PopUpBase");cc.Class({extends:n,properties:{passwordEditBox:{default:null,type:cc.EditBox}},onLoad:function(){},onShow:function(e){this.passwordEditBox.string="",this.data=e},onSubmit:function(){GameManager.playSound(K.Sounds.click),""!=this.passwordEditBox.string&&("WAITING_LIST"==this.data.type?this.data.toCallFunction(this.data.flag,this.data.id,function(e){this.data.cb(e,this.onQuit.bind(this))}.bind(this),null,this.passwordEditBox.string):(this.data.data.password=this.passwordEditBox.string,ServerCom.pomeloRequest(this.data.route,this.data.data,this.data.onSuccess,this.data.onFail)))},onQuit:function(){GameManager.popUpManager.hide(a.EnterPasswordPopup,function(){}),GameManager.playSound(K.Sounds.click)}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],EventEmitter:[function(e,t){"use strict";cc._RF.push(t,"64109ShV6tPlr1WU8SotD+x","EventEmitter"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},on:function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks[e]=this._callbacks[e]||[]).push(t),this},once:function(e,t){var a=this;function n(){a.off(e,n),t.apply(this,arguments)}return this._callbacks=this._callbacks||{},n.fn=t,this.on(e,n),this},removeAllListeners:function(){this._callbacks=this._callbacks||{},this._callbacks={}},off:function(e,t){this._callbacks=this._callbacks||{};var a,n=this._callbacks[e];if(!n)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(var i=0;i<n.length;i++)if((a=n[i])===t||a.fn===t){n.splice(i,1);break}return this},emit:function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),a=this._callbacks[e];if(a)for(var n=0,i=(a=a.slice(0)).length;n<i;++n)a[n].apply(this,t);return this},listeners:function(e){return this._callbacks=this._callbacks||{},this._callbacks[e]||[]},hasListeners:function(e){return!!this.listeners(e).length}}),cc._RF.pop()},{}],ExceptionHandler:[function(e,t){"use strict";cc._RF.push(t,"02281kH0NtET6HRzYxH0lSu","ExceptionHandler");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("EventEmitter"),o=null;cc.Class({extends:cc.Component,properties:{popUpManager:{default:null,type:a},errorEmitters:{default:[],type:i}},start:function(){o=this,this.registerListeners()},registerPomeloEvent:function(e){return function(){if(LoginHandler.isLoading&&(o.popUpManager.hide(n.NotificationPopup,function(){}),K.disconnectRequestedByPlayer?K.disconnectRequestedByPlayer=!1:(o.popUpManager.show(n.NotificationPopup,"Please check your\n Internet Connection.",function(){}),LoginHandler.isLoading=!1)),ServerCom.loading.active=!1,GameManager.isConnected){GameManager.isConnected=!1;var t={code:K.Error.ConnectionError,response:e};o.popUpManager.hideAllPopUps(),K.disconnectRequestedByPlayer?K.disconnectRequestedByPlayer=!1:ScreenManager.currentScreen===K.ScreenEnum.LoginScreen||ScreenManager.currentScreen===K.ScreenEnum.SignupScreen||o.popUpManager.show(n.DisconnectDialog,t,function(){})}GameManager.isConnected||LoginHandler.isLoading||!K.disconnectRequestedByPlayer||(K.disconnectRequestedByPlayer=!1)}},isValid:function(e){return null!=e&&null!=e},registerListeners:function(){},PlayerSessionShifted:function(){return function(e){GameManager.isConnected=!1;var t="";if("browser"==e)t=LocalizedManager.t("TXT_LOGGED_OTHER_DEVICE_WEB");else if("androidApp"==e)t=LocalizedManager.t("TXT_LOGGED_IN_ANDROID");else if("iosApp"==e)t=LocalizedManager.t("TXT_LOGGED_IN_IOS");else if("windows"==e||"mac"==e)t=LocalizedManager.t("TXT_LOGGED_PC");else if("another device"==e)t=LocalizedManager.t("TXT_LOGGED_IN_OTHER_DEVICE");else if("ServerDown"==e){t=LocalizedManager.t("TXT_LOGOUT_SERVER_MAINTENANCE");var a={code:K.Error.ServerDown,heading:"Server Down",response:t,preserveState:!1};o.popUpManager.hideAllPopUps(),o.popUpManager.show(n.DisconnectDialog,a,function(){})}a={code:K.Error.PlayerSessionShiftedOnServer,response:t},o.popUpManager.hideAllPopUps(),o.popUpManager.show(n.DisconnectDialog,a,function(){})}},handleSuccessFalse:function(e){if(e.channelId&&GameScreen)for(var t=0;t<GameScreen.gameModel.activePokerModels.length;t++)if(e.channelId===GameScreen.gameModel.activePokerModels[t].gameData.channelId)return void GameScreen.gameModel.activePokerModels[t].popUpManager.show(n.DisconnectDialog,e,function(){});this.popUpManager.hide(n.DisconnectDialog,function(){}),"Specified verison does not exist!"==e.response||"An updated version is required to continue playing the game. Kindly reload the game."==e.response||"An updated version is required to continue playing the game. Kindly download the updated build."==e.response||this.popUpManager.show(n.DisconnectDialog,e,function(){})}}),cc._RF.pop()},{EventEmitter:"EventEmitter",PopUpManager:"PopUpManager"}],Extensions:[function(e,t){"use strict";cc._RF.push(t,"e6775O4PENIgKD+jCI7N/4b","Extensions"),Number.prototype.roundOff=function(e){return Number(this.toFixed(e))},Number.prototype.clamp=function(e,t){return Math.max(e,Math.min(this,t))},Number.prototype.clamp01=function(){return Math.max(0,Math.min(this,1))},String.prototype.toNumber=function(){return Number(this)},String.prototype.getNumber=function(){return this.replace(/\D/g,"")},String.prototype.getDecimal=function(){return parseFloat(this.match(/[\d\.]+/))},Math.roundOff=function(e,t){return e=Number(e),Number(e.toFixed(t))},cc._RF.pop()},{}],FBService:[function(e,t){"use strict";cc._RF.push(t,"596c5u6IDRI/qbPu9x5s3KV","FBService");var a=null;cc.Class({extends:cc.Component,properties:{fbObject:{default:null,visible:!1},debugLabel:{default:null,type:cc.Label}},onLoad:function(){a=this},start:function(){},onLogin:function(){this.debugLabel.string="OnLoginBtn!"},onLogout:function(){sdkbox.PluginFacebook.isLoggedIn()&&sdkbox.PluginFacebook.logout()},onLoginSuccess:function(){sdkbox.PluginFacebook.isLoggedIn()&&sdkbox.PluginFacebook.requestReadPermissions(["public_profile","email"])},onPermissionSuccess:function(e,t){var n={name:"",email:"",token:""};a.fbObject=t,this.debugLabel.string=a.fbObject,n.name=a.fbObject.name,n.email=a.fbObject.email,n.token=a.fbObject,a.login.onSocialLogin(n,"facebook")}}),cc._RF.pop()},{}],ForgotPasswordPopUp:[function(e,t){"use strict";cc._RF.push(t,"3a0ec9qaLVGKqPlPTiNcdit","ForgotPasswordPopUp");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase");e("SliderTouch"),e("Checkbox"),cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},EmailId:{default:null,type:cc.EditBox},ResponseLabel:{default:null,type:cc.Label},submitButton:{default:null,type:cc.Button},quitButton:{default:null,type:cc.Button},background:{default:null,type:cc.Node},DarkBoundarybackground:{default:null,type:cc.Node}},onForgotPasswordResponse:function(){},onLoad:function(){this.EmailId.placeholder=LocalizedManager.t("TXT_ENTER_YOUR_REGISTERED_EMAIL")},onShow:function(){this.ResponseLabel.string="",this.EmailId.placeholder=LocalizedManager.t("TXT_ENTER_YOUR_REGISTERED_EMAIL")},onQuit:function(){GameManager.playSound(K.Sounds.click),this.EmailId.string="",this.popUpManager.hide(n.ForgotPasswordPopUp,function(){})},onSubmit:function(){if(GameManager.playSound(K.Sounds.click),K.internetAvailable)if(""==this.EmailId.string||this.EmailId.string.length<=0)this.EmailId.placeholder="Enter A Valid Email Id";else{var e=K.ServerAddress.ipAddress+":"+K.ServerAddress.port+K.ServerAPI.forgotPassword,t={emailId:this.EmailId.string};ServerCom.httpPostRequest(e,t,function(e){null!=e.keepPopUpAlive&&e.keepPopUpAlive||this.onQuit()}.bind(this))}else GameManager.popUpManager.show(n.NotificationPopup,"Please check your\n Internet Connection.",function(){})}}),cc._RF.pop()},{Checkbox:"Checkbox",PopUpBase:"PopUpBase",PopUpManager:"PopUpManager",SliderTouch:"SliderTouch"}],ForgotPassword:[function(e,t){"use strict";cc._RF.push(t,"47e16cjqPJFPY8gZLNpug0K","ForgotPassword");var a=e("AbstractScreen");cc.Class({extends:a,properties:{email:{default:null,type:cc.EditBox}},onLoad:function(){},onShow:function(){},onHide:function(){ScreenManager.showScreen(K.ScreenEnum.LoginScreen,10,function(){},!1)}}),cc._RF.pop()},{AbstractScreen:"AbstractScreen"}],FramesController:[function(e,t){"use strict";cc._RF.push(t,"1b270hF8WtH+rFtQUkpjFyB","FramesController"),cc.Class({extends:cc.Component,properties:{actionNode:{default:null,type:cc.Node},sprite:{default:null,type:cc.Sprite},stayTime:0,fadeInTime:0,fadeOutTime:0,frames:{default:[],type:cc.SpriteFrame}},onEnable:function(){this.node.opacity=255,this.length=this.frames.length,this.currentIndex=0,this.sprite.spriteFrame=this.frames[this.currentIndex],this.execute()},onDisable:function(){this.node.stopAllActions(),this.unscheduleAllCallbacks()},execute:function(){var e=this;this.length>1&&this.scheduleOnce(function(){e.preformFadeActions()},this.stayTime)},preformFadeActions:function(){var e=this;this.actionNode.runAction(cc.sequence(cc.fadeOut(this.fadeInTime),cc.callFunc(function(){e.currentIndex++,e.currentIndex==e.length&&(e.currentIndex=0),e.sprite.spriteFrame=e.frames[e.currentIndex]}),cc.fadeIn(e.fadeInTime),cc.callFunc(function(){e.execute()})))},onClick:function(){window.open("https://pokerbuddy365.com")}}),cc._RF.pop()},{}],FreeBuyInPopup:[function(e,t){"use strict";cc._RF.push(t,"17271rZqnBPNYanT6w5jZdv","FreeBuyInPopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase"),o=e("SliderTouch");e("CustomEditBox"),e("EditBoxUtil"),e("PostTypes").SetPlayerValData,cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},totalChipsLbl:{default:null,type:cc.Label},minLbl:{default:null,type:cc.Label},maxLbl:{default:null,type:cc.Label},sliderTouch:{default:null,type:o},editBox:{default:null,type:cc.EditBox},callback:{default:null,visible:!1},index:{default:0,visible:!1},minAmount:{default:0,visible:!1},maxAmount:{default:10,visible:!1},msgLbl:{default:null,type:cc.Label}},gridRefreshed:function(){},onDestroy:function(){},onEnable:function(){},onLoad:function(){},onShow:function(e){GameManager.emit("disablePageView"),this.buyinContent.active=!0,this.rebuyContent.active=!1,this.sound=e.playSound,this.dialogHeadingText.string=e.dialogHeadingText,this.topHeadingLbl.string=e.topHeading;var t=e.maxValue<=0?"":LocalizedManager.t("TXT_FUNDS_INSUFFICIENT");e.minValue<=0&&(e.minValue=1),e.maxValue>0&&(e.maxValue=e.maxValue<e.totalChips?e.maxValue:e.totalChips),this.disableView(e.maxValue<e.minValue,t,e.maxValue<=0),e.maxValue<e.minValue&&(e.minValue=0,e.maxValue=0),e.minValue=Math.floor(e.minValue),e.maxValue=Math.floor(e.maxValue),this.editBox.string=e.minValue.toString(),this.minLbl.string=e.minValue.toString(),this.maxLbl.string=e.maxValue.toString(),this.minAmount=e.minValue,this.maxAmount=e.maxValue;var a=(this.minAmount+this.maxAmount)/2;a>0&&this.sliderTouch.setSliderValue(a/(this.maxAmount+this.minAmount)),this.totalChipsLbl.string=Number(e.totalChips.toFixed(2))},onMin:function(){this.sliderTouch.setSliderValue(0),this.editBox.string=this.minAmount.toString()},onMax:function(){this.sliderTouch.setSliderValue(1),this.editBox.string=this.maxAmount.toString()},onConfirm:function(){this.checkVal()&&(this.callback(this.index,this.editBox.string),GameManager.emit("enablePageView"),this.popUpManager.hide(n.BuyInPopup,function(){}),this.sound&&this.sound(K.Sounds.click))},onCancel:function(){GameManager.emit("enablePageView"),this.popUpManager.hide(n.BuyInPopup,function(){})},checkVal:function(){var e=this.editBox.string;return isNaN(e)?(this.msgLbl.string=LocalizedManager.t("TXT_ENTER_VALID_CHIPS"),!1):e>=this.minAmount?e<=this.maxAmount||(this.msgLbl.string=LocalizedManager.t("TEXT_CANNOT_MORE_CHIPS"),!1):(this.msgLbl.string=LocalizedManager.t("TXT_CANNOT_LESS_CHIPS"),!1)}}),cc._RF.pop()},{CustomEditBox:"CustomEditBox",EditBoxUtil:"EditBoxUtil",PopUpBase:"PopUpBase",PopUpManager:"PopUpManager",PostTypes:"PostTypes",SliderTouch:"SliderTouch"}],FreeRollContent:[function(e,t){"use strict";cc._RF.push(t,"0b18bn3bkpIFK3OjjVa+5G0","FreeRollContent"),e("NewTable");var a=e("PostTypes").FreeRoll;cc.Class({extends:cc.Component,properties:{textFields:{default:[],type:cc.Label},joinButton:{default:null,type:cc.Button},activeSprite:{default:null,type:cc.SpriteFrame},inactiveSprite:{default:null,type:cc.SpriteFrame},tableBg:{default:null,type:cc.Node},joinedBg:{default:null,type:cc.Node}},start:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(){var e=this;console.log("touched",this.node.zIndex),this.getCurrentSelection()==this?this.dblClick&&this.onClickJoin():(this.dblClick=!0,this.timeout=setTimeout(function(){e.dblClick=!1},200)),!this.onSelection||this.onSelection(this)}.bind(this))},init:function(e){this.dblClick=!1,this.getCurrentSelection=e.getCurrentSelection,this.onSelection=e.onSelection,this.freeRoll=new a(e),console.log("free roll data",this.freeRoll)},changeBgColor:function(e){this.tableBg.color=e},changeTextsColor:function(e){this.textFields.forEach(function(t){t.node.color=e})},changeSelection:function(e,t){this.changeBgColor(e),this.changeTextsColor(t)},onClickJoin:function(){this.dblClick=!1,console.log("on click join",this.freeRoll);var e={};e.onSelectVariation=this.onJoin.bind(this),PopupManager.show(PopupManager.PopupType.GameVariation,e)},onJoin:function(e){var t={raceId:this.freeRoll.raceId,configId:this.freeRoll.configId,channelVariation:e,isRequested:this.freeRoll.isRequested,channelType:"NORMAL"};ServerCom.pomeloRequest(K.PomeloAPI.getChannelId,t,function(e){console.log("get channel response",e),e.success&&(t.channelId=e.toJoinTableId,t.playerId=GameManager.user.playerId,t.playerName=GameManager.user.userName,t.tableId=t.configId,console.log("pl",t),ServerCom.pomeloRequest(K.PomeloAPI.joinFreeRoll,t,function(e){console.log("join channel reponse",e),e.success}))})},onStatusChange:function(){}}),cc._RF.pop()},{NewTable:"NewTable",PostTypes:"PostTypes"}],FreeRollPresenter:[function(e,t){"use strict";cc._RF.push(t,"f0ecdMpfaJHNJwiYfHuxiZQ","FreeRollPresenter");var a=e("NewTable"),n=cc.Class({extends:a,properties:{targets:{default:[],type:cc.Node}},onLoad:function(){this.currentSelection=null,this._super(),this.base=n.prototype},start:function(){ServerCom.pomeloRequest(K.PomeloAPI.getFreeRollTables,{},function(e){console.log("free roll response",e),e.success?this.base.init.call(this,e.result,"FreeRollContent"):console.log(e.result)}.bind(this))},onEnable:function(){this.targets.forEach(function(e){e.active=!1})},onDisable:function(){this.targets.forEach(function(e){e.active=!0})}});cc._RF.pop()},{NewTable:"NewTable"}],FriendsList:[function(e,t){"use strict";cc._RF.push(t,"712b7z+bflIcZEFA3P5jPyQ","FriendsList"),e("PopUpManager").PopUpManager,e("PopUpManager").PopUpType,e("PopUpBase"),e("SliderTouch"),e("CustomEditBox"),e("EditBoxUtil"),e("PostTypes").SetPlayerValData,cc.Class({extends:cc.Component,properties:{friendListBtn:{default:null,type:cc.Node},inviteListBtn:{default:null,type:cc.Node},contentNode:{default:null,type:cc.Node},itemNode:{default:null,type:cc.Node},itemNode2:{default:null,type:cc.Node}},onDestroy:function(){},onEnable:function(){},onLoad:function(){cc.systemEvent.on("leaveLobby",this.leaveLobby,this),GameManager.on("BuddyIsOnline",this.onBuddyIsOnline.bind(this)),GameManager.on("sendBuddyRequestReceive",this.onSendBuddyRequestReceive.bind(this)),GameManager.on("handleBuddyRequestReceive",this.onHandleBuddyRequestReceive.bind(this)),GameManager.on("removeBuddyReceive",this.onRemoveBuddyReceive.bind(this))},timeAgo:function(e){for(var t=[{max:3e4,divisor:1,past1:"just now",pastN:"just now",future1:"just now",futureN:"just now"},{max:6e4,divisor:1e3,past1:"a second ago",pastN:"# seconds ago",future1:"in a second",futureN:"in # seconds"},{max:36e5,divisor:6e4,past1:"a minute ago",pastN:"# minutes ago",future1:"in a minute",futureN:"in # minutes"},{max:864e5,divisor:36e5,past1:"an hour ago",pastN:"# hours ago",future1:"in an hour",futureN:"in # hours"},{max:6048e5,divisor:864e5,past1:"yesterday",pastN:"# days ago",future1:"tomorrow",futureN:"in # days"},{max:24192e5,divisor:6048e5,past1:"last week",pastN:"# weeks ago",future1:"in a week",futureN:"in # weeks"},{max:31536e6,divisor:2628e6,past1:"last month",pastN:"# months ago",future1:"in a month",futureN:"in # months"},{max:31536e8,divisor:31536e6,past1:"last year",pastN:"# years ago",future1:"in a year",futureN:"in # years"},{max:31536e9,divisor:31536e8,past1:"last century",pastN:"# centuries ago",future1:"in a century",futureN:"in # centuries"},{max:1/0,divisor:31536e9,past1:"last millennium",pastN:"# millennia ago",future1:"in a millennium",futureN:"in # millennia"}],a=Date.now()-("object"==typeof e?e:new Date(e)).getTime(),n=Math.abs(a),i=0,o=t;i<o.length;i++){var s=o[i];if(n<s.max){var r=a<0,l=Math.round(Math.abs(a)/s.divisor);return l<=1?r?s.future1:s.past1:(r?s.futureN:s.pastN).replace("#",l)}}},onShow:function(){this.onFriendsList()},leaveLobby:function(){this.friendListBtn.getChildByName("On").active=!0,this.friendListBtn.getChildByName("Off").active=!1,this.inviteListBtn.getChildByName("On").active=!1,this.inviteListBtn.getChildByName("Off").active=!0,this.contentNode.removeAllChildren()},updateNotification:function(e){for(var t=0;t<this.contentNode.children.length;t++){var a=this.contentNode.children[t];if(a.__data._id==e._id){cc.find("content",a).getComponent(cc.Label).string=e.text,cc.find("read/time",a).getComponent(cc.Label).string=this.timeAgo(e.time),cc.find("red/red",a).active=!e.isRead,cc.find("read/read",a).active=!e.isRead,cc.find("read/read",a).getComponent(cc.Button).clickEvents[0].customEventData=e,a.__data=e;break}}},onClose:function(){this.node.active=!1},onAccept:function(e,t){var a=this;GameManager.friendRequestAccept(t,function(){GameManager.friendRequestReceive(function(){a.contentNode.removeAllChildren();for(var e=0;e<GameManager.buddyRequestsReceived.length;e++){var t=cc.instantiate(a.itemNode);t.setPosition(0,0),t.active=!0,cc.find("layout/name",t).getComponent(cc.Label).string=GameManager.buddyRequestsReceived[e].userNameSend,cc.find("online",t).active=!1,cc.find("offline",t).active=!1,cc.find("Avatar/Mask/avatarSprite",t).getComponent(cc.Sprite).spriteFrame=GameManager.avatarImages["undefined"!=GameManager.buddyRequestsReceived[e].profileImagePlayerSend?Number(GameManager.buddyRequestsReceived[e].profileImagePlayerSend)-1:1],cc.find("accept",t).active=!0,cc.find("reject",t).active=!0,cc.find("remove",t).active=!1,cc.find("accept",t).getComponent(cc.Button).clickEvents[0].customEventData=GameManager.buddyRequestsReceived[e]._id,cc.find("reject",t).getComponent(cc.Button).clickEvents[0].customEventData=GameManager.buddyRequestsReceived[e]._id,t.__data=GameManager.buddyRequestsReceived[e],t.parent=a.contentNode}})})},onReject:function(e,t){var a=this;GameManager.friendRequestReject(t,function(){GameManager.friendRequestReceive(function(){a.contentNode.removeAllChildren();for(var e=0;e<GameManager.buddyRequestsReceived.length;e++){var t=cc.instantiate(a.itemNode);t.setPosition(0,0),t.active=!0,cc.find("layout/name",t).getComponent(cc.Label).string=GameManager.buddyRequestsReceived[e].userNameSend,cc.find("online",t).active=!1,cc.find("offline",t).active=!1,cc.find("Avatar/Mask/avatarSprite",t).getComponent(cc.Sprite).spriteFrame=GameManager.avatarImages["undefined"!=GameManager.buddyRequestsReceived[e].profileImagePlayerSend?Number(GameManager.buddyRequestsReceived[e].profileImagePlayerSend)-1:1],cc.find("accept",t).active=!0,cc.find("reject",t).active=!0,cc.find("remove",t).active=!1,cc.find("accept",t).getComponent(cc.Button).clickEvents[0].customEventData=GameManager.buddyRequestsReceived[e]._id,cc.find("reject",t).getComponent(cc.Button).clickEvents[0].customEventData=GameManager.buddyRequestsReceived[e]._id,t.__data=GameManager.buddyRequestsReceived[e],t.parent=a.contentNode}})})},onRemove:function(e,t){var a=this;GameManager.friendRequestRemove(t,function(){GameManager.friendRequstFriends(function(){a.contentNode.removeAllChildren();for(var e=0;e<GameManager.buddies.length;e++){var t=cc.instantiate(a.itemNode);t.setPosition(0,0),t.active=!0,cc.find("layout/name",t).getComponent(cc.Label).string=GameManager.buddies[e].userName,cc.find("online",t).active=GameManager.buddies[e].isOnline,cc.find("offline",t).active=!GameManager.buddies[e].isOnline,cc.find("Avatar/Mask/avatarSprite",t).getComponent(cc.Sprite).spriteFrame=GameManager.avatarImages["undefined"!=GameManager.buddies[e].profileImage?Number(GameManager.buddies[e].profileImage)-1:1],cc.find("accept",t).active=!1,cc.find("reject",t).active=!1,cc.find("remove",t).active=!0,cc.find("remove",t).getComponent(cc.Button).clickEvents[0].customEventData=GameManager.buddies[e].playerId,t.__data=GameManager.buddies[e],t.parent=a.contentNode}})})},onFriendsList:function(){var e=this;this.friendListBtn.getChildByName("On").active||(this.friendListBtn.getChildByName("On").active=!0,this.friendListBtn.getChildByName("Off").active=!1,this.inviteListBtn.getChildByName("On").active=!1,this.inviteListBtn.getChildByName("Off").active=!0,GameManager.friendRequstFriends(function(){e.contentNode.removeAllChildren();for(var t=0;t<GameManager.buddies.length;t++){var a=cc.instantiate(e.itemNode);a.setPosition(0,0),a.active=!0,cc.find("layout/name",a).getComponent(cc.Label).string=GameManager.buddies[t].userName,cc.find("online",a).active=GameManager.buddies[t].isOnline,cc.find("offline",a).active=!GameManager.buddies[t].isOnline,cc.find("Avatar/Mask/avatarSprite",a).getComponent(cc.Sprite).spriteFrame=GameManager.avatarImages["undefined"!=GameManager.buddies[t].profileImage?Number(GameManager.buddies[t].profileImage)-1:1],cc.find("accept",a).active=!1,cc.find("reject",a).active=!1,cc.find("remove",a).active=!0,cc.find("remove",a).getComponent(cc.Button).clickEvents[0].customEventData=GameManager.buddies[t].playerId,a.__data=GameManager.buddies[t],a.parent=e.contentNode}}))},onInviteList:function(){var e=this;this.inviteListBtn.getChildByName("On").active||(this.inviteListBtn.getChildByName("On").active=!0,this.inviteListBtn.getChildByName("Off").active=!1,this.friendListBtn.getChildByName("On").active=!1,this.friendListBtn.getChildByName("Off").active=!0,GameManager.friendRequestReceive(function(){e.contentNode.removeAllChildren();for(var t=0;t<GameManager.buddyRequestsReceived.length;t++){var a=cc.instantiate(e.itemNode);a.setPosition(0,0),a.active=!0,cc.find("layout/name",a).getComponent(cc.Label).string=GameManager.buddyRequestsReceived[t].userNameSend,cc.find("online",a).active=!1,cc.find("offline",a).active=!1,cc.find("Avatar/Mask/avatarSprite",a).getComponent(cc.Sprite).spriteFrame=GameManager.avatarImages["undefined"!=GameManager.buddyRequestsReceived[t].profileImagePlayerSend?Number(GameManager.buddyRequestsReceived[t].profileImagePlayerSend)-1:1],cc.find("accept",a).active=!0,cc.find("reject",a).active=!0,cc.find("remove",a).active=!1,cc.find("accept",a).getComponent(cc.Button).clickEvents[0].customEventData=GameManager.buddyRequestsReceived[t]._id,cc.find("reject",a).getComponent(cc.Button).clickEvents[0].customEventData=GameManager.buddyRequestsReceived[t]._id,a.__data=GameManager.buddyRequestsReceived[t],a.parent=e.contentNode}}))},onSendBuddyRequestReceive:function(){if(!this.friendListBtn.getChildByName("On").active){this.contentNode.removeAllChildren();for(var e=0;e<GameManager.buddyRequestsReceived.length;e++){var t=cc.instantiate(this.itemNode);t.setPosition(0,0),t.active=!0,cc.find("layout/name",t).getComponent(cc.Label).string=GameManager.buddyRequestsReceived[e].userNameSend,cc.find("online",t).active=!1,cc.find("offline",t).active=!1,cc.find("Avatar/Mask/avatarSprite",t).getComponent(cc.Sprite).spriteFrame=GameManager.avatarImages["undefined"!=GameManager.buddyRequestsReceived[e].profileImagePlayerSend?Number(GameManager.buddyRequestsReceived[e].profileImagePlayerSend)-1:1],cc.find("accept",t).active=!0,cc.find("reject",t).active=!0,cc.find("remove",t).active=!1,cc.find("accept",t).getComponent(cc.Button).clickEvents[0].customEventData=GameManager.buddyRequestsReceived[e]._id,cc.find("reject",t).getComponent(cc.Button).clickEvents[0].customEventData=GameManager.buddyRequestsReceived[e]._id,t.__data=GameManager.buddyRequestsReceived[e],t.parent=this.contentNode}}},onHandleBuddyRequestReceive:function(){if(!this.inviteListBtn.getChildByName("On").active){this.contentNode.removeAllChildren();for(var e=0;e<GameManager.buddies.length;e++){var t=cc.instantiate(this.itemNode);t.setPosition(0,0),t.active=!0,cc.find("layout/name",t).getComponent(cc.Label).string=GameManager.buddies[e].userName,cc.find("online",t).active=GameManager.buddies[e].isOnline,cc.find("offline",t).active=!GameManager.buddies[e].isOnline,cc.find("Avatar/Mask/avatarSprite",t).getComponent(cc.Sprite).spriteFrame=GameManager.avatarImages["undefined"!=GameManager.buddies[e].profileImage?Number(GameManager.buddies[e].profileImage):1],cc.find("accept",t).active=!1,cc.find("reject",t).active=!1,cc.find("remove",t).active=!0,cc.find("remove",t).getComponent(cc.Button).clickEvents[0].customEventData=GameManager.buddies[e].playerId,t.__data=GameManager.buddies[e],t.parent=this.contentNode}}},onRemoveBuddyReceive:function(){if(!this.inviteListBtn.getChildByName("On").active){this.contentNode.removeAllChildren();for(var e=0;e<GameManager.buddies.length;e++){var t=cc.instantiate(this.itemNode);t.setPosition(0,0),t.active=!0,cc.find("layout/name",t).getComponent(cc.Label).string=GameManager.buddies[e].userName,cc.find("online",t).active=GameManager.buddies[e].isOnline,cc.find("offline",t).active=!GameManager.buddies[e].isOnline,cc.find("Avatar/Mask/avatarSprite",t).getComponent(cc.Sprite).spriteFrame=GameManager.avatarImages["undefined"!=GameManager.buddies[e].profileImage?Number(GameManager.buddies[e].profileImage):1],cc.find("accept",t).active=!1,cc.find("reject",t).active=!1,cc.find("remove",t).active=!0,cc.find("remove",t).getComponent(cc.Button).clickEvents[0].customEventData=GameManager.buddies[e].playerId,t.__data=GameManager.buddies[e],t.parent=this.contentNode}}},onBuddyIsOnline:function(){if(!this.inviteListBtn.getChildByName("On").active){this.contentNode.removeAllChildren();for(var e=0;e<GameManager.buddies.length;e++){var t=cc.instantiate(this.itemNode);t.setPosition(0,0),t.active=!0,cc.find("layout/name",t).getComponent(cc.Label).string=GameManager.buddies[e].userName,cc.find("online",t).active=GameManager.buddies[e].isOnline,cc.find("offline",t).active=!GameManager.buddies[e].isOnline,cc.find("Avatar/Mask/avatarSprite",t).getComponent(cc.Sprite).spriteFrame=GameManager.avatarImages["undefined"!=GameManager.buddies[e].profileImage?Number(GameManager.buddies[e].profileImage):1],cc.find("accept",t).active=!1,cc.find("reject",t).active=!1,cc.find("remove",t).active=!0,cc.find("remove",t).getComponent(cc.Button).clickEvents[0].customEventData=GameManager.buddies[e].playerId,t.__data=GameManager.buddies[e],t.parent=this.contentNode}}}}),cc._RF.pop()},{CustomEditBox:"CustomEditBox",EditBoxUtil:"EditBoxUtil",PopUpBase:"PopUpBase",PopUpManager:"PopUpManager",PostTypes:"PostTypes",SliderTouch:"SliderTouch"}],FundTransferPopup:[function(e,t){"use strict";cc._RF.push(t,"1b3cbIBjaJFWpxIi9NCba5h","FundTransferPopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase");cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},playerName:{default:null,type:cc.EditBox},amount:{default:null,type:cc.EditBox},content:{default:null,type:cc.Node},cell:{default:null,type:cc.Node}},onLoad:function(){},onShow:function(e){console.log("onShow",e),this.cb=e.restoreActiveTab,this.content.removeAllChildren(!0),this.playerName.string="",this.amount.string="";for(var t=1,a=0;a<e.length;a++){var n=e[a],i=cc.instantiate(this.cell);i.x=0,i.active=!0,this.content.addChild(i),i.children[0].getComponent(cc.Label).string=t+"";var o=new Date(n.time);o.getFullYear(),("0"+(o.getMonth()+1)).slice(-2),("0"+o.getDate()).slice(-2),("0"+o.getHours()).slice(-2),("0"+o.getMinutes()).slice(-2),("0"+o.getSeconds()).slice(-2),n.senderUserName==GameManager.user.userName?i.children[1].getComponent(cc.Label).string="SEND":i.children[1].getComponent(cc.Label).string="RECEIVE",i.children[2].getComponent(cc.Label).string=o.toLocaleDateString("en-US",{day:"numeric",month:"short"})+", "+o.toLocaleTimeString("en-US").substr(0,(o.toLocaleTimeString("en-US")+" ").indexOf(" ")),i.children[3].getComponent(cc.Label).string=n.senderUserName,i.children[4].getComponent(cc.Label).string=n.receiverUserName,i.children[5].getComponent(cc.Label).string=n.amount,t+=1}},onQuit:function(){GameManager.playSound(K.Sounds.click),this.cb&&this.cb(),this.popUpManager.hide(n.FundTransferPopup,function(){})},onTextChanged:function(e,t){var a=new RegExp(/^\d*\.?\d*$/);console.log(a.test(e)),a.test(e)?(this.last=e,t.blur(),this.blured=!0,this.amount.string=e,this.last=e,t.focus()):(t.blur(),this.blured=!0,this.amount.string=this.last,t.focus())},onTextBegan:function(){this.blured=!1,this.last=this.amount.string},onSubmit:function(){var e=Number(this.amount.string);if(e<100)GameManager.popUpManager.show(n.NotificationPopup,"Invalid amount",function(){});else if(""!=this.playerName.string.trim()){var t={amount:e,senderUserName:GameManager.user.userName,receiverUserName:this.playerName.string};ServerCom.pomeloRequest("connector.entryHandler.onTransferChips",t,function(e){console.log("response",e),e.success?(GameManager.popUpManager.show(n.NotificationPopup,"Fund transfer is done successfully!",function(){}),t={senderUserName:GameManager.user.userName,receiverUserName:GameManager.user.userName,skip:0,limit:20,sortValue:"time"},ServerCom.pomeloRequest("connector.entryHandler.getP2PChipsTransferringHistory",{query:t},function(e){console.log("response",e),e.success?this.onShow(e.data):GameManager.popUpManager.show(n.NotificationPopup,e.info,function(){})}.bind(this),null,3e3)):GameManager.popUpManager.show(n.NotificationPopup,e.info,function(){})}.bind(this),null,3e3)}else GameManager.popUpManager.show(n.NotificationPopup,"Invalid player name",function(){})}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],GameConfig:[function(e,t){"use strict";var a;cc._RF.push(t,"a870avq2V9GyqYgQJVB1YYY","GameConfig");var n=window;n.K={},n.K.moveDisplayTime=2500,n.K.multiTableJoin=!0,n.K.disconnectRequestedByPlayer=!1,n.K.internetAvailable=!0,n.K.disconnectMultiLogin=!1,n.K.MaxTableCount=4,n.K.MaxTableCountInMobile=2,n.K.TestingBuildVersion="web-31.3.1(IP-77)PC_LOCAL",n.K.Error=cc.Enum({TimeOutError:504,ConnectionError:444,SuccessFalseError:454,KeyMissingBroadcasts:1001,ServerDown:3001,PlayerSessionShiftedOnServer:5001,FeatureComingSoon:5010,UpdateAvailable:5011,SessionError:5015}),n.K.Variation=cc.Enum({None:-1,TexasHoldem:"Texas Hold\u2019em",Omaha:"Omaha",OmahaHiLo:"Omaha Hi-Lo",OpenFaceChinesePoker:"Open Face Chinese Poker",All:"All"}),n.K.ChannelType={Normal:"NORMAL",Tournament:"TOURNAMENT"},n.K.TournamentType={Normal:"NORMAL",SitNGo:"SIT N GO",Satellite:"SATELLITE"},n.K.RoundNames={one:"ONE",two:"TWO",three:"THREE",four:"FOUR",five:"FIVE",finished:"FINISHED"},n.K.RoundToCards={},n.K.RoundToCards[n.K.RoundNames.one]=0,n.K.RoundToCards[n.K.RoundNames.two]=1,n.K.RoundToCards[n.K.RoundNames.three]=2,n.K.RoundToCards[n.K.RoundNames.four]=3,n.K.RoundToCards[n.K.RoundNames.five]=4,n.K.CardColoring={TwoCardColor:"TwoCardColor",FourCardColor:"FourCardColor"},n.K.GameType=cc.Enum({None:-1,CashGames:1,SitAndGo:2,Tournaments:3}),n.K.ScreenEnum=new cc.Enum({SplashScreen:0,SignupScreen:1,LoginScreen:2,LobbyScreen:3,GamePlayScreen:4,ForgotPasswordScreen:5,None:100}),n.K.SeatState={Free:"Free",Occupied:"Occupied",Hidden:"Hidden",Closed:"Closed"},n.K.PlayerState={None:"",Waiting:"WAITING",Playing:"PLAYING",OutOfMoney:"OUTOFMONEY",OnBreak:"ONBREAK",Disconnected:"DISCONNECTED",Left:"ONLEAVE",AllIn:"ALLIN",Fold:"FOLD",Reserved:"RESERVED",Rebuy:"REBUYING"},n.K.GameState={Idle:"IDLE",Running:"RUNNING",GameOver:"GAMEOVER"},n.K.PlayerMove={Check:"CHECK",Call:"CALL",Bet:"BET",Raise:"RAISE",AllIn:"ALLIN",Fold:"FOLD"},n.K.GameEndType={GameCompleted:"GAMECOMPLETED",EverybodyPacked:"EVERYBODYPACKED",OnePlayerLeft:"ONLYONEPLAYERLEFT"},n.K.Round={Preflop:"PREFLOP",Flop:"FLOP",Turn:"TURN",River:"RIVER",Showdown:"SHOWDOWN"},n.K.LobbyEvents={gameTypeFilterChanged:"gameTypeFilterChanged",maxPlayersFilter:"maxPlayersFilter",stakesFilterChanged:"stakesFilterChanged",joinTableListChanged:"joinTableListChanged",tableUpdated:"tableUpdated",sideTableUpdated:"sideTableUpdated",prizePoolUpdated:"prizePoolUpdated"},n.K.GameEvents={OnTableClosed:"TableClosed",OnAvatarChange:"AvatarChanged",OnTableColorChange:"TableColorChanged",onReset:"onReset"},n.K.PokerEvents={OnJoin:"OnJoin",OnHoleCard:"HoleCard",OnPlayerCard:"PlayerCard",OnSit:"Sit",OnBlindDeduction:"BlindDeduction",OnGamePlayers:"GamePlayers",OnPlayerStateChange:"PlayerStateChange",OnDealerChat:"DealerChat",OnStartGame:"StartGame",OnTurn:"Turn",OnRoundOver:"RoundOver",OnGameOver:"GameOver",OnLeave:"Leave",OnChat:"Chat",onPlayerStandUp:"StandUp",onTimerTick:"TimerTick",onTableTabSelected:"TableTabSelected",onRotateView:"RotateView",onTurnInOtherRoom:"TurnInOtherRoom",OnClearHoleCards:"ClearHoleCards",onPreCheck:"onPreCheck",onSitnGoElimination:"sgoEliminated",onPlayerCoins:"onPlayerCoins",onDealerChatSettingsChanged:"onDealerChatSettingsChanged",onChatSettingsChanged:"onChatSettingsChanged",onBlindsChanged:"onBlindsChanged",onAddonChanged:"onAddonChanged",OnBankrupt:"OnBankrupt",onPlayerNotes:"onPlayerNotes",onHandTab:"onHandTab",onGameStateChange:"onGameStateChanged",onBreakTime:"onbreakTime",onBreakTimeStart:"onBreakTimeStart",onOfcFirstRoundCards:"onOfcFirstRoundCards",onRebuyStatus:"onRebuyStatus",onBestHand:"onBestHand",onTimeBank:"startTimeBank",onCardColorChange:"CardColorChanged",onChannelEvent:"onChannelEvent",onAddonTimeStart:"onAddonTimeStart",onAddonTimeEnd:"onAddonTimeEnd",onAddonCheckBox:"onAddonCheckBox",onRebuyCheckBox:"onRebuyCheckBox",onBreakTimeEnd:"onBreakTimeEnd",onPlayerRankChange:"onPlayerRankChange",onBlindsChangeStopped:"onBlindsChangeStopped",onSendSticker:"onSendSticker"},n.K.TournamentState={Upcoming:"UPCOMING",Register:"REGISTER",Running:"RUNNING",Finished:"FINISHED",Cancelled:"CANCELLED"},n.K.TournamentEvents={OnTournamentStart:"TournamentStart"},n.K.SitNGoEvents={OnSitNGoTournamentStart:"SitNGoTournamentStart"},n.K.SitNGoState={RUNNING:"RUNNING",REGISTER:"REGISTER",FINISHED:"FINISHED",UPCOMING:"UPCOMING"},n.K.Suit=cc.Enum({Spade:1,Heart:2,Club:3,Diamond:4}),n.useAnalytics=!1,n.K.ServerAddress={ipAddress:"https://connector-albaniapoker.creatiosoft.dev",gameServer:"https://connector-albaniapoker.creatiosoft.dev",gamePort:443,maintainanceIP:"https://maintenance-dashboard-api-albaniapoker.creatiosoft.dev",maintainancePort:443,port:443,wss:!0,clientVer:"1.0",pokerVer:"0.0",assets_server:"https://auth-api-albaniapoker.creatiosoft.dev/api/wpoker",assets_server_s:"https://albaniapoker-assets.s3.us-east-1.amazonaws.com",otp_server:"",ads_server:""},n.K.Token={auth_server:"https://auth-api-albaniapoker.creatiosoft.dev",auth_refresh_server:"",access_token:"",refresh_token:"",access_token_expire_at:0,refresh_token_expire_at:0},n.K.PORTRAIT=!0,n.K.ServerAPI=((a={maintainance:"/maintainanceAndUpdate",freeChips:"/collectFreeChips",forgotPassword:"/forgotPassword",resetPassword:"/resetPassword",emailVerification:"/resendEmailVerificationLink",requestOTP:"/sendOtp",verifyOTP:"/verifyOtp",transactionHistory:"/getTransactionHistory",wallet:"/getWalletInfo",imageUpload:"/profileImage",sendotp:"/sendOtpSignUP"}).forgotPassword="/forgotPasswordUser",a),n.K.Sounds={click:13,userTurn:0,playerBet:1,playerRaise:2,playerAllIn:3,playerCall:4,playerFold:5,endTimer:6,cardOpening:7,chipDistribution:8,playerCheck:9,playerCardFlip:10,playerCardFlipSound:11,turnSoundTopBar:12},n.K.PomeloAPI={gateLogin:"gate.gateHandler.getConnector",checkForMultiClient:"connector.entryHandler.enter",updateProfile:"connector.entryHandler.updateProfile",getTables:"connector.entryHandler.getLobbyTables",joinChannel:"room.channelHandler.joinChannel",autoSit:"room.channelHandler.autoSit",sitHere:"room.channelHandler.sitHere",makeMove:"room.channelHandler.makeMove",leaveTable:"room.channelHandler.leaveTable",connectionAck:"connector.entryHandler.isConnected",registerTournament:"connector.entryHandler.registerTournament",deRegisterTournament:"connector.entryHandler.deRegisterTournament",checkRegistration:"connector.entryHandler.isRegisteredUserInTournament",reportIssue:"connector.entryHandler.reportIssue",chatRequest:"room.channelHandler.chat",getProfile:"connector.entryHandler.getProfile",sitOutNextHand:"room.channelHandler.sitoutNextHand",sitOutNextBigBlind:"connector.entryHandler.sitoutNextBigBlind",addChips:"room.channelHandler.addChipsOnTable",resume:"room.channelHandler.resume",setAutoBuyIn:"connector.entryHandler.setAutoBuyIn",getTableStructure:"connector.entryHandler.getTableStructure",getUsers:"connector.entryHandler.getRegisteredTournamentUsers",resetSitout:"room.channelHandler.resetSitout",joinSimilar:"connector.entryHandler.joinSimilarTable",getBlindAndPrize:"connector.entryHandler.getBlindAndPrize",setFavTable:"connector.entryHandler.addFavourateTable",removeFavTable:"connector.entryHandler.removeFavourateTable",quickSeatCash:"connector.entryHandler.quickSeat",getPrizes:"connector.entryHandler.getPlayerPrize",collectPrize:"connector.entryHandler.collectPrize",getTableData:"connector.entryHandler.getTable",createNote:"connector.entryHandler.createNotes",getNote:"connector.entryHandler.getNotes",updateNote:"connector.entryHandler.updateNotes",deleteNote:"connector.entryHandler.deleteNotes",getBlindPrizeTournament:"connector.entryHandler.getBlindAndPrizeForNormalTournament",setPlayerValOnTable:"connector.entryHandler.setPlayerValueOnTable",getFilters:"connector.entryHandler.getFilters",quickSeatTournament:"connector.entryHandler.quickSeatInTournament",quickSeatSitNGo:"connector.entryHandler.quickSeatInSitNGo",getHandTab:"connector.entryHandler.getHandTab",getHandHistory:"connector.entryHandler.getHandHistory",lateRegistration:"connector.entryHandler.lateRegistration",joinWaitingList:"room.channelHandler.joinWaitingList",unJoinWaitingList:"room.channelHandler.leaveWaitingList",saveVideo:"room.channelHandler.insertVideoLog",getVideo:"room.channelHandler.getVideo",rebuyInTournament:"connector.entryHandler.rebuyInTournament",logout:"connector.entryHandler.logout",singleLogin:"connector.entryHandler.singleLogin",connectionAck2:"connector.entryHandler.acknowledgeIsConnected",getBlindAndPrizeForSatellite:"connector.entryHandler.getBlindAndPrizeForSatelliteTournament",updateTableSettings:"connector.entryHandler.updateTableSettings",fireChannelEvent:"room.channelHandler.channelBroadcast",addon:" connector.entryHandler.addOnInTournament",updateAutoRebuy:"connector.entryHandler.updateAutoRebuy",updateAutoAddon:"connector.entryHandler.updateAutoAddon",doubleRebuy:"connector.entryHandler.doubleRebuyInTournament",leaveTourney:"connector.entryHandler.leaveTournament",getCashDetails:"connector.entryHandler.getCashDetails",cashoutRequest:"connector.entryHandler.cashOutForPlayerAffilate",updatePreCheckOnServer:"room.channelHandler.updatePrecheck",getFreeRollTables:"freeRoom.freeRollChannelHandler.getLobbyDetailsFreeRoll",getChannelId:"freeRoom.freeRollChannelHandler.getChannelId",joinFreeRoll:"freeRoom.freeRollChannelHandler.joinChannel",sendSticker:"room.channelHandler.sendSticker"},n.K.BuddyAPI={sendFriendRequest:"buddy.buddyHandler.sendFriendRequest",getFriendRequests:"buddy.buddyHandler.getFriendRequests",acceptFriendRequest:"buddy.buddyHandler.acceptFriendRequest",rejectFriendRequest:"buddy.buddyHandler.rejectFriendRequest",searchPlayer:"buddy.buddyHandler.searchPlayer",getFriendList:"buddy.buddyHandler.getFriendList",removeFriend:"buddy.buddyHandler.removeFriend",playWithFriend:"buddy.buddyHandler.playWithFriend"},n.K.BuddyBroadcast={friendRequestReceived:"friendRequestReceived",playRequestReceived:"playRequestReceived"},n.K.TournamentBroadcastRoute={tournamentGameStart:"tournamentGameStart"},n.K.SocketIOAPI={Lobby:{GetAllTableList:"tournamentListEvent|GetAllTableList",GetAllTournamentList:"tournamentListEvent|GetAllTournamentList",GetSitNGoStages:"tournamentListEvent|GetSitNGoStages",GetSitNGoTournamentsInStage:"tournamentListEvent|GetSitNGoTournamentsInStage",RegisterSNG:"tournamentLobbyEvent|RegisterSNG",RegisterTournament:"tournamentLobbyEvent|Register",ReEntryTournament:"tournamentLobbyEvent|ReEntry",DeRegisterTournament:"tournamentLobbyEvent|Deregister",LateRegisterTournament:"tournamentLobbyEvent|LateRegister",TournamentJoinTable:"tournamentGameEvent|joinTable",TournamentEnterTable:"tournamentGameEvent|enterTable"},Game:{TournamentResume:"tournamentGameEvent|resume",TournamentMakeMove:"tournamentGameEvent|makeMove",TournamentPreAction:"tournamentGameEvent|preCheck",TournamentChat:"tournamentGameEvent|chat",TournamentSitOut:"tournamentGameEvent|sitOut",TournamentResetSitout:"tournamentGameEvent|resetSitout",TournamentBestHands:"tournamentGameEvent|bestHands",TournamentFire:"tournamentGameEvent|channelBroadcast"}},n.K.SocketIOBroadcast={Lobby:{TournamentList:"tournamentListResponseEvent",TournamentLobbyEvent:"tournamentLobbyEvent",TournamentUpdated:"Tournament:Update",TournamentRefresh:"Tournament:Refresh",TournamentClosed:"Tournament:Closed",TournamentBroadcast:"TournamentBroadcast",TournamentLobbyResponseEvent:"tournamentLobbyResponseEvent",TournamentNewTable:"<TournamentId>:NewTable:<PlayerId>",TournamentElimination:"<TournamentId>:Elimination:<PlayerId>"},Game:{}},n.K.SocketIOEvent={Lobby:{TournamentSelect:"TournamentSelect"},Game:{Eliminated:"Eliminated",TournamentWinner:"TournamentWinner",BreakTime:"BreakTime",TournamentUpdated:"TournamentUpdated",TournamentClosed:"TournamentClosed",TableDestroyed:"TableDestroyed",DisconnectTime:"DisconnectTime"}},n.K.LobbyBroadcastRoute={tableUpdate:"tableUpdate",tableView:"tableView",joinTableList:"joinTableList",updateProfile:"updateProfile",removeTable:"removeTable",addTable:"addTable",tournamentRoomChange:"tournamentRoomChange",tournamentTableUpdate:"tournamentTableUpdate",tournamentStateChange:"tournamentStateChange",tournamentRankUpdate:"tournamentRankUpdate",blindUpdated:"blindUpdated",tournamentLobby:"tournamentLobby",updateMegaPoints:"megaPoints",profileImageUpdated:"imageUpload"},n.K.BroadcastRoute={sit:"sit",blindDeduction:"blindDeduction",gamePlayers:"gamePlayers",dealerrChat:"delaerChat",startGame:"startGame",turn:"turn",roundOver:"roundOver",gameOver:"gameOver",leave:"leave",chat:"chat",playerCards:"playerCards",playerState:"playerState",connectionAck:"connectionAck",preCheck:"preCheck",playerElimination:"playerElimination",playerCoins:"playerCoins",playerNewChannel:"playerNewChannelBroadcast",bankrupt:"bankrupt",avatarChange:"avatarChanged",autoJoinBroadcast:"autoJoinBroadcast",handTab:"handTab",breakTimerStart:"breakTimerStart",breakTime:"breakTime",ofcFirstRoundCards:"ofcFirstRoundCards",rebuyStatus:"rebuyStatus",bestHands:"bestHands",onTimeBank:"startTimeBank",onOnlinePlayers:"onlinePlayers",onFireEvent:"fireEvent",updateBlind:"updateBlind",addonTimeStarts:"addonTimeStarts",addonTimeEnds:"addonTimeEnds",antiBankingUpdatedData:"antiBankingUpdatedData",sendSticker:"sendSticker",eliminated:"eliminated",tournamentWinner:"tournamentWinner"},n.K.PlayerBroadcastRoute={playerInfo:"playerInfo",connectionAck2:"isConnectedOnLogin"},n.K.AppVersion={appVersion:"1.14"},n.K.SystemStorageKeys={userId:"userId",password:"password",rememberMePreference:"rememberMePreference"},n.K.GoToTable=!1,n.K.PPC=!0,t.exports={K:K},cc._RF.pop()},{}],GameManager:[function(e,t){"use strict";cc._RF.push(t,"71df2jj8J9L/qTdWvbRhNaZ","GameManager");var a=window,n=e("ResponseTypes").User,i=e("EventEmitter"),o=e("AvatarSelection"),s=e("PopUpManager").PopUpType,r=e("PopUpManager").PopUpManager,l=e("ResponseTypes").GameData,c=e("OFCResponseTypes").GameData,d=e("PostTypes").Login,h=e("PostTypes").JoinChannel,u=e("ResponseTypes").changeAvatar,p=e("LoginHandler"),m=cc.Enum({Android:0,iOS:1,Mac:2,WebMobile:3,WebDesktop:4,Windows:5,None:100});cc.Class({extends:i,properties:{loadingDash:{default:null,type:cc.Node},webViewContainer:{default:null,type:cc.Node},webView:{default:null,type:cc.WebView},activeTables:{default:null,type:cc.Node},avatarDefault:{default:null,type:cc.SpriteFrame},stickerDefault:{default:null,type:cc.SpriteFrame},tableDefault:{default:null,type:cc.SpriteFrame},tableActDefault:{default:null,type:cc.SpriteFrame},tableDeactDefault:{default:null,type:cc.SpriteFrame},tableBgDefault:{default:null,type:cc.SpriteFrame},cardDefault:{default:null,type:cc.SpriteFrame},nop:{default:null,type:cc.Node},nol:{default:null,type:cc.Node},loginHandler:{default:null,type:p},user:{default:null,visible:!1},gameModel:{default:null,visible:!1},activeTableCount:{default:0},maxTableCounts:4,deckColor:{default:"TwoCardColor"},tableColor:{default:0},avatarImages:{default:[],type:cc.SpriteFrame},stickerImages:{default:[],type:cc.SpriteFrame},tableImages:{default:[],type:cc.SpriteFrame},tabActImages:{default:[],type:cc.SpriteFrame},tabDeactImages:{default:[],type:cc.SpriteFrame},tabActImagesTour:{default:[],type:cc.SpriteFrame},tabDeactImagesTour:{default:[],type:cc.SpriteFrame},tableBgImages:{default:[],type:cc.SpriteFrame},cardBackImages:{default:[],type:cc.SpriteFrame},tableImagesTour:{default:[],type:cc.SpriteFrame},tableBgImagesTour:{default:[],type:cc.SpriteFrame},cardBackImagesTour:{default:[],type:cc.SpriteFrame},sounds:{default:[],type:cc.AudioClip},avatarPool:{default:[],type:cc.Node},avatarPrefab:{default:null,type:cc.Prefab},isRealMoney:!1,popUpManager:{default:null,type:r},isPokerGame:!1,isConnected:!1,onlinePlayers:0,isMobile:!1,isWindows:!1,isActive:!0,isJ:!0,isP:!1,isSD:!1,isBB:!1,isLoaded:!1,isForceDisconnection:!1,needResetUser:!1,lastClickTime:0,clickInterval:1e3,hideTime:0,tableStartTime:0,tableImage:0,tableBgImage:0,cardBackImage:0,refreshTokenLock:!1,refreshTokenCB:null,getAllAssets:null,buddies:[],buddyRequestsSent:[],buddyRequestsReceived:[],JSprites:{default:[],type:cc.SpriteFrame},SDSprites:{default:[],type:cc.SpriteFrame},PSprites:{default:[],type:cc.SpriteFrame},variableLogos:{default:[],type:cc.Sprite},BuildType:{get:function(){return m},visible:!1},buildType:{default:m.None,type:m},_visible:{get:function(){var e=this.buildType;return e==m.WebDesktop||e==m.WebMobile}},isVisibleLogin:{default:!0,visible:function(){return this._visible},notify:function(e){this.visibleLogin.active=!e,this.invisibleLogin.active=e}},visibleLogin:{default:null,type:cc.Node,visible:function(){return this._visible}},invisibleLogin:{default:null,type:cc.Node,visible:function(){return this._visible}}},playSound:function(e){GameManager.isActive&&GameManager.user&&!GameManager.user.muteGameSound&&ScreenManager.currentScreen!=K.ScreenEnum.LoginScreen&&cc.audioEngine.playEffect(this.sounds[e],!1)},onEventSound:function(){this.playSound(K.Sounds.click)},playMusic:function(){},_orientationCheck:function(){},_orientationChange:function(){},onLoad:function(){cc.sys.os!==cc.sys.OS_WINDOWS||cc.sys.isBrowser||(this.isWindows=!0),cc.debug.setDisplayStats(!1),a.GameManager=this,a.GameScreen=null,GameManager.needResetUser=!0,GameManager.openedWindow={},GameManager.openedWindow2={},GameManager.cachedRoomImages={},K.PORTRAIT&&cc.view.on("canvas-resize",function(){}),GameManager.isZFold()&&(cc.find("LobbyHandlerNew",cc.Canvas.instance.node).scale=.65,cc.find("Popups/Johnny",cc.Canvas.instance.node).scale=.8,cc.find("Launch",cc.Canvas.instance.node).scale=.6,cc.find("Loading",cc.Canvas.instance.node).scale=.6,cc.find("Reconnecting_Johnny",cc.Canvas.instance.node).scale=.6,cc.find("LoginPre",cc.Canvas.instance.node).scale=.6)},init:function(){var e=this;ServerCom.httpGetRequest(K.ServerAddress.assets_server+"/getAllAssets",null,function(t){console.log("getAllAssets",t),e.getAllAssets=t.result,e.generateAvatarPool(),e.generateTablePool(),e.generateTableBgPool(),e.generateCardBackPool(),e.generateTourTablePool()}),GameManager.on("enablePageView",this.onEnablePageView.bind(this)),GameManager.on("disablePageView",this.onDisablePageView.bind(this)),cc.systemEvent.on("forcedisconnect",this.onForcedisconnect.bind(this)),ServerCom.pomeloBroadcast("refreshAccessToken",this.onRefreshAccessToken.bind(this)),ServerCom.pomeloBroadcast("updatePlayerCategory",this.onUpdatePlayerCategory.bind(this)),ServerCom.pomeloBroadcast(K.PlayerBroadcastRoute.playerInfo,this.onPlayerInfo.bind(this)),ServerCom.pomeloBroadcast(K.BroadcastRoute.onOnlinePlayers,this.saveOnlinePlayers.bind(this)),ServerCom.pomeloBroadcast("updatePlayerImageInTable",this.updatePlayerImageInTable.bind(this)),ServerCom.pomeloBroadcast("notice",this.onAdminNotice.bind(this)),ServerCom.pomeloBroadcast("adminBroadcast",this.onAdminNotice.bind(this)),ServerCom.pomeloBroadcast(K.PlayerBroadcastRoute.connectionAck2,function(e){e.data&&e.data.channelId&&GameManager.emit("connectionAcknowledged",e.data.channelId),e.data.access_token=K.Token.access_token,ServerCom.pomeloRequest(K.PomeloAPI.connectionAck2,{playerId:GameManager.user.playerId,data:e.data,access_token:K.Token.access_token},function(){},null,5e3,!1)}),ServerCom.pomeloBroadcast(K.BuddyBroadcast.playRequestReceived,function(e){GameManager.popUpManager.show(s.InviteToPlayPopup,e,function(){})}),ServerCom.pomeloBroadcast(K.BroadcastRoute.autoJoinBroadcast,function(e){if(GameScreen&&GameScreen.node.active&&GameScreen.isAlreadyJoined(e.channelId))GameScreen&&GameScreen.isAlreadyJoined(e.channelId)&&GameManager.emit("openBuyInPopup",e.channelId);else{var t=new h(e);e.callback=function(){t.channelId?(t.tableId="",GameManager.join(t.channelId,K.PomeloAPI.joinChannel,t)&&GameManager.emit("openBuyInPopup",e.channelId)):GameManager.join(t.tableId,K.PomeloAPI.joinChannel,t)&&GameManager.emit("openBuyInPopup",e.channelId)},e.joinData=t,GameManager.popUpManager.show(s.JoinGamePopup,e,function(){})}}),this.playerRequestedToLeaveTable={},(this.isMobile||cc.sys.isNative)&&(cc.game.on(cc.game.EVENT_HIDE,function(){console.log("cc.game.EVENT_HIDE"),GameManager.isActive=!1,GameManager.hideTime=Date.now()}.bind(this)),cc.game.on(cc.game.EVENT_SHOW,function(){if(console.log("cc.game.EVENT_SHOW1"),!GameManager.isActive&&ScreenManager.currentScreen!=K.ScreenEnum.LoginScreen&&ScreenManager.currentScreen!=K.ScreenEnum.SignupScreen){console.log("cc.game.EVENT_SHOW2"),GameManager.isActive=!0;var e=Date.now()-GameManager.hideTime;if(console.log("cc.game.EVENT_SHOW3",e),!(e<5e3))if(e>18e5){console.log("cc.game.EVENT_SHOW4"),cc.sys.localStorage.setItem("auto_login_token",null),cc.sys.localStorage.setItem("auto_login_refresh_token",null),cc.sys.localStorage.setItem("auto_login_access_token_expire_at",null),cc.sys.localStorage.setItem("auto_login_refresh_token_expire_at",null),cc.sys.localStorage.setItem("auto_login_username",null),GameManager.isConnected=!1,GameManager.popUpManager.hideAllPopUps();var t={code:K.Error.SessionError,response:"Session expired, please login again."};GameManager.popUpManager.show(s.DisconnectDialog,t,function(){})}else{if(null!=cc.sys.localStorage.getItem("auto_login_token")){var a=Number(cc.sys.localStorage.getItem("auto_login_access_token_expire_at")-Date.now()/1e3);if(console.log("cc.game.EVENT_SHOW5",a),a<60)return cc.sys.localStorage.setItem("auto_login_token",null),cc.sys.localStorage.setItem("auto_login_refresh_token",null),cc.sys.localStorage.setItem("auto_login_access_token_expire_at",null),cc.sys.localStorage.setItem("auto_login_refresh_token_expire_at",null),cc.sys.localStorage.setItem("auto_login_username",null),GameManager.isConnected=!1,GameManager.popUpManager.hideAllPopUps(),t={code:K.Error.SessionError,response:"Session expired, please login again."},void GameManager.popUpManager.show(s.DisconnectDialog,t,function(){})}if(console.log("cc.game.EVENT_SHOW6"),ServerCom.inGame)return console.log("cc.game.EVENT_SHOW7"),ServerCom.socketConnected?void 0:(console.log("cc.game.EVENT_SHOW8"),LoginScreen.preLogin.active=!0,GameManager.user&&GameManager.user.playerId?(ServerCom.pomeloRequest("connector.entryHandler.disconnectfrombe",{playerId:GameManager.user.playerId,isLoggedIn:!1}),socketIO.socket.disconnect(),void socketIO.socket.connect()):void LoginScreen.checkForMultiClient());LoginScreen.preLogin.active=!1}}}.bind(this)),GameManager.isMobile&&(window.BackPressed={javaCallJs:function(e){if(console.log("!!!!!!!!!!!!!!!!!!!!!!!!!!! BackPressed",e),ScreenManager.currentScreen==K.ScreenEnum.GamePlayScreen){var t=LocalizedManager.t("TXT_HINT_BACK_LOBBY");GameManager.popUpManager.show(s.NotificationPopup,t,function(){})}else if(ScreenManager.currentScreen==K.ScreenEnum.LobbyScreen){var a=ScreenManager.screens[ScreenManager.currentScreen];console.log(a),console.log("!!!!!!!!!!!!!!!!!!!!!!!!!!! BackPressed1"),GameManager.popUpManager.show(s.OnLogOutPopup,!1,function(){})}else ScreenManager.currentScreen==K.ScreenEnum.LoginScreen?GameManager.popUpManager.show(s.OnLogOutPopup,!0,function(){}):ScreenManager.currentScreen==K.ScreenEnum.SignupScreen?ScreenManager.showScreen(K.ScreenEnum.LoginScreen,10,function(){}):GameManager.popUpManager.currentPopUp==s.ForgotPasswordPopUp&&GameManager.popUpManager.hide(s.ForgotPasswordPopUp,function(){})},sms:function(e){console.log("sms",e)}},cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,function(e){switch(e.keyCode){case cc.macro.KEY.back:case cc.macro.KEY.escape:if(ScreenManager.currentScreen==K.ScreenEnum.GamePlayScreen){var t=LocalizedManager.t("TXT_HINT_BACK_LOBBY");GameManager.popUpManager.show(s.NotificationPopup,t,function(){})}else if(ScreenManager.currentScreen==K.ScreenEnum.LobbyScreen){var a=ScreenManager.screens[ScreenManager.currentScreen];console.log(a),GameManager.popUpManager.show(s.OnLogOutPopup,!1,function(){})}else ScreenManager.currentScreen==K.ScreenEnum.LoginScreen?GameManager.popUpManager.show(s.OnLogOutPopup,!0,function(){}):ScreenManager.currentScreen==K.ScreenEnum.SignupScreen?ScreenManager.showScreen(K.ScreenEnum.LoginScreen,10,function(){}):GameManager.popUpManager.currentPopUp==s.ForgotPasswordPopUp&&GameManager.popUpManager.hide(s.ForgotPasswordPopUp,function(){})}}.bind(this),this))),cc.sys.isBrowser&&window.addEventListener("pageshow",function(e){console.log("Browser pageshow event, persisted:",e.persisted),e.persisted&&GameManager.checkAndReconnectSocket(!0)}),this.registerImageUploadEvents()},checkAndReconnectSocket:function(e){console.log("checkAndReconnectSocket called, forceReconnect:",e),ScreenManager.currentScreen!=K.ScreenEnum.LoginScreen&&ScreenManager.currentScreen!=K.ScreenEnum.SignupScreen?GameManager.isConnected?"undefined"!=typeof socketIO&&socketIO&&socketIO.socket&&(e||!socketIO.socket.connected?(console.log("checkAndReconnectSocket: forcing socket reconnection..."),LoginScreen&&LoginScreen.preLogin&&(LoginScreen.preLogin.active=!0),socketIO.socket.disconnect(),socketIO.socket.connect()):console.log("checkAndReconnectSocket: socket already connected")):console.log("checkAndReconnectSocket: not connected, skipping"):console.log("checkAndReconnectSocket: on login/signup screen, skipping")},onEnablePageView:function(){},onDisablePageView:function(){},manageByGameName:function(){},onUpdatePlayerCategory:function(e){GameManager.popUpManager.show(s.UpdateCategory,e)},listenPomeloBroadcasts:function(){this.gameModel.listenPomeloBroadcasts()},registerImageUploadEvents:function(){ServerCom.pomeloBroadcast(K.LobbyBroadcastRoute.profileImageUpdated,function(e){if(e.success&&200==e.code){var t={query:{playerId:"hsdfhd"},updateKeys:{profileImage:"0"}};t.query.playerId=GameManager.user.playerId,t.updateKeys.profileImage=e.data.url,GameManager.user.profileImage=WebImageUpload.base64Data,GameManager.user.urlImg=u(e.data.url,GameManager.user),ServerCom.pomeloRequest(K.PomeloAPI.updateProfile,t,function(e){e.success}.bind(this))}}.bind(this))},saveOnlinePlayers:function(e){this.onlinePlayers=e.data.onlinePlayers,GameManager.emit("onlinePlayers",null)},onRefreshAccessToken:function(e){e.data?K.Token.access_token=e.data.access_token:K.Token.access_token=e.access_token},onForcedisconnect:function(){cc.sys.localStorage.setItem("auto_login_token",null),cc.sys.localStorage.setItem("auto_login_refresh_token",null),cc.sys.localStorage.setItem("auto_login_access_token_expire_at",null),cc.sys.localStorage.setItem("auto_login_refresh_token_expire_at",null);var e={code:K.Error.PlayerSessionShiftedOnServer,errorType:9999,response:LocalizedManager.t("TXT_LOGGED_IN_OTHER_DEVICE")};this.popUpManager.hideAllPopUps(),this.popUpManager.show(s.DisconnectDialog,e,function(){})},onPlayerInfo:function(e){if(GameManager.emit("playerInfo",e),e.serverDown&&e.serverDown){var t={code:K.Error.ServerDown,response:e.info,heading:e.heading,preserveState:!0};this.popUpManager.show(s.DisconnectDialog,t,function(){})}else{if(e.channelId&&GameScreen&&ScreenManager.currentScreen==K.ScreenEnum.GamePlayScreen)for(var a=0;a<GameScreen.gameModel.activePokerModels.length;a++)if(e.channelId===GameScreen.gameModel.activePokerModels[a].gameData.channelId)return void GameScreen.gameModel.activePokerModels[a].popUpManager.show(2,e,function(){});this.popUpManager.show(s.PlayerInfoPopup,e,function(){})}},loadAvatar:function(e,t,a,n){var i=this;cc.loader.load(e+"",function(e,s){var r=cc.instantiate(i.avatarPrefab);e?(i.avatarImages[a]=i.avatarDefault,r.getComponent(o).setAvatarImg(i.avatarImages[a],a)):(i.avatarImages[a]=new cc.SpriteFrame(s),r.getComponent(o).setAvatarImg(new cc.SpriteFrame(s),a)),r.active=!1,i.avatarPool.push(r),t&&t(a+1,n)})},loadNext:function(e,t){if(t[e]){var a=K.ServerAddress.assets_server_s+t[e].path;this.loadAvatar(a,this.loadNext.bind(this),e,t)}},loadEmoji:function(e,t,a,n){var i=this;cc.loader.load(e+"",function(e,o){e?(i.stickerImages[a]=i.stickerDefault,i.stickerImages[a].___id=1,i.stickerImages[a].___data=n[a]):(i.stickerImages[a]=new cc.SpriteFrame(o),i.stickerImages[a].___id=n[a]._id,i.stickerImages[a].___data=n[a]),t&&t(a+1,n)})},loadNextEmoji:function(e,t){if(t[e]){var a=K.ServerAddress.assets_server_s+t[e].path;this.loadEmoji(a,this.loadNextEmoji.bind(this),e,t)}},loadTable:function(e,t,a,n){var i=this;cc.loader.load(e+"",function(e,o){e?(i.tableImages[a]=i.tableDefault,i.tableImages[a].___id=0,i.tableImages[a].___data=n[a],i.tableImages[a].___data.___id=0):(i.tableImages[a]=new cc.SpriteFrame(o),i.tableImages[a].___id=n[a]._id,i.tableImages[a].___data=n[a],i.tableImages[a].___data.___id=a),t&&t(a+1,n)})},loadTableAct:function(e,t,a,n){var i=this;cc.loader.load(e+"",function(e,o){e?(i.tabActImages[a]=i.tableActDefault,i.tabActImages[a].___id=0,i.tabActImages[a].___data=n[a],i.tabActImages[a].___data.___id=0):(i.tabActImages[a]=new cc.SpriteFrame(o),i.tabActImages[a].___id=n[a]._id,i.tabActImages[a].___data=n[a],i.tabActImages[a].___data.___id=a),t&&t(a+1,n)})},loadTableDeact:function(e,t,a,n){var i=this;cc.loader.load(e+"",function(e,o){e?(i.tabDeactImages[a]=i.tableDeactDefault,i.tabDeactImages[a].___id=0,i.tabDeactImages[a].___data=n[a],i.tabDeactImages[a].___data.___id=0):(i.tabDeactImages[a]=new cc.SpriteFrame(o),i.tabDeactImages[a].___id=n[a]._id,i.tabDeactImages[a].___data=n[a],i.tabDeactImages[a].___data.___id=a),t&&t(a+1,n)})},loadTourTable:function(e,t,a,n){var i=this;cc.loader.load(e+"",function(e,o){e?(i.tableImagesTour[a]=i.tableDefault,i.tableImagesTour[a].___id=0,i.tableImagesTour[a].___data=n[a],i.tableImagesTour[a].___data.___id=0):(i.tableImagesTour[a]=new cc.SpriteFrame(o),i.tableImagesTour[a].___id=n[a]._id,i.tableImagesTour[a].___data=n[a],i.tableImagesTour[a].___data.___id=a),t&&t(a+1,n)})},loadNextTable:function(e,t){if(t[e]){var a=K.ServerAddress.assets_server_s+(GameManager.isMobile?t[e].path:t[e].pathDesktop);this.loadTable(a,this.loadNextTable.bind(this),e,t)}},loadNextTableAct:function(e,t){if(t[e]){var a=K.ServerAddress.assets_server_s+t[e].tabActive;this.loadTableAct(a,this.loadNextTableAct.bind(this),e,t)}},loadNextTableDeact:function(e,t){if(t[e]){var a=K.ServerAddress.assets_server_s+t[e].tabDeactive;this.loadTableDeact(a,this.loadNextTableDeact.bind(this),e,t)}},loadNextTourTable:function(e,t){if(t[e]){var a=K.ServerAddress.assets_server_s+t[e].pathDesktop;this.loadTourTable(a,this.loadNextTourTable.bind(this),e,t)}},loadTableBg:function(e,t,a,n){var i=this;cc.loader.load(e+"",function(e,o){e?(i.tableBgImages[a]=i.tableBgDefault,i.tableBgImages[a].___id=0,i.tableBgImages[a].___data=n[a],i.tableBgImages[a].___data.___id=0):(i.tableBgImages[a]=new cc.SpriteFrame(o),i.tableBgImages[a].___id=n[a]._id,i.tableBgImages[a].___data=n[a],i.tableBgImages[a].___data.___id=a),t&&t(a+1,n)})},loadTourTableBg:function(e,t,a,n){var i=this;cc.loader.load(e+"",function(e,o){e?(i.tableBgImagesTour[a]=i.tableBgDefault,i.tableBgImagesTour[a].___id=0,i.tableBgImagesTour[a].___data=n[a],i.tableBgImagesTour[a].___data.___id=0):(i.tableBgImagesTour[a]=new cc.SpriteFrame(o),i.tableBgImagesTour[a].___id=n[a]._id,i.tableBgImagesTour[a].___data=n[a],i.tableBgImagesTour[a].___data.___id=a),t&&t(a+1,n)})},loadNextTableBg:function(e,t){if(t[e]){var a=K.ServerAddress.assets_server_s+(GameManager.isMobile?t[e].path:t[e].pathDesktop);this.loadTableBg(a,this.loadNextTableBg.bind(this),e,t)}},loadNextTourTableBg:function(e,t){if(t[e]){var a=K.ServerAddress.assets_server_s+(GameManager.isMobile?t[e].path:t[e].pathDesktop);this.loadTourTableBg(a,this.loadNextTourTableBg.bind(this),e,t)}},loadCardBack:function(e,t,a,n){var i=this;cc.loader.load(e+"",function(e,o){e?(i.cardBackImages[a]=i.cardDefault,i.cardBackImages[a].___id=0,i.cardBackImages[a].___data=n[a],i.cardBackImages[a].___data.___id=0):(i.cardBackImages[a]=new cc.SpriteFrame(o),i.cardBackImages[a].___id=n[a]._id,i.cardBackImages[a].___data=n[a],i.cardBackImages[a].___data.___id=a),t&&t(a+1,n)})},loadTourCardBack:function(e,t,a,n){var i=this;cc.loader.load(e+"",function(e,o){e?(i.cardBackImagesTour[a]=i.cardDefault,i.cardBackImagesTour[a].___id=0,i.cardBackImagesTour[a].___data=n[a],i.cardBackImagesTour[a].___data.___id=0):(i.cardBackImagesTour[a]=new cc.SpriteFrame(o),i.cardBackImagesTour[a].___id=n[a]._id,i.cardBackImagesTour[a].___data=n[a],i.cardBackImagesTour[a].___data.___id=a),t&&t(a+1,n)})},loadNextCardBack:function(e,t){if(t[e]){var a=K.ServerAddress.assets_server_s+t[e].path;this.loadCardBack(a,this.loadNextCardBack.bind(this),e,t)}},loadNextTourCardBack:function(e,t){if(t[e]){var a=K.ServerAddress.assets_server_s+t[e].path;this.loadTourCardBack(a,this.loadNextTourCardBack.bind(this),e,t)}},generateAvatarPool:function(){var e=this.getAllAssets.getAllPlayerAvatar,t=K.ServerAddress.assets_server_s+e.result[0].path;this.loadAvatar(t,this.loadNext.bind(this),0,e.result)},generateStickerPool:function(){var e=this.getAllAssets.getAllEmojis,t=K.ServerAddress.assets_server_s+e.result[0].path;this.loadEmoji(t,this.loadNextEmoji.bind(this),0,e.result)},generateTablePool:function(){var e=this.getAllAssets.getAllTableTheme,t=K.ServerAddress.assets_server_s+(GameManager.isMobile?e.result[0].path:e.result[0].pathDesktop);this.loadTable(t,this.loadNextTable.bind(this),0,e.result)},generateTableBgPool:function(){var e=this.getAllAssets.getAllGamePlayerBG,t=K.ServerAddress.assets_server_s+(GameManager.isMobile?e.result[0].path:e.result[0].pathDesktop);this.loadTableBg(t,this.loadNextTableBg.bind(this),0,e.result)},generateCardBackPool:function(){var e=this.getAllAssets.getAllBackCard,t=K.ServerAddress.assets_server_s+e.result[0].path;this.loadCardBack(t,this.loadNextCardBack.bind(this),0,e.result)},generateTourTablePool:function(){var e=this.getAllAssets.getAllTableTheme,t=K.ServerAddress.assets_server_s+e.result[0].pathDesktop;this.loadTourTable(t,this.loadNextTourTable.bind(this),0,e.result)},generateTourTableBgPool:function(){var e=this.getAllAssets.getAllTourGamePlayBG,t=K.ServerAddress.assets_server_s+(GameManager.isMobile?e.result[0].path:e.result[0].pathDesktop);this.loadTourTableBg(t,this.loadNextTourTableBg.bind(this),0,e.result)},generateTourCardBackPool:function(){var e=this.getAllAssets.getAllTourBackCard,t=K.ServerAddress.assets_server_s+e.result[0].path;this.loadTourCardBack(t,this.loadNextTourCardBack.bind(this),0,e.result)},setUserData:function(e){GameManager.needResetUser&&(this.user=new n(e),GameManager.needResetUser=!1)},fireOpenTableEvent:function(e,t){this.emit("OpenTable",e,t)},verifyTable:function(e,t,n,i,o){void 0===t&&(t=!0),void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===o&&(o=null),null!=a.GameScreen&&(GameManager.isMobile?GameManager.activeTableCount=a.GameScreen.gridParent.getComponent(cc.PageView).getPages().length:GameManager.activeTableCount=a.GameScreen.gridParent.children.length);for(var r=!1,l=-1,c=0;c<this.gameModel.activePokerModels.length;c++){var d=this.gameModel.activePokerModels[c].roomConfig._id;n&&(d=this.gameModel.activePokerModels[c].roomConfig.tableId),e===d&&(l=c,r=!0)}if(r=r&&t,i&&r)return o.isRejoin=!0,!0;if(o.isRejoin=!1,r)return LoginScreen.preLogin.active=!1,ScreenManager.showScreen(K.ScreenEnum.GamePlayScreen,l,function(){}),!1;if(null==e)return!1;if(GameManager.activeTableCount>0){if(GameManager.activeTableCount>=GameManager.maxTableCounts)return GameManager.popUpManager.show(s.MaxTablesJoinedPopup,null,function(){}),!1;if(!K.multiTableJoin)return!1}return!0},verifyTablePrivate:function(e){null!=a.GameScreen?GameManager.isMobile?GameManager.activeTableCount=a.GameScreen.gridParent.getComponent(cc.PageView).getPages().length:GameManager.activeTableCount=a.GameScreen.gridParent.children.length:GameManager.activeTableCount=0;for(var t=!1,n=-1,i=0;i<this.gameModel.activePokerModels.length;i++)e===this.gameModel.activePokerModels[i].roomConfig._id&&(n=i,t=!0);return t?(ScreenManager.showScreen(K.ScreenEnum.GamePlayScreen,n,function(){}),!1):!(GameManager.activeTableCount>0&&GameManager.activeTableCount>=GameManager.maxTableCounts&&(GameManager.popUpManager.show(s.MaxTablesJoinedPopup,null,function(){}),1))},getTimeByMilli:function(e){var t=new Date(e);return t.toDateString().split(" ")[1]+" "+t.toDateString().split(" ")[2]+" "+t.toTimeString().split(" ")[0].slice(0,t.toTimeString().lastIndexOf(":"))},getTimeDuration:function(e,t){void 0===t&&(t=!0);var a=new Date;e=parseInt(e),a.getTime()<e&&(e-=a.getTime());var n=e/1e3,i=parseInt(n/86400);n%=86400;var o=parseInt(n/3600);n%=3600;var s=parseInt(n/60);n=parseInt(n%60);var r="";return i>0&&(r+=parseInt(i)+" days "),o>0&&(r+=parseInt(o)+" hours "),s>0&&(r+=parseInt(s)+" mins "),t&&(r+=parseInt(n)+" secs "),r},getMTimeDurationEx:function(e,t){void 0===t&&(t=!0);var a=new Date;e=parseInt(e),a.getTime()<e?e-=a.getTime():e=0;var n=e/1e3;return parseInt(n/86400),n%=86400,parseInt(n/3600),n%=3600,parseInt(n/60),n=parseInt(n%60),""+parseInt(n).toString().padStart(2,"0")},getMTimeDuration:function(e,t){void 0===t&&(t=!0);var a=new Date;e=parseInt(e),a.getTime()<e?e-=a.getTime():e=0;var n=e/1e3,i=parseInt(n/86400);n%=86400;var o=parseInt(n/3600);n%=3600;var s=parseInt(n/60);n=parseInt(n%60);var r="";return i>0&&(r+=parseInt(i)+":"),o>0&&(r+=parseInt(o)+":"),r+=parseInt(s).toString().padStart(2,"0")+":",t&&(r+=parseInt(n).toString().padStart(2,"0")),r},getMTimeDuration2:function(e,t){void 0===t&&(t=!0);var a=new Date;e=parseInt(e),a.getTime()<e?e-=a.getTime():e=0;var n=e/1e3,i=parseInt(n/86400);n%=86400;var o=parseInt(n/3600);n%=3600;var s=parseInt(n/60);n=parseInt(n%60);var r="";return i>0&&(r+=parseInt(i)+":"),o>0&&(r+=parseInt(o)+":"),r+=parseInt(s).toString().padStart(2,"0")+":",t&&(r+=parseInt(n).toString().padStart(2,"0")),r},getMTimeDuration3:function(e,t){void 0===t&&(t=!0);var a=new Date;e=parseInt(e);var n=(e=a.getTime()>e?a.getTime()-e:0)/1e3,i=parseInt(n/86400);n%=86400;var o=parseInt(n/3600);n%=3600;var s=parseInt(n/60);n=parseInt(n%60);var r="";return i>0&&(r+=parseInt(i)+":"),o>0&&(r+=parseInt(o)+":"),r+=parseInt(s).toString().padStart(2,"0")+":",t&&(r+=parseInt(n).toString().padStart(2,"0")),r},getTimePassed:function(e,t){void 0===t&&(t=!0),e=new Date(e);var a=new Date;if(a.getTime()<e)return"0 second";var n=(e=a.getTime()-e)/1e3,i=parseInt(n/86400);n%=86400;var o=parseInt(n/3600);n%=3600;var s=parseInt(n/60);n=parseInt(n%60);var r="";return i>0&&(r+=parseInt(i)+" days "),o>0&&(r+=parseInt(o)+" hours "),s>0&&(r+=parseInt(s)+" mins "),""==r&&(r+="Less than 1 min "),r.trim()},getJohnnyTimeDuration:function(e,t){void 0===t&&(t=!0);var a=new Date;e=parseInt(e),a.getTime()<e&&(e-=a.getTime());var n=e/1e3,i=parseInt(n/86400);n%=86400;var o=parseInt(n/3600);n%=3600;var s=parseInt(n/60);n=parseInt(n%60);var r="";return i>0&&(r+=parseInt(i)+":"),o>0&&(r+=parseInt(o)+":"),r+=parseInt(s).toString().padStart(2,"0")+":",t&&(r+=parseInt(n).toString().padStart(2,"0")),r},join:function(e,t,a,n,i,o,r,l){if(void 0===o&&(o=null),void 0===r&&(r=null),void 0===l&&(l=!1),console.trace("onGo join"),GameManager.iterationOfJoinsFromLoginScreen=o,GameManager.totalJoinsFromLoginScreen=r,GameManager.verifyTable(e,!0,a.tableId==e,l,a)){if(n=n||(a.isRejoin?this.onJoinSuccess2:this.onJoinSuccess),i=i||this.onJoinFail,a.playerId=GameManager.user.playerId,a.playerName=GameManager.user.userName,a.networkIp=d.ipV4Address,null!=o&&1===o&&(GameManager.joinResponseCounter=r,GameManager.joinSuccessResponseCounter=0,GameManager.joinFailResponseCounter=0,GameManager.joinFailResponses=[]),"true"==a.isPrivateTable){var c={route:t,data:a,onSuccess:n,onFail:i};return GameManager.popUpManager.show(s.EnterPasswordPopup,c,function(){}),!1}return ServerCom.forceKeepLoading=!0,ServerCom.pomeloRequest(t,a,n,i,null,!1),!1}return!0},join2:function(e,t,a){GameManager.isMobile||K.GoToTable?(ServerCom.forceKeepLoading=!0,ServerCom.pomeloRequest(t,a,this.onJoinSuccess.bind(this),this.onJoinFail.bind(this),null,!1)):window.versions.new({name:e,url:"?GoToTable=1&accesstoken="+K.Token.access_token+"&channelid="+e+"&playerId="+GameManager.user.playerId+"&playerName="+GameManager.user.userName+"&networkIp="+d.ipV4Address+"&realChips="+GameManager.user.realChips})},onJoinSuccess:function(e,t){if(ServerCom.launch.active=!1,GameManager.activeTableCount>=GameManager.maxTableCounts)return GameManager.popUpManager.show(s.MaxTablesJoinedPopup,null,function(){}),ServerCom.forceKeepLoading=!1,void(ServerCom.loading.active=!1);GameManager.iterationOfJoinsFromLoginScreen&&GameManager.joinResponseCounter--;var a=void 0===e.isDisplay||null===e.isDisplay||e.isDisplay;if(e.success){if(GameManager.iterationOfJoinsFromLoginScreen&&GameManager.joinSuccessResponseCounter++,e.roomConfig)return"Open Face Chinese Poker"===e.roomConfig.channelVariation?e.gameData=new c(e):e.gameData=new l(e),e.gameData.channelType=e.roomConfig.channelType,e.roomConfig.channelType==K.ChannelType.Tournament&&(e.type=1,e.roomConfig.isRebuyOpened=!(!t||!t.isRebuyOpened)&&t.isRebuyOpened),void ScreenManager.showScreen(K.ScreenEnum.GamePlayScreen,e,function(){});ServerCom.forceKeepLoading=!1,ServerCom.loading.active=!1}else a?(ServerCom.forceKeepLoading=!1,ServerCom.loading.active=!1,GameManager.iterationOfJoinsFromLoginScreen&&(GameManager.joinFailResponseCounter++,GameManager.joinFailResponses.push(e))):(ServerCom.forceKeepLoading=!1,ServerCom.loading.active=!1,GameManager.iterationOfJoinsFromLoginScreen&&(GameManager.joinFailResponseCounter++,GameManager.joinFailResponses.push(e)),ScreenManager.showScreen(K.ScreenEnum.LobbyScreen,10,function(){},!1));if(ServerCom.forceKeepLoading=!1,ServerCom.loading.active=!1,GameManager.iterationOfJoinsFromLoginScreen&&0==!!GameManager.joinResponseCounter)if(GameManager.joinSuccessResponseCounter==GameManager.totalJoinsFromLoginScreen);else if(GameManager.joinSuccessResponseCounter>0)if(1==GameManager.joinFailResponses.length){var n={code:K.Error.SuccessFalseError,response:GameManager.joinFailResponses[0].info,channelId:GameManager.joinFailResponses[0].channelId||"",isRetry:void 0!==e.isRetry&&null!==e.isRetry&&e.isRetry};ServerCom.emit("error",n)}else GameManager.joinFailResponses.length>1&&(n={code:K.Error.SuccessFalseError,response:GameManager.joinFailResponses[0].info,channelId:GameManager.joinFailResponses[0].channelId||"",isRetry:void 0!==e.isRetry&&null!==e.isRetry&&e.isRetry},ServerCom.emit("error",n));else 0==!!GameManager.joinSuccessResponseCounter&&(n={code:K.Error.SuccessFalseError,response:GameManager.joinFailResponses[0].info,channelId:GameManager.joinFailResponses[0].channelId||"",isRetry:void 0!==e.isRetry&&null!==e.isRetry&&e.isRetry},ScreenManager.showScreen(K.ScreenEnum.LobbyScreen,10,function(){ServerCom.emit("error",n)},!1))},onJoinSuccess2:function(e,t){if(ServerCom.launch.active=!1,e.success){if(e.roomConfig){"Open Face Chinese Poker"===e.roomConfig.channelVariation?e.gameData=new c(e):e.gameData=new l(e),e.gameData.channelType=e.roomConfig.channelType,e.roomConfig.channelType==K.ChannelType.Tournament&&(e.type=1,e.roomConfig.isRebuyOpened=!(!t||!t.isRebuyOpened)&&t.isRebuyOpened),e.isRejoin=!0;for(var a=0;a<GameScreen.gameModel.activePokerModels.length;a++){var n=GameScreen.gameModel.activePokerModels[a].roomConfig._id;if(t.data.roomConfig._id===n){e.indexFound=a;break}}return void ScreenManager.showScreen(K.ScreenEnum.GamePlayScreen,e,function(){})}ServerCom.forceKeepLoading=!1,ServerCom.loading.active=!1}else console.log("onJoinSuccess2")},onJoinFail:function(e){ServerCom.launch.active=!1,ServerCom.forceKeepLoading=!1,ServerCom.loading.active=!1,console.log("JOIN FAIL RESPONSE",e),e.info&&GameManager.popUpManager.show(s.NotificationPopup,e.info,function(){})},getPreferredSeat:function(e){var t=null;switch(e){case 2:t=GameManager.user.seatPreferancesTwo;break;case 3:t=2;break;case 6:t=GameManager.user.seatPreferancesSix;break;case 9:t=GameManager.user.seatPreferances;break;default:t=GameManager.user.seatPreferancesTwo}return t},getGameTypeByValue:function(e){var t="";return 10==e?t="Hyper-Turbo":20==e?t="Turbo":30==e&&(t="Standard"),t},removeAllChildren:function(e){e&&e.children.forEach(function(e){e.destroy()},this)},getValueByGameType:function(e){var t=null;switch(e){case"Hyper-Turbo":t=10;break;case"Turbo":t=20;break;case"Standard":t=30;break;default:t=30}return t},reset:function(){console.log("rajatk to be destroyed GameManager.reset"),GameManager.activeTableCount=0,TableHandler.joinTableList=[],GameManager.emit(K.GameEvents.onReset,null),GameScreen&&(GameScreen.gameModel.activePokerModels.forEach(function(e){GameManager.isMobile?GameScreen.gridParent.getComponent(cc.PageView).removePage(e.node):e.node.destroy()},this),GameScreen.gameModel.activePokerModels=[],GameManager.isMobile&&this.gameModel.emit("LEAVE FOR TABLE SWIPE")),ScreenManager.currentScreen!=K.ScreenEnum.LobbyScreen&&ScreenManager.showScreen(K.ScreenEnum.LobbyScreen,10,function(){},!1),this.updateActiveTables()},logout:function(){if(GameManager.isConnected){GameManager.isConnected=!1;var e={playerId:GameManager.user.playerId,isLoggedIn:!1};ServerCom.pomeloRequest(K.PomeloAPI.logout,e,null,null,null,!0,!0,function(){K.disconnectRequestedByPlayer=!0,this.popUpManager.hideAllPopUps(),cc.systemEvent.emit("leaveLobby"),GameManager.isLoaded=!1,cc.sys.localStorage.setItem("auto_login_token",null),cc.sys.localStorage.setItem("auto_login_refresh_token",null),cc.sys.localStorage.setItem("auto_login_access_token_expire_at",null),cc.sys.localStorage.setItem("auto_login_refresh_token_expire_at",null),cc.sys.localStorage.setItem("auto_login_username",null),ServerCom.inGame=!1,GameManager.needResetUser=!0,ServerCom.clearConnectCB(),GameManager.reset(),"undefined"!=typeof socketIO&&socketIO&&socketIO.socket&&socketIO.socket.disconnect(),ScreenManager.showScreen(K.ScreenEnum.LoginScreen,!1,function(){(cc.sys.os!==cc.sys.OS_WINDOWS||cc.sys.isBrowser)&&self})}.bind(this))}else this.scheduleOnce(function(){this.popUpManager.hideAllPopUps(),cc.systemEvent.emit("leaveLobby"),GameManager.reset(),"undefined"!=typeof socketIO&&socketIO&&socketIO.socket&&socketIO.socket.disconnect(),ScreenManager.currentScreen!=K.ScreenEnum.LoginScreen&&ScreenManager.showScreen(K.ScreenEnum.LoginScreen,!0,function(){(cc.sys.os!==cc.sys.OS_WINDOWS||cc.sys.isBrowser)&&self&&(ServerCom.inGame=!0,self.close())})},.5)},logout3:function(){K.disconnectRequestedByPlayer=!0,this.popUpManager.hideAllPopUps(),cc.systemEvent.emit("leaveLobby"),GameManager.isLoaded=!1,cc.sys.localStorage.setItem("auto_login_token",null),cc.sys.localStorage.setItem("auto_login_refresh_token",null),cc.sys.localStorage.setItem("auto_login_access_token_expire_at",null),cc.sys.localStorage.setItem("auto_login_refresh_token_expire_at",null),cc.sys.localStorage.setItem("auto_login_username",null),GameManager.needResetUser=!0,ScreenManager.showScreen(K.ScreenEnum.LoginScreen,!1,function(){(cc.sys.os!==cc.sys.OS_WINDOWS||cc.sys.isBrowser)&&self&&(ServerCom.inGame=!0)})},getToken:function(e,t,a){ServerCom.httpPostRequest(K.Token.auth_server,{userName:e,password:t},function(e){console.log("getToken",e),"success"==e.status?(K.Token.access_token=e.access_token,K.Token.refresh_token=e.refresh_token,K.Token.access_token_expire_at=e.access_token_expire_at,K.Token.refresh_token_expire_at=e.refresh_token_expire_at,a(e)):a(e)})},startRefreshTokenTimer:function(e){this.refreshTokenCB=e,this.unschedule(this.refreshTokenTimer),this.schedule(this.refreshTokenTimer,1)},stopRefreshTokenTimer:function(){this.refreshTokenCB=cb,this.unschedule(this.refreshTokenTimer)},refreshTokenTimer:function(){K.Token.access_token_expire_at-Date.now()/1e3<30&&!this.refreshTokenLock&&(this.refreshTokenLock=!0,this.refreshToken())},forceRefreshToken:function(e){this.refreshTokenLock=!0,this.refreshToken(e)},refreshToken:function(e){var t=this;K.Token.refresh_token&&""!=K.Token.refresh_token?ServerCom.httpGetRequest(K.Token.auth_server+"/api/auth/refresh",null,function(a){t.refreshTokenLock=!1,console.log("refreshToken",a),a.success?(K.Token.access_token=a.access_token,K.Token.refresh_token=a.refresh_token,K.Token.access_token_expire_at=a.access_token_expire_at,K.Token.refresh_token_expire_at=a.refresh_token_expire_at,cc.sys.localStorage.setItem("auto_login_token",K.Token.access_token),cc.sys.localStorage.setItem("auto_login_refresh_token",K.Token.refresh_token),cc.sys.localStorage.setItem("auto_login_access_token_expire_at",K.Token.access_token_expire_at),cc.sys.localStorage.setItem("auto_login_refresh_token_expire_at",K.Token.refresh_token_expire_at),t.refreshTokenCB?t.refreshTokenCB():e&&e()):GameManager.popUpManager.show(s.DisconnectDialog,{code:K.Error.Whitelisting,response:"Token refresh timeout please relogin."})}):this.refreshTokenLock=!1},joinSimilar:function(){ServerCom.pomeloRequest("connector.entryHandler.joinSimilarTable",{channelId:this.gameModel.activePokerModels[GameScreen.prevSelection].gameData.channelId,playerId:GameManager.user.playerId,isLoggedIn:!0,access_token:K.Token.access_token},function(e){console.log(e.similarChannelId);var t=K.PomeloAPI.joinChannel;GameManager.join2(e.similarChannelId,t,{channelId:e.similarChannelId,isRequested:!0,channelType:e.similarChannelType,tableId:"",playerId:GameManager.user.playerId,playerName:GameManager.user.userName,networkIp:d.ipV4Address,maxPlayers:5,isPrivateTable:!1})})},updateActiveTables:function(){if(GameScreen&&GameScreen.gridParent){var e=0;GameManager.isMobile&&(e=GameScreen.gridParent.getComponent(cc.PageView).getPages().length,this.activeTables.active=0!=e)}},gotoActiveTables:function(){ScreenManager.showScreen(K.ScreenEnum.GamePlayScreen,0,function(){})},randomPick:function(){var e=["Poker is 100% skill and 50% luck.","You call, gonna be all over baby.","Just play every hand, you can't miss them all.","Poker has the feeling of a sport, but you don't have to do push-ups."];return e[Math.floor(Math.random()*e.length)]},preloadWebView:function(){},isZFold:function(){var e=cc.size(cc.Canvas.instance.node.width,cc.Canvas.instance.node.height),t=e.height/e.width;return console.log("aspect",t),!(t>1.5)},isShorter:function(){var e=cc.size(cc.Canvas.instance.node.width,cc.Canvas.instance.node.height),t=e.height/e.width;return console.log("aspect",t),!(t>1.8)},friendSendRequst:function(e,t){ServerCom.pomeloRequest("connector.entryHandler.sendBuddyRequest",{userName:e,playerId:GameManager.user.playerId,isLoggedIn:!0,access_token:K.Token.access_token},function(e){console.log("sendFriendRequest reponse",e),e.success?(GameManager.popUpManager.show(s.NotificationPopup,"Your new request has been sent",function(){}),GameManager.buddyRequestsSent.push(e.buddyRequest),t&&t(e.buddyRequest)):GameManager.popUpManager.show(s.NotificationPopup,e.message,function(){})},null,5e3,!1)},friendRequstFriends:function(e){ServerCom.pomeloRequest("connector.entryHandler.myBuddies",{playerId:GameManager.user.playerId,isLoggedIn:!0,access_token:K.Token.access_token},function(t){console.log("MyBuddies",t),t.success?(GameManager.buddies=t.buddies,e&&e(t)):GameManager.popUpManager.show(s.NotificationPopup,t.message,function(){})},null,5e3,!1)},friendRequestSent:function(e){ServerCom.pomeloRequest("connector.entryHandler.listRequestSent",{playerId:GameManager.user.playerId,isLoggedIn:!0,access_token:K.Token.access_token},function(t){console.log("connector.entryHandler.listRequestSent",t),t.success?(GameManager.buddyRequestsSent=t.buddyRequests,e&&e(t)):GameManager.popUpManager.show(s.NotificationPopup,t.message,function(){})},null,5e3,!1)},friendRequestReceive:function(e){ServerCom.pomeloRequest("connector.entryHandler.listRequestReceive",{playerId:GameManager.user.playerId,isLoggedIn:!0,access_token:K.Token.access_token},function(t){console.log("connector.entryHandler.listRequestReceive",t),t.success?(GameManager.buddyRequestsReceived=t.buddyRequests,e&&e(t)):GameManager.popUpManager.show(s.NotificationPopup,t.message,function(){})},null,5e3,!1)},friendRequestAccept:function(e,t){ServerCom.pomeloRequest("connector.entryHandler.handleBuddyRequest",{playerId:GameManager.user.playerId,isLoggedIn:!0,access_token:K.Token.access_token,requestId:e,type:"accept"},function(e){console.log("connector.entryHandler.handleBuddyRequest accept",e),e.success?t&&t(e):GameManager.popUpManager.show(s.NotificationPopup,e.message,function(){})},null,5e3,!1)},friendRequestReject:function(e,t){ServerCom.pomeloRequest("connector.entryHandler.handleBuddyRequest",{playerId:GameManager.user.playerId,isLoggedIn:!0,access_token:K.Token.access_token,requestId:e,type:"reject"},function(e){console.log("connector.entryHandler.handleBuddyRequest reject",e),e.success?t&&t(e):GameManager.popUpManager.show(s.NotificationPopup,e.message,function(){})},null,5e3,!1)},friendRequestRemove:function(e,t){ServerCom.pomeloRequest("connector.entryHandler.removeBuddy",{playerId:GameManager.user.playerId,isLoggedIn:!0,access_token:K.Token.access_token,playerIdRemove:e},function(e){console.log("connector.entryHandler.removeBuddy",e),e.success?t&&t(e):GameManager.popUpManager.show(s.NotificationPopup,e.message,function(){})},null,5e3,!1)},sendBuddyRequestReceive:function(){this.friendRequestReceive(function(){GameManager.emit("sendBuddyRequestReceive")}),GameManager.popUpManager.show(s.NotificationPopup,"New buddy request received",function(){})},handleBuddyRequestReceive:function(e){this.friendRequstFriends(function(){GameManager.emit("handleBuddyRequestReceive")}),GameManager.popUpManager.show(s.NotificationPopup,e.message,function(){})},removeBuddyReceive:function(){this.friendRequstFriends(function(){GameManager.emit("removeBuddyReceive")})},buddyResponseEvent:function(e){if(console.log("buddyResponseEvent",e),"BuddyIsOnline"==e.eventName){for(var t=0;t<GameManager.buddies.length;t++)if(GameManager.buddies[t].playerId==e.data.response.playerId){GameManager.buddies[t].isOnline=e.data.response.isOnline;break}GameManager.emit("BuddyIsOnline")}},inviteBuddyReceive:function(e){GameManager.popUpManager.show(s.InviteToPlayPopup,e.inviteData)},inviteBuddy:function(e,t){ServerCom.pomeloRequest("connector.entryHandler.inviteBuddy",{playerId:GameManager.user.playerId,isLoggedIn:!0,access_token:K.Token.access_token,inviteData:e},function(e){console.log("connector.entryHandler.removeBuddy",e),e.success?t&&t(e):GameManager.popUpManager.show(s.NotificationPopup,e.message,function(){})},null,5e3,!1)},isMyFriend:function(e){for(var t=0;t<GameManager.buddies.length;t++)return GameManager.buddies[t].playerId==e},isFriendRequestPending:function(e){for(var t=0;t<GameManager.buddyRequestsSent.length;t++)return GameManager.buddyRequestsSent[t].playerIdReceive==e},updatePlayerImageInTable:function(e){console.log("updatePlayerImageInTable",e),GameManager.emit("updatePlayerImageInTable",e.player)},getPlayerMute:function(e){var t=this;ServerCom.pomeloRequest("connector.entryHandler.getPlayerMute",{playerId:GameManager.user.playerId,isLoggedIn:!0,access_token:K.Token.access_token},function(a){console.log("connector.entryHandler.getPlayerMute",a),a.success&&(t.playerSettingMute=a.playerSettingMute,e&&e(a))},null,5e3,!1)},changePlayerMute:function(e,t){var a=this;ServerCom.pomeloRequest("connector.entryHandler.changePlayerMute",{playerId:GameManager.user.playerId,isLoggedIn:!0,access_token:K.Token.access_token,playerIdMute:e},function(e){console.log("connector.entryHandler.changePlayerMute",e),e.success&&(a.playerSettingMute=e.playerSettingMute,t&&t(e))},null,5e3,!1)},isPlayerMute:function(e){if(GameManager.playerSettingMute&&GameManager.playerSettingMute)for(var t=0;t<GameManager.playerSettingMute.players.length;t++)if(GameManager.playerSettingMute.players[t].playerId==e)return!0;return!1},getBankList:function(e){ServerCom.httpGetRequest("https://auth-api-albaniapoker.creatiosoft.dev/api/deposit/banks",null,e)},createRequest:function(e,t,a,n,i){ServerCom.httpPostRequest("https://auth-api-albaniapoker.creatiosoft.dev/api/deposit/request",{accountHolderName:e,phoneNumber:t,productId:a,bankId:n},i)},getHistory:function(e){ServerCom.httpGetRequest("https://auth-api-albaniapoker.creatiosoft.dev/api/deposit/history",null,e)},onAdminNotice:function(e){GameManager.popUpManager.hide(s.AdminNoticePopup,function(){}),GameManager.popUpManager.show(s.AdminNoticePopup,{title:e.heading,content:e.broadcastMessage},function(){})},convertChips:function(e){return(e=Number(e)).toFixed(2)}}),cc._RF.pop()},{AvatarSelection:"AvatarSelection",EventEmitter:"EventEmitter",LoginHandler:"LoginHandler",OFCResponseTypes:"OFCResponseTypes",PopUpManager:"PopUpManager",PostTypes:"PostTypes",ResponseTypes:"ResponseTypes"}],GameModel:[function(e,t){"use strict";cc._RF.push(t,"a9ed6amxnxJ66NkbGQ6B9bp","GameModel");var a=e("PokerModel").PokerModel,n=(e("LobbyHandler"),e("PopUpManager").PopUpManager),i=e("PopUpManager").PopUpType,o=e("EventEmitter");cc.Class({extends:o,properties:{activePokerModels:{default:[],type:[a]},tilingFlag:{default:!1},popUpManager:{default:null,type:n}},onLoad:function(){GameManager.gameModel=this},start:function(){this.listenPomeloBroadcasts()},listenPomeloBroadcasts:function(){for(var e in K.BroadcastRoute)ServerCom.pomeloBroadcast(K.BroadcastRoute[e],this.onMessage.bind(this))},addGame:function(e){this.activePokerModels.push(e),GameScreen.node.opacity=0,e.gameModel=this,2==this.activePokerModels.length&&GameManager.isMobile&&this.emit("JOIN FOR TABLE SWIPE")},onLeave:function(e){for(var t=0;t<this.activePokerModels.length;t++)if(e===this.activePokerModels[t]){this.activePokerModels.splice(t,1);break}delete GameManager.playerRequestedToLeaveTable[e.gameData.channelId],GameManager.isMobile?GameScreen.gridParent.getComponent(cc.PageView).removePage(e.node):e.node.destroy(),this.activePokerModels.length<2&&GameManager.isMobile&&this.emit("LEAVE FOR TABLE SWIPE"),this.scheduleOnce(function(){GameScreen.node.opacity=0,ServerCom.loading.active=!1,GameManager.emit(K.GameEvents.OnTableClosed)})},registerBroadcastCallbacks:function(e,t,a){this.callBacks=this.callBacks||{},this.callBacks[e]=this.callBacks[e]||{},this.callBacks[e][t]=a},removeBroadcastCallbacks:function(e,t){0!==arguments.length?1!==arguments.length?null!==this.callBacks[e][t]&&void 0!==this.callBacks[e][t]&&delete this.callBacks[e][t]:delete this.callBacks[e]:this.callBacks={}},onMessage:function(e){if(null!==e.route&&void 0!==e.route)void 0!==e.channelId&&null!==e.channelId&&(null==this.callBacks&&null==this.callBacks||this.callBacks&&this.callBacks[e.channelId]&&this.callBacks[e.channelId][e.route]&&this.callBacks[e.channelId][e.route](e));else{var t={code:K.Error.KeyMissingBroadcasts,response:"route key missing in broadcast!"};this.popUpManager.show(i.DisconnectDialog,t,function(){})}}}),cc._RF.pop()},{EventEmitter:"EventEmitter",LobbyHandler:"LobbyHandler",PokerModel:"PokerModel",PopUpManager:"PopUpManager"}],GamePreferencesPopup:[function(e,t){"use strict";cc._RF.push(t,"06d075JHvZNKo67Qf61mjsh","GamePreferencesPopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase"),o=(e("Checkbox"),e("GameScreen")),s=(e("ResponseTypes").GameData,e("PostTypes").JoinSimilar,e("Toggle")),r=e("AvatarSelection"),l=e("LoginHandler");cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},widthdrawlHistory:{default:null,type:cc.Node},widthdrawlHistoryScrollView:{default:null,type:cc.Node},widthdrawlHistoryScrollViewItem:{default:null,type:cc.Node},giftScrollViewEmpty:{default:null,type:cc.Node},giftScrollView:{default:null,type:cc.Node},giftScrollViewItem:{default:null,type:cc.Node},vpGiftSubmit:{default:null,type:cc.Button},vpGiftSendBtn:{default:null,type:cc.Node},vpGiftListBtn:{default:null,type:cc.Node},vpGiftErrorMessage:{default:null,type:cc.Label},vpGiftBalance:{default:null,type:cc.Label},vpGiftName:{default:null,type:cc.EditBox},vpGiftAmount:{default:null,type:cc.EditBox},vpGiftPhone:{default:null,type:cc.EditBox},withdrawalProcessSuccess:{default:null,type:cc.Node},countryCode:{default:null,type:cc.EditBox},flagScrollView:{default:null,type:cc.Node},banksScrollView:{default:null,type:cc.Node},loginHandler:{default:null,type:l},vpEditProfileSuccess:{default:null,type:cc.Node},vpEditProfileErrorMessage:{default:null,type:cc.Label},vpEditProfileSubmit:{default:null,type:cc.Button},vpEditProfileEmail:{default:null,type:cc.EditBox},vpEditProfilePhone:{default:null,type:cc.EditBox},vpWithdrawErrorMessage:{default:null,type:cc.Label},vpWithdrawSubmit:{default:null,type:cc.Button},vpWithdrawBank:{default:null,type:cc.EditBox},vpWithdrawName:{default:null,type:cc.EditBox},vpWithdrawAmount:{default:null,type:cc.EditBox},vpWithdrawAccount:{default:null,type:cc.EditBox},vpWithdrawPhone:{default:null,type:cc.EditBox},playerName:{default:null,type:cc.Label},playerId:{default:null,type:cc.Label},agentId:{default:null,type:cc.Label},agentId2:{default:null,type:cc.Label},selectAvatar:{default:null,type:cc.Node},widthdrawl:{default:null,type:cc.Node},gift:{default:null,type:cc.Node},giftSend:{default:null,type:cc.Node},giftList:{default:null,type:cc.Node},deposit:{default:null,type:cc.Node},depositScrollView:{default:null,type:cc.Node},depositScrollViewItem:{default:null,type:cc.Node},editProfile:{default:null,type:cc.Node},balance:{default:null,type:cc.Label},goldIcon:{default:null,type:cc.Node},diamondIcon:{default:null,type:cc.Node},claim:{default:null,type:cc.Button},chips:{default:null,type:cc.Label},version:{default:null,type:cc.Label},tileViewSelection:{default:null,type:cc.Node},unTileViewSelection:{default:null,type:cc.Node},gameScreen:{default:null,type:o},dealerChat:{default:null,type:s},Chat:{default:null,type:s},runItTwiceToggle:{default:null,type:s},soundToggle:{default:null,type:s},standUpBtn:{default:null,type:cc.Button},joinSimilarBtn:{default:null,type:cc.Button},tableColorBtn:{default:null,type:cc.Button},seatPreferenceBtn:{default:null,type:cc.Button},tutorial:{default:null,type:cc.Prefab},tutorialNode:{default:null,type:cc.Node},tableLayout:{default:null,type:cc.Node},muckHandToggle:{default:null,type:s},coloredCardToggle:{default:null,type:s},pokerVersionString:{default:null,type:cc.RichText},gameVersionString:{default:null,type:cc.RichText},playerImg:{default:null,type:cc.Sprite},avatarScrollViewRef:{default:null,type:cc.Node},avatarGridParent:{default:null,type:cc.Node},avatars:{default:[],type:r},selectedAvatarID:0},onLoad:function(){this.loadAvatars(),GameManager.on("SelectedAvatar",this.onSelectAvatar.bind(this)),GameManager.on("REALCHIPSUPDATE",this.onRealChipsUpdated.bind(this)),this.avatars.forEach(function(e){e.unSelectAvatar()},this),this.vpGiftBalance.string=Number(("GOLD"==GameManager.user.category?GameManager.user.freeChips:GameManager.user.realChips).toFixed(2)),this.vpGiftBalance.string=GameManager.convertChips(this.vpGiftBalance.string)},onShow:function(){this.lockClick=!1,this.version.string="Albania Poker: v"+K.ServerAddress.clientVer,this.playerImg.spriteFrame=GameManager.user.urlImg,this.balance.string=Number(("GOLD"==GameManager.user.category?GameManager.user.freeChips:GameManager.user.realChips).toFixed(2)),this.balance.string=GameManager.convertChips(this.balance.string),this.playerName.string=GameManager.user.userName,this.playerId.string="Player ID : "+GameManager.user.playerId,GameManager.user.isParentUserName?""==GameManager.user.isParentUserName?this.agentId.string="Agent ID : N/A":this.agentId.string="Agent ID : "+GameManager.user.isParentUserName:this.agentId.string="Agent ID : N/A",this.agentId2.string=GameManager.user.isParentUserName,this.avatars.forEach(function(e){e.unSelectAvatar()}),this.selectedAvatarID=-1;var e=parseInt(GameManager.user.profileImage);e>=0&&(this.selectedAvatarID=e+1,this.avatars[e].selection.active=!0)},isInToday:function(e){return(new Date).setHours(0,0,0,0)==e.setHours(0,0,0,0)},onSelectAvatar:function(e){this.avatars.forEach(function(e){e.unSelectAvatar()}),this.avatars[e].showSelection(),this.selectedAvatarID=e+1},onLeave:function(){this.popUpManager.hide(n.GamePreferencesPopup,function(){}),this.gameScreen.leaveCurrent()},onStandup:function(){this.gameScreen.standUp(),this.popUpManager.hide(n.GamePreferencesPopup,function(){})},onSelectSeatPreferences:function(){this.popUpManager.show(n.SeatPreferenceDialog,this.gameScreen.gameModel.activePokerModels[this.gameScreen.prevSelection].roomConfig.maxPlayers,function(){})},onTutorialPlay:function(){},onToggleSound:function(){GameManager.playSound(K.Sounds.click);var e={query:{}};e.query.playerId=GameManager.user.playerId,e.updateKeys={},GameManager.user.muteGameSound=!GameManager.user.muteGameSound,e.updateKeys["settings.muteGameSound"]=GameManager.user.muteGameSound,GameManager.user.muteGameSound&&cc.audioEngine.stopAll(),GameManager.playMusic(!GameManager.user.muteGameSound),ServerCom.pomeloRequest(K.PomeloAPI.updateProfile,e,function(e){e.success}.bind(this))},onChooseAvatarSound:function(){this.onSettingsClose(),this.popUpManager.show(n.AvatarDialog,null,function(){}),GameManager.playSound(K.Sounds.click)},onToggleRunItTwice:function(){var e={query:{}};e.query.playerId=GameManager.user.playerId,e.updateKeys={},e.updateKeys["settings.runItTwice"]=this.runItTwiceToggle.state,ServerCom.pomeloRequest(K.PomeloAPI.updateProfile,e,function(e){e.success?GameManager.user.runItTwice=!GameManager.user.runItTwice:this.runItTwiceToggle.onToggle()}.bind(this)),GameManager.playSound(K.Sounds.click)},onToggleMuckHand:function(){var e={query:{}};e.query.playerId=GameManager.user.playerId,e.updateKeys={},e.updateKeys.isMuckHand=this.muckHandToggle.state,ServerCom.pomeloRequest(K.PomeloAPI.updateProfile,e,function(e){e.success?GameManager.user.isMuckHand=!GameManager.user.isMuckHand:this.muckHandToggle.onToggle()}.bind(this))},onTogglePlayerChat:function(){var e={query:{},updateKeys:{}};e.query.playerId=GameManager.user.playerId,e.updateKeys["settings.playerChat"]=this.Chat.state,ServerCom.pomeloRequest(K.PomeloAPI.updateProfile,e,function(e){e.success?(GameManager.user.playerChat=!GameManager.user.playerChat,GameManager.emit(K.PokerEvents.onChatSettingsChanged)):this.Chat.onToggle()}.bind(this))},onToggleFourColorCard:function(){var e={query:{},updateKeys:{}};e.query.playerId=GameManager.user.playerId,e.updateKeys["prefrences.cardColor"]=this.coloredCardToggle.state,ServerCom.pomeloRequest(K.PomeloAPI.updateProfile,e,function(e){e.success?GameManager.user.cardColor=this.coloredCardToggle.state:this.coloredCardToggle.onToggle()}.bind(this)),GameManager.playSound(K.Sounds.click)},onSetTiledLayOut:function(){this.unTileViewSelection.active=!1,this.tileViewSelection.active=!0,this.gameScreen.setTiledView()},onSetUnTiledLayOut:function(){this.unTileViewSelection.active=!0,this.tileViewSelection.active=!1,this.gameScreen.setUnTiledView()},onOpenTableColorSelection:function(){this.popUpManager.show(n.TableColorPreferenceDialog,null,function(){})},onToggleDealerChat:function(){var e={query:{},updateKeys:{}};e.query.playerId=GameManager.user.playerId,e.updateKeys["settings.dealerChat"]=this.dealerChat.state,ServerCom.pomeloRequest(K.PomeloAPI.updateProfile,e,function(e){e.success?(GameManager.user.dealerChat=!GameManager.user.dealerChat,GameManager.emit(K.PokerEvents.onDealerChatSettingsChanged)):this.dealerChat.onToggle()}.bind(this)),GameManager.playSound(K.Sounds.click)},onLogOut:function(){GameManager.popUpManager.show(n.OnLogOutPopup,null,function(){}),GameManager.playSound(K.Sounds.click)},onRemove:function(){GameManager.popUpManager.show(n.RemoveDataDialog,{callback:function(){ServerCom.pomeloRequest("connector.entryHandler.disablePlayer",{playerId:GameManager.user.playerId,isLoggedIn:!0,access_token:K.Token.access_token},function(e){if(console.log(e),e.success){var t={code:3333,errorType:3333,response:e.message};GameManager.popUpManager.show(n.DisconnectDialog,t,function(){})}},null,5e3,!1)}},function(){})},onSettingsClose:function(){this.selectAvatar.active=!1,this.widthdrawl.active=!1,this.popUpManager.hide(n.GamePreferencesPopup,function(){}),GameManager.playSound(K.Sounds.click)},onClickTutorial:function(){if(localStorage.setItem("FINISH_TUTORIAL","false"),GameManager.playSound(K.Sounds.click),this.tutorialNode)return this.tutorialNode.active=!0,void this.tutorialNode.getComponent("TutorialManager").startTuto();this.tutorialNode=cc.instantiate(this.tutorial),this.tutorialNode.parent=this.node},loadAvatars:function(){for(var e=0;e<GameManager.avatarPool.length;e++)this.avatarGridParent.addChild(GameManager.avatarPool[e]),GameManager.avatarPool[e].active=!0,GameManager.avatarPool[e].getComponent("AvatarSelection").AvatarPopUp=this,this.avatars.push(GameManager.avatarPool[e].getComponent("AvatarSelection"))},updateAvatar:function(){var e={query:{playerId:"hsdfhd"},updateKeys:{profileImage:"0"}};e.query.playerId=GameManager.user.playerId,e.updateKeys.profileImage=this.selectedAvatarID,ServerCom.pomeloRequest(K.PomeloAPI.updateProfile,e,function(e){e.success&&(GameManager.user.profileImage=this.selectedAvatarID-1,GameManager.user.urlImg=GameManager.avatarImages[GameManager.user.profileImage],this.playerImg.spriteFrame=GameManager.user.urlImg,GameManager.emit("image-loaded",GameManager.user),this.selectAvatar.active=!1)}.bind(this),null,5e3,!1,!1)},onClaim:function(){var e=this;ServerCom.pomeloRequest("connector.entryHandler.playerClaimFreeChips",{playerId:GameManager.user.playerId,isLoggedIn:!0,access_token:K.Token.access_token},function(t){console.log("connector.entryHandler.playerClaimFreeChips",t),t.success?(GameManager.user.freeChips=t.result.freeChips,GameManager.user.claimedFreeChipsAt=t.result.claimedFreeChipsAt,GameManager.user.nextClaimBonusTime=t.result.nextClaimBonusTime,e.chips.string=Number(GameManager.user.freeChips.toFixed(2)),GameManager.popUpManager.show(n.NotificationPopup,"Player claim free chips succeeded",function(){}),e.claim.interactable=!1,GameManager.emit("refreshPlayerChips")):GameManager.popUpManager.show(n.NotificationPopup,t.message,function(){})},null,5e3,!1)},formatNumber:function(e){return e.toLocaleString("en-US")},onDeposit:function(){var e=this;this.selectAvatar.active=!1,this.widthdrawl.active=!1,this.loginHandler.vpWShop(function(t){console.log(t),e.depositScrollView.removeAllChildren();for(var a=0;a<t.data.length;a++){var n=t.data[a],i=cc.instantiate(e.depositScrollViewItem);i.x=0,i.active=!0,e.depositScrollView.addChild(i),cc.find("title/val",i).getComponent(cc.Label).string=n.price+" MNT",cc.find("price",i).getComponent(cc.Label).string=e.formatNumber(n.chipsValue),i.getComponent(cc.Button).clickEvents[0].customEventData=n.chipsValue,i.__data=n}})},onWidthdrawl:function(){this.selectAvatar.active=!1,this.widthdrawl.active=!0},onEditProfile:function(){this.selectAvatar.active=!1,this.widthdrawl.active=!1,this.vpEditProfileEmail.string=GameManager.user.emailId,this.vpEditProfilePhone.string=GameManager.user.mobileNumber.replace("+976",""),this.vpEditProfileErrorMessage.string=""},onEditProfileBack:function(){this.vpEditProfileErrorMessage.string="",this.selectAvatar.active=!1,this.widthdrawl.active=!1},onEditProfileCheck:function(){this.vpEditProfileErrorMessage.string="",this.vpEditProfileSubmit.interactable=!1,""!==this.vpEditProfileEmail.string&&""!==this.vpEditProfilePhone.string&&(this.vpEditProfileSubmit.interactable=!0)},onEditProfileSubmit:function(){var e=this;this.loginHandler.vpUpdateContactInfo("+976"+this.vpEditProfilePhone.string,this.vpEditProfileEmail.string,function(t){console.log("vpUpdateContactInfo",JSON.stringify(t)),1==t.success||"success"==t.status?(GameManager.user.emailId=e.vpEditProfileEmail.string,GameManager.user.mobileNumber="+976"+e.vpEditProfilePhone.string,e.vpEditProfileErrorMessage.string="",e.vpEditProfileSuccess.active=!0):(e.vpEditProfileErrorMessage.node.active=!0,t.message?e.vpEditProfileErrorMessage.string=t.message:e.vpEditProfileErrorMessage.string=t.error[0].message)})},onEditProfileCloseSuccess:function(){this.vpEditProfileSuccess.active=!1},onDepositBack:function(){this.selectAvatar.active=!1,this.widthdrawl.active=!1},onWidthdrawlBack:function(){this.selectAvatar.active=!1,this.widthdrawl.active=!1,this.vpWithdrawBank.string="",this.vpWithdrawAccount.string="",this.vpWithdrawAmount.string="",this.vpWithdrawPhone.string=""},onWidthdrawlCheck:function(){this.vpWithdrawErrorMessage.string="",this.vpWithdrawSubmit.interactable=!1,""!==this.vpWithdrawAmount.string&&(this.vpWithdrawSubmit.interactable=!0)},onWidthdrawlSubmit:function(){var e=this;this.vpWithdrawSubmit.interactable=!1,this.loginHandler.vpWithdrawChips(parseInt(this.vpWithdrawAmount.string),function(t){console.log("vpWithdrawChips",JSON.stringify(t)),1==t.success||"success"==t.status?(e.vpWithdrawErrorMessage.string="",e.withdrawalProcessSuccess.active=!0,e.withdrawalProcessSuccess.getChildByName("Background").getChildByName("ref").getChildByName("val").getComponent(cc.Label).string=t.data.referenceNumber,e.vpWithdrawAmount.string=""):(e.vpWithdrawErrorMessage.node.active=!0,t.message?e.vpWithdrawErrorMessage.string=t.message:e.vpWithdrawErrorMessage.string=t.error[0].message)})},onWidthdrawlClosePopup:function(){this.withdrawalProcessSuccess.active=!1},showFlagScrollView:function(){this.flagScrollView.active=!this.flagScrollView.active},hideFlagScrollView:function(){this.flagScrollView.active=!1},onBank:function(e,t){this.vpWithdrawBank.string=t,this.hideFlagScrollView()},onAvatars:function(){this.selectAvatar.active=!0,this.widthdrawl.active=!1,this.avatars.forEach(function(e){e.unSelectAvatar()},this),this.selectedAvatarID=-1;var e=parseInt(GameManager.user.profileImage);e>=0&&(this.selectedAvatarID=e+1,this.avatars[e].selection.active=!0)},onAvatarsBack:function(){this.selectAvatar.active=!1,this.widthdrawl.active=!1},onAvatarsSubmit:function(){this.updateAvatar(this.selectedAvatarID)},onRealChipsUpdated:function(){this.balance.string=Number(("GOLD"==GameManager.user.category?GameManager.user.freeChips:GameManager.user.realChips).toFixed(2)),this.vpGiftBalance.string=Number(("GOLD"==GameManager.user.category?GameManager.user.freeChips:GameManager.user.realChips).toFixed(2)),this.balance.string=GameManager.convertChips(this.balance.string),this.vpGiftBalance.string=GameManager.convertChips(this.vpGiftBalance.string)},onGift:function(){this.selectAvatar.active=!1,this.widthdrawl.active=!1,this.deposit.active=!1,this.editProfile.active=!1,this.gift.active=!0,this.giftSend.active=!0,this.giftList.active=!1,this.vpGiftSendBtn.getChildByName("pressed").active=!0,this.vpGiftListBtn.getChildByName("pressed").active=!1,this.vpGiftBalance.string=Number(("GOLD"==GameManager.user.category?GameManager.user.freeChips:GameManager.user.realChips).toFixed(2)),this.vpGiftBalance.string=GameManager.convertChips(this.vpGiftBalance.string)},onGiftBack:function(){this.selectAvatar.active=!1,this.widthdrawl.active=!1,this.vpGiftErrorMessage.string="",this.vpGiftAmount.string="",this.vpGiftName.string="",this.vpGiftPhone.string="",this.vpGiftSubmit.interactable=!1},onGiftSend:function(){this.giftSend.active=!0,this.giftList.active=!1,this.vpGiftSendBtn.getChildByName("pressed").active=!0,this.vpGiftListBtn.getChildByName("pressed").active=!1},onGiftList:function(){var e=this;this.giftSend.active=!1,this.giftList.active=!0,this.vpGiftSendBtn.getChildByName("pressed").active=!1,this.vpGiftListBtn.getChildByName("pressed").active=!0,this.loginHandler.vpListGift(function(t){if(console.log("vpListGift",t),1==t.success||"success"==t.status){e.giftScrollView.removeAllChildren();for(var a=0;a<t.items.length;a++){var n=t.items[a],i=cc.instantiate(e.giftScrollViewItem);i.x=0,i.active=!0,e.giftScrollView.addChild(i),n.senderUsername==GameManager.user.userName?(cc.find("left/PlayerName",i).getComponent(cc.Label).string=n.senderUsername,cc.find("right/PlayerName",i).getComponent(cc.Label).string=n.receiverUsername,cc.find("left/PlayerID",i).getComponent(cc.Label).string="ID: "+n.senderPlayerId,cc.find("right/PlayerID",i).getComponent(cc.Label).string="ID: "+n.receiverPlayerId,cc.find("left/Avatar/Mask/avatarSprite",i).getComponent(cc.Sprite).spriteFrame=GameManager.avatarImages[parseInt(n.senderProfileImage)-1],cc.find("right/Avatar/Mask/avatarSprite",i).getComponent(cc.Sprite).spriteFrame=GameManager.avatarImages[parseInt(n.receiverProfileImage)-1]):(cc.find("right/PlayerName",i).getComponent(cc.Label).string=n.senderUsername,cc.find("left/PlayerName",i).getComponent(cc.Label).string=n.receiverUsername,cc.find("right/PlayerID",i).getComponent(cc.Label).string="ID: "+n.senderPlayerId,cc.find("left/PlayerID",i).getComponent(cc.Label).string="ID: "+n.receiverPlayerId,cc.find("right/Avatar/Mask/avatarSprite",i).getComponent(cc.Sprite).spriteFrame=GameManager.avatarImages[parseInt(n.senderProfileImage)-1],cc.find("left/Avatar/Mask/avatarSprite",i).getComponent(cc.Sprite).spriteFrame=GameManager.avatarImages[parseInt(n.receiverProfileImage)-1]),cc.find("center/Cashier/realMoney",i).getComponent(cc.Label).string=e.formatNumber(n.amount),"send"==n.type?(cc.find("center/Cashier/realMoney",i).color=cc.Color.RED,cc.find("center/Cashier/realMoney",i).getComponent(cc.Label).string="-"+cc.find("center/Cashier/realMoney",i).getComponent(cc.Label).string):(cc.find("center/Cashier/realMoney",i).color=cc.Color.GREEN,cc.find("center/Cashier/realMoney",i).getComponent(cc.Label).string="+"+cc.find("center/Cashier/realMoney",i).getComponent(cc.Label).string),"send"==n.type?(cc.find("center/left",i).active=!1,cc.find("center/right",i).active=!0):(cc.find("center/left",i).active=!0,cc.find("center/right",i).active=!1),cc.find("center/date",i).getComponent(cc.Label).string=e.formatDateString(n.transactionDate)}0==t.items.length?e.giftScrollViewEmpty.active=!0:e.giftScrollViewEmpty.active=!1}else e.giftScrollViewEmpty.active=!0})},formatDateString:function(e){var t=new Date(e);return t.getFullYear()+"/"+String(t.getMonth()+1).padStart(2,"0")+"/"+String(t.getDate()).padStart(2,"0")+" "+String(t.getHours()).padStart(2,"0")+":"+String(t.getMinutes()).padStart(2,"0")},onGiftSendCheck:function(){this.vpGiftErrorMessage.string="",this.vpGiftSubmit.interactable=!1,""!==this.vpGiftAmount.string&&""!==this.vpGiftName.string&&""!==this.vpGiftPhone.string&&(this.vpGiftSubmit.interactable=!0)},onGiftSendCall:function(){var e=this;this.lockClick||(this.lockClick=!0,this.scheduleOnce(function(){e.lockClick=!1},1),this.loginHandler.vpSendGift(this.vpGiftName.string,parseInt(this.vpGiftAmount.string),"+976"+this.vpGiftPhone.string,function(t){console.log("vpSendGift",t),1==t.success||"success"==t.status?(GameManager.popUpManager.show(n.NotificationPopup,t.message,function(){}),e.vpGiftErrorMessage.string="",e.vpGiftAmount.string="",e.vpGiftName.string="",e.vpGiftPhone.string="",e.vpGiftSubmit.interactable=!1):(e.vpGiftErrorMessage.node.active=!0,t.message?e.vpGiftErrorMessage.string=t.message:e.vpGiftErrorMessage.string=t.error[0].message)}))},onWidthdrawlHistory:function(){var e=this;this.loginHandler.vpWithdrawHistory(function(t){if(console.log("vpWithdrawHistory",t),1==t.success||"success"==t.status){e.widthdrawlHistory.active=!0,e.widthdrawlHistoryScrollView.removeAllChildren();for(var a=0;a<t.data.length;a++){var n=t.data[a],i=cc.instantiate(e.widthdrawlHistoryScrollViewItem);i.x=0,i.active=!0,i.children[1].getComponent(cc.Label).string=(o=n.createdAt,s=void 0,s=new Date(o),String(s.getDate()).padStart(2,"0")+"-"+String(s.getMonth()+1).padStart(2,"0")+"-"+s.getFullYear()+" "+String(s.getHours()).padStart(2,"0")+":"+String(s.getMinutes()).padStart(2,"0")),i.children[2].getComponent(cc.Label).string=GameManager.convertChips(n.amount),i.children[3].getComponent(cc.Label).string=n.referenceNumber,"Pending"==n.status?(i.children[4].active=!1,i.children[5].active=!0,i.children[6].active=!1):"Success"==n.status?(i.children[4].active=!0,i.children[5].active=!1,i.children[6].active=!1):(i.children[4].active=!1,i.children[5].active=!1,i.children[6].active=!0),i.children[0].active=!(a%2),e.widthdrawlHistoryScrollView.addChild(i)}}var o,s})},onWidthdrawlHistoryBack:function(){this.widthdrawlHistory.active=!1}}),cc._RF.pop()},{AvatarSelection:"AvatarSelection",Checkbox:"Checkbox",GameScreen:"GameScreen",LoginHandler:"LoginHandler",PopUpBase:"PopUpBase",PopUpManager:"PopUpManager",PostTypes:"PostTypes",ResponseTypes:"ResponseTypes",Toggle:"Toggle"}],GameResult:[function(e,t){"use strict";cc._RF.push(t,"7b658tOB/RIf6bgxvjoWoH5","GameResult"),cc.Class({extends:cc.Component,properties:{contentParent:{default:null,type:cc.Node},players:{default:null,type:cc.Label}},onLoad:function(){},start:function(){GameManager.emit("disablePageView")},onShow:function(e){if(this.contentParent.children.forEach(function(e){e.active=!1},this),e&&e[0]&&e[0].playersResults){this.players.node.parent.active=!0;var t=e[0].playersResults;this.players.string=Object.keys(t).length;var a=0;for(var n in t){var i=t[n];this.contentParent.children[a].active=!0,cc.find("name",this.contentParent.children[a]).getComponent(cc.Label).string=i.playerName||"???",cc.find("buy",this.contentParent.children[a]).getComponent(cc.Label).string=i.buyIn,cc.find("w",this.contentParent.children[a]).getComponent(cc.Label).string=(i.winning.toFixed(2)>0?"+":"")+i.winning.toFixed(2),i.winning.toFixed(2)>=0?cc.find("w",this.contentParent.children[a]).color=(new cc.Color).fromHEX("#15DE41"):cc.find("w",this.contentParent.children[a]).color=(new cc.Color).fromHEX("#FF0000"),i.playerName==GameManager.user.userName&&(cc.find("name",this.contentParent.children[a]).color=(new cc.Color).fromHEX("#E6C888"),cc.find("buy",this.contentParent.children[a]).color=(new cc.Color).fromHEX("#E6C888"),cc.find("w",this.contentParent.children[a]).color=(new cc.Color).fromHEX("#E6C888")),a+=1}}else this.players.string="",this.players.node.parent.active=!1},onClose:function(){GameManager.emit("enablePageView"),this.node.active=!1,GameManager.emit("showJoinSimlar")}}),cc._RF.pop()},{}],GameScreen:[function(e,t){"use strict";cc._RF.push(t,"b7ff8CoCyREl6ctAzhJkVx7","GameScreen");var a=e("GameModel"),n=(e("PokerPresenter"),e("PopUpManager").PopUpManager),i=e("AbstractScreen"),o=e("TableTab"),s=e("PopUpManager").PopUpType,r=window;window.LayoutType=new cc.Enum({Tiled:1,UnTiled:2}),cc.Class({extends:i,static:{PER:1},properties:{preLogin:{default:null,type:cc.Node},verticleBorder:{default:null,type:cc.Node},horizontalBorder:{default:null,type:cc.Node},gameModel:{default:null,type:a},popUpManager:{default:null,type:n},texasHoldemPrefab:{default:null,type:cc.Prefab},omahaHiLoPrefab:{default:null,type:cc.Prefab},omahaPrefab:{default:null,type:cc.Prefab},ofcPrefab:{default:null,type:cc.Prefab},gridParent:{default:null,type:cc.Node},tableTabs:{default:[],type:[cc.Node]},viewType:LayoutType.UnTiled,prevSelection:{default:null},unTiledView:{default:null,type:cc.Node},tiledView:{default:null,type:cc.Node},chatBtn:{default:null,type:cc.Button},isMobile:!1,isWindows:!1,preferences:{default:null,type:cc.Node},gridRefreshing:!1},onLoad:function(){var e=this;ServerCom.inGame=!0,this.checkForWindowScene=!1,cc.sys.os!==cc.sys.OS_WINDOWS||cc.sys.isBrowser||(this.checkForWindowScene=!0),r.GameScreen=this,GameManager.on(K.GameEvents.OnTableClosed,this.onRemove.bind(this)),GameManager.on("updateTableBgImage",this.onUpdateTableBgImage.bind(this)),GameManager.on("showJoinSimlar",this.showJoinSimlar.bind(this)),GameManager.on("hideJoinSimlar",this.hideJoinSimlar.bind(this)),GameManager.isMobile||!cc.sys.isBrowser&&cc.sys.os!==cc.sys.OS_WINDOWS||cc.view.on("canvas-resize",function(){clearTimeout(e.resizeId)}),GameManager.isMobile&&(this.gridParent.on("scroll-ended",function(){console.log("scroll-ended",e.gridParent.getComponent(cc.PageView).getCurrentPageIndex()),GameScreen.onTabSelection(e.gridParent.getComponent(cc.PageView).getCurrentPageIndex());for(var t=0;t<e.gameModel.activePokerModels.length;t++){var a=e.gameModel.activePokerModels[t].node.children[0].getComponent("PokerPresenter");a.gameOptionButton.active=!0,a.gameResultButton.active=!0,a.gameLeaveButton.active=!0}},this),this.gridParent.on("scrolling",function(){for(var t=0;t<e.gameModel.activePokerModels.length;t++){var a=e.gameModel.activePokerModels[t].node.children[0].getComponent("PokerPresenter");a.gameOptionButton.active=!1,a.gameResultButton.active=!1,a.gameLeaveButton.active=!1}},this))},setTiledView:function(){this.isMobile||(this.viewType=LayoutType.Tiled,this.refreshGrid())},setUnTiledView:function(){this.viewType=LayoutType.UnTiled,this.refreshGrid()},onShow:function(e){var t=this;if(this.node.opacity=255,this.onUpdateTableBgImage(),GameManager.playMusic(!1),this.isMobile&&(this.viewType=LayoutType.UnTiled),GameManager.isConnected&&GameManager.popUpManager.hideAllPopUps(),!isNaN(e))return this.prevSelection=e,ServerCom.forceKeepLoading=!1,void(ServerCom.loading.active=!1);if(e.isRejoin)return GameManager.gameModel.activePokerModels[e.indexFound].presenter.resetGameForReshuffle(!0),GameManager.gameModel.activePokerModels[e.indexFound].resetGameForReshuffle&&GameManager.gameModel.activePokerModels[e.indexFound].resetGameForReshuffle(),GameManager.gameModel.activePokerModels[e.indexFound].initiliazePoker(e),ServerCom.preLogin.active=!1,ServerCom.forceKeepLoading=!1,void(ServerCom.loading.active=!1);var a=null,n=null;"Open Face Chinese Poker"==e.roomConfig.channelVariation?(n=(a=cc.instantiate(this.ofcPrefab)).getComponent("OFCModel"),a.children[0].getComponent("OFCPresenter")):(n=(a=cc.instantiate(this.texasHoldemPrefab)).getComponent("PokerModel"),a.children[0].getComponent("PokerPresenter")),"Omaha"===e.roomConfig.channelVariation||"Omaha Hi-Lo"===e.roomConfig.channelVariation?n.dummyCardsCount=4:"Omaha 5"===e.roomConfig.channelVariation?n.dummyCardsCount=5:"Omaha 6"===e.roomConfig.channelVariation?n.dummyCardsCount=6:"Mega Hold\u2019em"===e.roomConfig.channelVariation?n.dummyCardsCount=3:n.dummyCardsCount=2,GameManager.isMobile?this.gridParent.getComponent(cc.PageView).addPage(a):this.gridParent.addChild(a),this.gameModel.addGame(n),n.initiliazePoker(e),GameManager.isMobile?GameManager.activeTableCount=this.gridParent.getComponent(cc.PageView).getPages().length:GameManager.activeTableCount=this.gridParent.children.length,this.prevSelection=GameManager.activeTableCount-1,a.width=ScreenManager.node.width,this.scheduleOnce(function(){t.preLogin.active=!1},1),this.refreshGrid(),n.on(K.PokerEvents.onTurnInOtherRoom,this.onTurn.bind(this)),GameManager.emit("updateTableImage"),ServerCom.forceKeepLoading=!1,ServerCom.loading.active=!1},start:function(){},onHide:function(){GameManager.user&&GameManager.playMusic(!GameManager.user.muteGameSound)},onTurn:function(e,t){if(this.viewType==LayoutType.UnTiled){for(var a=-1,n=0;n<this.gameModel.activePokerModels.length;n++)if(e===this.gameModel.activePokerModels[n]){a=n;break}null!=this.tableTabs[a]&&(t&&this.gameModel.activePokerModels.length>1?(this.tableTabs[a].getComponent(o).showAlert(t),GameManager.isMobile&&a!=this.prevSelection&&GameScreen.onTabSelection(a)):!t&&this.gameModel.activePokerModels.length>=1&&this.tableTabs[a].getComponent(o).showAlert(t))}else t&&this.gameModel.activePokerModels.length>1&&this.shakeScreen(e.node)},onRemove:function(){K.GoToTable?window.close():this.refreshGrid()},setScale:function(e,t,a){void 0===a&&(a=-1),(GameManager.isMobile?this.gridParent.getComponent(cc.PageView).getPages().length:this.gridParent.children.length).forEach(function(n){var i=n.getChildByName(t);i&&(i.scale=e,i&&(i.scale=e,-1!=a&&(i.scaleY=a)))},this)},switchWidgets:function(e){var t=null;t=GameManager.isMobile?this.gridParent.getComponent(cc.PageView).getPages().length:this.gridParent.children.length,GameManager.isMobile||t.forEach(function(t){t.getComponent(cc.Widget).enabled=e},this),this.unTiledView.active=e,this.tiledView.active=!e;for(var a=0;a<this.gameModel.activePokerModels.length;a++){var n;n="Open Face Chinese Poker"==this.gameModel.activePokerModels[a].roomConfig.channelVariation?"OFCPresenter":"PokerPresenter",this.gameModel.activePokerModels[a].node.children[0].getComponent(n).setTiledView(!e)}this.isMobile||this.repositionHandStrength(!e)},refreshGrid:function(){if(GameManager.updateActiveTables(),ScreenManager.currentScreen==K.ScreenEnum.GamePlayScreen){console.log("TableSwiper refreshGrid 2"),this.gridRefreshing=!0,this.node.opacity=0,GameManager.isMobile?GameManager.activeTableCount=this.gridParent.getComponent(cc.PageView).getPages().length:GameManager.activeTableCount=this.gridParent.children.length,(this.isMobile||this.isWindows)&&(this.viewType=LayoutType.UnTiled),this.gridParent.getComponent(cc.Layout);for(var e=0;e<GameManager.activeTableCount;e++)this.gameModel.activePokerModels[e]&&(this.gameModel.activePokerModels[e].node.active=!1);for(var t=0;t<this.tableTabs.length;t++)this.tableTabs[t].active=!1;for((null==this.prevSelection||this.prevSelection==GameManager.activeTableCount&&GameManager.activeTableCount>0)&&(this.prevSelection=GameManager.activeTableCount-1),(this.viewType==LayoutType.UnTiled||this.viewType==LayoutType.Tiled&&1==GameManager.activeTableCount)&&this.setViewForOneTable(),GameManager.isMobile?GameManager.activeTableCount=this.gridParent.getComponent(cc.PageView).getPages().length:GameManager.activeTableCount=this.gridParent.children.length,this.gridRefreshing=!1,cc.size(this.gridParent.width,this.gridParent.height),e=0;e<GameManager.activeTableCount;e++){var a=this.gameModel.activePokerModels[e];a&&cc.isValid(a.node)&&(a.node.active=!0)}this.viewType,LayoutType.UnTiled,0==GameManager.activeTableCount?ScreenManager.showScreen(K.ScreenEnum.LobbyScreen,10,function(){},!1):(this.scaleGroup(),this.onTabSelection(this.prevSelection)),this.node.opacity=255,GameScreen.node.emit("grid-refreshed")}else console.log("TableSwiper refreshGrid 1")},setViewForOneTable:function(){if(1==GameManager.activeTableCount&&!GameManager.isMobile&&!GameManager.isWindows){var e=this.gameModel.activePokerModels[0].presenter;1==GameScreen.viewType&&e.onViewChangedToUnTiled()}for(var t,a,n=0;n<GameManager.activeTableCount;n++)(t=this.tableTabs[n]).active=!0,(a=t.getComponent(o)).tabId=n,a.removeAllListeners(),a.showAlert(!1),a.on(K.PokerEvents.onTableTabSelected,this.onTabSelection.bind(this)),a.setModel(this.gameModel.activePokerModels[n]),this.tableTabs[n]=t},scaleGroup:function(e,t,a,n,i,o,s,r,l){if(K.PORTRAIT)GameManager.isZFold()?(this.gridParent.parent.getChildByName("TableTabs").scale=.65,this.gridParent.parent.getChildByName("TableTabs2").scale=.65,this.gridParent.getComponent(cc.PageView).getPages().forEach(function(e){console.log("scaleGroup",e),e.getChildByName("PokerPresenter").scale=.6,e.getChildByName("PlayerInput").scale=.5,e.getChildByName("RaisePanel").scale=.8,e.getChildByName("OptionalPlayerInput").scale=.5,e.getChildByName("HandHistoryButton").scale=.8,e.getChildByName("ChatButton").scale=.8,e.getChildByName("GameplayOptions").scale=.6,e.getChildByName("Popups").scale=.8,e.getChildByName("UntiledView").scale=.8},this)):GameManager.isShorter()&&(cc.sys.os==cc.sys.OS_IOS?(this.gridParent.parent.getChildByName("TableTabs").scale=.8,this.gridParent.parent.getChildByName("TableTabs2").scale=.8,this.gridParent.getComponent(cc.PageView).getPages().forEach(function(e){console.log("scaleGroup",e),e.getChildByName("PokerPresenter").scale=.878,e.getChildByName("PokerPresenter").getChildByName("TableBg").scale=1.1,e.getChildByName("PokerPresenter").getChildByName("TableBg").y=-20,e.getChildByName("PokerPresenter").getChildByName("HandHolder").y=0,e.getChildByName("PlayerInput").scale=.75,e.getChildByName("RaisePanel").scale=.75,e.getChildByName("OptionalPlayerInput").scale=.75,e.getChildByName("HandHistoryButton").scale=1,e.getChildByName("ChatButton").scale=1,e.getChildByName("GameplayOptions").scale=.9,e.getChildByName("Popups").scale=.9,e.getChildByName("UntiledView").scale=.8},this)):(this.gridParent.parent.getChildByName("TableTabs").scale=.65,this.gridParent.parent.getChildByName("TableTabs2").scale=.65,this.gridParent.getComponent(cc.PageView).getPages().forEach(function(e){console.log("scaleGroup",e),e.getChildByName("PokerPresenter").scale=.75,e.getChildByName("PlayerInput").scale=.6,e.getChildByName("RaisePanel").scale=.6,e.getChildByName("OptionalPlayerInput").scale=.6,e.getChildByName("HandHistoryButton").scale=.8,e.getChildByName("ChatButton").scale=.8,e.getChildByName("GameplayOptions").scale=.8,e.getChildByName("Popups").scale=.8,e.getChildByName("UntiledView").scale=.8},this)));else{var c=cc.size(this.gridParent.width,this.gridParent.height);this.viewType==LayoutType.Tiled&&GameManager.activeTableCount;var d=1;GameScreen.isMobile&&(cc.sys.browserType,cc.sys.BROWSER_TYPE_SAFARI);var h=c.width/c.height,u=1.77-h;u>=0&&(d=1-u/h),cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.OS_IOS?(cc.sys.platform==cc.sys.IPHONE?this.setScale(1,"PokerPresenter"):cc.sys.platform==cc.sys.IPAD?this.setScale(e*d,"PokerPresenter"):cc.sys.platform==cc.sys.ANDROID&&this.setScale(1,"PokerPresenter"),cc.sys.isBrowser&&this.setScale(e*d,"PokerPresenter")):this.setScale(e*d,"PokerPresenter"),this.setScale(t*d,"MobilePlayerInput"),this.setScale(t*d,"PlayerInput"),this.setScale(a*d,"Popups"),this.setScale(n*d,"TopRight"),this.setScale(i*d,"TiledView"),this.setScale(i*d,"MobileChatView"),this.setScale(o*d,"OptionalPlayerInput"),this.setScale(s*d,"GameplayOptions"),this.setScale(r*d,"MobileView"),this.switchWidgets(l)}},repositionPlayerInput:function(e){(GameManager.isMobile?this.gridParent.getComponent(cc.PageView).getPages().length:this.gridParent.children.length).forEach(function(t){var a=t.getChildByName("GameplayOptions");a&&(a.getComponent(cc.Widget).left=e?.4956:.004,a.getComponent(cc.Widget).bottom=e?.0123:.204,a.getComponent(cc.Widget).right=e?.3622:.8539);var n=t.getChildByName("PokerPresenter").getChildByName("HandStrength");n&&(n.getComponent(cc.Widget).right=e?.0309:.4111,n.getComponent(cc.Widget).bottom=e?.283:.0725)},this)},repositionHandStrength:function(e){(GameManager.isMobile?this.gridParent.getComponent(cc.PageView).getPages().length:this.gridParent.children.length).forEach(function(t){var a=t.getChildByName("PokerPresenter").getChildByName("HandStrength");a&&(a.getComponent(cc.Widget).right=e?.0309:.4111,a.getComponent(cc.Widget).bottom=e?.283:.0725)},this)},onTabSelection:function(e){console.log("!!!!!!onTabSelection",e);for(var t=0;t<this.gameModel.activePokerModels.length;t++)if(t==e){if(GameManager.emit("onTabSelection",this.gameModel.activePokerModels[t].roomConfig.channelType!=K.ChannelType.Tournament),this.tableTabs[t].getComponent(o).setActiveView(this.gameModel.activePokerModels[t].roomConfig.channelName,this.gameModel.activePokerModels[t].roomConfig.bigBlind,this.gameModel.activePokerModels[t].roomConfig.smallBlind),this.gameModel.activePokerModels[t].node.active=!0,this.gameModel.activePokerModels[t].node.y=0,this.prevSelection=t,"NORMAL"==this.gameModel.activePokerModels[t].roomConfig.channelType)if(this.unTiledView.getChildByName("LeaveButton")&&(this.unTiledView.getChildByName("LeaveButton").active=!0),this.unTiledView.getChildByName("TableTabs2").getChildByName("TabsContainer").getChildByName("AddButton").active=!1,this.gameModel.activePokerModels[t].isPrivateTable)this.unTiledView.getChildByName("TableTabs2").getChildByName("TabsContainer").getChildByName("AddButton").active=!1;else{var a=this.gameModel.activePokerModels[t].node.getChildByName("Popups").children[0].children;console.log(a);for(var n=!1,i=0;i<a.length;i++)if(a[i].active&&"DummyStickerPop"!=a[i].name){n=!0;break}this.gameModel.activePokerModels[t].presenter.mobileGamePlayOptionsVisible||this.gameModel.activePokerModels[t].presenter.mobileSliderChatSection.active||n||(this.unTiledView.getChildByName("TableTabs2").getChildByName("TabsContainer").getChildByName("AddButton").active=!0)}else this.unTiledView.getChildByName("LeaveButton")&&(this.unTiledView.getChildByName("LeaveButton").active=!1),this.unTiledView.getChildByName("TableTabs2").getChildByName("TabsContainer").getChildByName("AddButton").active=!1;this.gameModel.activePokerModels[t].presenter.playerInput[0].active&&GameManager.emit("disablePageView")}else this.tableTabs[t].getComponent(o).setDeactiveView(this.gameModel.activePokerModels[t].roomConfig.channelName,this.gameModel.activePokerModels[t].roomConfig.bigBlind,this.gameModel.activePokerModels[t].roomConfig.smallBlind),this.gameModel.activePokerModels[t].node.active=GameManager.isMobile;GameManager.isMobile&&GameScreen.gridParent.getComponent(cc.PageView).scrollToPage(e,0),2==this.gameModel.activePokerModels.length&&(this.unTiledView.getChildByName("TableTabs2").getChildByName("TabsContainer").getChildByName("AddButton").active=!1),this.onUpdateTableBgImage()},selectTable:function(e){for(var t=-1,a=0;a<this.gameModel.activePokerModels.length;a++)if(e===this.gameModel.activePokerModels[a].gameData.channelId){t=a;break}-1!=t&&this.onTabSelection(t)},onShowLobby:function(){this.gameModel.activePokerModels[this.prevSelection].node.children[0].getComponent("PokerPresenter").isObserver()?this.leaveCurrent():(ScreenManager.showScreen(K.ScreenEnum.LobbyScreen,10,function(){},!1),this.gameModel.activePokerModels[this.prevSelection].node.children[0].getComponent("PokerPresenter").playAudio(K.Sounds.click))},leaveCurrent:function(){this.gameModel.activePokerModels[this.prevSelection].node.children[0].getComponent("PokerPresenter").playAudio(K.Sounds.click),!this.gridRefreshing&&this.gameModel.activePokerModels.length>0&&this.gameModel.activePokerModels[this.prevSelection]&&(this.gameModel.activePokerModels[this.prevSelection].node.children[0].getComponent("PokerPresenter").onLeaveTableClicked(),this.tableTabs[this.prevSelection].getComponent(o).showAlert(!1))},standUp:function(){this.gameModel.activePokerModels[this.prevSelection].node.children[0].getComponent("PokerPresenter").standUp()},onReplay:function(e){GameManager.popUpManager.show(s.VideoPlayerPopup,e,function(){})},isAlreadyJoined:function(e){if(this.viewType==LayoutType.Tiled){for(var t=!1,a=0;a<this.gameModel.activePokerModels.length;a++)if(e===this.gameModel.activePokerModels[a].gameData.channelId){t=!0;break}return t}return this.gameModel.activePokerModels.length>0&&e==this.gameModel.activePokerModels[this.prevSelection].gameData.channelId},resumeAll:function(){for(var e=0;e<this.gameModel.activePokerModels.length;e++){var t=this.gameModel.activePokerModels[e].node.children[0].getComponent("PokerPresenter");t.resumeBtn.active&&t.onResume()}},shakeScreen:function(e){var t=e.getPosition();this.node.getChildByName("Grid").getComponent(cc.Layout).enabled=!1,e.setPosition(t),this.gridRestoreTiming=0;var a=0;this.schedule(function n(i){var o=this.getRandomInt(-1e3,1e3);a+=i,this.gridRestoreTiming+=i;var s=a/.6,r=cc.misc.clampf(2*s-1,0,1),l=o+4*s,c=2*this.getNoise(l,0)-1,d=2*this.getNoise(0,l)-1;c*=2*r,d*=2*r,e.setPosition(t.x+c,t.y+d),this.count=0,a>=.6&&(a=0,this.gridRestoreTiming>=.6&&(this.node.getChildByName("Grid").getComponent(cc.Layout).enabled=!0),this.unschedule(n,this))},1/60)},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},getNoise:function(e,t){var a=e+57*t;return 1-((a^=a<<13)*(a*a*15731+789221)+1376312589&2147483647)/1073741824},resizeWithBrowserSize:function(e){e?this._resizeWithBrowserSize||(console.log("this code runs on every window resize"),this._resizeWithBrowserSize=!0,window.addEventListener("resize",this._resizeEvent),window.addEventListener("orientationchange",this._orientationChange)):this._resizeWithBrowserSize&&(this._resizeWithBrowserSize=!1,window.removeEventListener("resize",this._resizeEvent),window.removeEventListener("orientationchange",this._orientationChange))},update:function(){},manageButtonsInTwoTable:function(){for(var e=0;e<2;e++){var t=this.gameModel.activePokerModels[e].presenter.addChipsButton,a=this.gameModel.activePokerModels[e].presenter.tiledView.getChildByName("ReplayButton"),n=this.gameModel.activePokerModels[e].presenter.tiledView.getChildByName("LobbyButton").getComponent(cc.Widget),i=this.gameModel.activePokerModels[e].presenter.tiledView.getChildByName("LeaveButton").getComponent(cc.Widget),o=this.gameModel.activePokerModels[e].presenter.tiledView.getChildByName("SettingsButton").getComponent(cc.Widget),s=this.gameModel.activePokerModels[e].presenter.tiledView.getChildByName("HandInfoButton").getComponent(cc.Widget),r=t.getComponent(cc.Widget),l=a.getComponent(cc.Widget),c=this.gameModel.activePokerModels[e].presenter.tiledView.getChildByName("Tile_Untile").getComponent(cc.Widget);n.top=i.top=.2,r.top=o.top=.25,l.top=s.top=.302,c.top=.15}},manageButtonsInFourTable:function(){for(var e=0;e<GameManager.activeTableCount;e++){var t=this.gameModel.activePokerModels[e].presenter.addChipsButton,a=this.gameModel.activePokerModels[e].presenter.tiledView.getChildByName("ReplayButton"),n=this.gameModel.activePokerModels[e].presenter.tiledView.getChildByName("LobbyButton").getComponent(cc.Widget),i=this.gameModel.activePokerModels[e].presenter.tiledView.getChildByName("LeaveButton").getComponent(cc.Widget),o=this.gameModel.activePokerModels[e].presenter.tiledView.getChildByName("SettingsButton").getComponent(cc.Widget),s=this.gameModel.activePokerModels[e].presenter.tiledView.getChildByName("HandInfoButton").getComponent(cc.Widget),r=t.getComponent(cc.Widget),l=a.getComponent(cc.Widget),c=this.gameModel.activePokerModels[e].presenter.tiledView.getChildByName("Tile_Untile").getComponent(cc.Widget);n.top=i.top=.161111,r.top=o.top=.261111,l.top=s.top=.363,c.top=.0534}},onUpdateTableBgImage:function(){for(var e=0;e<this.gameModel.activePokerModels.length;e++)if(e==this.prevSelection){this.gameModel.activePokerModels[e].node.children[0].getComponent("PokerPresenter");for(var t=0;t<GameManager.tableBgImages.length;t++){var a=GameManager.tableBgImages[t];""!=GameManager.user.defaultGameBackground&&GameManager.user.defaultGameBackground._id&&(console.log("!!!!!! onUpdateTableBgImage",GameManager.user.defaultGameBackground._id),a.___data._id==GameManager.user.defaultGameBackground._id&&(this.node.getChildByName("Bg").getComponent(cc.Sprite).spriteFrame=GameManager.tableBgImages[t]))}}},showJoinSimlar:function(){for(var e=this.prevSelection,t=0;t<this.gameModel.activePokerModels.length;t++)if(t==e||-1==this.prevSelection)if(this.unTiledView.getChildByName("TableTabs2").getChildByName("TabsContainer").getChildByName("AddButton").active=!1,"NORMAL"==this.gameModel.activePokerModels[t].roomConfig.channelType)if(this.gameModel.activePokerModels[t].isPrivateTable)this.unTiledView.getChildByName("TableTabs2").getChildByName("TabsContainer").getChildByName("AddButton").active=!1;else{var a=this.gameModel.activePokerModels[t].node.getChildByName("Popups").children[0].children;console.log(a);for(var n=!1,i=0;i<a.length;i++)if(a[i].active&&"DummyStickerPop"!=a[i].name){n=!0;break}this.gameModel.activePokerModels[t].presenter.mobileGamePlayOptionsVisible||this.gameModel.activePokerModels[t].presenter.mobileSliderChatSection.active||n||(this.unTiledView.getChildByName("TableTabs2").getChildByName("TabsContainer").getChildByName("AddButton").active=!0)}else this.unTiledView.getChildByName("TableTabs2").getChildByName("TabsContainer").getChildByName("AddButton").active=!1;2==this.gameModel.activePokerModels.length&&(this.unTiledView.getChildByName("TableTabs2").getChildByName("TabsContainer").getChildByName("AddButton").active=!1)},hideJoinSimlar:function(){this.unTiledView.getChildByName("TableTabs2").getChildByName("TabsContainer").getChildByName("AddButton").active=!1},updateTabImage:function(e,t,a){for(var n=0;n<this.gameModel.activePokerModels.length;n++)this.gameModel.activePokerModels[n].node.children[0].getComponent("PokerPresenter"),this.tableTabs[n].getChildByName("Active").getChildByName("Base").getComponent(cc.Sprite).spriteFrame=t,this.tableTabs[n].getChildByName("Deactive").getChildByName("Base").getComponent(cc.Sprite).spriteFrame=a}}),cc._RF.pop()},{AbstractScreen:"AbstractScreen",GameModel:"GameModel",PokerPresenter:"PokerPresenter",PopUpManager:"PopUpManager",TableTab:"TableTab"}],GameVariationPopup:[function(e,t){"use strict";cc._RF.push(t,"91619hFRW1CWIFTPbfuizel","GameVariationPopup");var a=e("PopUpBase");cc.Class({extends:a,properties:{},start:function(){},onShow:function(e){console.log("onshow Gamevariation",e),this.onSelectVariation=e.onSelectVariation},onHide:function(){},onClickClose:function(){PopupManager.hide(PopupManager.PopupType.GameVariation)},onClickVariation:function(e,t){console.log("Variation selected",t),PopupManager.hide(PopupManager.PopupType.GameVariation),this.onSelectVariation(t)}}),cc._RF.pop()},{PopUpBase:"PopUpBase"}],GeneralBtnsPopup:[function(e,t){"use strict";cc._RF.push(t,"b5782b23iJGR49bveCmgR5T","GeneralBtnsPopup"),e("PopUpManager").PopUpManager,e("PopUpManager").PopUpType;var a=e("PopUpBase");cc.Class({extends:a,onClickEnter:function(){this.onQuit()},onQuit:function(){GameManager.isSD&&(cc.sys.platform,cc.sys.WIN32),GameManager.isSD&&(cc.sys.platform,cc.sys.MACOS),window.open("","_self"),GameManager.playSound(K.Sounds.click),cc.game.end()}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],HandHistoryDetailPopup:[function(e,t){"use strict";cc._RF.push(t,"bf818JFxItIVJMvPTvhohSY","HandHistoryDetailPopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase");cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},cardPrefab:{default:null,type:cc.Prefab},winnerPrefab:{default:null,type:cc.Node},actionPrefab:{default:null,type:cc.Node},rowPrefab:{default:null,type:cc.Prefab},contentParent:{default:null,type:cc.Node},pokerModel:{default:null,type:cc.Node},pokerGame:null,historyText:{default:null,type:cc.Node},contentBlocker:{default:null,type:cc.Node},contentToMove:{default:null,type:cc.Node},infoLbl:{default:null,type:cc.RichText},shadow:{default:null,type:cc.Node},handIDLabel:{default:null,type:cc.Label},newHandIDLabel:{default:null,type:cc.Label},newPageLabel:{default:null,type:cc.Label}},onLoad:function(){this.pokerGame=this.pokerModel.getComponent("PokerModel"),this.index=0},start:function(){this.historyTextOpened=!1,this.data=[],this.dataIndex=0},updateHistory:function(){var e=this.data[this.dataIndex];if(e){if(cc.find("foot/hand",this.node).getComponent(cc.Label).string="Hand: #"+e.handId,cc.find("foot/page",this.node).getComponent(cc.Label).string=this.dataIndex+1+" of "+this.data.length,cc.find("Item/Summary/stake",this.contentParent).getComponent(cc.Label).string=e.stakes,cc.find("Item/Cards/pot",this.contentParent).getComponent(cc.Label).string=e.handHistory.summary.totalPot.toFixed(2),(a=cc.find("Item/Cards/BoardCardContainer",this.contentParent)).removeAllChildren(!0),this.createCards(e.handHistory.summary.boardCard,a),cc.find("Item/Winners",this.contentParent).removeAllChildren(!0),e.handHistory.summary.playersCards)for(var t=0;t<e.handHistory.summary.playersCards.length;t++){var a,n=e.handHistory.summary.playersCards[t],i=cc.instantiate(this.winnerPrefab);i.x=0,i.active=!0,cc.find("Item/Winners",this.contentParent).addChild(i),(a=cc.find("MyCardContainer",i)).removeAllChildren(!0);for(var o=0;o<n.cards.length;o++)n.cards[o]?(n.cards[o].point=n.cards[o].rank,n.cards[o].pointName=n.cards[o].name,n.cards[o].suit=this.getSuit(n.cards[o].type),this.generateCard(a,n.cards[o])):this.generateCard(a,n.cards[o]);cc.find("name",i).getComponent(cc.Label).string=n.playerName?n.playerName:"???";var s=n.winning.toFixed(2);cc.find("winning",i).getComponent(cc.Label).string=(s>0?"+":"")+s,cc.find("winning",i).color=s>=0?(new cc.Color).fromHEX("#0E632A"):(new cc.Color).fromHEX("#FF0000"),cc.find("set",i).getComponent(cc.Label).string=""}cc.find("Item/Actions",this.contentParent).removeAllChildren(!0),e.handHistory.PREFLOP&&e.handHistory.PREFLOP.actions&&this.makeActions(e.handHistory.PREFLOP.actions,cc.find("Item/Actions",this.contentParent)),cc.find("Item/Flop/BoardCardContainer",this.contentParent).removeAllChildren(!0),cc.find("Item/Actions1",this.contentParent).removeAllChildren(!0),cc.find("Item/Actions1",this.contentParent).height=0,e.handHistory.FLOP&&(this.createCards(e.handHistory.FLOP.boardCard,cc.find("Item/Flop/BoardCardContainer",this.contentParent)),e.handHistory.FLOP.actions&&this.makeActions(e.handHistory.FLOP.actions,cc.find("Item/Actions1",this.contentParent))),cc.find("Item/Turn/BoardCardContainer",this.contentParent).removeAllChildren(!0),cc.find("Item/Actions2",this.contentParent).removeAllChildren(!0),cc.find("Item/Actions2",this.contentParent).height=0,e.handHistory.TURN&&(this.createCards(e.handHistory.TURN.boardCard,cc.find("Item/Turn/BoardCardContainer",this.contentParent)),e.handHistory.TURN.actions&&this.makeActions(e.handHistory.TURN.actions,cc.find("Item/Actions2",this.contentParent))),cc.find("Item/River/BoardCardContainer",this.contentParent).removeAllChildren(!0),cc.find("Item/Actions3",this.contentParent).removeAllChildren(!0),cc.find("Item/Actions3",this.contentParent).height=0,e.handHistory.RIVER&&(this.createCards(e.handHistory.RIVER.boardCard,cc.find("Item/River/BoardCardContainer",this.contentParent)),e.handHistory.RIVER.actions&&this.makeActions(e.handHistory.RIVER.actions,cc.find("Item/Actions3",this.contentParent)))}},makeActions:function(e,t){for(var a=0;a<e.length;a++){var n=e[a];if("startGame"!=n.action&&"Join Channel"!=n.action&&"leave"!=n.action&&"roundOver"!=n.action&&null!=n.action&&null!=n.action&&null!=n.playerName){var i=cc.instantiate(this.actionPrefab);i.x=0,i.active=!0,t.addChild(i),cc.find("name",i).getComponent(cc.Label).string=n.playerName,n.chips?cc.find("v",i).getComponent(cc.Label).string=Number(n.chips).toFixed(2)>0?""+Number(n.chips).toFixed(2):Number(n.chips).toFixed(2):cc.find("v",i).getComponent(cc.Label).string="",n.title&&""!=n.title?(cc.find("title",i).active=!0,cc.find("title/name",i).getComponent(cc.Label).string=n.title):cc.find("title",i).active=!1,cc.find("check",i).active=!1,cc.find("allin",i).active=!1,cc.find("call",i).active=!1,cc.find("fold",i).active=!1,cc.find("raise",i).active=!1,cc.find("bet",i).active=!1,cc.find("bb",i).active=!1,cc.find("sb",i).active=!1,"CHECK"==n.action?cc.find("check",i).active=!0:"ALLIN"==n.action?cc.find("allin",i).active=!0:"CALL"==n.action?cc.find("call",i).active=!0:"FOLD"==n.action?cc.find("fold",i).active=!0:"RAISE"==n.action?cc.find("raise",i).active=!0:"BET"==n.action?cc.find("bet",i).active=!0:"SB"==n.action?cc.find("sb",i).active=!0:"BB"==n.action&&(cc.find("bb",i).active=!0)}}},getSuit:function(e){return"spade"===e?K.Suit.Spade:"heart"===e?K.Suit.Heart:"club"===e?K.Suit.Club:"diamond"===e?K.Suit.Diamond:void 0},createCards:function(e,t){if(e)for(var a=this.countCards(e),n=0;n<e.length;n++)for(var i=0;i<e[n].length&&!(a<=5&&1==n);i++)if(e[n][i])this.generateCard(t,this.pokerGame.getCardByData(e[n][i]),n*e[n].length+i);else if(null==e[n][i]&&cc.isValid(this.cardPrefab)){var o=cc.instantiate(this.cardPrefab);t.addChild(o)}},onShow:function(e){GameManager.emit("disablePageView"),this.sound=e.playSound,cc.find("Center",this.node).active=!1,cc.find("empty",this.node).active=!1,cc.find("foot",this.node).active=!1;var t=this;ServerCom.pomeloRequest("room.channelHandler.getHandHistory",{channelId:this.pokerGame.gameData.channelId,access_token:K.Token.access_token},function(e){console.log("getHandHistory",e),t.data=e.data,t.dataIndex=0,t.data.length>0?(cc.find("Center",t.node).active=!0,cc.find("empty",t.node).active=!1,cc.find("foot",t.node).active=!0):(cc.find("Center",t.node).active=!1,cc.find("empty",t.node).active=!0,cc.find("foot",t.node).active=!1),t.updateHistory()},null,5e3,!1)},onNewTab:function(){},populateRows:function(){GameManager.removeAllChildren(this.contentParent);var e=this.pokerGame.handTabs;if(null!=e)for(var t=0;t<e.length;t++)this.createRow(e,t)},createRow:function(e,t){var a=cc.instantiate(this.rowPrefab);this.contentParent.children.length>10&&this.contentParent.removeChild(this.contentParent.children[0]),this.contentParent.addChild(a);var n=t%2==0?new cc.color(179,179,179):new cc.color(229,229,229);a.getChildByName("Base").color=n;var i,o=a.getChildByName("MyCardContainer"),s=a.getChildByName("BoardCardContainer");if(i=e[t].hands)for(var r=this.countCards(i),l=0,c=0;c<i.length;c++)for(var d=0;d<i[c].length&&!(r<=5&&1==c);d++){if(i[c][d])this.generateCard(s,this.pokerGame.getCardByData(i[c][d]),c*i[c].length+d),l++;else if(null==i[c][d]&&cc.isValid(this.cardPrefab)){var h=cc.instantiate(this.cardPrefab);s.addChild(h)}10==r&&5==l?this.generateCard(s,null,c*i[c].length+d,!0):i[c][d+1]&&null!=i[c][d+1]&&(7!=r||3!=l&&5!=l||this.generateCard(s,null,c*i[c].length+d,!0),6!=r||4!=l&&5!=l||this.generateCard(s,null,c*i[c].length+d,!0))}if(e[t].myCards)for(var u=0;u<e[t].myCards.length;u++)this.generateCard(o,this.pokerGame.getCardByData(e[t].myCards[u]),t);e[t].pot?a.getChildByName("PotLabel").getComponent(cc.Label).string=e[t].pot.roundOff(2):e[t].value.pot&&(a.getChildByName("PotLabel").getComponent(cc.Label).string=e[t].value.pot.roundOff(2)),a.getComponent("HandHistoryTab").handHistoryId=e[t].handHistoryId,a.getComponent("HandHistoryTab").onClickCallback=this.showTabHistory.bind(this),e[t].videoId?(a.getComponent("HandHistoryTab").replayId=e[t].videoId,a.getComponent("HandHistoryTab").onReplayCallback=this.showReplay.bind(this),a.getComponent("HandHistoryTab").id=t):(a.getComponent("HandHistoryTab").replayId="",a.getComponent("HandHistoryTab").onReplayCallback=null)},generateCard:function(e,t,a,n){if(void 0===n&&(n=!1),cc.isValid(this.cardPrefab)){var i=cc.instantiate(this.cardPrefab);i.getComponent("Card").init(t,this.pokerGame),i.getComponent("Card").reveal(!!t),e.setScale(1,1),e.addChild(i)}},countCards:function(e){for(var t=0,a=0;a<e.length;a++)for(var n=0;n<e[a].length;n++)e[a][n]&&null!=e[a][n]&&t++;return t},showTabHistory:function(e,t){this.historyTextOpened||this.pokerGame.getHandHistory(e,function(e){var a=this;this.historyTextOpened=!0,e.info=e.info.replace(/Kicker/g,"<color=#32CD32>Kicker</color>"),e.info+="\n",this.contentBlocker.active=!0,this.contentBlocker.opacity=0,this.historyText.setScale(1,0),this.historyText.active=!0;var n=e.info.substring(e.info.indexOf(": #")+4,200),i=n.substring(0,n.indexOf("-"));this.handIDLabel.string="Hand ID  #"+i,this.infoLbl.string=e.info;var o=this.research(t.node);t.node.getChildByName("BoardCardContainer").childrenCount>5?(this.historyText.y=107,this.contentBlocker.y=110,this.shadow.height=77,this.shadow.y=-6.5):(this.historyText.y=161,this.contentBlocker.y=164,this.shadow.height=46,this.shadow.y=-2.5),this.moved=this.contentToMove.y;var s=cc.scaleTo(.3,1,1).easing(cc.easeIn(1)),r=cc.callFunc(function(){a.shadow.active=!0,a.infoLbl.node.parent.parent.getComponent(cc.ScrollView).scrollToTop()},this),l=cc.moveTo(.3,3,244+o),c=cc.fadeTo(.3,255),d=cc.callFunc(function(){a.historyText.runAction(cc.sequence(s,r))},this),h=cc.callFunc(function(){a.contentBlocker.runAction(cc.sequence(c,d))},this);this.contentToMove.runAction(cc.sequence(l,h))}.bind(this),!0)},research:function(e){var t=0,a=!0;return this.contentParent.children.forEach(function(n){n==e?a=!1:a&&(t+=n.height-4)},this),t},minimiseHistoryText:function(){var e=this,t=cc.callFunc(function(){e.infoLbl.string="",e.shadow.active=!1},this),a=cc.scaleTo(.3,1,0).easing(cc.easeIn(1)),n=cc.fadeTo(.3,0),i=cc.moveTo(.3,3,this.moved),o=cc.callFunc(function(){e.contentBlocker.active=!1,e.historyText.active=!1,e.historyTextOpened=!1},this),s=cc.callFunc(function(){e.contentToMove.runAction(cc.sequence(i,o))},this),r=cc.callFunc(function(){e.contentBlocker.runAction(cc.sequence(n,s))},this);this.historyText.runAction(cc.sequence(t,a,r))},showReplay:function(e,t){if(!this.pokerGame.isPlayerStandUp()){var a={};a.currentId=e,a.refModel=this.pokerGame,a.id=t,GameManager.popUpManager.show(n.VideoPlayerPopup,a,function(){})}},onClose:function(){GameManager.emit("enablePageView"),this.popUpManager.hide(n.HandHistoryDetailPopup,function(){}),this.pokerGame.gameData.settings.muteGameSound||GameManager.playSound(K.Sounds.click)},onLeft:function(){this.dataIndex-=1,this.dataIndex<0&&(this.dataIndex=0),this.updateHistory()},onRight:function(){this.dataIndex+=1,this.dataIndex>=this.data.length&&(this.dataIndex=this.data.length),this.updateHistory()}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],HandHistoryPopup:[function(e,t){"use strict";cc._RF.push(t,"f8027QJr01IPJL8QAvGo21d","HandHistoryPopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase");cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},infoLbl:{default:null,type:cc.RichText},headingLbl:{default:null,type:cc.Label},scrollView:{default:null,type:cc.ScrollView}},onShow:function(e){null!=e&&(e.info=e.info.replace(/Kicker/g,"<color=#32CD32>Kicker</color>"),this.infoLbl.string=e.info,this.headingLbl.string=e.heading),GameManager.isMobile||this.registerUPandDOWN()},onClickEnter:function(){this.cancel()},cancel:function(){GameManager.isMobile,this.popUpManager.hide(n.HandHistoryPopup,function(){})},onUpScrollClick:function(){var e=this.scrollView,t=e.getScrollOffset(),a=(e.content.children.length,cc.v2(0,t.y-26));this.scrollView.scrollToOffset(a,.2)},onDownScrollClick:function(){var e=this.scrollView.getScrollOffset(),t=cc.v2(0,e.y+26);this.scrollView.scrollToOffset(t,.2)},registerUPandDOWN:function(){}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],HandHistoryTab:[function(e,t){"use strict";cc._RF.push(t,"02141DG1QpLhoJQi6Y6Tl8r","HandHistoryTab"),cc.Class({extends:cc.Component,properties:{handHistoryId:null,onClickCallback:null,replayId:null,onReplayCallback:null,id:-1},onLoad:function(){},onClick:function(){this.onClickCallback(this.handHistoryId,this)},onReplay:function(){this.onReplayCallback&&this.onReplayCallback(this.replayId,this.id)}}),cc._RF.pop()},{}],HandPanel:[function(e,t){"use strict";cc._RF.push(t,"7ca5ft4J71N2Yrm+5W9lgOe","HandPanel");var a=e("ChatPanel"),n=(e("Card"),null),i=(e("HandHistoryTab"),e("PopUpManager").PopUpType);cc.Class({extends:cc.Component,properties:{chatPanel:{default:null,type:a},valuePrefab:{default:null,type:cc.Prefab},handCardPrefab:{default:null,type:cc.Prefab},valueParent:{default:null,type:cc.Node},pokerModel:{default:null,type:cc.Node},pokerGame:null,isMobileView:!1,cardSeparatarPrefab:{default:null,type:cc.Prefab}},onLoad:function(){n=this.onNewTab.bind(this),this.pokerGame=this.pokerModel.getComponent("PokerModel"),this.registerBroadcast(),this.showHandTab(),this.TabCounts=0},registerBroadcast:function(){this.pokerGame.off(K.PokerEvents.onHandTab,n),this.pokerGame.on(K.PokerEvents.onHandTab,n)},onEnable:function(){},showHandTab:function(){GameManager.removeAllChildren(this.valueParent);var e=this.pokerGame.handTabs;if(null!=e)for(var t=0;t<e.length;t++)this.initialize(e,t)},onNewTab:function(){this.initialize(this.pokerGame.handTabs,this.pokerGame.handTabs.length-1)},initialize:function(e,t){setTimeout(function(){this.TabCounts++;var a=cc.instantiate(this.valuePrefab);this.valueParent.children.length>10&&this.valueParent.removeChild(this.valueParent.children[0]),this.valueParent.addChild(a);var n=this.TabCounts%2==0?new cc.color(191,191,191):new cc.color(255,255,255);a.getChildByName("Base").color=n;var i,o=a.getChildByName("MyCardContainer"),s=a.getChildByName("BoardCardContainer");if(i=e[t].hands)for(var r=this.countCards(i),l=0,c=0;c<i.length;c++)for(var d=0;d<i[c].length&&!(r<=5&&1==c);d++)i[c][d]?(this.generateCard(s,this.pokerGame.getCardByData(i[c][d]),c*i[c].length+d),l++):null==i[c][d]&&setTimeout(function(){if(cc.isValid(this.handCardPrefab)){var e=cc.instantiate(this.handCardPrefab);e.scale=this.isMobileView?new cc.Vec2(1.6,1.6):new cc.Vec2(1,1),e.opacity=2,s.addChild(e)}}.bind(this),100*(c*i[c].length+d)),10==r&&5==l?this.generateCard(s,null,c*i[c].length+d,!0):i[c][d+1]&&null!=i[c][d+1]&&(7!=r||3!=l&&5!=l||this.generateCard(s,null,c*i[c].length+d,!0),6!=r||4!=l&&5!=l||this.generateCard(s,null,c*i[c].length+d,!0));if(e[t].myCards)for(var h=0;h<e[t].myCards.length;h++)this.generateCard(o,this.pokerGame.getCardByData(e[t].myCards[h]),t);e[t].pot?a.getChildByName("PotLabel").getComponent(cc.Label).string=e[t].pot.roundOff(2):e[t].value.pot&&(a.getChildByName("PotLabel").getComponent(cc.Label).string=e[t].value.pot.roundOff(2)),a.getComponent("HandHistoryTab").handHistoryId=e[t].handHistoryId,a.getComponent("HandHistoryTab").onClickCallback=this.showTabHistory.bind(this),e[t].videoId?(a.getComponent("HandHistoryTab").replayId=e[t].videoId,a.getComponent("HandHistoryTab").onReplayCallback=this.showReplay.bind(this),a.getComponent("HandHistoryTab").id=t):(a.getComponent("HandHistoryTab").replayId="",a.getComponent("HandHistoryTab").onReplayCallback=null)}.bind(this),100*t)},countCards:function(e){for(var t=0,a=0;a<e.length;a++)for(var n=0;n<e[a].length;n++)e[a][n]&&null!=e[a][n]&&t++;return t},generateCard:function(e,t,a,n){void 0===n&&(n=!1),setTimeout(function(){if(n)"Values_Mobile"!=this.valuePrefab._name&&(e.parent.height=78,e.parent.getChildByName("Base").height=78);else if(cc.isValid(this.handCardPrefab)){var a=cc.instantiate(this.handCardPrefab);a.getComponent("Card").init(t,this.pokerGame),a.getComponent("Card").reveal(!0),a.scale=this.isMobileView?new cc.Vec2(1.6,1.6):new cc.Vec2(1,1),e.addChild(a)}}.bind(this),100*a)},showTabHistory:function(){this.pokerGame.showHandHistoryDetail()},showReplay:function(e,t){if(!this.pokerGame.isPlayerStandUp()){var a={};a.currentId=e,a.refModel=this.pokerGame,a.id=t,this.pokerModel.children[0].getComponent("PokerPresenter").playAudio(K.Sounds.click),GameManager.popUpManager.show(i.VideoPlayerPopup,a,function(){})}}}),cc._RF.pop()},{Card:"Card",ChatPanel:"ChatPanel",HandHistoryTab:"HandHistoryTab",PopUpManager:"PopUpManager"}],"IP-SelectionScreen":[function(e,t){"use strict";cc._RF.push(t,"9f172HP40FHrrqEexFNURmO","IP-SelectionScreen");var a=window.K.ServerAddress,n=cc.Enum({gameHost:0,gamePort:1,maintenanceHost:2,maintenancePort:3,dashboardHost:4,dashboardPort:5,None:100});cc.Class({extends:cc.Component,properties:{errorMessage:{default:null,type:cc.Label},editBoxes:{default:[],type:cc.EditBox},toggleGroup:{default:null,type:cc.ToggleGroup},noneToggle:{default:null,type:cc.Toggle},nextScreen:{default:null,type:cc.Node}},start:function(){this.noneToggle.isChecked=!0},onClickUpdate:function(){this.node.active=!1,this.nextScreen.active=!0},onTogglevalueChanged:function(e,t){console.log("on Toggle value changed",t),t==n.None?(console.log("no change required"),this.setEBValue()):this.setIPWithToggle(t)},setIP:function(){a.gameServer=this.editBoxes[n.gameHost].string,a.gamePort=this.editBoxes[n.gamePort].string,a.maintainanceIP="http://"+this.editBoxes[n.maintenanceHost].string,a.maintainancePort=this.editBoxes[n.maintenancePort].string,a.ipAddress="http://"+this.editBoxes[n.dashboardHost].string,a.port=this.editBoxes[n.dashboardPort].string},setIPWithToggle:function(e){a.gameServer="192.168.2."+e,a.maintainanceIP="http://192.168.2."+e,a.ipAddress="http://192.168.2."+e,console.log(a.gameServer,a.maintainanceIP,a.ipAddress),this.setEBValue()},setEBValue:function(){this.editBoxes[n.gameHost].string=a.gameServer,this.editBoxes[n.gamePort].string=a.gamePort,this.editBoxes[n.maintenanceHost].string=a.maintainanceIP,this.editBoxes[n.maintenancePort].string=a.maintainancePort,this.editBoxes[n.dashboardHost].string=a.ipAddress,this.editBoxes[n.dashboardPort].string=a.port}}),cc._RF.pop()},{}],InGamePreferencesPopup:[function(e,t){"use strict";cc._RF.push(t,"5e88dHobN9J75JCMYvUp8ja","InGamePreferencesPopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase"),o=(e("Checkbox"),e("ResponseTypes").GameData,e("PostTypes").JoinSimilar),s=e("Toggle"),r=(e("GameScreen"),e("PokerModel").PokerModel);cc.Class({extends:i,properties:{content1:{default:null,type:cc.Node},content2:{default:null,type:cc.Node},top1:{default:null,type:cc.Node},top2:{default:null,type:cc.Node},content1Tab:{default:null,type:cc.Node},content2Tab:{default:null,type:cc.Node},popUpManager:{default:null,type:a},tableTheme:{default:null,type:cc.Node},tileViewSelection:{default:null,type:cc.Toggle},unTileViewSelection:{default:null,type:cc.Toggle},dealerChat:{default:null,type:s},Chat:{default:null,type:s},soundToggle:{default:null,type:s},joinSimilarBtn:{default:null,type:cc.Button},tableColor:{default:null,type:cc.Node},tableLayout:{default:null,type:cc.Node},muckHandToggle:{default:null,type:cc.Toggle},showFoldHandToggle:{default:null,type:s},coloredCardToggle:{default:null,type:s},activeModel:null,pokerVersionString:{default:null,type:cc.RichText},gameVersionString:{default:null,type:cc.RichText},playerImg:{default:null,type:cc.Sprite},model:{default:null,type:r},handSToggle:{default:null,type:s},BBToggle:{default:null,type:s}},onContent1:function(){this.content1.active=!0,this.content2.active=!1,this.content1Tab.children[0].active=!0,this.content1Tab.children[1].color=cc.Color.WHITE,this.content2Tab.children[0].active=!1,this.content2Tab.children[1].color=cc.Color.BLACK},onContent2:function(){this.content1.active=!1,this.content2.active=!0,this.content2Tab.children[0].active=!0,this.content2Tab.children[1].color=cc.Color.WHITE,this.content1Tab.children[0].active=!1,this.content1Tab.children[1].color=cc.Color.BLACK},onLoad:function(){},onShow:function(e){this.activeModel=e,this.activeModel.gameData.settings.muteGameSound==this.soundToggle.state&&this.soundToggle.onToggle(),this.activeModel.gameData.settings.isShowCard!==this.showFoldHandToggle.state&&this.showFoldHandToggle.onToggle(),GameManager.user.settings.stackInBB!==this.BBToggle.state&&this.BBToggle.onToggle(),GameManager.emit("disablePageView")},toggleSwitch:function(){this.node.parent.parent.parent.parent.children.length},onJoinSimilar:function(){if(this.activeModel.gameData.settings.muteGameSound||GameManager.playSound(K.Sounds.click),GameManager.activeTableCount>=GameManager.maxTableCounts)GameManager.popUpManager.show(n.MaxTablesJoinedPopup,null,function(){});else{var t=new o(this.activeModel.roomConfig.isRealMoney,this.activeModel.roomConfig.channelVariation,this.activeModel.roomConfig.smallBlind,this.activeModel.roomConfig.bigBlind,this.activeModel.roomConfig.maxPlayers,this.activeModel.roomConfig.turnTime,GameManager.user.playerId);t.channelId=this.activeModel.gameData.channelId,ServerCom.pomeloRequest(K.PomeloAPI.joinSimilar,t,function(t){var a=t;if(t.success){var n={};n.channelId=a.similarChannelId||"",n.channelType="NORMAL",n.tableId="",n.isRequested=!0;var i=K.PomeloAPI.joinChannel;"Open Face Chinese Poker"==this.activeModel.roomConfig.channelVariation&&(i=e("OFCConfigs").PomeloAPI.joinChannel),GameManager.join(n.channelId,i,n)}}.bind(this),function(){})}},onChooseAvatarSound:function(){this.onSettingsClose(),GameManager.popUpManager.show(n.AvatarDialog,this.activeModel.gameData.settings.muteGameSound,function(){})},onToggleSound:function(){var e={};e.channelId=this.activeModel.gameData.channelId,e.playerId=GameManager.user.playerId,e.key="muteGameSound",this.activeModel.gameData.settings.muteGameSound||GameManager.playSound(K.Sounds.click),this.activeModel.gameData.settings.muteGameSound=!this.activeModel.gameData.settings.muteGameSound,e.value=this.activeModel.gameData.settings.muteGameSound,ServerCom.pomeloRequest(K.PomeloAPI.updateTableSettings,e,function(e){e.success}.bind(this),null,5e3,!1)},onToggleMuckHand:function(){var e={};e.channelId=this.activeModel.gameData.channelId,e.playerId=GameManager.user.playerId,e.key="isMuckHand",e.value=this.muckHandToggle.state,ServerCom.pomeloRequest(K.PomeloAPI.updateTableSettings,e,function(e){e.success?this.activeModel.gameData.settings.isMuckHand=!this.activeModel.gameData.settings.isMuckHand:this.muckHandToggle.onToggle()}.bind(this),null,5e3,!1)},onToggleShowFoldHand:function(){var e={};e.channelId=this.activeModel.gameData.channelId,e.playerId=GameManager.user.playerId,e.key="isShowCard",e.value=this.showFoldHandToggle.state,ServerCom.pomeloRequest(K.PomeloAPI.updateTableSettings,e,function(e){e.success?(this.activeModel.gameData.settings.isShowCard=!this.activeModel.gameData.settings.isShowCard,this.activeModel.presenter.showFoldBtn.node.parent.getChildByName("tick").active=this.activeModel.gameData.settings.isShowCard):this.showFoldHandToggle.onToggle()}.bind(this),null,5e3,!1)},onTogglePlayerChat:function(){this.activeModel.gameData.settings.muteGameSound||GameManager.playSound(K.Sounds.click);var e={query:{},updateKeys:{}};e.query.playerId=GameManager.user.playerId,e.updateKeys["settings.playerChat"]=this.Chat.state,ServerCom.pomeloRequest(K.PomeloAPI.updateProfile,e,function(e){e.success?(GameManager.user.playerChat=!GameManager.user.playerChat,GameManager.emit(K.PokerEvents.onChatSettingsChanged)):this.Chat.onToggle()}.bind(this),null,5e3,!1)},onToggleFourColorCard:function(){this.activeModel.gameData.settings.muteGameSound||GameManager.playSound(K.Sounds.click);var e={};e.channelId=this.activeModel.gameData.channelId,e.playerId=GameManager.user.playerId,e.key="cardColor",e.value=this.coloredCardToggle.state,ServerCom.pomeloRequest(K.PomeloAPI.updateTableSettings,e,function(e){e.success?(this.activeModel.gameData.settings.cardColor=this.coloredCardToggle.state,this.setColorCardPref(this.coloredCardToggle.state)):this.coloredCardToggle.onToggle()}.bind(this),null,5e3,!1)},setColorCardPref:function(e){e?this.activeModel.emit(K.PokerEvents.onCardColorChange,K.CardColoring.FourCardColor,this.model):this.activeModel.emit(K.PokerEvents.onCardColorChange,K.CardColoring.TwoCardColor,this.model)},onSetTiledLayOut:function(){this.activeModel.valueChange&&(this.unTileViewSelection.isChecked=!1,this.tileViewSelection.isChecked=!0,GameScreen.setTiledView())},onSetUnTiledLayOut:function(){this.activeModel.valueChange&&(this.unTileViewSelection.isChecked=!0,this.tileViewSelection.isChecked=!1,GameScreen.setUnTiledView())},onToggleDealerChat:function(){this.activeModel.gameData.settings.muteGameSound||GameManager.playSound(K.Sounds.click);var e={query:{},updateKeys:{}};e.query.playerId=GameManager.user.playerId,e.updateKeys["settings.dealerChat"]=this.dealerChat.state,ServerCom.pomeloRequest(K.PomeloAPI.updateProfile,e,function(e){e.success?(GameManager.user.dealerChat=!GameManager.user.dealerChat,GameManager.emit(K.PokerEvents.onDealerChatSettingsChanged)):this.dealerChat.onToggle()}.bind(this),null,5e3,!1)},setTableColor:function(e,t){this.activeModel.gameData.settings.tableColor=t;var a={};a.channelId=this.activeModel.gameData.channelId,a.playerId=GameManager.user.playerId,a.key="tableColor",a.value=t,ServerCom.pomeloRequest(K.PomeloAPI.updateTableSettings,a,function(e){e.success&&(GameManager.user.tableColor=t)}.bind(this),null,5e3,!1)},onSettingsClose:function(){this.activeModel.gameData.settings.muteGameSound||GameManager.playSound(K.Sounds.click),GameManager.emit("enablePageView"),this.popUpManager.hide(1,function(){})},onLogOut:function(){this.activeModel.gameData.settings.muteGameSound||GameManager.playSound(K.Sounds.click),GameManager.popUpManager.show(n.OnLogOutPopup,null,function(){})},onChangeTheme:function(){this.activeModel.gameData.settings.muteGameSound||GameManager.playSound(K.Sounds.click),this.tableTheme.active=!0,GameManager.emit("enablePageView"),this.popUpManager.hide(1,function(){})},onToggleHandS:function(){var e={};e.playerId=GameManager.user.playerId,e.showHandStrength=this.handSToggle.state,e.access_token=K.Token.access_token,e.isLoggedIn=!0,ServerCom.pomeloRequest("connector.entryHandler.changeHandStrength",e,function(e){e.success?this.activeModel.gameData.showHandStrength=!this.activeModel.gameData.showHandStrength:this.handSToggle.onToggle()}.bind(this),null,5e3,!1)},onToggleBB:function(){var e={};e.playerId=GameManager.user.playerId,e.stackInBB=this.BBToggle.state,e.access_token=K.Token.access_token,e.isLoggedIn=!0,ServerCom.pomeloRequest("connector.entryHandler.changeStackInBB",e,function(e){e.success?(GameManager.user.settings.stackInBB=!GameManager.user.settings.stackInBB,GameManager.isBB=GameManager.user.settings.stackInBB,GameManager.emit("switchBB")):this.BBToggle.onToggle()}.bind(this),null,5e3,!1)}}),cc._RF.pop()},{Checkbox:"Checkbox",GameScreen:"GameScreen",OFCConfigs:"OFCConfigs",PokerModel:"PokerModel",PopUpBase:"PopUpBase",PopUpManager:"PopUpManager",PostTypes:"PostTypes",ResponseTypes:"ResponseTypes",Toggle:"Toggle"}],InSufficientChipsPopup:[function(e,t){"use strict";cc._RF.push(t,"c79c9/Gq/ZNDpodQX9Zcon7","InSufficientChipsPopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase");e("Checkbox"),cc.Class({extends:i,properties:{popUpManager:{default:null,type:a}},onLoad:function(){},onShow:function(){},onClickEnter:function(){this.onBuyIn()},onBuyIn:function(){},onLater:function(){this.popUpManager.hide(n.InSufficient,function(){})}}),cc._RF.pop()},{Checkbox:"Checkbox",PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],InfoPopup:[function(e,t){"use strict";cc._RF.push(t,"19eb57eN7pEco1ZZEDTRYSk","InfoPopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase");cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},keyLabels:{default:[],type:cc.Label},valueLabels:{default:[],type:cc.Label}},start:function(){},onShow:function(e){GameManager.emit("disablePageView"),this.sound=e.playSound;var t=0;for(var a in e.info)t<this.keyLabels.length&&-1==a.indexOf("Rake")&&-1==a.indexOf("Cap")&&-1==a.indexOf("Max")&&(this.keyLabels[t].string=a,this.valueLabels[t].string=e.info[a],t++);this.keyLabels.forEach(function(e){"keys"==e.string?e.node.active=!1:e.node.active=!0}),this.valueLabels.forEach(function(e){"values"==e.string?e.node.active=!1:e.node.active=!0})},onQuit:function(){GameManager.emit("enablePageView"),this.popUpManager.hide(n.GameInfoPopup,function(){}),this.sound(K.Sounds.click)}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],InstructionPopup:[function(e,t){"use strict";cc._RF.push(t,"5f281l1RaJATpORD/PrcsFR","InstructionPopup");var a=e("PopUpManager").PopUpType,n=e("PopUpBase");cc.Class({extends:n,properties:{infoLbl:{default:null,type:cc.Label},headingLbl:{default:null,type:cc.Label}},onShow:function(){},onClickEnter:function(){this.cancel()},cancel:function(){GameManager.popUpManager.hide(a.InstructionPopup,function(){})}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],InviteToPlayPopup:[function(e,t){"use strict";cc._RF.push(t,"3d529WvGHtJ97yOaN02EaLI","InviteToPlayPopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase"),o=e("PostTypes").JoinChannel;cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},infoLbl:{default:null,type:cc.Label}},onShow:function(e){console.log("InviteToPlayPopup data ",JSON.stringify(e));var t=LocalizedManager.t("TXT_HAS_INVITED_YOU"),a=e.playerName,n=e.channelName+"( "+e.smallBlind+"/"+e.bigBlind+" )";t=(t=t.replace(/XXX/gi,a)).replace(/YYY/gi,n),this.infoLbl.string=t,this.channelId=e.channelId,this.joinChannelData={},this.joinChannelData.playerId=GameManager.user.playerId,this.joinChannelData.channelId=this.channelId,this.joinChannelData.channelType=e.channelVariation},onClickRejectBtn:function(){this.popUpManager.hide(n.InviteToPlayPopup,function(){}),GameManager.playSound(K.Sounds.click)},onClickAcceptBtn:function(){var e=new o(this.joinChannelData);GameManager.join(this.channelId,K.PomeloAPI.joinChannel,e),this.popUpManager.hide(n.InviteToPlayPopup,function(){})}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager",PostTypes:"PostTypes"}],InvliteFriendsList:[function(e,t){"use strict";cc._RF.push(t,"dcaceCOmU5P9Yxz+VvkIvlI","InvliteFriendsList"),e("PopUpManager").PopUpManager;var a=e("PopUpManager").PopUpType;e("PopUpBase"),e("SliderTouch"),e("CustomEditBox"),e("EditBoxUtil"),e("PostTypes").SetPlayerValData,cc.Class({extends:cc.Component,properties:{contentNode:{default:null,type:cc.Node},itemNode:{default:null,type:cc.Node}},onDestroy:function(){},onEnable:function(){},onLoad:function(){},onShow:function(e){this.data=e,this.onFriendsList()},onClose:function(){this.node.active=!1},onFriendsList:function(){var e=this;GameManager.friendRequstFriends(function(){e.contentNode.removeAllChildren();for(var t=0;t<GameManager.buddies.length;t++){var a=cc.instantiate(e.itemNode);a.setPosition(0,0),a.active=!0,cc.find("layout/name",a).getComponent(cc.Label).string=GameManager.buddies[t].userName,cc.find("Avatar/online",a).active=GameManager.buddies[t].isOnline,cc.find("Avatar/offline",a).active=!GameManager.buddies[t].isOnline,cc.find("Avatar/Mask/avatarSprite",a).getComponent(cc.Sprite).spriteFrame=GameManager.avatarImages["undefined"!=GameManager.buddies[t].profileImage?Number(GameManager.buddies[t].profileImage):1],cc.find("Avatar",a).getComponent(cc.Button).clickEvents[0].customEventData=GameManager.buddies[t],a.__data=GameManager.buddies[t],a.parent=e.contentNode}})},onSelect:function(e,t){console.log("onSelect",t),console.log(this.data);var n={playerId:t.playerId,channelId:this.data.model.gameData.channelId,channelName:this.data.model.roomConfig.channelName,smallBlind:this.data.model.gameData.tableDetails.smallBlind,bigBlind:this.data.model.gameData.tableDetails.bigBlind,channelVariation:this.data.model.roomConfig.channelVariation};console.log(n),GameManager.inviteBuddy(n,function(e){GameManager.popUpManager.show(a.NotificationPopup,e.message,function(){})})}}),cc._RF.pop()},{CustomEditBox:"CustomEditBox",EditBoxUtil:"EditBoxUtil",PopUpBase:"PopUpBase",PopUpManager:"PopUpManager",PostTypes:"PostTypes",SliderTouch:"SliderTouch"}],JohnyChat:[function(e,t){"use strict";cc._RF.push(t,"3aa73VS0EJPYKk9932wJLsp","JohnyChat"),cc.Class({extends:cc.Component,properties:{pokerModel:{default:null,type:cc.Node},pokerGame:null,chatGridParent:{default:null,type:cc.Node},chatContent:{default:null,type:cc.Node},other:{default:null,type:cc.Node},loaded:!1},onLoad:function(){this.loaded||(this.loaded=!0,this.pokerGame=this.pokerModel.getComponent("PokerModel"),this.registerBroadcast(),this.other&&this.other.getComponent("DealerChatPanel").onLoad())},start:function(){},onEnable:function(){},onDestroy:function(){this.pokerGame&&this.pokerGame.off(K.PokerEvents.OnDealerChat,this.onChat.bind(this))},scrollToBottom:function(){this.chatGridParent.parent.parent.getComponent(cc.ScrollView).scrollToBottom(.5)},generateChat:function(e){var t=cc.instantiate(this.chatContent);t.active=!0,t.getComponent(cc.RichText).string=e,this.chatGridParent.addChild(t)},registerBroadcast:function(){this.pokerGame&&(this.pokerGame.off(K.PokerEvents.OnDealerChat,this.onChat.bind(this)),this.pokerGame.on(K.PokerEvents.OnDealerChat,this.onChat.bind(this)))},onChat:function(e){var t="<color=#ffffff>"+e.message+"</c>";this.showMessages(t)},showMessages:function(e){this.unscheduleAllCallbacks(),this.pokerGame&&(this.chatGridParent.childrenCount>=30?(this.chatGridParent.children[0].getComponent(cc.RichText).string=e,this.chatGridParent.children[0].setSiblingIndex(30)):this.generateChat(e))},onMinimise:function(){this.node.active=!1,this.pokerGame.gameData.settings.muteGameSound||GameManager.playSound(K.Sounds.click)}}),cc._RF.pop()},{}],JoinGamePopup:[function(e,t){"use strict";cc._RF.push(t,"729a9l4QWhMoLyH3+P5e60T","JoinGamePopup");var a=e("PopUpManager").PopUpType,n=e("PopUpBase");cc.Class({extends:n,properties:{infoLbl:{default:null,type:cc.Label},headingLbl:{default:null,type:cc.Label},callback:null,joinData:null,playerInfoRef:null},onLoad:function(){this.playerInfoRef=this.onPlayerInfo.bind(this),GameManager.on("playerInfo",this.playerInfoRef)},onShow:function(e){null!==e&&(this.infoLbl.string=e.info,this.joinData=e.joinData,this.callback=e.callback,e.heading&&(this.headingLbl.string=e.heading))},onCancel:function(){GameManager.popUpManager.hide(a.JoinGamePopup,function(){}),GameManager.playSound(K.Sounds.click)},onClickEnter:function(){this.onClick()},onClick:function(){this.callback&&(this.callback(this.joinData),GameManager.popUpManager.hide(a.JoinGamePopup,function(){}),GameManager.playSound(K.Sounds.click))},onPlayerInfo:function(){GameManager.popUpManager.hide(a.JoinGamePopup,function(){})}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],JoinPrivateTablePopup:[function(e,t){"use strict";cc._RF.push(t,"0b4efbTD/JI1YEalEHyn7Fl","JoinPrivateTablePopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase"),o=e("PostTypes").Login;cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},code:{default:null,type:cc.EditBox}},onLoad:function(){},onShow:function(){},onCode:function(){var e=this;console.log("onCode",o.ipV4Address),null!=GameScreen?GameManager.isMobile?GameManager.activeTableCount=GameScreen.gridParent.getComponent(cc.PageView).getPages().length:GameManager.activeTableCount=GameScreen.gridParent.children.length:GameManager.activeTableCount=0,GameManager.activeTableCount>=GameManager.maxTableCounts?GameManager.popUpManager.show(n.MaxTablesJoinedPopup,null,function(){}):ServerCom.pomeloRequest("room.channelHandler.joinChannelByInvitecode",{inviteCode:this.code.string,playerId:GameManager.user.playerId,networkIp:o.ipV4Address},function(t){console.log(t),t.success?(console.log("onCode",JSON.stringify(t)),GameManager.verifyTablePrivate(t.channelId)&&GameManager.onJoinSuccess(t,t.data),e.onClose()):(GameManager.popUpManager.show(n.CommonDialog,{title:"Error!",content:t.info},function(){}),e.onClose())},null,5e3,!1)},onClose:function(){this.code.string="",this.node.active=!1}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager",PostTypes:"PostTypes"}],Launch:[function(e,t){"use strict";cc._RF.push(t,"e3472aVuu5OBYHd3AWDhhMW","Launch"),cc.Class({extends:cc.Component,properties:{},start:function(){cc.macro.ENABLE_MULTI_TOUCH=!1},toGame:function(){cc.director.loadScene("Portrait")}}),cc._RF.pop()},{}],ListNotifications:[function(e,t){"use strict";cc._RF.push(t,"25a44BMH6dCDrzZCazjgEL5","ListNotifications"),e("PopUpManager").PopUpManager,e("PopUpManager").PopUpType,e("PopUpBase"),e("SliderTouch"),e("CustomEditBox"),e("EditBoxUtil"),e("PostTypes").SetPlayerValData,cc.Class({extends:cc.Component,properties:{contentNode:{default:null,type:cc.Node},itemNode:{default:null,type:cc.Node}},onDestroy:function(){},onEnable:function(){},onLoad:function(){},onShow:function(){},onClose:function(){this.node.active=!1},onRemove:function(){},onRead:function(){},onMore:function(){},onLess:function(){}}),cc._RF.pop()},{CustomEditBox:"CustomEditBox",EditBoxUtil:"EditBoxUtil",PopUpBase:"PopUpBase",PopUpManager:"PopUpManager",PostTypes:"PostTypes",SliderTouch:"SliderTouch"}],LobbyHandler:[function(e,t){"use strict";cc._RF.push(t,"c1685foWMtFSaEpmQZcOWmq","LobbyHandler"),e("ServerCom"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{ServerCom:"ServerCom"}],LobbyPresenter:[function(e,t){"use strict";cc._RF.push(t,"22a7eKJnWxLxpHnsJ3IwDv1","LobbyPresenter");var a=e("LobbyHandler"),n=(e("Checkbox"),e("Table")),i=e("AbstractScreen"),o=e("PopUpManager").PopUpManager,s=e("PopUpManager").PopUpType,r=e("TabBtnUtil"),l=(e("DropDown"),e("PostTypes").GetPrizeData),c=e("LoginHandler"),d=e("CashRoom");e("ResponseTypes").changeAvatar,cc.Enum({Bronze:0,Chrome:1,Silver:2,Gold:3,Diamond:4,Platinum:5}),cc.Class({extends:i,properties:{gift:{default:null,type:cc.Node},depositOne:{default:null,type:cc.Node},deposit:{default:null,type:cc.Node},depositScrollView:{default:null,type:cc.Node},depositScrollViewItem:{default:null,type:cc.Node},goldIcon:{default:null,type:cc.Node},diamondIcon:{default:null,type:cc.Node},goldIcon2:{default:null,type:cc.Node},diamondIcon2:{default:null,type:cc.Node},top:{default:null,type:cc.Node},top2:{default:null,type:cc.Node},centerNode:{default:null,type:cc.Node},activeTabSprite:{default:null,type:cc.SpriteFrame},inactiveTabSprite:{default:null,type:cc.SpriteFrame},activeTabSprite2:{default:null,type:cc.SpriteFrame},inactiveTabSprite2:{default:null,type:cc.SpriteFrame},cashierTable:{default:null,type:cc.Node},badbeat:{default:null,type:cc.Label},loginHandler:{default:null,type:c},handler:{default:null,type:a},popUpManager:{default:null,type:o},innerTabs:{default:null,type:r},tabs:{default:null,type:cc.Node},tables:{default:[],type:n},tabButtons:{default:[],type:cc.Sprite},tabButtons2:{default:[],type:cc.Sprite},playerName:{default:null,type:cc.Label},playerId:{default:null,type:cc.Label},playerImg:{default:null,type:cc.Sprite},balance:{default:null,type:cc.Label},balance2:{default:null,type:cc.Label},playBalance:{default:null,type:cc.Label},realMoneyCheck:{default:null,type:cc.Toggle},playMoneyCheck:{default:null,type:cc.Toggle},currentTab:{default:0,visible:!1},activeSprite:{default:null,type:cc.SpriteFrame},inactiveSprite:{default:null,type:cc.SpriteFrame},activeColor:{default:new cc.Color},inactiveColor:{default:new cc.Color},showGameBtn:{default:null,type:cc.Node},prizes:[],claimChipsBtn:{default:null,type:cc.Node},imageLoadedRef:{default:{}},realMoneyHeaderLbl:{default:null,type:cc.Node},playMoneyHeaderLbl:{default:null,type:cc.Node},onlinePlayersLbl:{default:null,type:cc.Label},megaStarsSprites:{default:[],type:cc.SpriteFrame},stars:{default:[],type:cc.Sprite},selectionColor:cc.Color,fadeColor:cc.Color,lockedBonus:{default:null,type:cc.Label},loyalityPoints:{default:null,type:cc.Label},loyalityLevel:{default:null,type:cc.Label},cashierPlayBalance:{default:null,type:cc.Label},privNFav:{default:[],type:cc.Node},lockClick:!1},onShow:function(){this.onBackLobby(null,null,!1),GameManager.isConnected&&this.popUpManager.hideAllPopUps(),this.refreshDetails(),this.refreshPlayerChips(),this.displayOnlinePlayers(),this.megaStarsUpdateInView(),this.playerImg.spriteFrame=GameManager.user.urlImg},refreshPlayerChips:function(){this.balance.string=Number(("GOLD"==GameManager.user.category?GameManager.user.freeChips:GameManager.user.realChips).toFixed(2)),this.balance.string=GameManager.convertChips(this.balance.string),GameManager.isMobile},fillStar:function(e,t){for(var a=0;a<e;a++)this.stars[a].fillRange=1;this.stars[e].fillRange=t/100},megaStarsUpdateInView:function(){},onMegapointUpdate:function(e){GameManager.user.megaPointDetail.megaPointsPercent=e.megaPointsPercent,GameManager.user.megaPointDetail.megaPoints=e.megaPoints,GameManager.user.megaPointDetail.megaPointLevel=e.megaPointLevel,this.refreshPlayerChips(),this.megaStarsUpdateInView()},updatePlayerProfileLogout:function(){this.onLogOut()},updatePlayerProfile:function(e){if("REALCHIPSUPDATE"==e.event){var t=Number(e.updated.realChips)-Number(GameManager.user.realChips);t>0&&GameManager.popUpManager.show(s.CommonDialog,{title:"Congratulations!",content:"You have received "+t+" chips."},function(){})}for(var a in e.updated)String(a).includes("mega")?(GameManager.user.megaPointDetail[a]=e.updated[a],String(a).includes("Percent")&&this.megaStarsUpdateInView()):GameManager.user[a]=e.updated[a],String(a).includes("profileImage")&&(GameManager.user.profileImage=Number(e.updated[a])-1,GameManager.user.urlImg=GameManager.avatarImages[Number(GameManager.user.profileImage)],GameManager.emit("image-loaded",GameManager.user));this.refreshPlayerChips(),"REALCHIPSUPDATE"==e.event&&GameManager.emit("REALCHIPSUPDATE")},getPlayerPrize:function(){var e=new l(GameManager.user.playerId),t=this;ServerCom.pomeloRequest(K.PomeloAPI.getPrizes,e,function(e){e.success&&(t.prizes=e.result,t.showPrizes())},null,5e3,!1)},showPrizes:function(){var e=null;this.prizes.length>0&&(e=this.prizes[0],this.popUpManager.show(s.ResultPopup,e,function(){}))},onCollectPrize:function(){var e=this.prizes[0],t=this,a={playerId:e.playerId,gameVersionCount:e.gameVersionCount,tournamentId:e.tournamentId};ServerCom.pomeloRequest(K.PomeloAPI.collectPrize,a,function(e){e.success&&(t.popUpManager.hide(s.ResultPopup,function(){}),t.prizes.shift(),t.showPrizes())},null,5e3,!1)},onHide:function(){},onBtnPageClick:function(){this.isScrollEnded},onLoad:function(){ServerCom.inGame=!0,this.imageLoadedRef=this.imageLoaded.bind(this),GameManager.on("image-loaded",this.imageLoadedRef),GameManager.on("refreshPlayerChips",this.refreshPlayerChips.bind(this)),GameManager.on("onlinePlayers",this.displayOnlinePlayers.bind(this)),ServerCom.pomeloBroadcast(K.LobbyBroadcastRoute.updateProfile,this.updatePlayerProfile.bind(this)),ServerCom.pomeloBroadcast("playerLogout",this.updatePlayerProfileLogout.bind(this)),this.onShowAll(!0),ServerCom.pomeloBroadcast(K.LobbyBroadcastRoute.updateMegaPoints,this.onMegapointUpdate.bind(this)),ServerCom.pomeloBroadcast("banPLayer",this.onBan.bind(this)),ServerCom.socketIOBroadcast(GameManager.user.playerId,this.onPlayerEvent.bind(this)),GameManager.isP&&this.privNFav.forEach(function(e){e.active=!1},this),GameManager.startRefreshTokenTimer(function(){console.log("startRefreshTokenTimer"),ServerCom.refreshConnectToServer("",function(){},function(){})})},onBan:function(e){console.log("onBan",e);var t={code:9999,response:e.info};GameManager.popUpManager.show(s.DisconnectDialog,t,function(){})},onPlayerEvent:function(e){var t=Number(e.data.realChips)-Number(GameManager.user.realChips);GameManager.user.realChips=e.data.realChips,this.balance.string=Number(("GOLD"==GameManager.user.category?GameManager.user.freeChips:GameManager.user.realChips).toFixed(2)),t>0&&GameManager.popUpManager.show(s.CommonDialog,{title:"Congratulations!",content:"You have received "+t+" chips."},function(){})},displayOnlinePlayers:function(){},imageLoaded:function(e){GameManager.user.playerId===e.playerId&&(this.playerImg.spriteFrame=e.urlImg)},refreshDetails:function(){this.playerName.string=GameManager.user.userName,this.playerImg.spriteFrame=GameManager.user.urlImg,this.playerId.string="ID: "+GameManager.user.playerId},onValueChange:function(){GameManager.playSound(K.Sounds.click);var e=cc.Color.BLACK;GameManager.isMobile||this.realMoneyCheck.isChecked?(this.balance.string=Number(("GOLD"==GameManager.user.category?GameManager.user.freeChips:GameManager.user.realChips).toFixed(2)),this.innerTabs.updateCurrentTable(),this.realMoneyCheck.node.getChildByName("New Label").getComponent(cc.LabelOutline).color=e.fromHEX("#940808"),this.playMoneyCheck.node.getChildByName("New Label").getComponent(cc.LabelOutline).color=e.fromHEX("#201D1D")):(this.innerTabs.updateCurrentTable(),this.realMoneyCheck.node.getChildByName("New Label").getComponent(cc.LabelOutline).color=e.fromHEX("#201D1D"),this.playMoneyCheck.node.getChildByName("New Label").getComponent(cc.LabelOutline).color=e.fromHEX("#940808")),GameManager.isRealMoney=!!GameManager.isMobile||this.realMoneyCheck.isSelected},onShowAll:function(e,t){var a=this;void 0===e&&(e=!1),void 0===t&&(t=null),this.lockClick||(this.lockClick=!0,this.scheduleOnce(function(){a.lockClick=!1},.3),d.isShowAll=!0,d.isShowHoldem=!1,d.isShowPLO=!1,d.isShowMega=!1,d.isShowAllIn=!1,d.isShowFast=!1,this.setActiveButton(this.tabButtons2[0],this.tabButtons2[0]),this.setInActiveButton(this.tabButtons2[1],this.tabButtons2[1]),this.setInActiveButton(this.tabButtons2[2],this.tabButtons2[2]),GameManager.playSound(K.Sounds.click))},onShowHoldem:function(e,t){var a=this;void 0===e&&(e=!1),void 0===t&&(t=null),this.lockClick||(this.lockClick=!0,this.scheduleOnce(function(){a.lockClick=!1},.3),d.isShowAll=!1,d.isShowHoldem=!1,d.isShowPLO=!1,d.isShowMega=!1,d.isShowAllIn=!1,d.isShowFast=!1,this.setInActiveButton(this.tabButtons2[0],this.tabButtons2[0]),this.setInActiveButton(this.tabButtons2[1],this.tabButtons2[1]),this.setInActiveButton(this.tabButtons2[2],this.tabButtons2[2]),d.isShowHoldem=!0,this.setActiveButton(this.tabButtons2[1],this.tabButtons2[1]),GameManager.playSound(K.Sounds.click))},forceKeepLoadingTimer:function(){console.log("!!!!!!forceKeepLoadingTimer"),ServerCom.forceKeepLoading=!0},onGetTableData:function(){},onShowOmaha:function(e,t){var a=this;void 0===e&&(e=!1),void 0===t&&(t=null),this.lockClick||(this.lockClick=!0,this.scheduleOnce(function(){a.lockClick=!1},.3),d.isShowAll=!1,d.isShowHoldem=!1,d.isShowPLO=!1,d.isShowMega=!1,d.isShowAllIn=!1,d.isShowFast=!1,this.setInActiveButton(this.tabButtons2[0],this.tabButtons2[0]),this.setInActiveButton(this.tabButtons2[1],this.tabButtons2[1]),this.setInActiveButton(this.tabButtons2[2],this.tabButtons2[2]),d.isShowPLO=!0,this.setActiveButton(this.tabButtons2[2],this.tabButtons2[2]),GameManager.playSound(K.Sounds.click))},onShowLobbySettings:function(){this.popUpManager.show(s.GamePreferencesPopup,null,function(){}),GameManager.playSound(K.Sounds.click)},onShowQuickSeat:function(){this.popUpManager.show(s.QuickSeatPopUp,this.realMoneyCheck.isSelected,function(){})},onShowProfile:function(){this.popUpManager.show(s.AvatarDialog,null,function(){})},setActiveButton:function(e){e.node.getChildByName("pressed")&&(e.node.getChildByName("pressed").active=!0)},setInActiveButton:function(e){e.node.getChildByName("pressed")&&(e.node.getChildByName("pressed").active=!1)},onLoyalityPoints:function(){GameManager.playSound(K.Sounds.click);var e=K.ServerAddress.cashier_AddCash_URL;window.open(e)},onTableClick:function(e,t){GameManager.playSound(K.Sounds.click),ScreenManager.showScreen(K.ScreenEnum.GamePlayScreen,t,function(){})},onBackLobby:function(e,t,a){void 0===a&&(a=!0),this.onBackLobby2(e,t,a)},onBackLobby2:function(e,t,a){void 0===a&&(a=!0),this.top.active=!0},onLogOut:function(){GameManager.popUpManager.show(s.OnLogOutPopup,null,function(){}),GameManager.playSound(K.Sounds.click)},formatNumber:function(e){return e.toLocaleString("en-US")},onDeposit:function(){var e=this;this.deposit.active=!0,this.loginHandler.vpWShop(function(t){console.log(t),e.depositScrollView.removeAllChildren();for(var a=0;a<t.data.length;a++){var n=t.data[a],i=cc.instantiate(e.depositScrollViewItem);i.x=0,i.active=!0,e.depositScrollView.addChild(i),cc.find("title/val",i).getComponent(cc.Label).string=n.price+" MNT",cc.find("price",i).getComponent(cc.Label).string=e.formatNumber(n.chipsValue),i.getComponent(cc.Button).clickEvents[0].customEventData=n.chipsValue,i.__data=n}})},onDepositOne:function(e,t){console.log(t),this.deposit.active=!1,this.depositOne.active=!0,this.depositOne.getComponent("DepositOne").onShow(e.target.__data)},onDepositBack:function(){this.deposit.active=!1}}),cc._RF.pop()},{AbstractScreen:"AbstractScreen",CashRoom:"CashRoom",Checkbox:"Checkbox",DropDown:"DropDown",LobbyHandler:"LobbyHandler",LoginHandler:"LoginHandler",PopUpManager:"PopUpManager",PostTypes:"PostTypes",ResponseTypes:"ResponseTypes",TabBtnUtil:"TabBtnUtil",Table:"Table"}],LobbySettingsPopup:[function(e,t){"use strict";cc._RF.push(t,"9af45HG/N1O3K+Liglw6qqB","LobbySettingsPopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase");cc.Class({extends:i,properties:{popUpManager:{default:null,type:a}},onLoad:function(){},onShow:function(){},onHide:function(){},onCancel:function(){this.popUpManager.hide(n.LobbySettingsPopup,function(){})}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],LocalizedLabel:[function(e,t){"use strict";cc._RF.push(t,"9019fNydtRI6qBeDVsGrLpE","LocalizedLabel"),cc.Class({extends:cc.Component,properties:{localizeKey:{default:"",visible:!0}},onLoad:function(){var e=this.node.getComponent(cc.Label);e&&(this.verticalAlign=e.verticalAlign),this.updateText(),cc.systemEvent.on(LocalizedManager.LanguageDidChangeEvent,this.updateText,this)},start:function(){},updateText:function(){if(LocalizedManager.currLanguage){var e=this.node.getComponent(cc.Label);if(this.localizeKey&&e){e.verticalAlign=this.verticalAlign;var t=LocalizedManager.t(this.localizeKey);e.string=t,"hi_id"===LocalizedManager.currLanguage&&this.verticalAlign===cc.Label.VerticalAlign.TOP&&(e.verticalAlign=cc.Label.VerticalAlign.CENTER)}}},setKey:function(e){this.localizeKey=e,this.updateText()}}),cc._RF.pop()},{}],LocalizedManager:[function(e,t){"use strict";cc._RF.push(t,"8cf2dRBs+5PP7cOVPRA6jbA","LocalizedManager");cc.Class({extends:cc.Component,properties:{currLanguage:{default:null,visible:!1},textFile:{default:null,visible:!0,type:cc.JsonAsset},textTable:[],textLanuage:[]},onLoad:function(){window.LocalizedManager=this,this.textTable=this.textFile.json,this.currLanguage="en_us",this.LanguageDidChangeEvent="LanguageDidChangeEvent"},start:function(){},loadTextLanguage:function(e){var t=this;this.textLanuage=[],this.textTable.forEach(function(a){var n={KEY:a.KEY,lang:a[e]};t.textLanuage.push(n)})},t:function(e){var t=this.textTable[e]||{};return t[this.currLanguage]||t.en_us||e},clickOnLanguageBtn:function(e,t){var a=""+t;if(a!==this.currLanguage){this.currLanguage=a;var n=new cc.Event.EventCustom(this.LanguageDidChangeEvent,!0);cc.systemEvent.dispatchEvent(n)}},changeLanguage:function(e){if(e!==this.currLanguage){this.currLanguage=e;var t=new cc.Event.EventCustom(this.LanguageDidChangeEvent,!0);cc.systemEvent.dispatchEvent(t)}},setTextKey:function(e,t){var a=e.getComponent("LocalizedLabel");a||(a=e.addComponent("LocalizedLabel")),a.setKey(t)}}),cc._RF.pop()},{}],LocalizedSprite:[function(e,t){"use strict";cc._RF.push(t,"3c56c7i92dDs7HTRDmta5RB","LocalizedSprite"),cc.Class({extends:cc.Component,properties:{localizeSprite:{default:null,type:cc.Sprite,visible:!0},localizeSpriteFrame:{default:[],type:cc.SpriteFrame,visible:!0},langList:{default:[],type:[cc.String]}},onLoad:function(){this.langList=["en_us","hi_id"],this.localizeSprite=this.node.getComponent(cc.Sprite),this.updateSpriteFollowLang(),cc.systemEvent.on(LocalizedManager.LanguageDidChangeEvent,this.updateSpriteFollowLang,this)},start:function(){},updateSpriteFollowLang:function(){if(console.log("updateSpriteFollowLang "),LocalizedManager.currLanguage&&this.localizeSprite){var e=this.langList.indexOf(LocalizedManager.currLanguage);console.log("updateSpriteFollowLang langIdx ",e),console.log("updateSpriteFollowLang langIdx ",this.localizeSpriteFrame[e]),this.localizeSprite.spriteFrame=this.localizeSpriteFrame[e]}}}),cc._RF.pop()},{}],LocalizedUI:[function(e,t){"use strict";cc._RF.push(t,"689d9Ce2QpBxpaAQx49ZG6N","LocalizedUI"),cc.Class({extends:cc.Component,onLoad:function(){},clickOnLanguageBtn:function(e,t){var a=""+t;LocalizedManager.changeLanguage(a)}}),cc._RF.pop()},{}],LoginHandler:[function(e,t){"use strict";var a;cc._RF.push(t,"7ca2bC0rCBMAY85cacNbF+K","LoginHandler");var n=e("PostTypes").Login,i=e("PostTypes").UserID,o=(e("PostTypes").ForgotPassword,e("PostTypes").ResetPassword),s=e("PostTypes").OTP,r=(e("PostTypes").TransactionHistory,e("EventEmitter")),l=e("PopUpManager").PopUpType,c={query:{playerId:"hsdfhd"},updateKeys:{mobileNumber:"012345"}};cc.Class(((a={extends:r,properties:{clientIPv4:{default:"",visible:!1},clientIPv6:{default:"",visible:!1},login:{default:null,visible:!1},isLoading:!1},onLoad:function(){window.LoginHandler=this},init:function(e){this.login=n,this.login.deviceType=e,this.login.appVersion=K.ServerAddress.clientVer},checkServerStatus:function(e,t){var a=K.ServerAddress.maintainanceIP+":"+K.ServerAddress.maintainancePort+K.ServerAPI.maintainance,n=K.AppVersion;n.appVersion=K.ServerAddress.clientVer,n.deviceType=this.login.deviceType,console.log("@@@@ checkServerStatus ",a,n),ServerCom.httpPostRequest(a,n,e,t)},startPomelo:function(e,t,a){console.log("!!!!!!!!!! START POMELO LOGIN HANDLER",e,t),ServerCom.loading.active=!0,this.isLoading=!0,ServerCom.loading.active=!1,this.isLoading=!1;var n=this;pomelo.init({host:e,port:t,log:!0},function(e){console.log("!!!!!!!!!! START POMELO INIT CALLBACK ",JSON.stringify(e)),ServerCom.loading.active=!1,n.isLoading=!1,null!=a&&(a(),n.emit("Init"))})},loginPassword:function(e,t,a){ServerCom.httpPostRequest(K.ServerAddress.otp_server+"/api/auth/loginRequest",{emailId:e,password:t},a)},loginSTD:function(e,t){ServerCom.httpPostRequest(K.ServerAddress.otp_server+"/api/auth/loginSTD",{phoneNumber:e},t)},sendOtp:function(e,t,a,n){ServerCom.httpPostRequest(K.ServerAddress.otp_server+"/api/auth/sendOtp",{phoneNumber:e,userName:t,inviteCode:a},n)},verifyOtp:function(e,t){ServerCom.httpPostRequest(K.ServerAddress.otp_server+"/api/auth/verifyOtp",{otpNumber:e},t)},findUserResetPassword:function(e,t){ServerCom.httpPostRequest(K.ServerAddress.otp_server+"/api/auth/findUserResetPassword",{name:"3434343434"},t)},checkOTPRestPassword:function(e,t,a){ServerCom.httpPostRequest(K.ServerAddress.otp_server+"/api/auth/checkOTPRestPassword",{otpNumber:e,token:t},a)},resetPassword:function(e,t,a){ServerCom.httpPostRequest(K.ServerAddress.otp_server+"/api/auth/resetPassword",{confirmPassword:e,newPassword:t,token:token},a)},loginGame:function(e,t,a,n,i,o){this.login.loginType=n,this.login.loginMode="authtk",this.login.userName=e,this.login.emailId=t,this.login.password=a,window.ipV4Address=this.login.ipV4Address=this.clientIPv4,this.login.ipV6Address=this.clientIPv6,this.login.isLoggedIn=!1,this.login.client=cc.sys.isMobile?"webmobile":"webdesktop",cc.sys.os===cc.sys.OS_WINDOWS?this.login.os="windows":cc.sys.os===cc.sys.OS_ANDROID?this.login.os="android":cc.sys.os===cc.sys.OS_IOS&&(this.login.os="Ios"),this.login.userAgent=-1!=(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))?"opera":-1!=navigator.userAgent.indexOf("Edg")?"edge":-1!=navigator.userAgent.indexOf("Chrome")?"chrome":-1!=navigator.userAgent.indexOf("Safari")?"safari":-1!=navigator.userAgent.indexOf("Firefox")?"firefox":-1!=navigator.userAgent.indexOf("MSIE")||1==!!document.documentMode?"ie":"unknown";var s=cc.sys.localStorage.getItem("DEVICE_ID");s||(s="tttttttt-tttt-7xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.trunc(16*Math.random());return("x"==e?t:3&t|8).toString(16)}).replace(/^[t]{8}-[t]{4}/,function(){var e=Date.now().toString(16).padStart(12,"0");return e.slice(0,8)+"-"+e.slice(8)}),cc.sys.localStorage.setItem("DEVICE_ID",s)),this.login.deviceId=s,this.login.appVersion=K.ServerAddress.clientVer,this.login.access_token=K.Token.access_token,this.login.refresh_token=K.Token.refresh_token,ServerCom.pomeloRequest(K.PomeloAPI.gateLogin,this.login,o,null,5e3,!1)},loginGameSocial:function(e,t,a,n,i,o,s){this.login.loginType=n,this.login.loginMode=i,this.login.userName=e,this.login.emailId=t,this.login.password=a,window.ipV4Address=this.login.ipV4Address=this.clientIPv4,this.login.ipV6Address=this.clientIPv6,this.login.isLoggedIn=!1,this.login.appVersion=K.ServerAddress.clientVer,"facebook"===i?this.login.fbObject=o:"google"===i&&(this.login.fbObject=o),ServerCom.pomeloRequest(K.PomeloAPI.gateLogin,this.login,s,null,5e3,!1)},checkForMultiClient:function(e){console.log("checkForMultiClient1");var t={};t.playerId=GameManager.user.playerId,t.isRequested=!0,t.isLoggedIn=!1,t.playerName=GameManager.user.userName,t.deviceType=this.login.deviceType,t.appVersion=K.ServerAddress.clientVer,console.log("checkForMultiClient2"),ServerCom.socketIORequest("common|"+K.PomeloAPI.checkForMultiClient,t,e,null,5e3,!1)},singleLogin:function(e,t){var a={};a.playerId=GameManager.user.playerId,a.isRequested=!0,a.isLoggedIn=!1,a.userDeviceType=this.login.deviceType,ServerCom.pomeloRequest(K.PomeloAPI.singleLogin,a,e,t)},setAddress:function(e,t){this.clientIPv4=e,this.clientIPv6=t,window.ipV4Address=n.ipV4Address=e,n.ipV6Address=t}}).resetPassword=function(e,t,a){var n=K.ServerAddress.ipAddress+":"+K.ServerAddress.port+K.ServerAPI.resetPassword,i=o;i.passwordResetToken=e,i.password=t,i.isLoggedIn=!1,ServerCom.httpPostRequest(n,i,a)},a.verifyEmail=function(e){var t=K.ServerAddress.ipAddress+":"+K.ServerAddress.port+K.ServerAPI.emailVerification,a=i;a.playerId=GameManager.user.playerId,a.isLoggedIn=!1,ServerCom.httpPostRequest(t,a,e)},a.sendOTP=function(e,t){if(K.internetAvailable){var a=K.ServerAddress.ipAddress+":"+K.ServerAddress.port+K.ServerAPI.sendotp,n={};n.mobileNumber=t,ServerCom.httpPostRequest(a,n,function(t){e&&e(t)}.bind(this))}else GameManager.popUpManager.show(l.NotificationPopup,"Please check your\n Internet Connection.",function(){})},a.verifyOTP=function(e,t){var a=K.ServerAddress.ipAddress+":"+K.ServerAddress.port+K.ServerAPI.verifyOTP,n=s;n.playerId=GameManager.user.playerId,n.otp=e,n.isLoggedIn=!1,ServerCom.httpPostRequest(a,n,t)},a.updateMobile=function(e,t){var a=c;a.query.playerId=GameManager.user.playerId,a.updateKeys=e,a.isLoggedIn=!1,ServerCom.pomeloRequest(K.PomeloAPI.updateProfile,a,t)},a.vpRegister=function(e,t,a,n,i,o,s){ServerCom.httpPostRequest(K.Token.auth_server+"/api/auth/register",{userName:e,emailId:t,password:a,confirmPassword:n,mobileNumber:i,isAbove18:o},s)},a.vpLogin=function(e,t,a){ServerCom.httpPostRequest(K.Token.auth_server+"/api/auth/login",{userName:e,password:t},a)},a.vpSendOTP=function(e,t){ServerCom.httpPostRequest(K.Token.auth_server+"/api/auth/sendOtp",{userName:e},t)},a.vpVerifyOTP=function(e,t,a){ServerCom.httpPostRequest(K.Token.auth_server+"/api/auth/verifyOtpEmail",{emailId:e,otp:t},a)},a.vpResetPassword=function(e,t,a,n,i){ServerCom.httpPatchRequest(K.Token.auth_server+"/api/auth/resetPassword",{emailId:e,newPassword:t,confirmNewPassword:a,resetToken:n},i)},a.vpUpdateContactInfo=function(e,t,a){ServerCom.httpPostRequest(K.Token.auth_server+"/api/users/update-contact-info",{phoneNumber:e,emailId:t},a)},a.vpWithdrawChips=function(e,t){ServerCom.httpPostRequest(K.Token.auth_server+"/api/cashout/player/request",{amount:e},t)},a.vpWithdrawHistory=function(e){ServerCom.httpGetRequest(K.Token.auth_server+"/api/cashout/player/history",null,e)},a.vpWShop=function(e){ServerCom.httpGetRequest(K.Token.auth_server+"/api/users/shop",null,e)},a.vpSendGift=function(e,t,a,n){ServerCom.httpPostRequest(K.Token.auth_server+"/api/wallet/send-gift",{name:e,amount:t,mobileNumber:a},n)},a.vpListGift=function(e){ServerCom.httpGetRequest(K.Token.auth_server+"/api/wallet/get-gift-history",null,e)},a)),cc._RF.pop()},{EventEmitter:"EventEmitter",PopUpManager:"PopUpManager",PostTypes:"PostTypes"}],LoginScreen:[function(e,t){"use strict";cc._RF.push(t,"fdf57NBZIFMqLZegSONq7Lq","LoginScreen");var a,n=e("AbstractScreen"),i=e("LoginHandler"),o=e("PopUpManager").PopUpManager,s=e("PopUpManager").PopUpType,r=e("Checkbox"),l=e("CustomEditBox"),c=e("PostTypes").JoinChannel,d=e("ResponseTypes").GameData;cc.Class({extends:n,properties:{vpForgetPasswordSuccessPopup:{default:null,type:cc.Node},vpForgetPasswordErrorMessage1:{default:null,type:cc.Label},vpForgetPasswordErrorMessage2:{default:null,type:cc.Label},vpForgetPasswordErrorMessage3:{default:null,type:cc.Label},vpForgetPasswordSubmit:{default:null,type:cc.Button},vpForgetPasswordSubmitOTP:{default:null,type:cc.Button},vpForgetPasswordSubmitUpdate:{default:null,type:cc.Button},vpForgetPasswordUsername:{default:null,type:cc.EditBox},vpForgetPasswordEmail:{default:null,type:cc.EditBox},vpForgetPasswordOTP:{default:null,type:cc.EditBox},vpForgetPasswordNew:{default:null,type:cc.EditBox},vpForgetPasswordNewConfirm:{default:null,type:cc.EditBox},vpLogin:{default:null,type:cc.Button},vpErrorMessage:{default:null,type:cc.Label},vpUserName:{default:null,type:cc.EditBox},vpPassword:{default:null,type:cc.EditBox},flagScrollView:{default:null,type:cc.Node},flagScrollViewContent:{default:null,type:cc.Node},flagItem:{default:null,type:cc.Node},flagNode:{default:null,type:cc.Node},launch:{default:null,type:cc.Node},tc:{default:null,type:cc.Node},capture:{default:null,type:cc.Node},gotoTable:{default:null,type:cc.Node},timerNode:{default:null,type:cc.Node},resendNode:{default:null,type:cc.Node},loginUsingPasswordNode:{default:null,type:cc.Node},loginUsingPasswordUsername:{default:null,type:cc.EditBox},loginUsingPasswordPassword:{default:null,type:cc.EditBox},forgetPasswordResendNode:{default:null,type:cc.Node},forgetPasswordTimerNode:{default:null,type:cc.Node},forgetPasswordNode:{default:null,type:cc.Node},forgetPasswordOtp:{default:null,type:cc.EditBox},forgetPasswordNewPassword1:{default:null,type:cc.EditBox},forgetPasswordNewPassword2:{default:null,type:cc.EditBox},forgetPasswordContent1:{default:null,type:cc.Node},forgetPasswordContent2:{default:null,type:cc.Node},otpNode:{default:null,type:cc.Node},otp:{default:null,type:cc.EditBox},preLogin:{default:null,type:cc.Node},loginHandler:{default:null,type:i},userName:{default:null,type:cc.EditBox},password:{default:null,type:cc.EditBox},countryCode:{default:null,type:cc.EditBox},phone:{default:null,type:cc.EditBox},loginDebug:{default:[],type:cc.Node},popupManager:{default:null,type:o},lobby:{default:null,type:cc.Node},rememberMeCheckBox:{default:null,type:r},rememberMe:{default:!1,visible:!1},isWindows:!1,userNameEdit:{default:null,type:cc.Label},passwordEdit:{default:null,type:cc.Label},customEditBox:{default:null,type:l},loginNode:{default:null,type:cc.Node},alreadyStoredPwd:!1,enterPressedTime:!0,tourData:null,rememberMeMob:{default:null,type:cc.Toggle},lobbySelectorNode:{default:null,type:cc.Node},resendTimer:61,forgetPasswordResendTimer:61,verfyOtpClickable:!0},showFlagScrollView:function(){this.flagScrollView.active=!this.flagScrollView.active;for(var e=0;e<this.flagScrollViewContent.children.length;e++)this.flagScrollViewContent.children[e].children[0].active=!1,this.flagScrollViewContent.children[e].__data.dial_code==this.countryCode.string&&(this.flagScrollViewContent.children[e].children[0].active=!0)},hideFlagScrollView:function(){this.flagScrollView.active=!1},onEndEdit:function(){for(var e=0;e<window.CountryCodes.length;e++)if(this.countryCode.string==window.CountryCodes[e].dial_code)return cc.sys.localStorage.setItem("country",window.CountryCodes[e].code),cc.sys.localStorage.setItem("countryCode",this.countryCode.string),void cc.resources.load("flags/"+window.CountryCodes[e].code.toLowerCase(),cc.SpriteFrame,function(e,t){e||(a.flagNode.getComponent(cc.Sprite).spriteFrame=t)});for(cc.resources.load("flags/"+window.CountryCodes[230].code.toLowerCase(),cc.SpriteFrame,function(e,t){e||(a.flagNode.getComponent(cc.Sprite).spriteFrame=t)}),this.countryCode.string=window.CountryCodes[230].dial_code,cc.sys.localStorage.setItem("country",window.CountryCodes[230].code),cc.sys.localStorage.setItem("countryCode",window.CountryCodes[230].string),e=0;e<this.flagScrollViewContent.children.length;e++)this.flagScrollViewContent.children[e].children[0].active=!1,this.flagScrollViewContent.children[e].__data.dial_code==this.countryCode.string&&(this.flagScrollViewContent.children[e].children[0].active=!0)},onSelectFlag:function(e,t){for(var n=0;n<this.flagScrollViewContent.children.length;n++)this.flagScrollViewContent.children[n].children[0].active=!1;e.target.children[0].active=!0,cc.sys.localStorage.setItem("country",t.code),cc.resources.load("flags/"+t.code.toLowerCase(),cc.SpriteFrame,function(e,t){e||(a.flagNode.getComponent(cc.Sprite).spriteFrame=t)}),this.countryCode.string=t.dial_code,cc.sys.localStorage.setItem("countryCode",this.countryCode.string),this.hideFlagScrollView()},loadFlags:function(){var e=this;this.flagScrollViewContent.removeAllChildren(),console.log(window.CountryCodes),cc.sys.localStorage.getItem("phone")?this.countryCode.string=cc.sys.localStorage.getItem("countryCode"):(cc.sys.localStorage.setItem("country",window.CountryCodes[230].code),cc.resources.load("flags/"+window.CountryCodes[230].code.toLowerCase(),cc.SpriteFrame,function(e,t){e||(a.flagNode.getComponent(cc.Sprite).spriteFrame=t)}),this.countryCode.string=window.CountryCodes[230].dial_code);for(var t=function(){var t=cc.instantiate(e.flagItem);t.setPosition(0,0),t.active=!0,t.children[0].active=!1,t.children[2].getComponent(cc.Label).string="+"+window.CountryCodes[n].dial_code,cc.resources.load("flags/"+window.CountryCodes[n].code.toLowerCase(),cc.SpriteFrame,function(e,a){e||(t.children[1].getComponent(cc.Sprite).spriteFrame=a)}),t.getComponent(cc.Button).clickEvents[0].customEventData=window.CountryCodes[n],t.parent=e.flagScrollViewContent,t.__data=window.CountryCodes[n],cc.sys.localStorage.getItem("country")==window.CountryCodes[n].code&&(t.children[0].active=!0,cc.resources.load("flags/"+window.CountryCodes[n].code.toLowerCase(),cc.SpriteFrame,function(e,t){e||(a.flagNode.getComponent(cc.Sprite).spriteFrame=t)}))},n=0;n<window.CountryCodes.length;n++)t()},onLoad:function(){console.log("==========================>isZFold",GameManager.isZFold()),GameManager.isZFold()&&(cc.find("EntryHandler",cc.Canvas.instance.node).scale=.8),cc.sys.localStorage.getItem("vpUserName")&&(this.vpUserName.string=cc.sys.localStorage.getItem("vpUserName")),cc.sys.localStorage.getItem("vpPassword")&&(this.vpPassword.string=cc.sys.localStorage.getItem("vpPassword")),GameManager.init(),this.loginDataFromInsta={userName:null,password:null},GameManager.isMobile&&!cc.sys.isBrowser||(window.loginDataFromInsta&&null!=sessionStorage.getItem("userName")?(window.loginDataFromInsta.userName=sessionStorage.getItem("userName"),window.loginDataFromInsta.password=sessionStorage.getItem("password")):window.loginDataFromInsta||(window.loginDataFromInsta=this.loginDataFromInsta)),cc.debug.setDisplayStats(!1),GameManager.isMobile&&cc.sys.os===cc.sys.OS_ANDROID&&!cc.sys.isBrowser&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","dismissLoader","()V"),this.submitEnter(),this.enterPressedTime=!0},submitEnter:function(){},start:function(){a=this,window.LoginScreen=this,this.preLogin.active=!0,GameManager.scheduleOnce(function(){a.clientInit()},2)},onShow:function(e){cc.sys.localStorage.getItem("vpUserName")?this.vpUserName.string=cc.sys.localStorage.getItem("vpUserName"):this.vpUserName.string="",cc.sys.localStorage.getItem("vpPassword")?this.vpPassword.string=cc.sys.localStorage.getItem("vpPassword"):this.vpPassword.string="",this.verfyOtpClickable=!0,e&&!0===e&&this.clientInit(),cc.sys.localStorage.getItem(K.SystemStorageKeys.userId),cc.sys.localStorage.getItem(K.SystemStorageKeys.rememberMePreference),this.showUserLoginDetails(cc.sys.localStorage.getItem(K.SystemStorageKeys.userId),cc.sys.localStorage.getItem(K.SystemStorageKeys.password),"true"),GameManager.isMobile},onHide:function(){},togglePassword:function(){this.password.inputFlag==cc.EditBox.InputFlag.DEFAULT?this.password.inputFlag=cc.EditBox.InputFlag.PASSWORD:this.password.inputFlag=cc.EditBox.InputFlag.DEFAULT},showUserLoginDetails:function(e,t,a){if(!GameManager.isMobile)if(cc.sys.os!==cc.sys.OS_WINDOWS||cc.sys.isBrowser){this.userName.string=e,this.password.string=t;for(var n=t||"",i=0;i<n.length;i++);this.alreadyStoredPwd=!0}else e&&t&&a?(this.userName.string=e,this.password.string=t,this.rememberMeMob.isChecked=a):(this.userName.string="",this.password.string="")},clientInit:function(e,t){var n=this;void 0===e&&(e=!1),void 0===t&&(t=!1);var i="";if(cc.sys.isBrowser?(i="browser",cc.sys.os===cc.sys.OS_ANDROID?i="androidApp":cc.sys.os===cc.sys.OS_IOS?i="iosApp":cc.sys.os===cc.sys.OS_OSX&&(i="mac")):cc.sys.os===cc.sys.OS_ANDROID?i="androidApp":cc.sys.os===cc.sys.OS_IOS?i="iosApp":cc.sys.os===cc.sys.OS_WINDOWS?i="windows":cc.sys.os===cc.sys.OS_OSX&&(i="mac"),this.loginNode.active=!(window.loginDataFromInsta&&null!=window.loginDataFromInsta.userName&&null!=window.loginDataFromInsta.password||window.opener&&window.opener.loginData),this.loginHandler.init(i),!K.GoToTable){if(""!=this.vpUserName.string&&""!=this.vpPassword.string)return this.preLogin.active=!0,void this.loginHandler.checkServerStatus(function(e){if(console.log("RETRY SERVER STATUS ",e),e.success){var t=e.result;GameManager.serverStatus=t,t.isUpdateRequired?a.popupManager.show(s.NewVersionPopup,"Please update the game.",function(){}):t.isInMaintainance?a.popupManager.show(s.MaintenancePopup,"Server is under maintenance\n Please come back later.",function(){}):a.loginHandler.vpLogin(a.vpUserName.string,a.vpPassword.string,function(e){console.log("vpLogin",e),a.preLogin.active=!1,ServerCom.loading.active=!1,1==e.success||"success"==e.status?(cc.sys.localStorage.setItem("vpUserName",a.vpUserName.string),cc.sys.localStorage.setItem("vpPassword",a.vpPassword.string),K.Token.access_token=e.access_token,K.Token.refresh_token=e.refresh_token,K.Token.access_token_expire_at=e.access_token_expire_at,K.Token.refresh_token_expire_at=e.refresh_token_expire_at,ServerCom.socketIOConnect(K.ServerAddress.gameServer+":"+K.ServerAddress.gamePort,function(){ServerCom.socketConnected&&(GameManager.setUserData(e.user),a.saveLoginData(),setTimeout(function(){a.onSuccessfullLogin(a)},100))})):(a.launch.active=!1,e.message?a.vpErrorMessage.string=e.message:a.vpErrorMessage.string=e.error[0].message)})}else a.popupManager.show(s.NewVersionPopup,"Please update the game.",function(){})},function(){a.launch.active=!1,a.preLogin.active=!1,a.popupManager.show(s.NotificationPopup,"Please check your\nInternet Connection.",function(){})});GameManager.isForceDisconnection=!1,setTimeout(function(){n.loginHandler.checkServerStatus(function(n){if(console.log("RETRY SERVER STATUS ",n),a.preLogin.active=!1,n.success){var i=n.result;if(GameManager.serverStatus=i,a.loginHandler.setAddress(i.ipV4Address,i.ipV6Address),i.isUpdateRequired)a.popupManager.show(s.NewVersionPopup,"Please update the game.",function(){});else if(i.isInMaintainance)a.popupManager.show(s.MaintenancePopup,"Server is under maintenance\n Please come back later.",function(){});else{if(t)return;if(e)return void a.onSuccessfullLogin(a);window.opener&&window.opener.loginData||(a.launch.active=!1,ScreenManager.showScreen(K.ScreenEnum.LoginScreen,10,function(){},!1))}}else a.popupManager.show(s.NewVersionPopup,"Please update the game.",function(){})},function(){a.launch.active=!1,a.preLogin.active=!1,a.popupManager.show(s.NotificationPopup,"Please check your\nInternet Connection.",function(){})})},1)}},setRememberMe:function(){this.rememberMe=this.rememberMeCheckBox.getSelection()},ConnectToGameSever:function(e,t,a){this.preLogin.active=!0,ServerCom.loading.active=!1,a.preLogin.active=!0,ServerCom.loading.active=!1,a.onSuccessfullLogin(a)},onCloseOtp:function(){this.unschedule(this.updateResend),this.resendNode.active=!1,this.otpNode.active=!1,this.otp.string="",cc.find("InvisibleWhenBuilt/Inputs/ErrorMessage1",this.otpNode).active=!1},onVerfyOtp:function(){var e=this;if(this.verfyOtpClickable){this.verfyOtpClickable=!1,setTimeout(function(){e.verfyOtpClickable=!0},2e3);var t=this;cc.find("InvisibleWhenBuilt/Inputs/ErrorMessage1",t.otpNode).active=!1,this.loginHandler.verifyOtp(this.otp.string,function(e){console.log("otp",e),t.otp.string="","success"==e.status?(setTimeout(function(){t.verfyOtpClickable=!0},1e3),t.otpNode.active=!1,K.Token.access_token=e.access_token,K.Token.refresh_token=e.refresh_token,K.Token.access_token_expire_at=e.access_token_expire_at,K.Token.refresh_token_expire_at=e.refresh_token_expire_at,ServerCom.socketIOConnect(K.ServerAddress.gameServer+":"+K.ServerAddress.gamePort,function(){ServerCom.socketConnected&&(t.otp.string="",t.unschedule(t.updateResend),t.timerNode.getChildByName("timer2").getComponent(cc.Label).string="",GameManager.setUserData(e.user),t.saveLoginData(),setTimeout(function(){t.onSuccessfullLogin(t)},100))})):(t.verfyOtpClickable=!0,cc.find("InvisibleWhenBuilt/Inputs/ErrorMessage1",t.otpNode).active=!0,cc.find("InvisibleWhenBuilt/Inputs/ErrorMessage1",t.otpNode).getComponent(cc.Label).string=e.messgae)})}},onSuccessfullLogin:function(e){GameManager.isConnected=!1,this.preLogin.active=!0,console.log("onSuccessfullLogin",ServerCom.inGame),cc.sys.localStorage.setItem("auto_login_token",K.Token.access_token),cc.sys.localStorage.setItem("auto_login_refresh_token",K.Token.refresh_token),cc.sys.localStorage.setItem("auto_login_access_token_expire_at",K.Token.access_token_expire_at),cc.sys.localStorage.setItem("auto_login_refresh_token_expire_at",K.Token.refresh_token_expire_at),cc.sys.localStorage.setItem("auto_login_username",GameManager.user.userName),ServerCom.inGame,this.lobbySelectorNode&&(this.lobbySelectorNode.active=!1),console.log("onSuccessfullLogin3"),e.loginHandler.checkForMultiClient(function(e){if(ServerCom.loadingLogin.active=!1,console.log("MULTI CLIENT RESPONSE ",e),e.success){GameManager.isConnected=!0,console.log("Active tables:",GameManager.activeTableCount);var t=[],a=[],n=GameScreen?GameScreen.prevSelection:0,i=!1;GameManager.gameModel.activePokerModels.forEach(function(e){e.gameData.raw.tournamentId&&(t.push(e.gameData.raw.tournamentId),a.push(e.gameData.channelId)),1==a.length&&(this.tourData=e.gameData.raw.tourData)},this),console.log("currentActiveIds",t),GameManager.activeTableCount>0&&0==e.joinChannels.length&&GameManager.reset(),e.joinChannels&&e.joinChannels.length>0&&(i=!0,this.preLogin.active=!0,GameManager.scheduleOnce(function(){var t=e.joinChannels.length;e.joinChannels.forEach(function(e,a){var n=new c(e);n.channelId?(TableHandler.joinTableList.push(n.channelId),n.tableId="",GameManager.join(n.channelId,K.PomeloAPI.joinChannel,n,null,null,a+1,t,!0)):GameManager.join(n.tableId,K.PomeloAPI.joinChannel,n,null,null,a+1,t,!0)},this)},.1)),t.length>0?(i=!0,this.preLogin.active=!0,GameManager.scheduleOnce(function(){GameManager.isSocketIOConnected?(console.log("GameScreen.prevSelection",n),ServerCom.socketIOBroadcast(a[0]+":"+GameManager.user.playerId,this.onTournamentTableUserBroadcast.bind(this)),window.TournamentLobbyHandler.requestTournamentEnterTable({tournamentId:t[0]},function(){},function(){},"Enter table, please wait ......")):this.preLogin.active=!1}.bind(this),1)):this.preLogin.active?(i||(this.preLogin.active=!1),i||(this.launch.active=!1,ScreenManager.currentScreen==K.ScreenEnum.LobbyScreen?GameManager.emit("forceReloadTable"):ScreenManager.currentScreen!=K.ScreenEnum.LoginScreen&&ScreenManager.currentScreen!=K.ScreenEnum.SignupScreen||ScreenManager.showScreen(K.ScreenEnum.LobbyScreen,10,function(){},!1))):(i||(this.preLogin.active=!1),i||(this.launch.active=!1,ScreenManager.showScreen(K.ScreenEnum.LobbyScreen,10,function(){},!1)))}else this.verfyOtpClickable=!0,K.disconnectRequestedByPlayer=!0,this.preLogin.active=!1,this.launch.active=!1,ScreenManager.showScreen(K.ScreenEnum.LoginScreen,10,function(){},!1)}.bind(this))},onSignUpFromLogin:function(){this.loginUsingPasswordNode.active=!1,ScreenManager.showScreen(K.ScreenEnum.SignupScreen,10,function(){},!1)},onCancelLogin:function(){},validateEmail:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},onLogin:function(){K.internetAvailable?K.disconnectRequestedByPlayer=!0:K.disconnectRequestedByPlayer=!1,this.vpErrorMessage.string="",this.vpUserName.node.getChildByName("red").active=!1,this.vpPassword.node.getChildByName("red").active=!1,this.preLogin.active=!0,ServerCom.loading.active=!1,this.preLogin.active=!0,ServerCom.loading.active=!1,ServerCom.loadingLogin.active=!0,cc.find("InvisibleWhenBuilt/Inputs/ErrorMessage1",this.otpNode).active=!1,this.loginHandler.vpLogin(this.vpUserName.string,this.vpPassword.string,function(e){console.log("vpLogin",JSON.stringify(e)),e&&(a.preLogin.active=!1,ServerCom.loading.active=!1,1==e.success||"success"==e.status?(cc.sys.localStorage.setItem("vpUserName",a.vpUserName.string),cc.sys.localStorage.setItem("vpPassword",a.vpPassword.string),K.Token.access_token=e.access_token,K.Token.refresh_token=e.refresh_token,K.Token.access_token_expire_at=e.access_token_expire_at,K.Token.refresh_token_expire_at=e.refresh_token_expire_at,ServerCom.socketIOConnect(K.ServerAddress.gameServer+":"+K.ServerAddress.gamePort,function(){ServerCom.socketConnected&&(GameManager.setUserData(e.user),a.saveLoginData(),setTimeout(function(){a.onSuccessfullLogin(a)},100))})):(a.launch.active=!1,ServerCom.loadingLogin.active=!1,a.vpErrorMessage.node.active=!0,e.message?a.vpErrorMessage.string=e.message:a.vpErrorMessage.string=e.error[0].message))}),this.preLogin.active=!0,ServerCom.loading.active=!1,this.preLogin.active=!0,ServerCom.loading.active=!1},updateResend:function(){this.resendTimer-=1,0==this.resendTimer?(this.unschedule(this.updateResend),this.timerNode.active=!1,this.resendNode.active=!0):(this.timerNode.active=!0,this.timerNode.getChildByName("timer2").getComponent(cc.Label).string=this.resendTimer+"s")},onResend:function(){var e=this;this.loginHandler.loginSTD(this.phone.string,function(t){console.log("loginSTD",t),t&&(e.preLogin.active=!1,ServerCom.loading.active=!1,t.success?(cc.find("InvisibleWhenBuilt/Inputs/ErrorMessage1",e.otpNode).active=!0,cc.find("InvisibleWhenBuilt/Inputs/ErrorMessage1",e.otpNode).getComponent(cc.Label).string="OTP sent successfully: "+t.data,e.otpNode.active=!0,e.resendNode.active=!1,e.resendTimer=61,e.schedule(e.updateResend,1)):(e.loginDebug[2].getComponent(cc.Label).string=t.message,e.loginDebug[2].active=!0))})},onLoginCallBack:function(e){console.log("Login Sucess with Dtaa",e),K.ServerAddress.pokerVer=e.serverVersion,K.disconnectRequestedByPlayer=!0,!0===e.success||"success"==e.status?(a.saveLoginData(e),GameManager.setUserData(e.user),setTimeout(function(){a.ConnectToGameSever(e.user.host,e.user.port,a)},100)):(a.loginDebug[2].getComponent(cc.Label).string=e.info?e.info:"",a.loginDebug[2].active=!0)},saveLoginData:function(){},onResetPassword:function(){var e=this.userName.string,t=this.password.string;this.loginHandler.resetPassword(e,t,function(e){e.success})},onForgotPassword:function(){this.popupManager.show(s.ForgotPasswordPopUp,{},function(){})},onTournamentTableUserBroadcast:function(e){if(console.log(">>>>>>>>>>>>>>>>>>>>>>>onTournamentTableUserBroadcast",e),"enterChannelResponse"==e.eventName)if(e.data.success){if(GameManager.popUpManager.hideAllPopUps(),socketIO.socket.off(e.eventTo),socketIO.socket.off(e.channelId+":"+e.playerId),!GameManager.isActive)return ServerCom.forceKeepLoading=!1,ServerCom.loading.active=!1,void(this.gotoTable&&(this.gotoTable.active=!1));if(e.data.gameData=new d(e.data),e.data.tourData=this.tourData,console.log("window.TournamentLobbyListPresenter"),console.log(window.TournamentLobbyListPresenter),!K.GoToTable)for(var t=0;t<window.TournamentLobbyListPresenter.contentHolderAll.children.length;t++){var a=window.TournamentLobbyListPresenter.contentHolderAll.children[t].getComponent("TournamentLobbyListItem").tourItemInfo;if(this.tourData.id==a.id){e.data.tourData=a;break}}for(var n=!1,i=-1,o=0;o<GameManager.gameModel.activePokerModels.length;o++)if(GameManager.gameModel.activePokerModels[o].tourData){var r=GameManager.gameModel.activePokerModels[o].tourData.id;if(this.tourData.id===r){n=!0,i=o;break}}this.launch.active=!1,e.data.isRejoin=n,e.data.indexFound=i,ScreenManager.showScreen(K.ScreenEnum.GamePlayScreen,e.data,function(){}),this.scheduleOnce(function(){ServerCom.forceKeepLoading=!1,ServerCom.loading.active=!1,this.gotoTable&&(this.gotoTable.active=!1)},1.2)}else ServerCom.forceKeepLoading=!1,ServerCom.loading.active=!1,GameManager.popUpManager.show(s.CommonDialog,{title:"Error!",content:e.data.info?e.data.info:e.data.response},function(){})},onScreenShot:function(){var e=this;if(cc.sys.isNative)this.capture.getComponent("capture_to_native").init(),this.scheduleOnce(function(){var t=e.capture.getComponent("capture_to_native").initImage();e.capture.getComponent("capture_to_native").createCanvas(t),e.capture.getComponent("capture_to_native").saveFile(t)},1);else{this.capture.getComponent("capture_to_web").init(),this.capture.getComponent("capture_to_web").createCanvas();var t=this.capture.getComponent("capture_to_web").createImg();this.scheduleOnce(function(){e.capture.getComponent("capture_to_web").showImage(t)},1)}},onLoginUsingPassword:function(){this.loginUsingPasswordNode.active=!0},onBackLoginUsingPassword:function(){this.loginUsingPasswordUsername.string="",this.loginUsingPasswordPassword.string="",this.loginUsingPasswordPassword.inputFlag=cc.EditBox.InputFlag.PASSWORD,this.loginUsingPasswordNode.active=!1},onLoginWithPasword:function(){""!=this.loginUsingPasswordUsername.string.trim()&&""!=this.loginUsingPasswordPassword.string.trim()&&GameManager.getToken(this.loginUsingPasswordUsername.string,this.loginUsingPasswordPassword.string,function(e){var t=this;this.loginUsingPasswordUsername.string="",this.loginUsingPasswordPassword.string="","success"==e.status?(this.preLogin.active=!0,ServerCom.loading.active=!1,ServerCom.socketIOConnect(K.ServerAddress.gameServer+":"+K.ServerAddress.gamePort,function(){ServerCom.socketConnected&&t.loginHandler.loginGame(t.loginUsingPasswordUsername.string,"",t.loginUsingPasswordPassword.string,"login","normal",t.onLoginCallBack.bind(t))})):(this.preLogin.active=!1,ServerCom.loading.active=!1,a.loginDebug[2].getComponent(cc.Label).string="Invalid username or password please try again",a.loginDebug[2].active=!0)}.bind(this))},onTogglePassword:function(e){e.isChecked?this.loginUsingPasswordPassword.inputFlag=cc.EditBox.InputFlag.DEFAULT:this.loginUsingPasswordPassword.inputFlag=cc.EditBox.InputFlag.PASSWORD},onToggleForgetPassword1:function(e){e.isChecked?this.forgetPasswordNewPassword1.inputFlag=cc.EditBox.InputFlag.DEFAULT:this.forgetPasswordNewPassword1.inputFlag=cc.EditBox.InputFlag.PASSWORD},onToggleForgetPassword2:function(e){e.isChecked?this.forgetPasswordNewPassword2.inputFlag=cc.EditBox.InputFlag.DEFAULT:this.forgetPasswordNewPassword2.inputFlag=cc.EditBox.InputFlag.PASSWORD},onUpdateNewPassword:function(){},onPasswordVerifyOtp:function(){},onShowTC:function(){this.tc.active=!0,this.tc.getChildByName("Cover").getChildByName("WebView").getComponent(cc.WebView).url="https://bbpoker.pro/terms-conditions/",this.tc.getChildByName("Cover").getChildByName("HeadingText").getComponent(cc.Label).string="Terms-Conditions"},onShowPP:function(){this.tc.active=!0,this.tc.getChildByName("Cover").getChildByName("WebView").getComponent(cc.WebView).url="https://bbpoker.pro/privacy-policy/",this.tc.getChildByName("Cover").getChildByName("HeadingText").getComponent(cc.Label).string="Privacy Policy"},onHideTC:function(){this.tc.getChildByName("Cover").getChildByName("WebView").getComponent(cc.WebView).url="",this.tc.active=!1},onConfirmCustom:function(){this.node.getChildByName("Editable")&&(this.node.getChildByName("Editable").active=!1,K.ServerAddress.gameServer=this.node.getChildByName("Editable").getChildByName("gameServer").getChildByName("EditBox").getComponent(cc.EditBox).string,K.ServerAddress.gamePort=this.node.getChildByName("Editable").getChildByName("gamePort").getChildByName("EditBox").getComponent(cc.EditBox).string,K.ServerAddress.ipAddress=this.node.getChildByName("Editable").getChildByName("ipAddress").getChildByName("EditBox").getComponent(cc.EditBox).string,K.ServerAddress.port=this.node.getChildByName("Editable").getChildByName("port").getChildByName("EditBox").getComponent(cc.EditBox).string,K.ServerAddress.assets_server=this.node.getChildByName("Editable").getChildByName("assets_server").getChildByName("EditBox").getComponent(cc.EditBox).string,K.ServerAddress.otp_server=this.node.getChildByName("Editable").getChildByName("otp_server").getChildByName("EditBox").getComponent(cc.EditBox).string,K.ServerAddress.ads_server=this.node.getChildByName("Editable").getChildByName("ads_server").getChildByName("EditBox").getComponent(cc.EditBox).string,K.Token.auth_server=this.node.getChildByName("Editable").getChildByName("auth_server").getChildByName("EditBox").getComponent(cc.EditBox).string,K.Token.auth_refresh_server=this.node.getChildByName("Editable").getChildByName("auth_refresh_server").getChildByName("EditBox").getComponent(cc.EditBox).string,cc.sys.localStorage.setItem("EditablegameServer",this.node.getChildByName("Editable").getChildByName("gameServer").getChildByName("EditBox").getComponent(cc.EditBox).string),cc.sys.localStorage.setItem("EditablegamePort",this.node.getChildByName("Editable").getChildByName("gamePort").getChildByName("EditBox").getComponent(cc.EditBox).string),cc.sys.localStorage.setItem("EditableipAddress",this.node.getChildByName("Editable").getChildByName("ipAddress").getChildByName("EditBox").getComponent(cc.EditBox).string),cc.sys.localStorage.setItem("Editableport",this.node.getChildByName("Editable").getChildByName("port").getChildByName("EditBox").getComponent(cc.EditBox).string),cc.sys.localStorage.setItem("Editableassets_server",this.node.getChildByName("Editable").getChildByName("assets_server").getChildByName("EditBox").getComponent(cc.EditBox).string),cc.sys.localStorage.setItem("Editableotp_server",this.node.getChildByName("Editable").getChildByName("otp_server").getChildByName("EditBox").getComponent(cc.EditBox).string),cc.sys.localStorage.setItem("Editableads_server",this.node.getChildByName("Editable").getChildByName("ads_server").getChildByName("EditBox").getComponent(cc.EditBox).string),cc.sys.localStorage.setItem("Editableauth_server",this.node.getChildByName("Editable").getChildByName("auth_server").getChildByName("EditBox").getComponent(cc.EditBox).string),cc.sys.localStorage.setItem("Editableauth_refresh_server",this.node.getChildByName("Editable").getChildByName("auth_refresh_server").getChildByName("EditBox").getComponent(cc.EditBox).string))},resetAll:function(){this.vpLogin.interactable=!1,this.vpUserName.string="",this.vpPassword.string=""},onCheck:function(){this.vpLogin.interactable=!1,""!==this.vpUserName.string&&""!==this.vpPassword.string&&(this.vpLogin.interactable=!0)},onForgetPasswordStep1Check:function(){this.vpForgetPasswordSubmit.interactable=!1,""!==this.vpForgetPasswordUsername.string&&(this.vpForgetPasswordSubmit.interactable=!0)},onForgetPasswordStep2Check:function(){this.vpForgetPasswordSubmitOTP.interactable=!1,""!==this.vpForgetPasswordOTP.string&&(this.vpForgetPasswordSubmitOTP.interactable=!0)},onForgetPasswordStep3Check:function(){this.vpForgetPasswordSubmitUpdate.interactable=!1,""!==this.vpForgetPasswordNew.string&&""!==this.vpForgetPasswordNewConfirm.string&&(this.vpForgetPasswordSubmitUpdate.interactable=!0)},onForgetPassword:function(){this.vpForgetPasswordEmail.string="",this.vpForgetPasswordUsername.string="",this.vpForgetPasswordOTP.string="",this.vpForgetPasswordNew.string="",this.vpForgetPasswordNewConfirm.string="",this.vpForgetPasswordErrorMessage1.string="",this.vpForgetPasswordErrorMessage2.string="",this.vpForgetPasswordErrorMessage3.string="",this.forgetPasswordNode.active=!0,this.forgetPasswordNode.getChildByName("Step1").active=!0,this.forgetPasswordNode.getChildByName("Step2").active=!1,this.forgetPasswordNode.getChildByName("Step3").active=!1,this.vpForgetPasswordSubmit.interactable=!1,this.vpForgetPasswordSubmitOTP.interactable=!1,this.vpForgetPasswordSubmitUpdate.interactable=!1},onForgetPasswordStep1Back:function(){this.vpForgetPasswordEmail.string="",this.vpForgetPasswordUsername.string="",this.vpForgetPasswordOTP.string="",this.vpForgetPasswordNew.string="",this.vpForgetPasswordNewConfirm.string="",this.vpForgetPasswordErrorMessage1.string="",this.vpForgetPasswordErrorMessage2.string="",this.vpForgetPasswordErrorMessage3.string="",this.forgetPasswordNode.active=!1,this.forgetPasswordNode.getChildByName("Step1").active=!1,this.forgetPasswordNode.getChildByName("Step2").active=!1,this.forgetPasswordNode.getChildByName("Step3").active=!1,this.vpForgetPasswordSubmit.interactable=!1,this.vpForgetPasswordSubmitOTP.interactable=!1,this.vpForgetPasswordSubmitUpdate.interactable=!1},onForgetPasswordStep2Back:function(){this.vpForgetPasswordEmail.string="",this.vpForgetPasswordUsername.string="",this.vpForgetPasswordOTP.string="",this.vpForgetPasswordNew.string="",this.vpForgetPasswordNewConfirm.string="",this.vpForgetPasswordErrorMessage1.string="",this.vpForgetPasswordErrorMessage2.string="",this.vpForgetPasswordErrorMessage3.string="",this.forgetPasswordNode.getChildByName("Step1").active=!0,this.forgetPasswordNode.getChildByName("Step2").active=!1,this.forgetPasswordNode.getChildByName("Step3").active=!1,this.vpForgetPasswordSubmit.interactable=!1,this.vpForgetPasswordSubmitOTP.interactable=!1,this.vpForgetPasswordSubmitUpdate.interactable=!1},onForgetPasswordStep3Back:function(){this.vpForgetPasswordEmail.string="",this.vpForgetPasswordUsername.string="",this.vpForgetPasswordOTP.string="",this.vpForgetPasswordNew.string="",this.vpForgetPasswordNewConfirm.string="",this.vpForgetPasswordErrorMessage1.string="",this.vpForgetPasswordErrorMessage2.string="",this.vpForgetPasswordErrorMessage3.string="",this.forgetPasswordNode.getChildByName("Step1").active=!1,this.forgetPasswordNode.getChildByName("Step2").active=!0,this.forgetPasswordNode.getChildByName("Step3").active=!1,this.vpForgetPasswordSubmit.interactable=!1,this.vpForgetPasswordSubmitOTP.interactable=!1,this.vpForgetPasswordSubmitUpdate.interactable=!1},onForgetPasswordToStep2:function(){var e=this;this.loginHandler.vpSendOTP(this.vpForgetPasswordUsername.string,function(t){console.log("vpSendOTP",JSON.stringify(t)),1==t.success||"success"==t.status?(e.vpForgetPasswordEmail.string="",e.vpForgetPasswordOTP.string="",e.vpForgetPasswordNew.string="",e.vpForgetPasswordNewConfirm.string="",e.vpForgetPasswordErrorMessage1.string="",e.vpForgetPasswordErrorMessage2.string="",e.vpForgetPasswordErrorMessage3.string="",e.forgetPasswordNode.getChildByName("Step1").active=!1,e.forgetPasswordNode.getChildByName("Step2").active=!0,e.forgetPasswordNode.getChildByName("Step3").active=!1,e.forgetPasswordNode.getChildByName("Step2").getChildByName("Heading3").getComponent(cc.Label).string=t.associatedEmailId,e.forgetPasswordNode.getChildByName("Step2").getChildByName("debug").getComponent(cc.Label).string=t.otp||"",e.vpForgetPasswordSubmit.interactable=!1,e.vpForgetPasswordSubmitOTP.interactable=!1,e.vpForgetPasswordSubmitUpdate.interactable=!1):(e.vpForgetPasswordErrorMessage1.node.active=!0,e.vpForgetPasswordErrorMessage2.node.active=!0,t.message?(e.vpForgetPasswordErrorMessage1.string=t.message,e.vpForgetPasswordErrorMessage2.string=t.message):(e.vpForgetPasswordErrorMessage1.string=t.error[0].message,e.vpForgetPasswordErrorMessage2.string=t.error[0].message))})},onForgetPasswordToStep3:function(){var e=this;this.loginHandler.vpVerifyOTP(this.forgetPasswordNode.getChildByName("Step2").getChildByName("Heading3").getComponent(cc.Label).string,this.vpForgetPasswordOTP.string,function(t){console.log("vpVerifyOTP",JSON.stringify(t)),1==t.success||"success"==t.status?(e.vpForgetPasswordEmail.string="",e.vpForgetPasswordUsername.string="",e.vpForgetPasswordOTP.string="",e.vpForgetPasswordNew.string="",e.vpForgetPasswordNewConfirm.string="",e.vpForgetPasswordErrorMessage1.string="",e.vpForgetPasswordErrorMessage2.string="",e.vpForgetPasswordErrorMessage3.string="",e.forgetPasswordNode.getChildByName("Step1").active=!1,e.forgetPasswordNode.getChildByName("Step2").active=!1,e.forgetPasswordNode.getChildByName("Step3").active=!0,e.resetToken=t.resetToken,e.vpForgetPasswordSubmit.interactable=!1,e.vpForgetPasswordSubmitOTP.interactable=!1,e.vpForgetPasswordSubmitUpdate.interactable=!1):(e.vpForgetPasswordErrorMessage2.node.active=!0,t.message?e.vpForgetPasswordErrorMessage2.string=t.message:e.vpForgetPasswordErrorMessage2.string=t.error[0].message)})},onForgetPasswordToFinish:function(){var e=this;this.loginHandler.vpResetPassword(this.forgetPasswordNode.getChildByName("Step2").getChildByName("Heading3").getComponent(cc.Label).string,this.vpForgetPasswordNew.string,this.vpForgetPasswordNewConfirm.string,this.resetToken,function(t){console.log("vpResetPassword",JSON.stringify(t)),1==t.success||"success"==t.status?(e.vpForgetPasswordEmail.string="",e.vpForgetPasswordUsername.string="",e.vpForgetPasswordOTP.string="",e.vpForgetPasswordNew.string="",e.vpForgetPasswordNewConfirm.string="",e.vpForgetPasswordErrorMessage1.string="",e.vpForgetPasswordErrorMessage2.string="",e.vpForgetPasswordErrorMessage3.string="",e.vpForgetPasswordSubmit.interactable=!1,e.vpForgetPasswordSubmitOTP.interactable=!1,e.vpForgetPasswordSubmitUpdate.interactable=!1,e.vpForgetPasswordSuccessPopup.active=!0):(e.vpForgetPasswordErrorMessage3.node.active=!0,t.message?e.vpForgetPasswordErrorMessage3.string=t.message:e.vpForgetPasswordErrorMessage3.string=t.error[0].message)})},onForgetPasswordContinue:function(){this.forgetPasswordNode.active=!1,this.forgetPasswordNode.getChildByName("Step1").active=!1,this.forgetPasswordNode.getChildByName("Step2").active=!1,this.forgetPasswordNode.getChildByName("Step3").active=!1,this.vpForgetPasswordSuccessPopup.active=!1},checkForMultiClient:function(){a.loginHandler.checkForMultiClient(function(e){if(ServerCom.loadingLogin.active=!1,console.log("MULTI CLIENT RESPONSE ",e),e.success){GameManager.isConnected=!0,console.log("Active tables:",GameManager.activeTableCount);var t=[],a=[],n=GameScreen?GameScreen.prevSelection:0,i=!1;GameManager.gameModel.activePokerModels.forEach(function(e){e.gameData.raw.tournamentId&&(t.push(e.gameData.raw.tournamentId),a.push(e.gameData.channelId)),1==a.length&&(this.tourData=e.gameData.raw.tourData)},this),console.log("currentActiveIds",t),GameManager.activeTableCount>0&&0==e.joinChannels.length&&GameManager.reset(),e.joinChannels&&e.joinChannels.length>0&&(i=!0,this.preLogin.active=!0,GameManager.scheduleOnce(function(){var t=e.joinChannels.length;e.joinChannels.forEach(function(e,a){var n=new c(e);n.channelId?(TableHandler.joinTableList.push(n.channelId),n.tableId="",GameManager.join(n.channelId,K.PomeloAPI.joinChannel,n,null,null,a+1,t,!0)):GameManager.join(n.tableId,K.PomeloAPI.joinChannel,n,null,null,a+1,t,!0)},this)},.1)),t.length>0?(i=!0,this.preLogin.active=!0,GameManager.scheduleOnce(function(){GameManager.isSocketIOConnected?(console.log("GameScreen.prevSelection",n),ServerCom.socketIOBroadcast(a[0]+":"+GameManager.user.playerId,this.onTournamentTableUserBroadcast.bind(this)),window.TournamentLobbyHandler.requestTournamentEnterTable({tournamentId:t[0]},function(){},function(){},"Enter table, please wait ......")):this.preLogin.active=!1}.bind(this),1)):this.preLogin.active?(i||(this.preLogin.active=!1),i||(this.launch.active=!1,ScreenManager.currentScreen==K.ScreenEnum.LobbyScreen?GameManager.emit("forceReloadTable"):ScreenManager.currentScreen!=K.ScreenEnum.LoginScreen&&ScreenManager.currentScreen!=K.ScreenEnum.SignupScreen||ScreenManager.showScreen(K.ScreenEnum.LobbyScreen,10,function(){},!1))):(i||(this.preLogin.active=!1),i||(this.launch.active=!1,ScreenManager.showScreen(K.ScreenEnum.LobbyScreen,10,function(){},!1)))}else this.verfyOtpClickable=!0,K.disconnectRequestedByPlayer=!0,this.preLogin.active=!1,this.launch.active=!1,ScreenManager.showScreen(K.ScreenEnum.LoginScreen,10,function(){},!1)}.bind(this))}}),cc._RF.pop()},{AbstractScreen:"AbstractScreen",Checkbox:"Checkbox",CustomEditBox:"CustomEditBox",LoginHandler:"LoginHandler",PopUpManager:"PopUpManager",PostTypes:"PostTypes",ResponseTypes:"ResponseTypes"}],MaxTablesPopup:[function(e,t){"use strict";cc._RF.push(t,"95e30FYZlFDaKZmUqz6cEiz","MaxTablesPopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase");cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},infoLbl:{default:null,type:cc.Label}},onLoad:function(){},onShow:function(e){null!=e&&(this.infoLbl.string=e)},onClickEnter:function(){this.onExit()},onExit:function(){GameManager.playSound(K.Sounds.click),this.popUpManager.hide(n.MaxTablesJoinedPopup,function(){})}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],MobileNotePopup:[function(e,t){"use strict";cc._RF.push(t,"7336bDAWXNP+bT0tW+0Qbvm","MobileNotePopup"),cc.Class({extends:cc.Component,properties:{note_editBox:cc.EditBox,colorHolder:cc.Node},onLoad:function(){this.colors=[new cc.Color(255,255,255),new cc.Color(206,210,2),new cc.Color(204,123,1),new cc.Color(200,0,0),new cc.Color(238,1,172),new cc.Color(13,10,255),new cc.Color(16,240,255)]},start:function(){},init:function(e,t,a,n,i){if(console.log(t,a,e),this.colors||(this.colors=[new cc.Color(255,255,255),new cc.Color(206,210,2),new cc.Color(204,123,1),new cc.Color(200,0,0),new cc.Color(238,1,172),new cc.Color(13,10,255),new cc.Color(16,240,255)]),this.node.active=!0,e){this.note_editBox.string=a;var o=this.findColIndex(t);o<0&&(o=0),this.colorHolder.getComponent(cc.ToggleContainer).toggleItems[o].isChecked=!0,this.setColor(this.colors[o])}else this.note_editBox.string="",this.colorHolder.getComponent(cc.ToggleContainer).toggleItems[0].isChecked=!0,this.setColor(this.colors[0]);this.targetPlayerId=n,this.pokerPresenter=i},findColIndex:function(e){var t=-1;return this.colors.forEach(function(a,n){a.r==e.r&&a.g==e.g&&a.b==e.b&&(t=n)}),t},onRemoveColor:function(){},onColorSelected:function(e){this.setColor(this.colors[e.node.name]),this.onSave()},setColor:function(e){this.selectedColor={},this.selectedColor.r=e.r,this.selectedColor.g=e.g,this.selectedColor.b=e.b},onEscape:function(){},onSave:function(){var e=this.note_editBox.string.trim();if(""!=this.targetPlayerId){var t=this,a={playerId:GameManager.user.playerId,forPlayerId:this.targetPlayerId,notes:e,color:this.selectedColor};ServerCom.pomeloRequest(K.PomeloAPI.createNote,a,function(n){if(n.success){if(!t.pokerPresenter||!t.pokerPresenter.model)return;t.pokerPresenter.model.updateNotes(t.targetPlayerId,t.selectedColor,a.notes),t.onEscape()}else 0==n.info.localeCompare("notes for this player already exist")&&t.updateNotes(t.targetPlayerId,e)},null,5e3,!1,!1)}},updateNotes:function(e,t){var a={query:{playerId:"hsdfhd",forPlayerId:"sdfsdf"},updateKeys:{notes:"",color:"1"}};a.query.playerId=GameManager.user.playerId,a.query.forPlayerId=e,a.updateKeys.notes=t,a.updateKeys.color=this.selectedColor,ServerCom.pomeloRequest(K.PomeloAPI.updateNote,a,function(a){if(a.success){if(!this.pokerPresenter||!this.pokerPresenter.model)return;this.pokerPresenter.model.updateNotes(e,this.selectedColor,t),this.onEscape()}}.bind(this),null,5e3,!1,!1)},onDelete:function(){if(""!=this.targetPlayerId){var e={query:{playerId:"hsdfhd",forPlayerId:"sdfsdf"}};e.query.playerId=GameManager.user.playerId,e.query.forPlayerId=this.targetPlayerId;var t=this;ServerCom.pomeloRequest(K.PomeloAPI.deleteNote,e,function(e){if(e.success){if(!this.pokerPresenter||!this.pokerPresenter.model)return;this.pokerPresenter.model.updateNotes(t.targetPlayerId,null,null),this.note_editBox.string=""}}.bind(this),null,5e3,!1,!1)}},onCancel:function(){this.onEscape()}}),cc._RF.pop()},{}],Movement:[function(e,t){"use strict";cc._RF.push(t,"5aed48lCPZGeqQHuTbWgZGG","Movement"),cc.Class({extends:cc.Component,properties:{startMoving:!1,dragging:!1,disableDrag:!0,target:null,dragElements:{type:[cc.Node],default:[]}},onLoad:function(){this.registerTouchInput()},registerTouchInput:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(e){this.dragging=!0,this.dropZone=null,this.target=null,e.stopPropagation()},this),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(e){if(e.stopPropagation(),this.dragging){var t=e.touch;this.target=this.node.parent.convertTouchToNodeSpaceAR(t)}},this),this.node.on(cc.Node.EventType.TOUCH_END,function(e){e.stopPropagation(),this.dragging&&(this.dragging=!1)},this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){e.stopPropagation(),this.dragging&&(this.dragging=!1)},this)},dragCard:function(e){this.node.position=this.node.position.lerp(this.target,20*e),this.dragElements.forEach(function(e){e.position=this.node.position},this)},update:function(e){this.target&&this.dragging&&this.dragCard(e)}}),cc._RF.pop()},{}],MultiLoginPopup:[function(e,t){"use strict";cc._RF.push(t,"532299m8e5J74siCp95tpVK","MultiLoginPopup"),e("PopUpManager").PopUpManager;var a=e("PopUpManager").PopUpType,n=e("PopUpBase");cc.Class({extends:n,onOk:function(){GameManager.popUpManager.hide(a.MultiLoginPopup,function(){this.disconnectAndOpenLoginScreen()}.bind(this)),GameManager.playSound(K.Sounds.click)},onSingleLogin:function(){LoginHandler.singleLogin(function(){this.onOk()}.bind(this),function(){this.onOk()}.bind(this)),GameManager.playSound(K.Sounds.click)},disconnectAndOpenLoginScreen:function(){ScreenManager.showScreen(K.ScreenEnum.LoginScreen,10,function(){},!1),K.disconnectRequestedByPlayer=!0,setTimeout(function(){LoginHandler.startPomelo(K.ServerAddress.gameServer,K.ServerAddress.gamePort)},100)}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],NestablePageView_Outer:[function(e,t){"use strict";cc._RF.push(t,"4f25f/YH89Ny7iEX44qhakx","NestablePageView_Outer"),cc.Class({extends:cc.PageView,properties:{m_InnerScrollViews:[e("NestableScrollView_Inner")],m_PlanDir:{default:null,visible:!1},m_ScrollingInnerSv:{default:null,visible:!1}},onLoad:function(){var e=this;this._super(),this.m_PlanDir=null,this.m_InnerScrollViews.forEach(function(t){t.setOuterScrollView(e)})},_isHisChild:function(e,t){return e==t||null!=e.parent&&(e.parent==t||this._isHisChild(e.parent,t))},_findScrollingInnerSv:function(e){for(var t=0;t<this.m_InnerScrollViews.length;t++)if(this._isHisChild(e,this.m_InnerScrollViews[t].node))return this.m_InnerScrollViews[t];return null},isDifferentBetweenSettingAndPlan:function(e){return!(0==this.m_PlanDir||1==this.m_PlanDir&&e.horizontal||-1==this.m_PlanDir&&e.vertical)},hasNestedViewGroup:function(e){if(e.eventPhase===cc.Event.CAPTURING_PHASE)return!1},_onTouchBegan:function(e,t){if(this._touchBeganPosition=e.touch.getLocation(),this.enabledInHierarchy&&!this.hasNestedViewGroup(e,t)){this.m_PlanDir=null,this.m_ScrollingInnerSv=null;var a=e.touch;this.content&&this._handlePressLogic(a),this._touchMoved=!1,this._stopPropagationIfTargetIsMe(e)}},_onTouchMoved:function(e,t){if(this.enabledInHierarchy&&!this.hasNestedViewGroup(e,t)){var a=e.touch,n=a.getLocation().sub(a.getStartLocation());if(null==this.m_PlanDir&&n.mag()>7)if(this.m_ScrollingInnerSv=this._findScrollingInnerSv(e.target),null!=this.m_ScrollingInnerSv){var i=this.m_ScrollingInnerSv.content.getContentSize(),o=this.m_ScrollingInnerSv.node.getContentSize();this.m_ScrollingInnerSv.vertical&&i.height>o.height||this.m_ScrollingInnerSv.horizontal&&i.width>o.width?this.m_PlanDir=Math.abs(n.x)>Math.abs(n.y)?1:-1:this.m_PlanDir=0}else this.m_PlanDir=0;if(this.content&&(this.isDifferentBetweenSettingAndPlan(this)||this._handleMoveLogic(a)),this.cancelInnerEvents&&null==this.m_ScrollingInnerSv){if(n.mag()>7&&!this._touchMoved&&e.target!==this.node){var s=new cc.Event.EventTouch(e.getTouches(),e.bubbles);s.type=cc.Node.EventType.TOUCH_CANCEL,s.touch=e.touch,s.simulate=!0,e.target.dispatchEvent(s),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(e)}}}}),cc._RF.pop()},{NestableScrollView_Inner:"NestableScrollView_Inner"}],NestableScrollView_Inner:[function(e,t){"use strict";cc._RF.push(t,"ec87e84XcFDkLEedpwy3xUt","NestableScrollView_Inner"),cc.Class({extends:cc.ScrollView,properties:{m_OuterScrollView:{default:null,visible:!1}},setOuterScrollView:function(e){this.m_OuterScrollView=e},_onTouchMoved:function(e,t){if(this.enabledInHierarchy&&!this.hasNestedViewGroup(e,t)){var a=e.touch,n=a.getLocation().sub(a.getStartLocation());if(this.content&&(this.m_OuterScrollView.isDifferentBetweenSettingAndPlan(this)||this._handleMoveLogic(a)),this.cancelInnerEvents){if(n.mag()>7&&!this._touchMoved&&e.target!==this.node){var i=new cc.Event.EventTouch(e.getTouches(),e.bubbles);i.type=cc.Node.EventType.TOUCH_CANCEL,i.touch=e.touch,i.simulate=!0,e.target.dispatchEvent(i),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(e)}}}}),cc._RF.pop()},{}],NestableScrollView_Outer:[function(e,t){"use strict";cc._RF.push(t,"5993d3JPSZBDIj9gsrlrcQ7","NestableScrollView_Outer"),cc.Class({extends:cc.ScrollView,properties:{m_InnerScrollViews:[e("NestableScrollView_Inner")],m_PlanDir:{default:null,visible:!1},m_ScrollingInnerSv:{default:null,visible:!1}},onLoad:function(){var e=this;this.m_PlanDir=null,this.m_InnerScrollViews.forEach(function(t){t.setOuterScrollView(e)})},_isHisChild:function(e,t){return e==t||null!=e.parent&&(e.parent==t||this._isHisChild(e.parent,t))},_findScrollingInnerSv:function(e){for(var t=0;t<this.m_InnerScrollViews.length;t++)if(this._isHisChild(e,this.m_InnerScrollViews[t].node))return this.m_InnerScrollViews[t];return null},isDifferentBetweenSettingAndPlan:function(e){return!(0==this.m_PlanDir||1==this.m_PlanDir&&e.horizontal||-1==this.m_PlanDir&&e.vertical)},hasNestedViewGroup:function(e){if(e.eventPhase===cc.Event.CAPTURING_PHASE)return!1},_onTouchBegan:function(e,t){if(this.enabledInHierarchy&&!this.hasNestedViewGroup(e,t)){this.m_PlanDir=null,this.m_ScrollingInnerSv=null;var a=e.touch;this.content&&this._handlePressLogic(a),this._touchMoved=!1,this._stopPropagationIfTargetIsMe(e)}},_onTouchMoved:function(e,t){if(this.enabledInHierarchy&&!this.hasNestedViewGroup(e,t)){var a=e.touch,n=a.getLocation().sub(a.getStartLocation());if(null==this.m_PlanDir&&n.mag()>7)if(this.m_ScrollingInnerSv=this._findScrollingInnerSv(e.target),null!=this.m_ScrollingInnerSv){var i=this.m_ScrollingInnerSv.content.getContentSize(),o=this.m_ScrollingInnerSv.node.getContentSize();this.m_ScrollingInnerSv.vertical&&i.height>o.height||this.m_ScrollingInnerSv.horizontal&&i.width>o.width?this.m_PlanDir=Math.abs(n.x)>Math.abs(n.y)?1:-1:this.m_PlanDir=0}else this.m_PlanDir=0;if(this.content&&(this.isDifferentBetweenSettingAndPlan(this)||this._handleMoveLogic(a)),this.cancelInnerEvents&&null==this.m_ScrollingInnerSv){if(n.mag()>7&&!this._touchMoved&&e.target!==this.node){var s=new cc.Event.EventTouch(e.getTouches(),e.bubbles);s.type=cc.Node.EventType.TOUCH_CANCEL,s.touch=e.touch,s.simulate=!0,e.target.dispatchEvent(s),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(e)}}}}),cc._RF.pop()},{NestableScrollView_Inner:"NestableScrollView_Inner"}],NewLaunch:[function(e,t){"use strict";cc._RF.push(t,"0c2cauwbqVMH5hKuJldjGPT","NewLaunch"),cc.Class({extends:cc.Component,properties:{progress:{default:null,type:cc.ProgressBar},logo:{default:null,type:cc.Node},bg:{default:null,type:cc.Node}},start:function(){this.timer=0;var e=cc.size(cc.Canvas.instance.node.width,cc.Canvas.instance.node.height),t=e.height/e.width;console.log("aspect",t),t>1.5||(this.node.scale=.6),this.schedule(this.updateProgress)},updateProgress:function(e){this.timer+=e/2,this.timer>=1&&(this.timer=1,this.unschedule(this.updateProgress),this.next()),this.progress.progress=this.timer},next:function(){var e=this;this.logo.runAction(cc.fadeOut(1)),this.progress.node.runAction(cc.fadeOut(1)),this.node.runAction(cc.sequence(cc.delayTime(1.1),cc.callFunc(function(){e.next2()},this)))},next2:function(){var e=this;this.logo.scale=10,this.logo.runAction(cc.sequence(cc.spawn(cc.fadeIn(1),cc.scaleTo(1,.9)),cc.delayTime(.5),cc.delayTime(.5),cc.delayTime(1),cc.callFunc(function(){e.node.getComponent(cc.Button).interactable=!0,e.isAnimationFinshed=!0,e.isAnimationFinshed=!1,e.toGame()},this))),this.bg.active=!0,this.bg.opacity=0,this.bg.runAction(cc.sequence(cc.delayTime(1),cc.fadeIn(1)))},finished:function(){console.log("finished"),this.isLoadngFinshed=!0,this.isAnimationFinshed&&this.toGame()},toGame:function(){this.node.active=!1}}),cc._RF.pop()},{}],NewPlayerInfoPopup:[function(e,t){"use strict";cc._RF.push(t,"c88a3GtxjRFfaWjXv1eP3DJ","NewPlayerInfoPopup"),e("PopUpManager").PopUpManager,e("PopUpManager").PopUpType,e("PopUpBase"),cc.Class({extends:cc.Component,properties:{desc:{default:null,type:cc.Node},descLabel:{default:null,type:cc.Label},stickerTemp:{default:null,type:cc.Node},stickers:{default:null,type:cc.Node},playerName:{default:null,type:cc.Label},playerImg:{default:null,type:cc.Sprite},balance:{default:null,type:cc.Label},balance2:{default:null,type:cc.Label},noteNode:{default:null,type:cc.Node},days:{default:null,type:cc.Label},daysD:{default:null,type:cc.Node},resData:null},onLoad:function(){this.stickers.removeAllChildren();for(var e=0;e<GameManager.stickerImages.length;e++){var t=GameManager.stickerImages[e],a=cc.instantiate(this.stickerTemp);a.active=!0,a.y=0,a.parent=this.stickers,a.getComponent("StickerBase").stickerId=e+1,a.getComponent(cc.Button).clickEvents[0].customEventData=e+1,a.children[0].getComponent(cc.Sprite).spriteFrame=t}},onShow:function(e,t,a){this.resData=a,console.log("data",e),GameManager.emit("disablePageView"),this.daysD.active=!1,this.days.string="1 Day",e.playerId==GameManager.user.playerId?(this.noteNode.active=!1,this.playerName.string=GameManager.user.userName,this.playerImg.spriteFrame=GameManager.user.urlImg,this.balance.string=Number(e.chips.toFixed(2))):(this.noteNode.active=!0,this.playerName.string=e.playerName),this.balance.string=Number(e.chips.toFixed(2)),e.urlImg?this.playerImg.spriteFrame=e.urlImg:this.playerImg.spriteFrame=GameManager.user.urlImg,this.balance2.string="("+Number((e.chips/t.tableDetails.bigBlind).toFixed(2))+"BB)",this.updateUI()},onShowD:function(){this.daysD.active=!0},onHideD:function(){this.daysD.active=!1},onDays:function(e,t){this.onHideD(),this.days.string=e.target.children[0].getComponent(cc.Label).string;var a=this;ServerCom.pomeloRequest("connector.entryHandler.getPlayerStats",{playerId:GameManager.user.playerId,range:Number(t)},function(e){e.success&&(console.log(e),a.resData=e.data,a.updateUI())},null,5e3,!1)},updateUI:function(){cc.find("base/Keys",this.node).children[0].children[0].getComponent(cc.Label).string=(this.resData.vpipValue||0)+"%",cc.find("base/Keys",this.node).children[1].children[0].getComponent(cc.Label).string=(this.resData.pfrValue||0)+"%",cc.find("base/Keys",this.node).children[2].children[0].getComponent(cc.Label).string=(this.resData.t3betPFValue||0)+"%",cc.find("base/Keys",this.node).children[3].children[0].getComponent(cc.Label).string=(this.resData.foldTo3betValue||0)+"%",cc.find("base/Keys",this.node).children[5].children[0].getComponent(cc.Label).string=(this.resData.raiseFCBetValue||0)+"%",cc.find("base/Keys",this.node).children[6].children[0].getComponent(cc.Label).string=(this.resData.stealFromCOValue||0)+"%",cc.find("base/Keys",this.node).children[7].children[0].getComponent(cc.Label).string=(this.resData.attToStealValue||0)+"%",cc.find("base/Keys",this.node).children[8].children[0].getComponent(cc.Label).string=(this.resData.bbValue||0)+"%",cc.find("base/wtrd",this.node).children[0].getComponent(cc.Label).string="WTSD "+(this.resData.wtsdValue||0)+"%",cc.find("base/wtrd",this.node).children[2].getComponent(cc.Label).string="WSD "+(this.resData.wsdValue||0)+"%"},onDetail:function(e,t){this.desc.active=!0,this.desc.opacity=255,this.descLabel.string={VPIP:"Percentage of the time that a player voluntarily contributed money to the pot, given that he had a chance to do so",PFR:"The percentage of hands where the player made any raise pre-flop","3-Bet":"Percentage of the time that a player 3Bet preflop given that he had a chance to do so","Fold to 3-bet":"Percentage of the time that a player folded to a 3 Bet on any street in any situation regardless of prior action, given that he had a chance to do so","C-Bet":"Percentage of the time that a player raised a continuation bet on the flop","Steal from CO":"Percentage of the time that a player opened the pot by raising from the cutoff.",Steal:"Percentage of the time that a player opened the pot by raising from the cutoff, button, or small blind","BB/100":"Net amount of money that a player won per 100 hands played in terms of big blinds",WTSD:"Percentage of the time that a player went to showdown, given that he saw the flop",WSD:"Percentage of the time that a player won some money at showdown, given that he got to showdown"}[t],this.desc.stopAllActions(),this.desc.runAction(cc.sequence(cc.delayTime(2),cc.fadeOut(.5)))},onHideDetail:function(){this.desc.stopAllActions(),this.desc.active=!1},onClose:function(){this.daysD.active=!1,GameManager.emit("enablePageView"),this.node.active=!1,GameManager.emit("showJoinSimlar")}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],NewTable:[function(e,t){"use strict";cc._RF.push(t,"22806A8U+1CzLxFmj0o4PFn","NewTable"),cc.Class({extends:cc.Component,properties:{contentHolder:{default:null,type:cc.Node},content:{default:null,type:cc.Node},darkColor:{default:new cc.Color},lightColor:{default:new cc.Color},selectedColor:{default:new cc.Color},normalColor:{default:new cc.Color}},onLoad:function(){console.log("new table on laod",this.content),this.contentPool=[],this.compType=null,this.currentSelection=null},init:function(e,t){void 0===t&&(t=null),console.log("content handler init",e,t),this.compType=t,this.createRows(e.length,.1,e)},createRows:function(e,t,a){for(var n=0;n<e;n++){var i=a[n];this.createRow(this.compType,i)}this.populateRow(t,0,this.contentPool.length-1)},createRow:function(e,t){var a=cc.instantiate(this.content),n=a.getComponent(e);return t.onSelection=this.onSelectTable.bind(this),t.getCurrentSelection=this.getCurrentSelection.bind(this),n.init(t),this.contentPool.push(n),a},populateRow:function(e,t,a){var n=this;if(t<=a){var i=this.contentPool[t],o=t%2==0?this.darkColor:this.lightColor;i.changeBgColor(o),i.node.parent=this.contentHolder,i.node.active=!0,this.scheduleOnce(function(){n.populateRow(e,++t,a)},e)}},onSelectTable:function(e){e!==this.currentSelection&&(console.log("selection changed"),e.changeSelection(this.selectedColor,cc.Color.WHITE),this.currentSelection&&this.currentSelection.changeSelection(this.normalColor,cc.Color.BLACK),this.currentSelection=e)},getCurrentSelection:function(){return this.currentSelection}}),cc._RF.pop()},{}],NewVersionPopup:[function(e,t){"use strict";cc._RF.push(t,"e08210xhohF676FYUsT5Ckl","NewVersionPopup"),e("PopUpManager").PopUpManager,e("PopUpManager").PopUpType;var a=e("PopUpBase");cc.Class({extends:a,properties:{},onLoad:function(){},onShow:function(){},onOkBtn:function(){cc.sys.isBrowser?cc.sys.os===cc.sys.OS_ANDROID||cc.sys.os===cc.sys.OS_IOS||(cc.sys.os,cc.sys.OS_OSX):cc.sys.os===cc.sys.OS_ANDROID?cc.sys.openURL("https://play.google.com/store/apps/details?id=com.atozgames.bbpokergame"):cc.sys.os===cc.sys.OS_IOS?cc.sys.openURL("https://apps.apple.com/us/app/bb-poker-play-with-friends/id6737835776"):cc.sys.os===cc.sys.OS_WINDOWS||cc.sys.os===cc.sys.OS_OSX&&cc.sys.openURL("https://play.google.com/store/apps/details?id=com.atozgames.bbpokergame")}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],NotePanel:[function(e,t){"use strict";cc._RF.push(t,"20f3fXARxRDno8hz4G5FtcX","NotePanel");var a=e("DropDown"),n=(e("ChatPanel"),e("PostTypes").CreateNote),i=e("PostTypes").GetNote,o=null;cc.Class({extends:cc.Component,properties:{playersDropdown:{default:null,type:a},colorDropDown:{default:null,type:a},editBox:{default:null,type:cc.EditBox},gameData:{default:null},playersName:{default:[]},selectedPlayerName:"",selectedPlayerID:"",selectedColor:{default:cc.Color.White},noteGridParent:{default:null,type:cc.Node},notePrefab:{default:null,type:cc.Prefab},notes:[],namesInNotes:[],tempName:"",colors:{default:[],type:[cc.Color]},gridRefreshedRef:null,pokerModel:{default:null,type:cc.Node},pokerGame:null,deleteBtn:{default:null,type:cc.Node}},gridRefreshed:function(){},onLoad:function(){this.pokerGame=this.pokerModel.getComponent("PokerModel"),this.gameData=this.pokerGame.gameData,this.gridRefreshedRef=this.gridRefreshed.bind(this),o=this.onPlayersChanged.bind(this),GameScreen.node.on("grid-refreshed",this.gridRefreshedRef),this.registerBroadcast(),this.initPlayersDropdown(),this.initColor()},getNote:function(){if(this.selectedPlayerID){var e=new i(GameManager.user.playerId,this.selectedPlayerID);this.editBox.string="",ServerCom.pomeloRequest(K.PomeloAPI.getNote,e,function(e){if(e.success){if(!this.editBox)return;this.editBox.string=e.result.notes,this.colorDropDown.setColor(e.result.color,!0)}}.bind(this),null,5e3,!1,!1)}},updateNotes:function(e,t){var a={query:{playerId:"hsdfhd",forPlayerId:"sdfsdf"},updateKeys:{notes:"",color:"1"}};a.query.playerId=GameManager.user.playerId,a.query.forPlayerId=e,a.updateKeys.notes=t,a.updateKeys.color=this.selectedColor;var n=this;ServerCom.pomeloRequest(K.PomeloAPI.updateNote,a,function(e){if(e.success){if(!this.pokerGame)return;this.pokerGame.updateNotes(n.selectedPlayerID,this.selectedColor,t)}}.bind(this),null,5e3,!1,!1)},initPlayersDropdown:function(){this.playersName=[],this.gameData.tableDetails.players.forEach(function(e){e.playerName!==GameManager.user.userName&&this.playersName.push(e.playerName)},this),this.playersDropdown.prevSelection=null,this.playersDropdown.showDefault(),this.playersDropdown.registerCallback(this.updatePlayerID.bind(this)),this.playersDropdown.setContent(this.playersName),this.playersDropdown.prevSelection=null,this.colorDropDown.prevSelection=null,this.colorDropDown.showDefault()},initColor:function(){this.colorDropDown.setContent(this.colors),this.colorDropDown.registerCallback(this.updatePlayerColor.bind(this)),this.colorDropDown.showDefault()},updatePlayerColor:function(e){this.selectedColor={},this.selectedColor.r=e.r,this.selectedColor.g=e.g,this.selectedColor.b=e.b},onSubmit:function(){this.deleteBtn.active=!0;var e=this.editBox.string.trim();if(""!=this.selectedPlayerID){var t=this,a=new n(GameManager.user.playerId,this.selectedPlayerID,e,t.selectedColor);ServerCom.pomeloRequest(K.PomeloAPI.createNote,a,function(n){if(n.success){if(!t.pokerGame)return;t.pokerGame.updateNotes(t.selectedPlayerID,t.selectedColor,a.notes)}else 0==n.info.localeCompare("notes for this player already exist")&&t.updateNotes(t.selectedPlayerID,e)},null,5e3,!1,!1)}},updatePlayerID:function(e){var t=!0;this.gameData.tableDetails.players.forEach(function(a){a.playerName==e&&(this.selectedPlayerID=a.playerId,t=!1,this.getNote())},this),t&&(this.selectedPlayerID=""),this.selectedPlayerName=e},registerBroadcast:function(){this.pokerGame&&(this.pokerGame.off(K.PokerEvents.OnSit,o),this.pokerGame.on(K.PokerEvents.OnSit,o),this.pokerGame.off(K.PokerEvents.OnLeave,o),this.pokerGame.on(K.PokerEvents.OnLeave,o))},onPlayersChanged:function(){this.initPlayersDropdown()},deleteNotes:function(){if(""!=this.selectedPlayerID){var e={query:{playerId:"hsdfhd",forPlayerId:"sdfsdf"}};e.query.playerId=GameManager.user.playerId,e.query.forPlayerId=this.selectedPlayerID;var t=this;ServerCom.pomeloRequest(K.PomeloAPI.deleteNote,e,function(e){if(e.success){if(!this.pokerGame)return;this.pokerGame.updateNotes(t.selectedPlayerID,null,null),this.editBox.string=""}}.bind(this),null,5e3,!1,!1)}},editingStarted:function(){this.deleteBtn.active=!1}}),cc._RF.pop()},{ChatPanel:"ChatPanel",DropDown:"DropDown",PostTypes:"PostTypes"}],NotificationPopup:[function(e,t){"use strict";cc._RF.push(t,"23fb7oLTSNI+J17/CR3HVC9","NotificationPopup"),e("PopUpManager").PopUpManager;var a=e("PopUpManager").PopUpType,n=e("PopUpBase");cc.Class({extends:n,properties:{infoLbl:{default:null,type:cc.Label},timer:3},onShow:function(e){null!=e&&(this.infoLbl.string=e),this.node.y=200,this.node.runAction(cc.sequence(cc.moveTo(.5,new cc.Vec2(0,185)),cc.delayTime(1.5),cc.moveTo(.5,new cc.Vec2(0,185)))),this.scheduleOnce(function(){this.onClose()},this.timer)},onClose:function(){GameManager.popUpManager.hide(a.NotificationPopup,function(){})}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],NtPageView:[function(e,t){"use strict";cc._RF.push(t,"18edcYPaYBLu5kckl4vUeOh","NtPageView"),cc.Class({extends:cc.PageView,hasNestedViewGroup:function(e,t){if(e.eventPhase===cc.Event.CAPTURING_PHASE){var a=e.touch;if(a){var n=cc.pSub(a.getLocation(),a.getStartLocation());if(n.x>7||n.x<-7)return!1;if(t)for(var i=0;i<t.length;++i){var o=t[i];if(this.node===o)return!!e.target.getComponent(cc.ViewGroup);if(o.getComponent(cc.ViewGroup))return!0}return!1}}}}),cc._RF.pop()},{}],NtScrollViewIn:[function(e,t){"use strict";cc._RF.push(t,"c9eebRyAlhMAqxMtZ8GqOos","NtScrollViewIn"),cc.Class({extends:cc.ScrollView,properties:{m_OuterScrollView:{default:null,visible:!1}},onLoad:function(){cc.log("")},setOuterScrollView:function(e){this.m_OuterScrollView=e},_onTouchMoved:function(e){if(this.enabledInHierarchy){var t=e.touch,a=t.getLocation().sub(t.getStartLocation());if(this.content){if(!this.m_OuterScrollView)return;this.m_OuterScrollView.isDifferentBetweenSettingAndPlan(this)||this._handleMoveLogic(t)}if(this.cancelInnerEvents){if(a.mag()>7&&!this._touchMoved&&e.target!==this.node){var n=new cc.Event.EventTouch(e.getTouches(),e.bubbles);n.type=cc.Node.EventType.TOUCH_CANCEL,n.touch=e.touch,n.simulate=!0,e.target.dispatchEvent(n),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(e)}}}}),cc._RF.pop()},{}],NtScrollViewOut:[function(e,t){"use strict";cc._RF.push(t,"4a383K5zFZNMobsaYmD7K53","NtScrollViewOut"),cc.Class({extends:cc.ScrollView,properties:{m_InnerScrollViews:[e("NtScrollViewIn")],m_PlanDir:{default:null,visible:!1},m_ScrollingInnerSv:{default:null,visible:!1}},onLoad:function(){},setOutComp:function(){var e=this;this.m_PlanDir=null,this.m_InnerScrollViews.forEach(function(t){t.setOuterScrollView(e)})},_isHisChild:function(e,t){return e==t||null!=e.parent&&(e.parent==t||this._isHisChild(e.parent,t))},_findScrollingInnerSv:function(e){for(var t=0;t<this.m_InnerScrollViews.length;t++)if(this._isHisChild(e,this.m_InnerScrollViews[t].node))return this.m_InnerScrollViews[t];return null},isDifferentBetweenSettingAndPlan:function(e){return!(0==this.m_PlanDir||1==this.m_PlanDir&&e.horizontal||-1==this.m_PlanDir&&e.vertical)},hasNestedViewGroup:function(e){if(e.eventPhase===cc.Event.CAPTURING_PHASE)return!1},_onTouchBegan:function(e,t){if(this.enabledInHierarchy&&!this.hasNestedViewGroup(e,t)){this.m_PlanDir=null,this.m_ScrollingInnerSv=null;var a=e.touch;this.content&&this._handlePressLogic(a),this._touchMoved=!1,this._stopPropagationIfTargetIsMe(e)}},_onTouchMoved:function(e,t){if(this.enabledInHierarchy&&!this.hasNestedViewGroup(e,t)){var a=e.touch,n=a.getLocation().sub(a.getStartLocation());if(null==this.m_PlanDir&&n.mag()>7)if(this.m_ScrollingInnerSv=this._findScrollingInnerSv(e.target),null!=this.m_ScrollingInnerSv){var i=this.m_ScrollingInnerSv.content.getContentSize(),o=this.m_ScrollingInnerSv.node.getContentSize();this.m_ScrollingInnerSv.vertical&&i.height>o.height||this.m_ScrollingInnerSv.horizontal&&i.width>o.width?this.m_PlanDir=Math.abs(n.x)>Math.abs(n.y)?1:-1:this.m_PlanDir=0}else this.m_PlanDir=0;if(this.content&&(this.isDifferentBetweenSettingAndPlan(this)||this._handleMoveLogic(a)),this.cancelInnerEvents&&null==this.m_ScrollingInnerSv){if(n.mag()>7&&!this._touchMoved&&e.target!==this.node){var s=new cc.Event.EventTouch(e.getTouches(),e.bubbles);s.type=cc.Node.EventType.TOUCH_CANCEL,s.touch=e.touch,s.simulate=!0,e.target.dispatchEvent(s),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(e)}}}}),cc._RF.pop()},{NtScrollViewIn:"NtScrollViewIn"}],NtScrollView:[function(e,t,a){"use strict";cc._RF.push(t,"ef578iKcv1JOLI1U213bFT/","NtScrollView");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(s=(o<3?i(s):o>3?i(t,a,s):i(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,l=s.property,c=s.menu,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollView=null,t.cancelInnerEvents=!0,t.pageView=null,t.direction=null,t.start_loc=null,t._touchMoved=!1,t}return i(t,e),t.prototype.onLoad=function(){var e=this.node.parent.parent.parent.parent;this.pageView=e.getComponent(cc.ScrollView),this.direction=null,this.start_loc=null,this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this,!0),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this,!0),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0)},t.prototype.hasNestedViewGroup=function(e,t){if(e.eventPhase===cc.Event.CAPTURING_PHASE){if(t)for(var a=0;a<t.length;++a){var n=t[a];if(this.node===n)return!!e.target.getComponent(cc.ViewGroup);if(n.getComponent(cc.ViewGroup))return!0}return!1}},t.prototype._stopPropagationIfTargetIsMe=function(e){e.eventPhase===cc.Event.AT_TARGET&&e.target===this.node&&e.stopPropagation()},t.prototype._onTouchBegan=function(e,t){if(this.enabledInHierarchy&&!this.hasNestedViewGroup(e,t)){var a=e.touch;this.start_loc=e.touch.getLocation(),this.node&&(this.pageView&&this.pageView._handlePressLogic(a),this.scrollView&&this.scrollView._handlePressLogic(a)),this._touchMoved=!1,this._stopPropagationIfTargetIsMe(e)}},t.prototype._onTouchMoved=function(e,t){var a=e.touch.getLocation(),n=Math.abs(this.start_loc.x-a.x),i=Math.abs(this.start_loc.y-a.y);if((n>5||i>5)&&!this.direction&&(this.direction=n>i?"pageview_move":"scrollview_move"),this.enabledInHierarchy&&!this.hasNestedViewGroup(e,t)){var o=e.touch;if(this.node&&this._handleMoveLogic(o),this.cancelInnerEvents){if(o.getLocation().sub(o.getStartLocation()).mag()>7&&!this._touchMoved&&e.target!==this.node){var s=new cc.Event.EventTouch(e.getTouches(),e.bubbles);s.type=cc.Node.EventType.TOUCH_CANCEL,s.touch=e.touch,s.simulate=!0,e.target.dispatchEvent(s),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(e)}}},t.prototype._onTouchEnded=function(e,t){if(this.direction=null,this.enabledInHierarchy&&!this.hasNestedViewGroup(e,t)){var a=e.touch;this.node&&this._handleReleaseLogic(a),this.pageView&&this.pageView._dispatchEvent("touch-up"),this.scrollView&&this.scrollView._dispatchEvent("touch-up"),this._touchMoved?e.stopPropagation():this._stopPropagationIfTargetIsMe(e)}},t.prototype._onTouchCancelled=function(e,t){if(this.direction=null,this.enabledInHierarchy&&!this.hasNestedViewGroup(e,t)){if(!e.simulate){var a=e.touch;this.node&&this._handleReleaseLogic(a)}this._stopPropagationIfTargetIsMe(e)}},t.prototype._clampDelta=function(e){return Math.abs(e.x)<Math.abs(e.y)?e.x=0:e.y=0,e},t.prototype._handleMoveLogic=function(e){var t=this._clampDelta(e.getDelta());this.pageView&&this.pageView._processDeltaMove(t),this.scrollView&&this.scrollView._processDeltaMove(t)},t.prototype._handleReleaseLogic=function(e){var t=e.getDelta();t=this._clampDelta(t),this.pageView&&(this.pageView._gatherTouchMove(t),this.pageView._processInertiaScroll(),this.pageView._dispatchEvent("scroll-ended")),this.scrollView&&(this.scrollView._gatherTouchMove(t),this.scrollView._processInertiaScroll(),this.scrollView._dispatchEvent("scroll-ended"))},o([l({type:cc.ScrollView,tooltip:!1})],t.prototype,"scrollView",void 0),o([l({tooltip:!1})],t.prototype,"cancelInnerEvents",void 0),o([r,c("Script/Extend/NtScrollView")],t)}(cc.ViewGroup);a.default=d,cc._RF.pop()},{}],OFCConfigs:[function(e,t){"use strict";cc._RF.push(t,"c558bB2aulGmom/mfqWArqn","OFCConfigs");var a=null;(a=Object.create(K)).PomeloAPI={joinChannel:"connector.ofcHandler.ofcJoinChannel",autoSit:"connector.ofcHandler.ofcAutoSit",sitHere:"connector.ofcHandler.ofcSit",makeMove:"connector.ofcHandler.ofcMakeMove",leaveTable:"connector.ofcHandler.ofcLeaveTable",addChips:"connector.ofcHandler.ofcAddPointsOnTable",joinWaitingList:"connector.ofcHandler.ofcJoinWaitingList",connectionAck:"connector.entryHandler.isConnected",registerTournament:"connector.entryHandler.registerTournament",deRegisterTournament:"connector.entryHandler.deRegisterTournament",checkRegistration:"connector.entryHandler.isRegisteredUserInTournament",reportIssue:"connector.entryHandler.reportIssue",chatRequest:"connector.entryHandler.chat",getProfile:"connector.entryHandler.getProfile",sitOutNextHand:"connector.entryHandler.sitoutNextHand",sitOutNextBigBlind:"connector.entryHandler.sitoutNextBigBlind",resume:"connector.entryHandler.resume",setAutoBuyIn:"connector.entryHandler.setAutoBuyIn",getTableStructure:"connector.entryHandler.getTableStructure",getUsers:"connector.entryHandler.getRegisteredTournamentUsers",resetSitout:"connector.entryHandler.resetSitout",joinSimilar:"connector.entryHandler.joinSimilarTable",getBlindAndPrize:"connector.entryHandler.getBlindAndPrize",setFavTable:"connector.entryHandler.addFavourateTable",removeFavTable:"connector.entryHandler.removeFavourateTable",quickSeatCash:"connector.entryHandler.quickSeat",getPrizes:"connector.entryHandler.getPlayerPrize",collectPrize:"connector.entryHandler.collectPrize",getTableData:"connector.entryHandler.getTable",createNote:"connector.entryHandler.createNotes",getNote:"connector.entryHandler.getNotes",updateNote:"connector.entryHandler.updateNotes",getBlindPrizeTournament:"connector.entryHandler.getBlindAndPrizeForNormalTournament",setPlayerValOnTable:"connector.entryHandler.setPlayerValueOnTable",getFilters:"connector.entryHandler.getFilters",quickSeatTournament:"connector.entryHandler.quickSeatInTournament",quickSeatSitNGo:"connector.entryHandler.quickSeatInSitNGo",getHandTab:"connector.entryHandler.getHandTab",getHandHistory:"connector.entryHandler.getHandHistory",lateRegistration:"connector.entryHandler.lateRegistration"},t.exports=a,cc._RF.pop()},{}],OFCModel:[function(e,t){"use strict";cc._RF.push(t,"edc92SFHSBAcpXDO6a54vBv","OFCModel");var a=e("PokerModel").PokerModel;cc.Class({extends:a,properties:{},onLoad:function(){this._super(),this.K=e("OFCConfigs"),this.moveData=e("OFCPostTypes").MoveData,this.sitData=e("OFCPostTypes").SitData,this.player=e("OFCResponseTypes").Player},registerBroadcasts:function(){this._super(),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.ofcFirstRoundCards,this.onOfcFirstRoundCards.bind(this))},makeMove:function(){var e=new this.moveData(this.gameData.channelId,this.gameData.playerId,this.gameData.playerName,this.getMyPlayer().cards,this.getMyPlayer().discardedCards);ServerCom.pomeloRequest(this.K.PomeloAPI.makeMove,e,function(e){e.success},null,5e3,!1)},onMoveMade:function(e){this.gameData.tableDetails.currentMoveIndex=""===e.currentMoveIndex?-1:e.currentMoveIndex;var t=this.getPlayerById(e.playerId);this.gameData.tableDetails.players[t].cards=e.cards,this.gameData.tableDetails.players[t].royalities=e.royalities,this.gameData.tableDetails.players[t].roundName=e.roundName,-1!=this.gameData.tableDetails.currentMoveIndex?this.startTimerTick(this.gameData.tableDetails.turnTime):this.clearTimerTick(),this.emit(this.K.PokerEvents.OnTurn,e,t)},onGameStart:function(e){this.gameData.tableDetails.dealerIndex=e.dealerIndex,this.gameData.tableDetails.currentMoveIndex=e.currentMoveIndex,this.gameData.tableDetails.state=e.state,this.gameData.tableDetails.roundName=e.roundName,this.startTimerTick(this.gameData.tableDetails.turnTime),this.onGameStateChange(),this.emit(this.K.PokerEvents.OnStartGame,e)},onPlayerCards:function(e){var t=this.getPlayerById(e.playerId),a=[];e.cards.forEach(function(e){a.push(this.getCardByData(e))},this),this.gameData.tableDetails.players[t].currentCards=e.cards,this.emit(K.PokerEvents.OnPlayerCard,a,this.gameData.tableDetails.players[t].seatIndex)},onGameOver:function(e){var t=[];e.winners.forEach(function(a){var n=this.getPlayerById(a.playerId);this.gameData.tableDetails.players[n].points=a.points,this.gameData.tableDetails.players[n].winningPoints=a.winningPoints,this.gameData.tableDetails.players[n].pointDetails=a.pointDetails,e.endingType===K.GameEndType.GameCompleted&&t.push(this.gameData.tableDetails.players[n].seatIndex)},this),this.gameData.tableDetails.state=K.GameState.GameOver,this.onGameStateChange(),this.clearTimerTick(),this.emit(K.PokerEvents.onTurnInOtherRoom,this,!1),this.emit(K.PokerEvents.OnGameOver,e,t)},generateHoleCards:function(){},onDealerChat:function(){},onGameStateChange:function(){this.emit(K.PokerEvents.onGameStateChange,this.gameData.tableDetails.state)},clearTotalRoundBet:function(){},onOfcFirstRoundCards:function(e){var t=this.getPlayerById(e.playerId),a=[];e.cards.forEach(function(e){a.push(this.getCardByData(e))},this),this.gameData.tableDetails.players[t].currentCards=e.cards,this.emit(K.PokerEvents.onOfcFirstRoundCards,e.cards,a,e.playerId)}}),cc._RF.pop()},{OFCConfigs:"OFCConfigs",OFCPostTypes:"OFCPostTypes",OFCResponseTypes:"OFCResponseTypes",PokerModel:"PokerModel"}],OFCPlayerPresenter:[function(e,t){"use strict";cc._RF.push(t,"da5f1L1sd9Oy61hsCZtsm6Z","OFCPlayerPresenter");var a=e("PlayerPresenter"),n=e("OFCConfigs");cc.Class({extends:a,properties:{topPointsLbl:{default:null,type:cc.Label},bottomPointsLbl:{default:null,type:cc.Label},middlePointsLbl:{default:null,type:cc.Label},winPointsLbl:{default:null,type:cc.Label},foul:{default:null,type:cc.Node},pineapple:{default:null,type:cc.Node}},enablePlayerView:function(e){this.resetSeat(),this.amountLabel.string=Math.floor(this.playerData.points),this.nameLabel.string=this.playerData.playerName,this.sitHerePanel.active=!1,this.occupiedPanel.active=!0,this.onStateChange(),this.seatState=n.SeatState.Occupied;var t=e===this.playerData.playerId;this.setSelfPlayerView(t),this.resetLblColor(),this.displayNote(this.playerData.playerId),this.playerData.cards&&this.playerData.cards.top&&this.displayMove(this.playerData.cards)},setSelfPlayerView:function(e){this._super(e),e&&this.initDropzone()},initDropzone:function(){for(var e=0;e<this.cardHolder.children.length;e++)for(var t=0;t<this.cardHolder.children[e].children.length;t++)this.pokerPresenter.dragManager.addDropZone(this.cardHolder.children[e].children[t])},gameOver:function(e){this.resetTimer(),this.amountLabel.string=e.points,this.topPointsLbl.node.parent.parent.active=!0,this.topPointsLbl.node.parent.active=!0,this.middlePointsLbl.node.parent.active=!0,this.bottomPointsLbl.node.parent.active=!0,this.topPointsLbl.string=e.pointDetails.top,this.middlePointsLbl.string=e.pointDetails.middle,this.bottomPointsLbl.string=e.pointDetails.bottom,this.winPointsLbl.node.parent.active=!0,this.winPointsLbl.string=e.winningPoints,e.isFoul&&(this.foul.active=!0)},resetPlayerView:function(){this.topPointsLbl.node.parent.parent.active=!1,this.winPointsLbl.node.parent.active=!1,this.foul.active=!1,this.clearPlayerCards(),this.checkForFantasyLand()},displayMove:function(e){this.clearPlayerCards(),setTimeout(function(){for(var t=0;t<e.top.length;t++)this.generateCard(e.top[t],0,t);for(t=0;t<e.middle.length;t++)this.generateCard(e.middle[t],1,t);for(t=0;t<e.bottom.length;t++)this.generateCard(e.bottom[t],2,t)}.bind(this),500),this.resetTimer()},displayRoyalities:function(e){null!=e.top&&null!=e.top&&e.top>-1?(this.topPointsLbl.node.parent.parent.active=!0,this.topPointsLbl.node.parent.active=!0,this.topPointsLbl.string=e.top):this.topPointsLbl.node.parent.active=!1,null!=e.middle&&null!=e.middle&&e.middle>-1?(this.middlePointsLbl.node.parent.parent.active=!0,this.middlePointsLbl.node.parent.active=!0,this.middlePointsLbl.string=e.middle):this.middlePointsLbl.node.parent.active=!1,null!=e.bottom&&null!=e.bottom&&e.bottom>-1?(this.bottomPointsLbl.node.parent.parent.active=!0,this.bottomPointsLbl.node.parent.active=!0,this.bottomPointsLbl.string=e.bottom):this.bottomPointsLbl.node.parent.active=!1},generateCard:function(e,t,a){if(e){var n=CardPool.generateCard(this.pokerPresenter.cardPrefab.name,function(){}),i=n.getComponent("Card");e=this.pokerPresenter.model.getCardByData(e),n.getComponent("CardMovement").enableDragging=!1,n.getComponent("CardMovement").dragManager=this.pokerPresenter.dragManager,i.init(e),i.reveal(!0),this.cardHolder.children[t].children[a].addChild(n),n.position=new cc.Vec2(0,0),n.getComponent("Card").setOriginalPosition(n.position)}},onTurn:function(){this.pokerPresenter.model.off(n.PokerEvents.onTimerTick),this.pokerPresenter.model.on(n.PokerEvents.onTimerTick,function(e){this.timerSprite.fillRange=e,this.timerSprite.node.color=cc.Color.RED.lerp(cc.Color.GREEN,e)}.bind(this)),this.amountLabel.string=Math.floor(this.playerData.points),this.pokerPresenter.checkForSelfTurn(this.playerData.playerId)&&this.setPlayerColor()},addPlayerCards:function(){},revealCards:function(){},resetCards:function(){},clearPlayerCards:function(){for(var e=0;e<this.cardHolder.children.length;e++)for(var t=0;t<this.cardHolder.children[e].children.length;t++)this.cardHolder.children[e].children[t].children.length>1&&this.cardHolder.children[e].children[t].children.forEach(function(e){"BASE"!=e.name.toUpperCase()&&CardPool.destroyCard(e,function(){})},this)},showPoints:function(){},onMouse_Enter:function(){},registerHoverEvents:function(){},activatePlayerBet:function(){},setBetPosition:function(){},enableWaitingView:function(){this._super(),this.cardHolder.active=!1},enablePlayingView:function(){this._super(),this.cardHolder.active=!0},enableReservedView:function(){this._super(),this.cardHolder.active=!1},checkForFantasyLand:function(){}}),cc._RF.pop()},{OFCConfigs:"OFCConfigs",PlayerPresenter:"PlayerPresenter"}],OFCPostTypes:[function(e,t){"use strict";cc._RF.push(t,"647c2VH7apFGbKJ9N1P/MTo","OFCPostTypes");var a=e("PostTypes").Login;t.exports={SitData:function(e,t,n,i,o,s,r){this.channelId=e,this.playerId=t,this.points=n,this.seatIndex=i,this.playerName=o,this.imageAvtar="",this.isRequested=!0,this.isAutoReBuy=r,this.networkIp=a.ipV4Address},MoveData:function(e,t,a,n,i){this.channelId=e,this.playerId=t,this.playerName=a,this.cards=n,this.discarded=i,this.isRequested=!0}},cc._RF.pop()},{PostTypes:"PostTypes"}],OFCPresenter:[function(e,t){"use strict";cc._RF.push(t,"ca767Dex1BG1pbbAsK7vigO","OFCPresenter");var a=e("OFCModel"),n=e("PokerPresenter"),i=e("OFCConfigs"),o=e("PopUpManager").PopUpType;cc.Class({extends:n,properties:{model:{default:null,type:a,override:!0},threePlayerView:{default:null,type:cc.Prefab},ofcCardHolder:{default:null,type:cc.Node},ofcCardPrefab:{default:null,type:cc.Prefab},submitBtn:{default:null,type:cc.Node},ofcDiscardedCardHolder:{default:null,type:cc.Node},onCardDragStopRef:null,dragManager:null},setTiledView:function(e){this.highlightBg.node.active=!!e&&this.highLightCheckbox.getSelection(),this.unTiledView.active=!e,this.tiledView.active=e,this.unTiledView.active=!1,this.tiledView.getChildByName("TopLeft").getChildByName("AddChipsButton").active=!1,this.tiledView.getChildByName("TopLeft").getChildByName("StandUpButton").active=!1},manageBtns:function(e){this.sitOutNextHandCheckBox.node.parent.active=e,this.tiledView.getChildByName("TopLeft").getChildByName("StandUpButton").active=!1},loadSeats:function(){switch(this.model.roomConfig.maxPlayers){case 2:this.instantiateSeats(1,2,cc.instantiate(this.twoPlayerView),this.twoPlayerView,"OFCPlayerPresenter");break;case 3:default:this.instantiateSeats(2,3,cc.instantiate(this.threePlayerView),this.threePlayerView,"OFCPlayerPresenter")}},resetGame:function(){this.popUpManager.hide(o.PlayerInfoPopup,function(){}),this.clearHoleCards(),this.clearDiscardedCards(),this.initDropzones(),this.playerHand.forEach(function(e){e.resetPlayerView()},this)},allocateSeat:function(){this._super(),this.model.gameData.tableDetails.state!==i.GameState.Running&&(this.submitBtn.active=!1)},onLoad:function(){this.K=e("OFCConfigs"),this.dragManager=this.getComponent("DragManager"),this.initDropzones(),this.model.on(i.PokerEvents.OnJoin,this.onJoinSuccess.bind(this)),this.model.on(i.PokerEvents.OnSit,this.sitSuccess.bind(this)),this.model.on(i.PokerEvents.OnPlayerStateChange,this.playerStateChange.bind(this)),this.model.on(i.PokerEvents.OnGamePlayers,this.resetGame.bind(this)),this.model.on(i.PokerEvents.OnDealerChat,this.dealerChat.bind(this)),this.model.on(i.PokerEvents.OnStartGame,this.startGame.bind(this)),this.model.on(i.PokerEvents.OnTurn,this.nextTurn.bind(this)),this.model.on(i.PokerEvents.OnGameOver,this.gameOver.bind(this)),this.model.on(i.PokerEvents.OnLeave,this.playerLeft.bind(this)),this.model.on(i.PokerEvents.OnChat,this.chat.bind(this)),this.model.on(i.PokerEvents.OnPlayerCard,this.playerCards.bind(this)),this.model.on(i.PokerEvents.onRotateView,this.rotateView.bind(this)),this.model.on(i.PokerEvents.onPlayerNotes,this.onPlayerNotes.bind(this)),this.model.on(i.PokerEvents.onPlayerCoins,this.onPlayerCoins.bind(this)),this.model.on(i.PokerEvents.onGameStateChange,this.onGameStateChange.bind(this)),this.model.on(i.PokerEvents.onOfcFirstRoundCards,this.onOfcFirstRoundCards.bind(this)),this.model.on(i.PokerEvents.OnBankrupt,function(){this.onAddChips(this.model.roomConfig.minBuyIn)}.bind(this)),this.sitOutNextHandCheckBox.registerCallback(this.onSitOutNextHand.bind(this)),this.tempOnLoad(),this.chatSubmitBtn=GameScreen.chatBtn,this.onCardDragStopRef=this.onCardDragStop.bind(this),this.dragManager.on("onCardDragStop",this.onCardDragStopRef)},onCardDragStop:function(e,t){var a=this.getMyPlayer(),n=this.playerHand[this.getRotatedSeatIndex(a.seatIndex)].cardHolder;if(null!=e)if(e.parent.parent!=n||t.parent.parent!=e.parent){if(e.getComponentInChildren("Card"))t.getComponent("Card").returnToOriginalPosition();else{if(e.parent.parent==n)for(var i=0;i<e.parent.children.length;i++)(o=(s=e.parent.children[i]).getComponentInChildren("Card"))&&(o.getComponent("CardMovement").enableDragging=!1);if(e.parent.parent!=n||t.parent.parent!=e.parent)for(i=0;i<t.parent.parent.children.length;i++){var o;if(!(o=(s=t.parent.parent.children[i]).getComponentInChildren("Card"))){i>1&&(t.parent.parent.children[i-2].getComponentInChildren("CardMovement").enableDragging=!0);break}i==t.parent.parent.children.length-1&&(t.parent.parent.children[i-1].getComponentInChildren("CardMovement").enableDragging=!0)}if(e.parent.parent==n)for(i=0;i<e.parent.children.length;i++){var s;if(!(s=e.parent.children[i]).getComponentInChildren("Card")){e=s;break}}t.parent=e,t.position=new cc.Vec2(0,0),t.width=t.parent.getChildByName("base").width,t.height=t.parent.getChildByName("base").height,t.getComponent("Card").setOriginalPosition(t.position)}var r=0,l=null;for(i=0;i<this.ofcCardHolder.children.length;i++){var c=this.ofcCardHolder.children[i].getComponentInChildren("Card");c&&(r++,c.getComponent("CardMovement").enableDragging=!0,l=c)}var d=this.getMyPlayer().roundName||"ONE";l&&"ONE"!=d?(this.activateSubmitBtn(1==r),1==r&&(l.getComponent("CardMovement").enableDragging=!1)):this.activateSubmitBtn(0==r)}else t.getComponent("Card").returnToOriginalPosition();else t.getComponent("Card").returnToOriginalPosition()},initDropzones:function(){this.dragManager.dropZones=[];for(var e=0;e<this.ofcCardHolder.children.length;e++)this.dragManager.addDropZone(this.ofcCardHolder.children[e])},onDestroy:function(){this.model.removeAllListeners()},handleSitOutBtns:function(e){this.resumeBtn.active=!e,this.sitOutNextHandCheckBox.setSelection(!e),this.sitOutNextHandCheckBox.node.parent.active=e&&this.model.gameData.channelType==i.ChannelType.Normal&&!this.model.isPlayerStandUp()},handleSitoutResponse:function(e){e.success?this.sitOutNextHandCheckBox.setSelection(!0):this.sitOutNextHandCheckBox.setSelection(!1)},startGame:function(e){for(var t=this.model.gameData.tableDetails.players,a=0;a<t.length;a++)this.playerHand[this.getRotatedSeatIndex(t[a].seatIndex)].enablePlayerView(this.model.gameData.playerId);this.playerHand[this.getRotatedSeatIndex(e.dealerIndex)].setDealer(!0),this.enableCurrentPlayerTurn(!0)},nextTurn:function(e,t){t=this.model.gameData.tableDetails.players[t].seatIndex,this.getMyPlayer()&&t==this.getMyPlayer().seatIndex&&e.isRequested?this.playerHand[this.getRotatedSeatIndex(t)].resetTimer():this.playerHand[this.getRotatedSeatIndex(t)].displayMove(e.cards),e.royalities&&this.playerHand[this.getRotatedSeatIndex(t)].displayRoyalities(e.royalities),this.enableCurrentPlayerTurn()},enableCurrentPlayerTurn:function(e){void 0===e&&(e=!1),this.activateSubmitBtn(!1);var t=this.model.gameData.tableDetails.currentMoveIndex;""!==t&&-1!==t&&(this.playerHand[this.getRotatedSeatIndex(t)].onTurn(this.model.gameData.tableDetails.turnTime),e||this.model.gameData.tableDetails.players[this.model.getPlayerBySeat(t)].roundName==i.RoundNames.one||this.generateTableCards())},activateSubmitBtn:function(e){this.submitBtn.active=e},gameOver:function(e){for(var t="",a=this.model.gameData.tableDetails.players,n=0;n<e.winners.length;n++){var i=this.model.getPlayerById(e.winners[n].playerId);t=t+"Winner: "+a[i].playerName+"   Points: "+e.winners[n].points+"   WinPoints: "+e.winners[n].winningPoints+"\n",this.playerHand[this.getRotatedSeatIndex(a[i].seatIndex)].gameOver(e.winners[n])}this.playerHand[this.getRotatedSeatIndex(this.model.gameData.tableDetails.dealerIndex)].setDealer(!1)},playerCards:function(){},onSubmit:function(){this.activateSubmitBtn(!1);var e=this.getMyPlayer(),t=this.playerHand[this.getRotatedSeatIndex(e.seatIndex)].cardHolder;e.currentCards=[];for(var a={top:[],middle:[],bottom:[]},n=0;n<t.children.length;n++)for(var o=0;o<t.children[n].children.length;o++)(s=t.children[n].children[o].getComponentInChildren("Card"))&&(a[t.children[n].name].push(s.cardData),s.getComponent("CardMovement").enableDragging=!1,this.dragManager.removeDropZone(t.children[n].children[o]));for(n=0;n<this.ofcCardHolder.children.length;n++){var s;if(s=this.ofcCardHolder.children[n].getComponentInChildren("Card")){s.getComponent("CardMovement").enableDragging=!1,e.discardedCards.push(s.cardData);var r=this.getMyPlayer().roundName||"ONE";"ONE"!=r&&(s.node.parent=this.ofcDiscardedCardHolder.children[i.RoundToCards[r]-1],s.node.position=new cc.Vec2(0,0))}}e.cards=a,this.model.makeMove()},displayPots:function(){},clearPots:function(){},checkInBetweenBlinds:function(){},isStraddleAllowed:function(){},setPostBigBlind:function(){},roundOver:function(){},onBestHand:function(){},placeDummyCards:function(){},onJoinExtras:function(){this.onGameStateChange(this.model.gameData.tableDetails.state),this.generateDiscardedCards()},handleRunItTwice:function(){},clearHoleCards:function(){for(var e=0;e<this.ofcCardHolder.children.length;e++)this.ofcCardHolder.children[e].children.length>1&&this.ofcCardHolder.children[e].children.forEach(function(e){"BASE"!=e.name.toUpperCase()&&CardPool.destroyCard(e,function(){})},this)},clearDiscardedCards:function(){for(var e=0;e<this.ofcDiscardedCardHolder.children.length;e++)this.ofcDiscardedCardHolder.children[e].children.length>1&&this.ofcDiscardedCardHolder.children[e].children.forEach(function(e){"BASE"!=e.name.toUpperCase()&&CardPool.destroyCard(e,function(){})},this)},generateTableCards:function(){var e=this.model.gameData.tableDetails.currentMoveIndex,t=this.model.gameData.tableDetails.players[this.model.getPlayerBySeat(e)];this.clearHoleCards();var a=0;if(this.getMyPlayer()&&this.getMyPlayer().playerId==t.playerId)t.currentCards.forEach(function(e){var t=CardPool.generateCard("Card",function(){}),n=t.getComponent("Card");t.getComponent("CardMovement").enableDragging=!0,t.getComponent("CardMovement").dragManager=this.dragManager,n.cardData=e,n.init(this.model.getCardByData(e),this.model),n.reveal(!0),this.ofcCardHolder.children[a].addChild(t),t.position=new cc.Vec2(0,0),t.width=t.parent.getChildByName("base").width,t.height=t.parent.getChildByName("base").height,t.getComponent("Card").setOriginalPosition(t.position),a++},this);else{var n=t.roundName==i.RoundNames.one?5:3;n=t.roundName==i.RoundNames.finished?0:n;for(var o=0;o<n;o++){var s=CardPool.generateCard("Card",function(){}),r=s.getComponent("Card");s.getComponent("CardMovement").enableDragging=!1,s.getComponent("CardMovement").dragManager=this.dragManager,r.reveal(!1),this.ofcCardHolder.children[o].addChild(s),s.position=new cc.Vec2(0,0),s.width=s.parent.getChildByName("base").width,s.height=s.parent.getChildByName("base").height}}},generateDiscardedCards:function(){this.clearDiscardedCards();var e=this.getMyPlayer();if(e&&e.discardedCards.length>0){var t=0;e.discardedCards.forEach(function(e){var a=CardPool.generateCard("Card",function(){}),n=a.getComponent("Card");a.getComponent("CardMovement").enableDragging=!1,a.getComponent("CardMovement").dragManager=this.dragManager,n.cardData=e,n.init(this.model.getCardByData(e),this.model),n.reveal(!0),this.ofcDiscardedCardHolder.children[t].addChild(a),a.position=new cc.Vec2(0,0),a.width=a.parent.getChildByName("base").width,a.height=a.parent.getChildByName("base").height,a.getComponent("Card").setOriginalPosition(a.position),t++},this)}},onGameStateChange:function(e){e==i.GameState.Running?(this.ofcCardHolder.active=!0,this.ofcDiscardedCardHolder.active=!0):e==i.GameState.Idle&&(this.ofcCardHolder.active=!1,this.ofcDiscardedCardHolder.active=!1)},onOfcFirstRoundCards:function(e,t,a){if(null!==t&&0!==t.length){this.clearHoleCards();var n=a==this.getMyPlayer().playerId,i=0;t.forEach(function(t){var a=CardPool.generateCard("Card",function(){}),o=a.getComponent("Card");a.getComponent("CardMovement").enableDragging=n,a.getComponent("CardMovement").dragManager=this.dragManager,o.cardData=e[i],o.init(t),o.reveal(!0),this.ofcCardHolder.children[i].addChild(a),a.position=new cc.Vec2(0,0),a.width=a.parent.getChildByName("base").width,a.height=a.parent.getChildByName("base").height,a.getComponent("Card").setOriginalPosition(a.position),i++},this)}}}),cc._RF.pop()},{OFCConfigs:"OFCConfigs",OFCModel:"OFCModel",PokerPresenter:"PokerPresenter",PopUpManager:"PopUpManager"}],OFCResponseTypes:[function(e,t){"use strict";cc._RF.push(t,"3f45eEBRfhH0K3qpI0NLIkW","OFCResponseTypes");var a=e("ResponseTypes").changeAvatar;function n(e){this.playerId=e.playerId,this.channelId=e.channelId,this.playerName=e.playerName,this.points=e.points||0,this.seatIndex=e.seatIndex||-1,this.imageAvtar="";var t={playerId:e.playerId,keys:["profileImage"]},n=this;pomelo.request(K.PomeloAPI.getProfile,t,function(e){n.imageAvtar=e.result.profileImage,a(n.imageAvtar,n)},null,5e3,!1),this.currentCards=e.currentCards||[],this.discardedCards=e.discardedCard||[],this.cards=e.cards||null,this.state=e.state||K.PlayerState.Waiting,this.sitoutNextHand=e.sitoutNextHand||!1,this.rowPoints=e.rowPoints,this.roundName=e.roundName,this.autoSitOut=e.autoSitOut,this.royalities=e.royalities,this.isTournamentSitout=e.isTournamentSitout}n.prototype.reset=function(e){this.points=e.points,this.state=e.state,this.cards=[],this.currentCards=[],this.discardedCards=[],this.royalities=[],this.rowPoints=[],this.roundName="ONE"},t.exports={Player:n,GameData:function(e){this.success=e.success,this.channelId=e.channelId,this.playerId=e.playerId,this.playerName=e.playerName,this.tableDetails={},this.tableDetails.state=e.tableDetails.state,this.tableDetails.turnTime=e.tableDetails.turnTime;var t=[];e.tableDetails.players.forEach(function(a){var i=new n(a);t.push(i),this.playerId==i.playerId&&(i.currentCards=e.currentCards,i.discardedCards=e.discardedCard)},this),this.tableDetails.remainingMoveTime=e.tableDetails.remainingMoveTime,this.tableDetails.players=t,this.tableDetails.roundName=e.tableDetails.roundName,this.tableDetails.roundCount=e.tableDetails.roundCount,this.tableDetails.dealerIndex=e.tableDetails.dealerIndex,this.tableDetails.currentMoveIndex=e.tableDetails.currentMoveIndex,this.tableDetails.actionName=e.tableDetails.actionName}},cc._RF.pop()},{ResponseTypes:"ResponseTypes"}],OnLogOutPopup:[function(e,t){"use strict";cc._RF.push(t,"6c392ILr9ZOSZAyN8iURGbD","OnLogOutPopup"),e("PopUpManager").PopUpManager;var a=e("PopUpManager").PopUpType,n=e("PopUpBase");cc.Class({extends:n,properties:{head:{default:null,type:cc.Label},title:{default:null,type:cc.Label}},onLoad:function(){},onShow:function(e){this.soundValue=null,null!=e&&(this.soundValue=e),console.log("LEAVE POPUP WITH DATA ",e),e?(this.closeGame=e,this.head.string="Quit",this.title.string="Are you sure you want to quit?"):(this.head.string="Logout",this.title.string="Are you sure you want to logout?")},onOkBtn:function(){null!=this.soundValue&&0!=this.soundValue||GameManager.playSound(K.Sounds.click),cc.sys.localStorage.setItem("vpUserName",""),cc.sys.localStorage.setItem("vpPassword",""),GameManager.popUpManager.hide(a.NotificationPopup,function(){}),GameManager.popUpManager.hide(a.OnLogOutPopup,function(){}),this.closeGame?(this.closeGame=!1,cc.sys.platform==cc.sys.ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","exitGame","()V"):cc.game.end()):GameManager.logout()},onCancelBtn:function(){null!=this.soundValue&&0!=this.soundValue||GameManager.playSound(K.Sounds.click),this.closeGame=!1,GameManager.popUpManager.hide(a.OnLogOutPopup,function(){})}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],OptionalPlayerInput:[function(e,t){"use strict";cc._RF.push(t,"fd06d24v+pBzraZO46IWOc8","OptionalPlayerInput");var a=e("Checkbox"),n=e("PokerPresenter");cc.Enum({CALL:"Call",CALL_ANY:"CallAny",FOLD:"Fold",CHECK:"Check",ALLIN:"AllIn",CHECK_FOLD:"Check_Fold",CALL_ANY_CHECK:"CallAny_Check",NONE:"NONE"}),cc.Class({extends:cc.Component,properties:{pokerPresenter:{default:null,type:n},set1:{default:[],type:cc.Node},set2:{default:[],type:cc.Node},set3:{default:[],type:cc.Node},callLbl:{default:null,type:cc.Label},callBBLbl:{default:null,type:cc.Label},optionGrid:{default:[],type:cc.Node},selectedValue:null,isSelected:!1},onLoad:function(){this.callVal=0,this.optionGrid=[this.set1,this.set2,this.set3],this.enableTempPlayerInput(!1,0),this.selectedValue=null,this.pokerPresenterInstance=this.node.parent.getChildByName("PokerPresenter").getComponent("PokerPresenter"),this.requestMappings={},GameManager.on("switchBB",this.switchBBNow.bind(this))},enableTempPlayerInput:function(e,t,n,i,o){if(void 0===n&&(n=-1),this.pokerPresenterInstance=this.node.parent.getChildByName("PokerPresenter").getComponent("PokerPresenter"),!(this.pokerPresenterInstance&&this.pokerPresenterInstance.model&&this.pokerPresenterInstance.model.roomConfig&&this.pokerPresenterInstance.model.roomConfig.isAllInAndFold)){if(this.pokerPresenterInstance&&o){var s=this.pokerPresenterInstance.getMyPlayer();if(s){if(this.pokerPresenterInstance.model.gameData.tableDetails.currentMoveIndex==s.seatIndex||this.pokerPresenterInstance.model.gameData.tableDetails.state==K.GameState.GameOver){for(var r=0;r<this.optionGrid.length;r++)for(var l=0;l<this.optionGrid[r].length;l++)this.optionGrid[r][l].active=!1,this.optionGrid[r][l].getChildByName("Checkbox").getComponent(a).setSelection(!1);return void(this.selectedValue=null)}for(var c=0;c<this.optionGrid.length;c++)for(l=0;l<this.optionGrid[c].length;l++)this.optionGrid[c][l].active}}t=e?t:0;for(var d=0;d<this.optionGrid.length;d++)this.enableSet(d,t-1==d,n,i)}},enableSet:function(e,t,n,i){this.callVal=0;for(var o=0;o<this.optionGrid[e].length;o++)this.optionGrid[e][o].active=t,this.optionGrid[e][o].getChildByName("Checkbox").getComponent(a).setSelection(!1),"Call"==this.optionGrid[e][o].name&&n>0&&(n>0?(this.callVal=n,this.optionGrid[e][o].getChildByName("Label").getComponent(cc.Label).string=LocalizedManager.t("TXT_CALL")+" "+Math.floor(n),this.optionGrid[e][o].getChildByName("Label").getComponent(cc.Label).__string=Math.floor(n)):this.optionGrid[e][o].getChildByName("Label").getComponent(cc.Label).string=LocalizedManager.t("TXT_CALL")),this.optionGrid[e][o].name==i&&this.optionGrid[e][o].getChildByName("Checkbox").getComponent(a).onClick();this.updateBB()},tempTestFunction:function(e){console.log(">>>>>> tempTestFunction"),console.log("callVal",e),this.callLbl.string=0==e||"0"==e||"-0"==e?LocalizedManager.t("TXT_CALL"):LocalizedManager.t("TXT_CALL")+" "+Math.floor(e)},saveMoveFor:function(e){if(this.pokerPresenterInstance){this.pokerPresenterInstance.playAudio(K.Sounds.click);var t=this.pokerPresenterInstance.getMyPlayer();if(this.pokerPresenterInstance.model.gameData.tableDetails.currentMoveIndex==t.seatIndex){var n=e.currentTarget.parent.getSiblingIndex(),i=e.currentTarget.getSiblingIndex();return void this.optionGrid[n][i].getChildByName("Checkbox").getComponent(a).setSelection(!1)}}var o=e.currentTarget.parent.getSiblingIndex(),s=e.currentTarget.getSiblingIndex(),r=this.optionGrid[o][s].getChildByName("Checkbox").getComponent(a).getSelection();this.optionGrid[o][s].getChildByName("Checkbox").getComponent(a).onClick();var l=r?this.optionGrid[o][s].name:null,c=o+1,d=-1;"Call"==this.optionGrid[o][s].name&&(d=(d=this.optionGrid[o][s].getChildByName("Label").getComponent(cc.Label).string.match(/\d+/g)).length>1?Number(d[0]+"."+d[1]):Number(d[0])),this.togglePreCheckOnServer(l,c,d)},togglePreCheckOnServer:function(e,t,a){void 0===a&&(a=-1);var n={};n.playerId=GameManager.user.playerId,n.channelId=this.node.parent.getComponent("PokerModel").gameData.channelId,n.precheckValue=null==e?"NONE":e,n.set=t,n.isRequested=!0,n.callPCAmount=a,this.selectedValue=null;var i=this.makeId();this.requestMappings[i]=this.pokerPresenterInstance.preCheckCounter,console.log("pre check reaquest",n),ServerCom.pomeloRequest(K.PomeloAPI.updatePreCheckOnServer,n,function(e){e.success?(console.log("linkin park response of PRECHECK ACKNOWLEGED n culprit",e),this.requestMappings[i]<this.pokerPresenterInstance.preCheckCounter?console.log("AVOIDED NEW FAILURE CASE"):(this.selectedValue="NONE"==e.precheckValue?null:e.precheckValue,this.enableTempPlayerInput(!0,e.set,e.callPCAmount,e.precheckValue,!0))):console.error("PRECHECK FUCKED UP")}.bind(this),null,5e3,!1)},resetAll:function(){},makeId:function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<20;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},updateBB:function(){this.pokerPresenter&&this.pokerPresenter.model&&this.pokerPresenter.model.gameData&&(this.callBBLbl.string=LocalizedManager.t("TXT_CALL")+" "+(Number(this.callLbl.__string)/this.pokerPresenter.model.gameData.tableDetails.bigBlind).toFixed(1)+"BB",GameManager.isBB&&GameManager.user.settings.stackInBB?(this.callLbl.node.active=!1,this.callBBLbl.node.active=!0):(this.callLbl.node.active=!0,this.callBBLbl.node.active=!1))},switchBBNow:function(){this.updateBB()}}),cc._RF.pop()},{Checkbox:"Checkbox",PokerPresenter:"PokerPresenter"}],PlatformAdapterUtil:[function(e,t){"use strict";cc._RF.push(t,"c4be0OqdcpMPp9bSrj/WcEx","PlatformAdapterUtil"),cc.Class({extends:cc.Component,properties:{enableForBrowser:{default:!1}},onLoad:function(){this.enableForWeb&&(cc.sys.isBrowser||(this.node.active=!1))}}),cc._RF.pop()},{}],PlayerAccountPopup:[function(e,t){"use strict";cc._RF.push(t,"1d389669wJM66J0lGqIkyrR","PlayerAccountPopup");var a=e("Checkbox"),n=e("PopUpBase"),i=e("PopUpManager").PopUpManager,o=e("PopUpManager").PopUpType;cc.Class({extends:n,properties:{popUpManager:{default:null,type:i},availBalLbl:{default:null,type:cc.Label},stars:{default:[],type:[cc.Node]},vipCoinsLbl:{default:null,type:cc.Label},playerImg:{default:null,type:cc.Sprite},playerNameLbl:{default:null,type:cc.Label},passwordLbl:{default:null,type:cc.Label},currentPasswordLbl:{default:null,type:cc.Label},newPasswordLbl:{default:null,type:cc.Label},passwordStrength:{default:[],type:[cc.Node]},confirmPasswordLbl:{default:null,type:cc.Label},showCharacter:{default:null,type:a},emailLbl:{default:null,type:cc.Label},phoneLbl:{default:null,type:cc.Label},addressLbl:{default:null,type:cc.Label},dobLbl:{default:null,type:cc.Label},editBoxOpened:{default:!1},gameHistroyGrid:{default:null,type:cc.Node},editBoxOpenedType:{default:-1}},onLoad:function(){},onShow:function(e){if(this.playerNameLbl.string=GameManager.user.firstName,this.playerImg.spriteFrame=GameManager.user.urlImg,null!==e){this.availBalLbl.string=e.availBalance.toString(),this.vipCoinsLbl.string=e.vipCoins.toString(),this.playerNameLbl.string=e.playerName,this.passwordLbl.string=e.password,this.currentPasswordLbl.string="",this.newPasswordLbl.string="",this.confirmPasswordLbl.string="",this.emailLbl.string=e.email,this.phone.string=e.phoneNumber,this.addressLbl.string=e.address,this.dobLbl.string=e.dob.toString();for(var t=0;t<element.length;t++)this.stars[t].active=t<e.stars;GameManager.off("image-loaded",this.imageLoaded.bind(this)),GameManager.on("image-loaded",this.imageLoaded.bind(this))}},imageLoaded:function(e){GameManager.user.playerId===e.playerId&&(this.playerImg.spriteFrame=e.urlImg)},onEditName:function(){this.editBoxOpenedType=0},onEditPassword:function(){this.editBoxOpenedType=1},onEditEmail:function(){this.editBoxOpenedType=2},onEditPhone:function(){this.editBoxOpenedType=3},onEditAddress:function(){this.editBoxOpenedType=4},onEditDOB:function(){this.editBoxOpenedType=5},onApply:function(){this.editBoxOpenedType=-1,this.editBoxOpenedType},onCancel:function(){this.editBoxOpenedType=-1},onChangeImage:function(){this.popUpManager.show(o.AvatarDialog,null,function(){}),this.onClose()},onPlayerAccount:function(){},onGameHistory:function(){},onClose:function(){this.popUpManager.hide(o.PlayerAccountPopup,function(){})}}),cc._RF.pop()},{Checkbox:"Checkbox",PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],PlayerInfoPopup:[function(e,t){"use strict";cc._RF.push(t,"272b4rH0IxBZq3aa0rNUFkT","PlayerInfoPopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase");cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},infoLbl:{default:null,type:cc.Label},headingLbl:{default:null,type:cc.Label}},onShow:function(e){if(null!==e){this.infoLbl.string=e.info,e.heading&&(this.headingLbl.string=e.heading);var t=!1;if(e.disableTimer&&(t=!0),!t){var a=4;e.timer&&(a=e.timer),setTimeout(function(){this.popUpManager&&(this.popUpManager!=GameManager.popUpManager?this.popUpManager.hide(2):this.popUpManager.hide(n.PlayerInfoPopup))}.bind(this),1e3*a)}}}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],PlayerPresenter:[function(e,t){"use strict";cc._RF.push(t,"138c9QO6FZKN4YEdTAWw5j7","PlayerPresenter");var a=e("CardTypes").Card,n=(e("CardTypes").Suit,e("StickerController"),e("SliderTouch"));cc.Class({extends:cc.Component,properties:{moveShower1:{default:null,type:cc.Node},moveShower2:{default:null,type:cc.Node},moveShower3:{default:null,type:cc.Node},moveShower4:{default:null,type:cc.Node},pokerPresenter:{default:null},bestHandNode:{default:null,type:cc.Node},glow:{default:null,type:cc.Node},glowFrame:{default:null,type:cc.Node},fillbg:{default:null,type:cc.Node},inviteNode:{default:null,type:cc.Node},inviteListNode:{default:null,type:cc.Node},seatIndex:{default:-1},cardHolder:{default:null,type:cc.Node},cardHolderShow:{default:null,type:cc.Node},cardHolderMyShow:{default:null,type:cc.Node},cardHolderMy:{default:null,type:cc.Node},cardHolder2:{default:null,type:cc.Node},cardHolder3:{default:null,type:cc.Node},cardHolder4:{default:null,type:cc.Node},cardHolder5:{default:null,type:cc.Node},cardHolder6:{default:null,type:cc.Node},cardHolder2R:{default:null,type:cc.Node},cardHolder3R:{default:null,type:cc.Node},cardHolder4R:{default:null,type:cc.Node},cardHolder5R:{default:null,type:cc.Node},cardHolder6R:{default:null,type:cc.Node},cardHolder2My:{default:null,type:cc.Node},cardHolder3My:{default:null,type:cc.Node},cardHolder4My:{default:null,type:cc.Node},cardHolder5My:{default:null,type:cc.Node},cardHolder6My:{default:null,type:cc.Node},seatState:{default:"Free",visible:!1},sitHerePanel:{default:null,type:cc.Node},occupiedPanel:{default:null,type:cc.Node},avatarBtn:{default:null,type:cc.Button},timerSprite:{default:null,type:cc.Sprite},timerPSprite:{default:null,type:cc.Sprite},baseSprite:{default:null,type:cc.Sprite},selfSpriteFrame:{default:null,type:cc.SpriteFrame},othersSpriteFrame:{default:null,type:cc.SpriteFrame},amountLabel:{default:null,type:cc.Label},nameLabel:{default:null,type:cc.Label},image:{default:null,type:cc.Sprite},dealerSprite:{default:null,type:cc.Node},dealerSprite2:{default:null,type:cc.Node},dealerSprite3:{default:null,type:cc.Node},playerBetLabel:{default:null,type:cc.Node},moveDisplayTime:{default:-1,visible:!1},currentTurnDisplayTime:{default:-1,visible:!1},turnDisplayTime:{default:.5,visible:!1},playerData:{default:null,visible:!1},timer:{default:null,visible:!1},sysTime:{default:null,visible:!1},playerColor:{default:new cc.Color},nonPlayerColor:{default:new cc.Color},foldView:{default:null,type:cc.Node},nameLblColor:{default:new cc.Color,visible:!1},foldNameLblColor:{default:new cc.Color,visible:!1},amountLblColor:{default:new cc.Color,visible:!1},foldAmountLblColor:{default:new cc.Color,visible:!1},reservedPanel:{default:null,type:cc.Node},noteColorBase:{default:null,type:cc.Node},noteButton:{default:null,type:cc.Node},chatHead:{default:null,type:cc.Node},chatLbl:{default:null,type:cc.RichText},emptyPanel:{default:null,type:cc.Node},normalTimerLbl:{default:null,type:cc.Label},selfNameLblColor:new cc.Color,selfFoldNameLblColor:new cc.Color,selfAmountLblColor:new cc.Color,selfFoldAmountLblColor:new cc.Color,othersNameLblColor:new cc.Color,othersFoldNameLblColor:new cc.Color,othersAmountLblColor:new cc.Color,othersFoldAmountLblColor:new cc.Color,gridRefreshedRef:null,imageLoadedRef:null,extra:{type:cc.Node,default:null},timeBank:{type:cc.Node,default:null},timeBankV:{default:null,type:n},winnerBanner:{default:null,type:cc.Node},imgHider:{default:null,type:cc.Node},winningNode:{default:null,type:cc.Node},moveShower:{default:null,type:cc.Node},grayer:{default:null,type:cc.Node},grayer2:{default:null,type:cc.Node},grayer3:{default:null,type:cc.Node},bestHands1:{default:null,type:cc.SpriteFrame},bestHands2:{default:null,type:cc.SpriteFrame},timersToKill:[]},onLoad:function(){this.normalScale=1,this.grayScale=1,this.CardsFirstPositionOffset=57,this.CardsSecondPositionOffset=130,GameManager.isMobile,this.gridRefreshedRef=this.gridRefreshed.bind(this),this.imageLoadedRef=this.imageLoaded.bind(this),GameScreen.node.on("grid-refreshed",this.gridRefreshedRef),GameManager.on("image-loaded",this.imageLoadedRef),GameManager.on("updatePlayerImageInTable",this.updatePlayerImageInTable.bind(this)),GameManager.on("switchBB",this.switchBBNow.bind(this)),this.clearPlayerCards(),this.isPlaying=!1,this.displayDefaultTimer=this.resetBetTimer=0,this.playerBetLabel.parent.getChildByName("gold").active=!0},registerHoverEvents:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,function(){cc.isValid(this.node)&&this.onMouse_Enter()}.bind(this),this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,function(){cc.isValid(this.node)&&this.onMouse_Leave()}.bind(this),this),this.node.on(cc.Node.EventType.TOUCH_START,function(){cc.isValid(this.node)&&!this.pokerPresenter.isObserver()&&this.onMouse_Enter()}.bind(this),this),this.node.on(cc.Node.EventType.TOUCH_END,function(){cc.isValid(this.node)&&this.onMouse_Leave()}.bind(this),this)},imageLoaded:function(e){if(null!=this.playerData&&this.playerData.playerId==e.playerId)if(e.urlImg)this.image.spriteFrame=e.urlImg;else{var t=Math.round(Math.random()*GameManager.avatarImages.length-1);this.image.spriteFrame=GameManager.avatarImages[t]}},gridRefreshed:function(){1==GameManager.activeTableCount||2==GameScreen.viewType?(K.PORTRAIT||(this.node.scale=1),this.pokerPresenter.checkForSelfTurn(this.playerId)&&GameScreen.gameModel.emit("K.PokerEvents.onTurnInOtherRoom",this.pokerPresenter.model,!0)):K.PORTRAIT},resetSeat:function(){this.chatHead.active&&(this.chatHead.active=!1),this.resetTimer(),this.activatePlayerBet(!1),this.seatState=K.SeatState.Free,this.dealerSprite.active=!1,this.dealerSprite2.active=!1,this.dealerSprite3.active=!1,this.bestHandNode.active=!1,this.playerBetLabel.parent.scale=1.6/this.playerBetLabel.parent.parent.parent.parent.scale,this.timeBank.active=!1,this.extra.active=!1,this.isSelf()&&this.playerData.state!=K.PlayerState.Waiting&&(this.timeBank.active=!0),this.timeBank.children[1].getComponent(cc.Label).string="",this.image.node.active=!0,this.timerPSprite.node.active=this.timerSprite.node.parent.active=!1,this.clearPlayerCards(),this.setSelfPlayerView(!1),this.unscheduleAllCallbacks(),this.image.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),this.node.scale=this.normalScale,this.timeBank.scale=.42,this.moveShower.scale=0},enablePlayerView:function(e,t){void 0===t&&(t=!0),this.resetSeat(),this.node.parent.x<0||this.isSelf()?(this.node.getChildByName("BB").x=75.751,this.node.getChildByName("SB").x=75.751):(this.node.getChildByName("BB").x=-75.751,this.node.getChildByName("SB").x=-75.751),this.isSelf()?(this.moveShower.x=this.moveShower1.x,this.moveShower.y=this.moveShower1.y):0==this.node.parent.x?(this.moveShower.x=this.moveShower4.x,this.moveShower.y=this.moveShower4.y):this.node.parent.x<0?(this.moveShower.x=this.moveShower2.x,this.moveShower.y=this.moveShower2.y):(this.moveShower.x=this.moveShower3.x,this.moveShower.y=this.moveShower3.y),this.amountLabel.string=GameManager.convertChips(this.playerData.chips),this.updateBB(),this.nameLabel.string=this.playerData.playerName.length>8?this.playerData.playerName.substring(0,8)+"..":this.playerData.playerName,this.sitHerePanel.active=!1,this.emptyPanel.active=!1,this.occupiedPanel.active=!0,this.onStateChange(),this.seatState=K.SeatState.Occupied,0!==this.playerData.totalRoundBet&&this.displayBet(this.playerData.totalRoundBet.roundOff(2));var a=e===this.playerData.playerId;a?(this.avatarBtn.interactable=!1,this.updateTimeBank2(this.playerData.timeBankSec)):console.log("set EMOJIN ENABLE enablePlayerView"),this.setSelfPlayerView(a,t),this.resetLblColor(),this.displayNote(this.playerData.playerId),this.playerData.state==K.PlayerState.Playing&&""!=this.playerData.lastMove&&this.disPlayMoveUtil(this.playerData.playerName,this.playerData.lastMove)},setSelfPlayerView:function(e,t){this.playerData,this.gridRefreshed(),e?(this.image.spriteFrame=GameManager.user.urlImg,this.playerData.state===K.PlayerState.Playing&&(t&&this.revealCards(t),"FOLD"==this.playerData.lastMove&&this.scheduleOnce(function(){},.1))):null!=this.playerData&&(this.playerData.urlImg?(this.image.spriteFrame=this.playerData.urlImg,this.image2&&(this.image2.spriteFrame=this.playerData.urlImg)):(this.image.spriteFrame=GameManager.user.urlImg,this.image2&&(this.image2.spriteFrame=GameManager.user.urlImg)))},displayBet:function(e){e<0&&console.warn("bet",e),this.playerBetLabel.getComponent(cc.Label).string=GameManager.convertChips(e),this.playerBetLabel.getComponent(cc.Label).__string=e,this.updateBB(),this.activatePlayerBet(!0),this.playerBetLabel.children[0].getComponent("PokerChipsView").generateChips(e)},setBetPosition:function(e){this.playerBetLabel.parent.setPosition(e)},setDealerPosition:function(e){this.dealerSprite.setPosition(e)},resetTimer:function(){this.timerSprite.fillRange=0,K.PORTRAIT,this.timeBank.active=!1,this.extra.active=!1,this.isSelf()&&this.playerData.state!=K.PlayerState.Waiting&&(this.timeBank.active=!0),this.image.node.active=!0,this.timerPSprite.node.active=this.timerSprite.node.parent.active=!1,this.imgHider.active=!1,this.normalTimerLbl.string="",this.normalTimerLbl.node.active=!1,K.PORTRAIT&&(this.normalTimerLbl.node.parent.active=!1,this.normalTimerLbl.node.parent.children[0].active=!1)},displayNote:function(){},resetLblColor:function(){},changeLblColor:function(){},activatePlayerBet:function(e,t){var a=this;if(t){var n=this.playerBetLabel.parent.getPosition(),i=this.pokerPresenter.potAmount[0].parent.parent.convertToWorldSpaceAR(this.pokerPresenter.potAmount[0].parent.getPosition()),o=this.playerBetLabel.parent.parent.convertToNodeSpaceAR(i),s=cc.callFunc(function(){a.playerBetLabel.parent.active=e,a.playerBetLabel.parent.setPosition(n),a.playerBetLabel.children[0].getComponent("PokerChipsView").destroyChips()}),r=cc.moveTo(.5,o).easing(cc.easeCircleActionInOut());this.playerBetLabel.parent.runAction(cc.sequence(r,s)),this.resetBetTimer=setTimeout(function(){cc.isValid(this.node)&&(this.playerBetLabel.parent.active=e,this.playerBetLabel.parent.stopAllActions(),this.playerBetLabel.parent.setPosition(n)),this.playerBetLabel.children[0].getComponent("PokerChipsView").destroyChips()}.bind(this),530)}else this.playerBetLabel.parent.active=e,e||this.playerBetLabel.children[0].getComponent("PokerChipsView").destroyChips()},gameOver:function(){this.amountLabel.node.stopAllActions(),this.resetTimer(),this.timersToKill.push(setTimeout(function(){cc.isValid(this.node)&&this.playerData&&null!==this.amountLabel&&void 0!==this.amountLabel&&this.activatePlayerBet(!1)}.bind(this),550)),this.node.getChildByName("BB").active=!1,this.node.getChildByName("SB").active=!1,this.node.getChildByName("BB2").active=!1,this.node.getChildByName("SB2").active=!1},displayBlind:function(e){this.amountLabel.string=GameManager.convertChips(this.playerData.chips),this.updateBB(),this.displayBet(e.roundOff(2))},setDealer:function(e){this.dealerSprite.active=e,this.dealerSprite2.active=!1,this.dealerSprite3.active=!1,this.playerData||(this.dealerSprite.active=!1,this.dealerSprite2.active=!1,this.dealerSprite3.active=!1)},disablePlayerView:function(){this.resetTimer(),this.sitHerePanel.active=!0,this.setDealer(!1),this.bestHandNode.active=!1,this.node.getChildByName("BB").active=!1,this.node.getChildByName("SB").active=!1,this.node.getChildByName("BB2").active=!1,this.node.getChildByName("SB2").active=!1,this.reservedPanel.active=!1,this.occupiedPanel.active=!1,this.emptyPanel.active=!1,this.seatState=K.SeatState.Free,this.noteColorBase.active=!1,this.avatarBtn.node.active=!1,console.log("RESEETTTT WWHEN LEAVEEEEEE disablePlayerView"),this.playerData=null},disableView:function(){this.bestHandNode.active=!1,this.node.getChildByName("BB").active=!1,this.node.getChildByName("SB").active=!1,this.node.getChildByName("BB2").active=!1,this.node.getChildByName("SB2").active=!1,this.emptyPanel.active=!0,this.sitHerePanel.active=!1,this.emptyPanel.children[1].getComponent(cc.Label).string="Empty",this.occupiedPanel.active=!1,this.reservedPanel.active=!1,this.seatState=K.SeatState.Hidden,this.noteColorBase.active=!1,this.avatarBtn.node.active=!1,this.setDealer(!1),console.log("RESEETTTT WWHEN LEAVEEEEEE disableView"),this.playerData=null},onNoteBtn:function(){this.showPlayerInfo()},disPlayMoveUtil:function(e,t){switch(this.moveShower.stopAllActions(),this.moveShower.active=!0,t){case"FOLD":LocalizedManager.t("TXT_FOLD");break;case"ALLIN":LocalizedManager.t("TXT_ALL_IN");break;case"CHECK":LocalizedManager.t("TXT_CHECK");break;case"RAISE":LocalizedManager.t("TXT_RAISE");break;case"BET":LocalizedManager.t("TXT_BET");break;case"CALL":LocalizedManager.t("TXT_CALL")}K.PORTRAIT,this.moveShower.children.forEach(function(e){e.active=!1},this),this.moveShower.getChildByName(t).active=!0,this.moveShower.scale=1/this.moveShower.parent.parent.scale/this.moveShower.parent.parent.parent.scale*1.45},displayMove:function(e){this.amountLabel.string=GameManager.convertChips(this.playerData.chips),this.updateBB(),this.disPlayMoveUtil(this.playerData.playerName,e),"FOLD"!==e&&"ALLIN"!==e?(this.pokerPresenter.checkForSelfTurn(this.playerData.playerId)&&("CALL"==e?this.pokerPresenter.playAudio(K.Sounds.playerCall):"CHECK"==e?this.pokerPresenter.playAudio(K.Sounds.playerCheck):"RAISE"==e?this.pokerPresenter.playAudio(K.Sounds.playerRaise):"BET"==e&&this.pokerPresenter.playAudio(K.Sounds.playerBet)),this.displayDefault()):"FOLD"===e?(this.pokerPresenter.checkForSelfTurn(this.playerData.playerId)&&(this.pokerPresenter.playAudio(K.Sounds.playerFold),this.graySelf()),this.enableFoldView()):"ALLIN"===e&&(this.pokerPresenter.checkForSelfTurn(this.playerData.playerId)&&this.pokerPresenter.playAudio(K.Sounds.playerAllIn),this.enableAllInView());var t;(t=this.playerData.totalRoundBet<1?Math.ceil(this.playerData.totalRoundBet):Math.floor(this.playerData.totalRoundBet))<=0?("CALL"===e&&0==t||"ALLIN"===e&&0==t&&null!=this.playerData.totalRoundLastBet)&&this.displayBet(this.playerData.totalRoundLastBet.roundOff(2)):this.displayBet(this.playerData.totalRoundBet.roundOff(2)),this.resetTimer()},enableFoldView:function(){this.playerData&&(this.nameLabel.string=LocalizedManager.t("TXT_FOLD"),null!=this.playerData&&this.pokerPresenter.checkForSelfTurn(this.playerData.playerId)?(this.amountLabel.string=GameManager.convertChips(this.playerData.chips),this.updateBB()):this.amountLabel.string=this.playerData.playerName.length>8?this.playerData.playerName.substring(0,8)+"..":this.playerData.playerName),this.changeLblColor(),null==this.playerData||this.pokerPresenter.checkForSelfTurn(this.playerData.playerId)||this.cardHolder.children.forEach(function(){},this),null!=this.playerData&&this.pokerPresenter.checkForSelfTurn(this.playerData.playerId)&&this.pokerPresenter.model.emit("FoldEvent"),this.cardHolderMy.children.forEach(function(e){e.getComponent("Card").gray()},this),this.cardHolder.children.forEach(function(e){e.getComponent("Card").gray()},this),this.image.setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")),this.timeBank.active=!1,this.node.scale=this.grayScale,this.timeBank.scale=.42/this.grayScale},displayDefault:function(){this.pokerPresenter.model.isVideo?this.displayDefaultTimer=setTimeout(function(){cc.isValid(this.node)&&this.playerData&&this.onStateChange()}.bind(this),K.moveDisplayTime/this.pokerPresenter.model.videoSpeed):this.displayDefaultTimer=setTimeout(function(){cc.isValid(this.node)&&this.playerData&&this.onStateChange()}.bind(this),K.moveDisplayTime)},clearTimers:function(){clearTimeout(this.displayDefaultTimer),clearTimeout(this.resetBetTimer),this.timersToKill.forEach(function(e){clearTimeout(e)},this),this.timersToKill=[]},onMouse_Enter:function(){null!=this.playerData&&this.pokerPresenter.checkForSelfTurn(this.playerData.playerId)&&"FOLD"===this.playerData.lastMove&&this.playerData.state==K.PlayerState.Playing&&this.resetCards(!0)},showMobileNotePopup:function(){if(GameScreen.isMobile&&null!=this.playerData&&!this.pokerPresenter.checkForSelfTurn(this.playerData.playerId)){var e=!!this.playerData.noteColor;this.pokerPresenter.sureToFoldNode.parent.getChildByName("NotePopup").getComponent("MobileNotePopup").init(e,this.playerData.noteColor,this.playerData.noteText,this.playerData.playerId,this.pokerPresenter)}},onClickEmojiBtn:function(){cc.log("onClickEmojiBtn"),this.showStickerBuddiesPopup(!0)},onClickAddFriendBtn:function(){cc.log("onClickAddFriendBtn")},clientSendAddFriendEvent:function(){var e={},t=(this.pokerPresenter.getMyPlayer(),this.playerData);e.playerId=GameManager.user.playerId,e.friendId=t.playerId,console.log("clientSendAddFriendEvent ",e);var a=this;ServerCom.pomeloRequest(K.BuddyAPI.sendFriendRequest,e,function(e){console.log("sendFriendRequest reponse",e),e.success&&(a.addFriendBtn.node.children[0].active=!1,a.addFriendBtn.node.children[1].active=!0),setTimeout(function(){a.addFriendBtn.node.active=!1},1e3)},null,5e3,!1)},onClickAvatarBtn:function(){cc.log("onClickAvatarBtn")},showStickerBuddiesPopup:function(e){var t=this.pokerPresenter.model.gameData.tableDetails.state===K.GameState.Running||this.pokerPresenter.model.gameData.tableDetails.state===K.GameState.GameOver,a=this.pokerPresenter.getMyPlayer(),n=(a&&a.state!==K.PlayerState.Waiting&&(a.state,K.PlayerState.OnBreak),this.playerData),i=n&&this.pokerPresenter.model.getPlayerById(n.playerId);n&&-1!=i&&(e?(n&&n.state!==K.PlayerState.Waiting&&(n.state,K.PlayerState.OnBreak),t&&this.pokerPresenter.sureToFoldNode.parent.getChildByName("StickerPopup").getComponent("StickersPopup").init(this.playerData.playerId,this.pokerPresenter)):this.showMobileNotePopup())},onMouse_Leave:function(){null!=this.playerData&&this.pokerPresenter.checkForSelfTurn(this.playerData.playerId)&&"FOLD"===this.playerData.lastMove&&(this.playerData.state,K.PlayerState.Playing)},enableAllInView:function(){this.nameLabel.string=LocalizedManager.t("TXT_ALL_IN"),this.timersToKill.push(setTimeout(function(){cc.isValid(this.node)&&this.playerData&&this.nameLabel.string===LocalizedManager.t("TXT_ALL_IN")&&(this.nameLabel.string=this.playerData.playerName.length>8?this.playerData.playerName.substring(0,8)+"..":this.playerData.playerName)}.bind(this),K.moveDisplayTime))},enableWaitingView:function(){LocalizedManager.setTextKey(this.nameLabel.node,"TXT_WAITTING"),null!=this.playerData&&this.pokerPresenter.checkForSelfTurn(this.playerData.playerId)?(this.amountLabel.string=GameManager.convertChips(this.playerData.chips),this.updateBB()):this.amountLabel.string=this.playerData.playerName.length>8?this.playerData.playerName.substring(0,8)+"..":this.playerData.playerName,this.image.setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),this.node.scale=this.normalScale,this.timeBank.scale=.42,this.dealerSprite.active=!1,this.clearPlayerCards(),this.moveShower.scale=0},enableOnbreakView:function(){this.grayer.active=!0,LocalizedManager.setTextKey(this.nameLabel.node,"TXT_SITTING_OUT"),null!=this.playerData&&this.pokerPresenter.checkForSelfTurn(this.playerData.playerId)?(this.amountLabel.string=GameManager.convertChips(this.playerData.chips),this.updateBB()):this.amountLabel.string=this.playerData.playerName.length>8?this.playerData.playerName.substring(0,8)+"..":this.playerData.playerName,this.changeLblColor(),this.clearPlayerCards(),this.moveShower.scale=0},enableRebuyingView:function(){this.nameLabel.string="Rebuying",this.amountLabel.string="0",this.updateBB(),this.clearPlayerCards()},enableDisconnectedView:function(){this.grayer2.active=!0,this.nameLabel.string=LocalizedManager.t("TXT_DISCONECTED"),null!=this.playerData&&this.pokerPresenter.checkForSelfTurn(this.playerData.playerId)?(this.amountLabel.string=GameManager.convertChips(this.playerData.chips),this.updateBB()):this.amountLabel.string=this.playerData.playerName.length>8?this.playerData.playerName.substring(0,8)+"..":this.playerData.playerName},enableOutOfMoneyView:function(){LocalizedManager.setTextKey(this.nameLabel.node,"TXT_SITTING_OUT"),null!=this.playerData&&this.pokerPresenter.checkForSelfTurn(this.playerData.playerId)?(this.amountLabel.string=GameManager.convertChips(this.playerData.chips),this.updateBB()):this.amountLabel.string=this.playerData.playerName.length>8?this.playerData.playerName.substring(0,8)+"..":this.playerData.playerName,this.activatePlayerBet(!1)},enablePlayingView:function(){this.amountLabel.node.stopAllActions(),this.resetLblColor(),this.nameLabel.string=this.playerData.playerName.length>8?this.playerData.playerName.substring(0,8)+"..":this.playerData.playerName,"FOLD"===this.playerData.lastMove?this.enableFoldView():"ALLIN"===this.playerData.lastMove&&this.enableAllInView()},enableReservedView:function(){this.reservedPanel.active=!0,console.log("set EMOJIN ENABLE  OFF enableReservedView"),this.addFriendBtn.node.active=!1},fadeOutFoldedCards:function(){cc.Color.BLACK},setPlayerColor:function(){},onTurn:function(){this.isTurned=!1,this.pokerPresenter.model.off(K.PokerEvents.onTimerTick),this.normalTimerLbl.node.active=!0,this.timerPSprite.node.active=this.timerSprite.node.parent.active=!0,this.timerSprite.node.getChildByName("Dot").active=!1,K.PORTRAIT&&(this.normalTimerLbl.node.parent.active=!0),this.imgHider.active=!0,this.pokerPresenter.model.on(K.PokerEvents.onTimerTick,function(e,t){this.extra.active&&(this.timeBank.children[1].getComponent(cc.Label).string=Math.abs(parseInt(t)),1==this.timeBank.children[1].getComponent(cc.Label).string.length&&(this.timeBank.children[1].getComponent(cc.Label).string="0"+this.timeBank.children[1].getComponent(cc.Label).string)),this.timerSprite.fillRange=e,this.normalTimerLbl.node.parent.children[0].active=!0,this.timerSprite.fillRange<0&&(this.timerSprite.fillRange=0),this.timerSprite.fillRange>1&&(this.timerSprite.fillRange=1),this.timerSprite.node.getChildByName("Dot").active=!0,this.timerSprite.node.getChildByName("Dot").x=180*this.timerSprite.fillRange-90,this.timerSprite.fillRange,this.normalTimerLbl.string=Math.abs(parseInt(t)),5==Math.floor(parseInt(t))&&this.playerData.playerId==GameManager.user.playerId&&(this.isPlaying||(this.timersToKill.push(setTimeout(function(){cc.isValid(this.node)&&(this.isPlaying=!1)}.bind(this),900)),this.pokerPresenter.playAudio(K.Sounds.endTimer),this.isPlaying=!0),!GameScreen.isMobile||this.isTurned||cc.sys.isBrowser||(this.isTurned=!0,GameScreen.selectTable(this.pokerPresenter.model.gameData.channelId)))}.bind(this)),this.playerData&&(this.amountLabel.string=GameManager.convertChips(this.playerData.chips),this.updateBB(),this.pokerPresenter.checkForSelfTurn(this.playerData.playerId)&&this.setPlayerColor())},enableTimeBank:function(){this.timeBank.active=!0,this.isSelf()?this.timeBank.opacity=255:this.timeBank.opacity=0,this.extra.active=!0,this.timeBank.children[0].scaleY=0;var e=cc.scaleTo(.2,1,1);this.timeBank.children[0].runAction(e),this.timerSprite.node.parent.active=!1,this.timerPSprite.node.active=!0,K.PORTRAIT},onStateChange:function(){if(this.playerData.state)switch(this.reservedPanel.active=!1,this.grayer.active=!1,this.grayer2.active=!1,this.playerData.state){case K.PlayerState.Waiting:this.enableWaitingView();break;case K.PlayerState.Playing:this.enablePlayingView(),this.amountLabel.string=GameManager.convertChips(this.playerData.chips),this.updateBB();break;case K.PlayerState.OutOfMoney:this.enableOutOfMoneyView();break;case K.PlayerState.OnBreak:this.enableOnbreakView();break;case K.PlayerState.Disconnected:this.enableDisconnectedView();break;case K.PlayerState.Left:break;case K.PlayerState.None:this.disableView();break;case K.PlayerState.Reserved:this.enableReservedView();break;case K.PlayerState.Rebuy:this.enableRebuyingView()}},onSitHere:function(){this.pokerPresenter.onSitHere(this.seatIndex)},onInvite:function(){},isLeftPlayer:function(){2==this.pokerPresenter.model.roomConfig.maxPlayers||3==this.pokerPresenter.model.roomConfig.maxPlayers||4==this.pokerPresenter.model.roomConfig.maxPlayers||5==this.pokerPresenter.model.roomConfig.maxPlayers||6==this.pokerPresenter.model.roomConfig.maxPlayers||7==this.pokerPresenter.model.roomConfig.maxPlayers||8==this.pokerPresenter.model.roomConfig.maxPlayers||this.pokerPresenter.model.roomConfig.maxPlayers},addPlayerCards:function(e){null!==e&&0!==e.length&&(this.cardHolder.children.forEach(function(e){e.active=!1}),K.PORTRAIT&&this.cardHolderMy&&this.cardHolderMy.children.forEach(function(e){e.active=!1}),this.cardHolderShow.children.forEach(function(e){e.active=!1}),K.PORTRAIT&&this.cardHolderMyShow&&this.cardHolderMyShow.children.forEach(function(e){e.active=!1}),e.forEach(function(t,a){var n=CardPool.generateCard(this.pokerPresenter.cardPrefab.name,function(){}),i=n.getComponent("Card");if(i.init(t,this.pokerPresenter.model,!0),i.reveal(!0),this.playerData&&"FOLD"==this.playerData.lastMove&&i.gray(),K.PORTRAIT){n.parent=this.cardHolderMy;var o=0,s=0;2==e.length?this.isSelf()?1==a?(o=this.cardHolder2My.children[1].x,s=this.cardHolder2My.children[1].y,n.setRotation(this.cardHolder2My.children[1].getRotation())):(o=this.cardHolder2My.children[0].x,s=this.cardHolder2My.children[0].y,n.setRotation(this.cardHolder2My.children[0].getRotation())):1==a?(o=(this.node.parent.x<0?this.cardHolder2:this.cardHolder2R).children[1].x,s=(this.node.parent.x<0?this.cardHolder2:this.cardHolder2R).children[1].y,n.setRotation((this.node.parent.x<0?this.cardHolder2:this.cardHolder2R).children[1].getRotation())):(o=(this.node.parent.x<0?this.cardHolder2:this.cardHolder2R).children[0].x,s=(this.node.parent.x<0?this.cardHolder2:this.cardHolder2R).children[0].y,n.setRotation((this.node.parent.x<0?this.cardHolder2:this.cardHolder2R).children[0].getRotation())):3==e.length?this.isSelf()?0==a?(o=this.cardHolder3My.children[0].x,s=this.cardHolder3My.children[0].y,n.setRotation(this.cardHolder3My.children[0].getRotation())):1==a?(o=this.cardHolder3My.children[1].x,s=this.cardHolder3My.children[1].y,n.setRotation(this.cardHolder3My.children[1].getRotation())):(o=this.cardHolder3My.children[2].x,s=this.cardHolder3My.children[2].y,n.setRotation(this.cardHolder3My.children[2].getRotation())):0==a?(o=(this.node.parent.x<0?this.cardHolder3:this.cardHolder3R).children[0].x,s=(this.node.parent.x<0?this.cardHolder3:this.cardHolder3R).children[0].y,n.setRotation((this.node.parent.x<0?this.cardHolder3:this.cardHolder3R).children[0].getRotation())):1==a?(o=(this.node.parent.x<0?this.cardHolder3:this.cardHolder3R).children[1].x,s=(this.node.parent.x<0?this.cardHolder3:this.cardHolder3R).children[1].y,n.setRotation((this.node.parent.x<0?this.cardHolder3:this.cardHolder3R).children[1].getRotation())):(o=(this.node.parent.x<0?this.cardHolder3:this.cardHolder3R).children[2].x,s=(this.node.parent.x<0?this.cardHolder3:this.cardHolder3R).children[2].y,n.setRotation((this.node.parent.x<0?this.cardHolder3:this.cardHolder3R).children[2].getRotation())):4==e.length?this.isSelf()?1==a?(o=this.cardHolder4My.children[1].x,s=this.cardHolder4My.children[1].y,n.setRotation(this.cardHolder4My.children[1].getRotation())):3==a?(o=this.cardHolder4My.children[3].x,s=this.cardHolder4My.children[3].y,n.setRotation(this.cardHolder4My.children[3].getRotation())):2==a?(o=this.cardHolder4My.children[2].x,s=this.cardHolder4My.children[2].y,n.setRotation(this.cardHolder4My.children[2].getRotation())):0==a&&(o=this.cardHolder4My.children[0].x,s=this.cardHolder4My.children[0].y,n.setRotation(this.cardHolder4My.children[0].getRotation())):1==a?(o=(this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[1].x,s=(this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[1].y,n.setRotation((this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[1].getRotation())):3==a?(o=(this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[3].x,s=(this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[3].y,n.setRotation((this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[3].getRotation())):2==a?(o=(this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[2].x,s=(this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[2].y,n.setRotation((this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[2].getRotation())):0==a&&(o=(this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[0].x,s=(this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[0].y,n.setRotation((this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[0].getRotation())):5==e.length?this.isSelf()?1==a?(o=this.cardHolder5My.children[1].x,s=this.cardHolder5My.children[1].y,n.setRotation(this.cardHolder5My.children[1].getRotation())):3==a?(o=this.cardHolder5My.children[3].x,s=this.cardHolder5My.children[3].y,n.setRotation(this.cardHolder5My.children[3].getRotation())):2==a?(o=this.cardHolder5My.children[2].x,s=this.cardHolder5My.children[2].y,n.setRotation(this.cardHolder5My.children[2].getRotation())):0==a?(o=this.cardHolder5My.children[0].x,s=this.cardHolder5My.children[0].y,n.setRotation(this.cardHolder5My.children[0].getRotation())):4==a&&(o=this.cardHolder5My.children[4].x,s=this.cardHolder5My.children[4].y,n.setRotation(this.cardHolder5My.children[4].getRotation())):1==a?(o=(this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[1].x,s=(this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[1].y,n.setRotation((this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[1].getRotation())):3==a?(o=(this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[3].x,s=(this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[3].y,n.setRotation((this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[3].getRotation())):2==a?(o=(this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[2].x,s=(this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[2].y,n.setRotation((this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[2].getRotation())):0==a?(o=(this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[0].x,s=(this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[0].y,n.setRotation((this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[0].getRotation())):4==a&&(o=(this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[4].x,s=(this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[4].y,n.setRotation((this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[4].getRotation())):6==e.length&&(this.isSelf()?1==a?(o=this.cardHolder6My.children[1].x,s=this.cardHolder6My.children[1].y,n.setRotation(this.cardHolder6My.children[1].getRotation())):3==a?(o=this.cardHolder6My.children[3].x,s=this.cardHolder6My.children[3].y,n.setRotation(this.cardHolder6My.children[3].getRotation())):2==a?(o=this.cardHolder6My.children[2].x,s=this.cardHolder6My.children[2].y,n.setRotation(this.cardHolder6My.children[2].getRotation())):0==a?(o=this.cardHolder6My.children[0].x,s=this.cardHolder6My.children[0].y,n.setRotation(this.cardHolder6My.children[0].getRotation())):4==a?(o=this.cardHolder6My.children[4].x,s=this.cardHolder6My.children[4].y,n.setRotation(this.cardHolder6My.children[4].getRotation())):5==a&&(o=this.cardHolder6My.children[5].x,s=this.cardHolder6My.children[5].y,n.setRotation(this.cardHolder6My.children[5].getRotation())):1==a?(o=(this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[1].x,s=(this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[1].y,n.setRotation((this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[1].getRotation())):3==a?(o=(this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[3].x,s=(this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[3].y,n.setRotation((this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[3].getRotation())):2==a?(o=(this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[2].x,s=(this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[2].y,n.setRotation((this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[2].getRotation())):0==a?(o=(this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[0].x,s=(this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[0].y,n.setRotation((this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[0].getRotation())):4==a?(o=(this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[4].x,s=(this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[4].y,n.setRotation((this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[4].getRotation())):5==a&&(o=(this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[5].x,s=(this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[5].y,n.setRotation((this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[5].getRotation()))),n.setPosition(o,s)}},this))},addWinningPlayerCards:function(e,t){void 0===t&&(t=!1),null!==e&&0!==e.length&&(this.cardHolder.children.forEach(function(e){e.active=!1}),K.PORTRAIT&&this.cardHolderMy&&this.cardHolderMy.children.forEach(function(e){e.active=!1}),this.cardHolderShow.children.forEach(function(e){e.active=!1}),K.PORTRAIT&&this.cardHolderMyShow&&this.cardHolderMyShow.children.forEach(function(e){e.active=!1}),e.forEach(function(e){var a=CardPool.generateCard(this.pokerPresenter.cardPrefab.name,function(){}),n=a.getComponent("Card");n.init(e,this.pokerPresenter.model,!0),n.reveal(!0),K.PORTRAIT&&(a.setPosition(0,0),a.parent=this.cardHolderMyShow,this.isSelf()||"Omaha"!=this.pokerPresenter.model.roomConfig.channelVariation?(a.scale=1,this.cardHolderMyShow.getComponent(cc.Layout).spacingX=-50):(a.scale=.82,this.cardHolderMyShow.getComponent(cc.Layout).spacingX=-55)),this.playerData&&"FOLD"==this.playerData.lastMove?n.gray():this.isSelf()||1==t&&n.reveal(!1)},this))},isSelf:function(){return this.playerData&&this.playerData.playerId&&this.playerData.playerId==GameManager.user.playerId},revealCards:function(e){var t=[];void 0!==this.playerData.cards&&null!==this.playerData.cards&&this.playerData.cards.length>0&&(this.playerData.cards.forEach(function(e){var n=this.pokerPresenter.model.getSuit(e.type);t.push(new a(e.rank,n))},this),this.addPlayerCards(t,e),this.playerData.cards=[])},winningRevealCards:function(e){var t=this;void 0===e&&(e=!1);var n=[];void 0!==this.playerData.cards&&null!==this.playerData.cards&&this.playerData.cards.length>0?(this.playerData.cards.forEach(function(e){var t=this.pokerPresenter.model.getSuit(e.type);n.push(new a(e.rank,t))},this),this.addWinningPlayerCards(n,e),this.playerData.cards=[]):(this.cardHolder.children.forEach(function(e){e.active=!1;var a=CardPool.generateCard(t.pokerPresenter.cardPrefab.name,function(){}),n=a.getComponent("Card");n.init(e.getComponent("Card").card,t.pokerPresenter.model,!0),n.reveal(!1),a.setPosition(0,0),a.parent=t.cardHolderMyShow}),this.cardHolderMy&&this.cardHolderMy.children.forEach(function(e){e.active=!1;var a=CardPool.generateCard(t.pokerPresenter.cardPrefab.name,function(){}),n=a.getComponent("Card");n.init(e.getComponent("Card").card,t.pokerPresenter.model,!0),n.reveal(!1),a.setPosition(0,0),a.parent=t.cardHolderMyShow}))},winningRevealCards2:function(){this.cardHolderShow.children.forEach(function(e){e.getComponent("Card").reveal(!0)}),this.cardHolderMyShow.children.forEach(function(e){e.getComponent("Card").reveal(!0)})},resetCards:function(e){for(var t=this.cardHolder.children,a=0;a<t.length;a++)t[a].getComponent("Card").reveal(e),this.pokerPresenter.checkForSelfTurn(this.playerData.playerId)&&(t[a].children[0].getComponent(cc.Sprite).enabled=e);if(K.PORTRAIT&&this.cardHolderMy)for(t=this.cardHolderMy.children,a=0;a<t.length;a++)t[a].getComponent("Card").reveal(e),this.pokerPresenter.checkForSelfTurn(this.playerData.playerId)&&(t[a].children[0].getComponent(cc.Sprite).enabled=e)},displayDummyCards:function(e,t){if(this.seatState===K.SeatState.Occupied&&(!this.playerData||"REBUYING"!=this.playerData.state)){if(this.cardHolder.getComponent(cc.Layout).spacingX=4==e?-37:20,this.isSelf()||(console.log("this.playerData",this.node.x),console.log("this.playerData",this.node.parent.x),console.log("this.playerData.seatIndex",this.playerData.seatIndex),console.log("this.playerData.getRotatedSeatIndex",this.pokerPresenter.getRotatedSeatIndex(this.playerData.seatIndex)),this.pokerPresenter.getRotatedSeatIndex(this.playerData.seatIndex)),this.isSelf()||(this.node.parent.x<0?this.cardHolder.x=47:this.cardHolder.x=-47),(t&&t!==this.playerData.playerId||!t)&&this.playerData.state===K.PlayerState.Playing){this.clearPlayerCards();for(var a=0;a<e;a++){var n=CardPool.generateCard(this.pokerPresenter.cardPrefab.name,function(){});if(n.getComponent("Card").reveal(!1),this.cardHolder.getComponent(cc.Layout).enabled=!1,K.PORTRAIT?n.parent=this.isSelf()?this.cardHolderMy:this.cardHolder:n.parent=this.cardHolder,K.PORTRAIT){var i=0,o=0;2==e?this.isSelf()?1==a?(i=this.cardHolder2My.children[1].x,o=this.cardHolder2My.children[1].y,n.setRotation(this.cardHolder2My.children[1].getRotation())):(i=this.cardHolder2My.children[0].x,o=this.cardHolder2My.children[0].y,n.setRotation(this.cardHolder2My.children[0].getRotation())):1==a?(i=(this.node.parent.x<0?this.cardHolder2:this.cardHolder2R).children[1].x,o=(this.node.parent.x<0?this.cardHolder2:this.cardHolder2R).children[1].y,n.setRotation((this.node.parent.x<0?this.cardHolder2:this.cardHolder2R).children[1].getRotation())):(i=(this.node.parent.x<0?this.cardHolder2:this.cardHolder2R).children[0].x,o=(this.node.parent.x<0?this.cardHolder2:this.cardHolder2R).children[0].y,n.setRotation((this.node.parent.x<0?this.cardHolder2:this.cardHolder2R).children[0].getRotation())):3==e?this.isSelf()?0==a?(i=this.cardHolder3My.children[0].x,o=this.cardHolder3My.children[0].y,n.setRotation(this.cardHolder3My.children[0].getRotation())):1==a?(i=this.cardHolder3My.children[1].x,o=this.cardHolder3My.children[1].y,n.setRotation(this.cardHolder3My.children[1].getRotation())):(i=this.cardHolder3My.children[2].x,o=this.cardHolder3My.children[2].y,n.setRotation(this.cardHolder3My.children[2].getRotation())):0==a?(i=(this.node.parent.x<0?this.cardHolder3:this.cardHolder3R).children[0].x,o=(this.node.parent.x<0?this.cardHolder3:this.cardHolder3R).children[0].y,n.setRotation((this.node.parent.x<0?this.cardHolder3:this.cardHolder3R).children[0].getRotation())):1==a?(i=(this.node.parent.x<0?this.cardHolder3:this.cardHolder3R).children[1].x,o=(this.node.parent.x<0?this.cardHolder3:this.cardHolder3R).children[1].y,n.setRotation((this.node.parent.x<0?this.cardHolder3:this.cardHolder3R).children[1].getRotation())):(i=(this.node.parent.x<0?this.cardHolder3:this.cardHolder3R).children[2].x,o=(this.node.parent.x<0?this.cardHolder3:this.cardHolder3R).children[2].y,n.setRotation((this.node.parent.x<0?this.cardHolder3:this.cardHolder3R).children[2].getRotation())):4==e?this.isSelf()?1==a?(i=this.cardHolder4My.children[1].x,o=this.cardHolder4My.children[1].y,n.setRotation(this.cardHolder4My.children[1].getRotation())):3==a?(i=this.cardHolder4My.children[3].x,o=this.cardHolder4My.children[3].y,n.setRotation(this.cardHolder4My.children[3].getRotation())):2==a?(i=this.cardHolder4My.children[2].x,o=this.cardHolder4My.children[2].y,n.setRotation(this.cardHolder4My.children[2].getRotation())):0==a&&(i=this.cardHolder4My.children[0].x,o=this.cardHolder4My.children[0].y,n.setRotation(this.cardHolder4My.children[0].getRotation())):1==a?(i=(this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[1].x,o=(this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[1].y,n.setRotation((this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[1].getRotation())):3==a?(i=(this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[3].x,o=(this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[3].y,n.setRotation((this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[3].getRotation())):2==a?(i=(this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[2].x,o=(this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[2].y,n.setRotation((this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[2].getRotation())):0==a&&(i=(this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[0].x,o=(this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[0].y,n.setRotation((this.node.parent.x<0?this.cardHolder4:this.cardHolder4R).children[0].getRotation())):5==e?this.isSelf()?1==a?(i=this.cardHolder5My.children[1].x,o=this.cardHolder5My.children[1].y,n.setRotation(this.cardHolder5My.children[1].getRotation())):3==a?(i=this.cardHolder5My.children[3].x,o=this.cardHolder5My.children[3].y,n.setRotation(this.cardHolder5My.children[3].getRotation())):2==a?(i=this.cardHolder5My.children[2].x,o=this.cardHolder5My.children[2].y,n.setRotation(this.cardHolder5My.children[2].getRotation())):0==a?(i=this.cardHolder5My.children[0].x,o=this.cardHolder5My.children[0].y,n.setRotation(this.cardHolder5My.children[0].getRotation())):4==a&&(i=this.cardHolder5My.children[4].x,o=this.cardHolder5My.children[4].y,n.setRotation(this.cardHolder5My.children[4].getRotation())):1==a?(i=(this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[1].x,o=(this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[1].y,n.setRotation((this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[1].getRotation())):3==a?(i=(this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[3].x,o=(this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[3].y,n.setRotation((this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[3].getRotation())):2==a?(i=(this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[2].x,o=(this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[2].y,n.setRotation((this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[2].getRotation())):0==a?(i=(this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[0].x,o=(this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[0].y,n.setRotation((this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[0].getRotation())):4==a&&(i=(this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[4].x,o=(this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[4].y,n.setRotation((this.node.parent.x<0?this.cardHolder5:this.cardHolder5R).children[4].getRotation())):6==e&&(this.isSelf()?1==a?(i=this.cardHolder6My.children[1].x,o=this.cardHolder6My.children[1].y,n.setRotation(this.cardHolder6My.children[1].getRotation())):3==a?(i=this.cardHolder6My.children[3].x,o=this.cardHolder6My.children[3].y,n.setRotation(this.cardHolder6My.children[3].getRotation())):2==a?(i=this.cardHolder6My.children[2].x,o=this.cardHolder6My.children[2].y,n.setRotation(this.cardHolder6My.children[2].getRotation())):0==a?(i=this.cardHolder6My.children[0].x,o=this.cardHolder6My.children[0].y,n.setRotation(this.cardHolder6My.children[0].getRotation())):4==a?(i=this.cardHolder6My.children[4].x,o=this.cardHolder6My.children[4].y,n.setRotation(this.cardHolder6My.children[4].getRotation())):5==a&&(i=this.cardHolder6My.children[5].x,o=this.cardHolder6My.children[5].y,n.setRotation(this.cardHolder6My.children[5].getRotation())):1==a?(i=(this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[1].x,o=(this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[1].y,n.setRotation((this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[1].getRotation())):3==a?(i=(this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[3].x,o=(this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[3].y,n.setRotation((this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[3].getRotation())):2==a?(i=(this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[2].x,o=(this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[2].y,n.setRotation((this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[2].getRotation())):0==a?(i=(this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[0].x,o=(this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[0].y,n.setRotation((this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[0].getRotation())):4==a?(i=(this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[4].x,o=(this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[4].y,n.setRotation((this.node.parent.x<0?this.cardHolder5:this.cardHolder6R).children[4].getRotation())):5==a&&(i=(this.node.parent.x<0?this.cardHolder6:this.cardHolder6R).children[5].x,o=(this.node.parent.x<0?this.cardHolder6:this.cardHolder6R).children[5].y,n.setRotation((this.node.parent.x<0?this.cardHolder6:this.cardHolder6R).children[5].getRotation()))),n.x=i,n.y=o}}}this.playerData&&"FOLD"==this.playerData.lastMove&&(this.cardHolderMy.children.forEach(function(e){e.getComponent("Card").gray()},this),this.cardHolder.children.forEach(function(e){e.getComponent("Card").gray()},this))}},clearPlayerCards:function(){for(var e=this.cardHolder.children;e.length>0;)CardPool.destroyCard(e[0],function(){});for(e=this.cardHolderShow.children;e.length>0;)CardPool.destroyCard(e[0],function(){});if(K.PORTRAIT&&this.cardHolderMy)for(e=this.cardHolderMy.children;e.length>0;)CardPool.destroyCard(e[0],function(){});if(K.PORTRAIT&&this.cardHolderMyShow)for(e=this.cardHolderMyShow.children;e.length>0;)CardPool.destroyCard(e[0],function(){});this.bestHandNode.active=!1},updateCoins:function(){this.amountLabel.string=GameManager.convertChips(this.playerData.chips),this.updateBB()},onDestroy:function(){GameScreen.node.off("grid-refreshed",this.gridRefreshedRef),GameManager.off("image-loaded",this.imageLoadedRef)},showChatOldie:function(e){this.chatHead.active=!0,this.chatLbl.node.position.y,e.length>12&&(e=e.substring(0,9)+"..."),this.chatLbl.string=e,this.scheduleOnce(function(){this.chatHead.active=!1}.bind(this),1)},showChat:function(e){if(e=e.trim(),this.chatHead.active=!0,-1==e.indexOf("<img src"))this.chatLbl.string=e.substring(0,17),e.length>=17&&(this.chatLbl.string+="...");else{var t=this.determineString(e);e.length>320?this.chatLbl.string=t+"...":this.chatLbl.string=t}this.scheduleOnce(function(){this.chatLbl.string="",this.chatHead.active=!1}.bind(this),5),5==this.pokerPresenter.getRotatedSeatIndex(this.playerData.seatIndex)&&this.cardHolder.children.length,this.pokerPresenter.getRotatedSeatIndex(this.playerData.seatIndex),this.pokerPresenter.getRotatedSeatIndex(this.playerData.seatIndex)},determineWidth:function(e){for(var t=0,a=e,n=a.indexOf("/>");-1!=n;)t++,n=(a=a.substring(n+2)).indexOf("/>");a=e;for(var i=[],o=[],s=0;s<a.length;s++){var r=a.indexOf("<img src =");if(r>-1&&r<18){var l=a.indexOf("<img"),c=a.indexOf("/>")+1;i.push(c-l+1),o.push(l),a=a.substring(0,l)+a.substring(c+1,a.length)}}for(var d=0,h=a.length>18?18:a.length,u=0;u<h;u++)"t"!=a[u]&&"i"!=a[u]&&"j"!=a[u]&&"l"!=a[u]&&"j"!=a[u]||d++;return 50*t+9*d+20*(h-d)},determineString:function(e){for(var t=e.length>320?320:e.length,a="",n=!1,i="",o=-1,s=0;s<t;s++)"<"==e[s]&&(n=!0,o=s),">"==e[s]&&(n=!1,a+=i,o=-1),n?i+=e[s]:(i="",a+=e[s]);return i&&(this.isEmoji(o,e)||(a+=i)),a},isEmoji:function(e,t){var a=t.substring(e);return-1!=a.indexOf("<img")&&-1!=a.indexOf("/>")},showWinnerBanner:function(){this.winningNode.active=!0},hideWinningAnim:function(){this.winningNode.active=!1},showSelf:function(){console.log("%c[Flow/showSelf]","Orange: Tomato;"),this.playerData&&this.playerData.playerId&&this.playerData.playerId==GameManager.user.playerId&&(this.selfPlayerHand&&(this.selfPlayerHand.active=!0,this.selfTimerBox.active=!0,this.timerSprite2.node.active=!0),this.occupiedPanel.getChildByName("Player").active=!1,this.occupiedPanel.getChildByName("Timer").active=!1,this.cardHolder.children.forEach(function(e){cc.find("FrontFace/Gray",e).active=!0},this),this.playerBetLabel.parent.setPosition(this.playerBetHolder.position))},hideSelf:function(){console.log("%c[Flow/hideSelf]","Orange: Tomato;"),this.playerData&&this.playerData.playerId&&this.playerData.playerId==GameManager.user.playerId&&(this.selfPlayerHand&&(this.selfPlayerHand.active=!1,this.selfTimerBox.active=!1,this.timerSprite2.node.active=!1),this.occupiedPanel.getChildByName("Player").active=!0,this.occupiedPanel.getChildByName("Timer").active=!0,this.playerBetLabel.parent.setPosition(this.oldPlayerBetLabelPosition),this.cardHolder.children.forEach(function(e){cc.find("FrontFace/Gray",e).active=!1},this))},graySelf:function(){this.playerData&&this.playerData.playerId&&this.playerData.playerId==GameManager.user.playerId&&this.selfPlayerHand&&this.selfPlayerHand.active&&this.cardHolder.children.forEach(function(e){e.opacity=150},this)},graySelf2:function(){this.playerData&&this.playerData.playerId&&this.playerData.playerId==GameManager.user.playerId&&this.selfPlayerHand&&this.selfPlayerHand.active&&(cc.find("Timer/PFPAvatar",this.selfPlayerHand).getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")),cc.find("Timer/PlayerImageMask/PlayerImage",this.selfPlayerHand).getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")),this.cardHolder.children.forEach(function(e){e.opacity=150},this))},ungraySelf:function(){this.playerData&&this.playerData.playerId&&this.playerData.playerId==GameManager.user.playerId&&this.selfPlayerHand&&(cc.find("Timer/PFPAvatar",this.selfPlayerHand).getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),cc.find("Timer/PlayerImageMask/PlayerImage",this.selfPlayerHand).getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),this.cardHolder.children.forEach(function(e){e.opacity=255},this))},onDisconnectTime:function(){this.pokerPresenter.model.off(K.PokerEvents.onTimerTick),this.playerData?(this.extra.active=!1,this.normalTimerLbl.node.active=!0,K.PORTRAIT&&(this.normalTimerLbl.node.parent.active=!0,this.normalTimerLbl.node.parent.children[0].active=!0),this.timerPSprite.node.active=this.timerSprite.node.parent.getChildByName("Base").active=!0,this.imgHider.active=!0,this.pokerPresenter.model.on(K.PokerEvents.onTimerTick,function(e,t){this.timerSprite.fillRange=e,this.normalTimerLbl.node.parent.children[0].active=!0,this.timerSprite.fillRange<0&&(this.timerSprite.fillRange=0),this.timerSprite.fillRange>1&&(this.timerSprite.fillRange=1),this.timerSprite.node.getChildByName("Dot").x=150*this.timerSprite.fillRange-75,0==this.timerSprite.fillRange&&(this.timerSprite.node.parent.active=!1),this.normalTimerLbl.string=Math.abs(parseInt(t))}.bind(this))):cc.error("!this.playerData")},showPlayerInfo:function(){var e=this;ServerCom.pomeloRequest("connector.entryHandler.getPlayerStats",{playerId:GameManager.user.playerId,range:1},function(t){if(t.success){console.log(t),e.pokerPresenter.playerInfoPopup.active=!0,e.pokerPresenter.playerInfoPopup.opacity=0;var a=e.pokerPresenter.playerInfoPopup.getComponent("AnimBase");null!==a&&a.play("showPopUp",function(){}),e.pokerPresenter.playerInfoPopup.getComponent("NewPlayerInfoPopup").onShow(e.playerData,e.pokerPresenter.model.gameData,t.data);var n=!!e.playerData.noteColor;e.pokerPresenter.playerInfoPopup.getComponent("MobileNotePopup").init(n,e.playerData.noteColor,e.playerData.noteText,e.playerData.playerId,e.pokerPresenter),e.pokerPresenter.playerInfoPopup.getComponent("StickersPopup").init(e.playerData.playerId,e.pokerPresenter),GameManager.emit("hideJoinSimlar")}},null,5e3,!1)},switchBB:function(){GameManager.isBB?GameManager.isBB=!1:GameManager.isBB=!0,GameManager.emit("switchBB")},updateBB:function(){this.playerData&&(this.amountLabel.node.parent.getChildByName("bb").getComponent(cc.Label).string=(Number(this.playerData.chips)/this.pokerPresenter.model.gameData.tableDetails.bigBlind).toFixed(1)+"BB"),this.playerBetLabel.parent.getChildByName("bb").getComponent(cc.Label).string=(Number(this.playerBetLabel.getComponent(cc.Label).__string)/this.pokerPresenter.model.gameData.tableDetails.bigBlind).toFixed(1)+"BB",GameManager.isBB&&GameManager.user.settings.stackInBB?(this.playerBetLabel.active=!1,this.playerBetLabel.parent.getChildByName("bb").active=!0,this.amountLabel.node.opacity=0,this.amountLabel.node.parent.getChildByName("bb").opacity=255):(this.playerBetLabel.active=!0,this.playerBetLabel.parent.getChildByName("bb").active=!1,this.amountLabel.node.opacity=255,this.amountLabel.node.parent.getChildByName("bb").opacity=0)},switchBBNow:function(){this.updateBB()},updateTimeBank:function(){if(this.isSelf()&&this.playerData.state!=K.PlayerState.Waiting){var e=this.pokerPresenter.model.gameData.timeBankLeft;this.timeBank.children[1].getComponent(cc.Label).string=Math.abs(parseInt(e)),1==this.timeBank.children[1].getComponent(cc.Label).string.length&&(this.timeBank.children[1].getComponent(cc.Label).string="0"+this.timeBank.children[1].getComponent(cc.Label).string)}},updateTimeBank2:function(e){if(this.isSelf()&&this.playerData.state!=K.PlayerState.Waiting){var t=e;this.timeBank.children[1].getComponent(cc.Label).string=Math.abs(parseInt(t)),1==this.timeBank.children[1].getComponent(cc.Label).string.length&&(this.timeBank.children[1].getComponent(cc.Label).string="0"+this.timeBank.children[1].getComponent(cc.Label).string)}},showInvite:function(){},showInviteList:function(){this.playerData&&this.playerData.playerId!=GameManager.user.playerId&&(this.inviteListNode.active=!0)},hideShowInvite:function(){this.inviteNode.active=!1},hideInviteList:function(){this.inviteListNode.active=!1},addFriend:function(){var e=this,t=this.playerData;GameManager.friendSendRequst(t.playerName,function(){e.inviteNode.active=!1})},onMute:function(){var e=this.playerData;GameManager.changePlayerMute(e.playerId,function(){})},updatePlayerImageInTable:function(e){null!=this.playerData&&this.playerData.playerId==e.playerId&&(this.playerData.imageAvtar=Number(e.imageAvtar)-1,this.playerData.urlImg=GameManager.avatarImages[this.playerData.imageAvtar],this.imageLoaded(this.playerData))},onBestHandsGameOver:function(e,t){this.bestHandNode.active=!0,this.bestHandNode.getChildByName("bg").getChildByName("info").getComponent(cc.Label).string=e,this.bestHandNode.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=t?this.bestHands1:this.bestHands2},onBestHand:function(e){console.log(">>>>>>>>>> onBestHand",this.pokerPresenter.model.gameData.tableDetails.roundName),this.pokerPresenter.model.gameData.tableDetails.roundName!=K.Round.Preflop&&this.isSelf()&&(this.bestHandNode.active=!0,this.bestHandNode.getChildByName("bg").getComponent(cc.Sprite).spriteFrame=this.bestHands2,this.bestHandNode.getChildByName("bg").getChildByName("info").getComponent(cc.Label).string=e)},setNormalScale:function(e){this.normalScale=e},setGrayScale:function(e){this.grayScale=e}}),cc._RF.pop()},{CardTypes:"CardTypes",SliderTouch:"SliderTouch",StickerController:"StickerController"}],PokerChipsView:[function(e,t){"use strict";cc._RF.push(t,"1f1b3VnRKxIR6ohPrSdiabk","PokerChipsView"),cc.Class({extends:cc.Component,properties:{chipsPrefab:{default:[],type:[cc.Prefab]},chips:{default:[],visible:!1},centerOffset:!1,leftOffset:!1,gridRefreshedRef:null,poolSize:10,chipsTimer:null},onLoad:function(){this.gridRefreshedRef=this.gridRefreshed.bind(this),GameScreen.node.on("grid-refreshed",this.gridRefreshedRef),this.chipsPrefab.reverse()},createPool:function(e){this.chipsPool[this.chipsPrefab[e].name]=[];for(var t=0;t<this.poolSize;t++){var a=cc.instantiate(this.chipsPrefab[e]);a.active=!1,this.chipsPool[this.chipsPrefab[e].name].push(a)}},getFromPool:function(e){var t=this.chipsPool[e].pop();return t.active=!0,t.name=e,t},returnToPool:function(e){e&&(e.active=!1,e.parent=null,this.chipsPool[e.name].push(e))},onDestroy:function(){GameScreen.node.off("grid-refreshed",this.gridRefreshedRef)},gridRefreshed:function(){this.activateChips(1==GameManager.activeTableCount||2==GameScreen.viewType)},generateChips:function(e){this.destroyChips();for(var t=[5e4,25e3,1e4,5e3,2500,1e3,500,250,100,50,25,10,5,1],a=e%5e4,n=[parseInt(e/5e4),0,0,0,0,0,0,0,0,0,0,0,0,0],i=0;a>=0&&i<13;)n[++i]=parseInt(a/t[i]),a%=t[i];n.reverse(),this.showChips(n),this.activateChips(1==GameManager.activeTableCount||2==GameScreen.viewType)},destroyChips:function(){this.chips.forEach(function(e){e&&e.destroy()},this),this.chips=[]},activateChips:function(e){this.scheduleOnce(function(){},.05),this.chips.forEach(function(t){t.active=e},this)},showChips:function(e){var t=new cc.v2(40,10);GameScreen.isMobile&&(t=new cc.v2(55,10));var a=0,n=0,i=0,o=0,s=[];e.forEach(function(e){e>0&&(o++,s.push(0))},this),e.forEach(function(e){var r;o>3&&(o=3),r=t.x*(n-parseInt(o/2)),e>0&&(i=s[n]);for(var l=0;l<e;l++)if(this.chipsPrefab[a]){var c=cc.instantiate(this.chipsPrefab[a]);this.chips.push(c),this.node.addChild(c),c.setPosition(r,t.y*i+30),GameScreen.isMobile?c.setScale(1.5,1.5):c.setScale(1.1,1.1),s[n]++,i++}e>0&&(n<2?n++:n=0),a++},this)}}),cc._RF.pop()},{}],PokerModel:[function(e,t){"use strict";cc._RF.push(t,"327dd3OhMFE7qbHXJnSXTDe","PokerModel"),e("PostTypes").Login;var a=e("PostTypes").LeaveData,n=e("PostTypes").AddChipsData,i=e("PostTypes").ConnectAckData,o=e("PostTypes").SitOutData,s=e("PostTypes").ResetSitout,r=e("PostTypes").SetPlayerValData,l=e("PostTypes").GetNote,c=e("PostTypes").ReplayData,d=e("EventEmitter"),h=e("ResponseTypes").changeAvatar,u=e("CardTypes").Card,p=(e("CardTypes").Suit,e("Queue.src")),m=e("PopUpManager").PopUpType,g=cc.Enum({SitOutNextHand:1,SitOueNextBB:2,None:-1}),f=cc.Class({extends:d,properties:{gameModel:null,gameData:null,tourData:null,roomConfig:null,handTabs:[],timer:null,timeOut:null,chatQueue:null,chat:"",sitOutValue:null,dummyCardsCount:2,forceBlind:[],gameChatInfo:[],chatLimit:1,chatCount:0,myCards:[],K:null,moveData:null,sitData:null,player:null,popUpManager:null,antiBankingTimer:null,number0:0,number1:null},onLoad:function(){this.postBigBlindUserFlake=!0,this.chatLimit=20,this.K=K,this.moveData=e("PostTypes").MoveData,this.sitData=e("PostTypes").SitData,this.player=e("ResponseTypes").Player,this.valueChange=!0;var t=this.node.children[0];this.presenter=t.getComponent("PokerPresenter")||t.getComponent("OFCPresenter")},onDestroy:function(){this.kickPlayerOutOfTheGame(this),cc.director.getActionManager().removeAllActions(),this.gameModel.removeBroadcastCallbacks(this.gameData.channelId)},initiliazePoker:function(e){if(this.chatQueue=new p,this.gameData=e.gameData,e.tourData&&(this.tourData=e.tourData),this.isPrivateTable=e.tableDetails.isPrivate,this.roomConfig=e.roomConfig,this.roomConfig.tournamentType=e.roomConfig.tournamentType,this.roomConfig.originalMinBuyIn=this.roomConfig.minBuyIn,this.roomConfig.originalMaxBuyIn=this.roomConfig.maxBuyIn,this.roomConfig.extraAntiBankCase=!1,this.postBigBlindUserFlake=e.isForceBlindEnable,this.alreadyKickingOut=!1,e.roomConfig.channelVariation!=this.K.Variation.OpenFaceChinesePoker&&this.gameData.antibanking.isAntiBanking&&this.roomConfig.minBuyIn<this.gameData.antibanking.amount&&(this.antiBankingTimer=setTimeout(function(){this.gameData&&this.roomConfig&&(this.gameData.antibanking.isAntiBanking=!1,this.roomConfig.extraAntiBankCase=!1,this.roomConfig.minBuyIn=this.roomConfig.originalMinBuyIn,this.roomConfig.maxBuyIn=this.roomConfig.originalMaxBuyIn)}.bind(this),1e3*this.gameData.antibanking.timeRemains),this.roomConfig.minBuyIn=this.gameData.antibanking.amount,this.roomConfig.minBuyIn>=this.roomConfig.maxBuyIn&&(this.roomConfig.extraAntiBankCase=!0,this.roomConfig.maxBuyIn=this.roomConfig.minBuyIn)),this.sitOutValue=g.None,GameManager.user&&(GameManager.user.autoBuyIn=!1),this.registerBroadcasts(),this.onInitializePoker(),this.generateHoleCards(this.gameData.tableDetails.boardCard,!1),this.onGameStateChange(),-1!=this.getPlayerById(this.gameData.playerId)&&(this.myCards=this.getMyPlayer().cards,this.getMyPlayer().isTournamentSitout&&(this.getMyPlayer().state=K.PlayerState.OnBreak,this.sitOutValue=g.SitOutNextHand),this.getMyPlayer().state===K.PlayerState.Reserved&&this.emit("ReservedState",{extraAntiBankCase:this.roomConfig.extraAntiBankCase})),this.gameData.tableDetails.players.length>0&&this.getPlayerNotes(),this.emit(K.PokerEvents.OnJoin,this.gameData),this.gameData.tableDetails.state===K.GameState.Running){if(-1!==this.gameData.tableDetails.currentMoveIndex)if(this.gameData.tableDetails.isTimeBankUsed)t=this.gameData.tableDetails.totalTimeBank,this.startTimerTick(t,t-this.gameData.tableDetails.timeBankLeft),this.emit(K.PokerEvents.onTimeBank);else{var t=this.gameData.tableDetails.additionalTurnTime;this.startTimerTick(t,t-this.gameData.tableDetails.remainingMoveTime)}this.emit(K.PokerEvents.onBestHand)}GameManager.playerRequestedToLeaveTable[this.gameData.channelId]=!1,this.gameData.tableDetails.isForceRit&&(this.presenter.runItTwiceCB.node.parent.active=!1)},onAntiBankingUpdate:function(e){null!=this.antiBankingTimer&&(clearTimeout(this.antiBankingTimer),this.antiBankingTimer=null),e.isAntiBanking?(this.roomConfig.minBuyIn=e.amount,this.antiBankingTimer=setTimeout(function(){this.gameData.antibanking.isAntiBanking=!1,this.roomConfig.extraAntiBankCase=!1,this.roomConfig.minBuyIn=this.roomConfig.originalMinBuyIn,this.roomConfig.maxBuyIn=this.roomConfig.originalMaxBuyIn}.bind(this),1e3*e.timeRemains)):(this.gameData.antibanking.isAntiBanking=!1,this.roomConfig.extraAntiBankCase=!1,this.roomConfig.minBuyIn=this.roomConfig.originalMinBuyIn,this.roomConfig.maxBuyIn=this.roomConfig.originalMaxBuyIn),this.roomConfig.minBuyIn>=this.roomConfig.maxBuyIn?(this.roomConfig.extraAntiBankCase=!0,this.roomConfig.maxBuyIn=this.roomConfig.minBuyIn):this.roomConfig.extraAntiBankCase=!1},getMyPlayer:function(){return-1!=this.getPlayerById(this.gameData.playerId)?this.gameData.tableDetails.players[this.getPlayerById(this.gameData.playerId)]:null},isPlayerStandUp:function(){return-1==this.getPlayerById(this.gameData.playerId)},isMe:function(e){return e==this.gameData.playerId},isSeatEmpty:function(){return this.roomConfig.maxPlayers>this.gameData.tableDetails.players.length},onInitializePoker:function(){this.isOptionalPlayerInputActive=!1,this.optionalPlayerInput=this.node.getParent().children[0].getChildByName("OptionalPlayerInput"),this.optionalPlayerInput.children.forEach(function(e){e.children.forEach(function(e){1==e.active&&(this.isOptionalPlayerInputActive=!0)},this)},this),GameManager.gameModel.activePokerModels.length>=2&&!GameManager.isMobile&&!GameManager.isWindows&&GameScreen.viewType},getPlayerBySeat:function(e){for(var t=-1,a=0;a<this.gameData.tableDetails.players.length;a++)if(this.gameData.tableDetails.players[a].seatIndex===e){t=a;break}return t},getPlayerNotes:function(){for(var e=0;e<this.gameData.tableDetails.players.length;e++)this.getNote(this.gameData.tableDetails.players[e].playerId)},getPlayerById:function(e){for(var t=-1,a=0;a<this.gameData.tableDetails.players.length;a++)if(this.gameData.tableDetails.players[a].playerId===e){t=a;break}return t},sitHere:function(e,t,a){var n=new this.sitData(this.gameData.channelId,this.gameData.playerId,t,e,this.gameData.playerName,GameManager.user.profileImage,GameManager.user.autoBuyIn);ServerCom.pomeloRequest(this.K.PomeloAPI.sitHere,n,function(e){e.success?(null!=a&&a(),this.sitOutValue=g.None):GameManager.popUpManager.show(m.NotificationPopup,e.info,function(){})}.bind(this),null,5e3,!1)},leaveNextHand:function(e){ServerCom.pomeloRequest("room.channelHandler.leaveNextHand",{channelId:this.gameData.channelId,playerId:this.gameData.playerId,isRequested:!0},function(t){console.log("leaveNextHand",t),t.success&&null!=e&&e()}.bind(this),null,5e3,!1)},rebuy:function(e,t,a,n,i){ServerCom.socketIORequest("tournamentGameEvent|reBuy",{channelId:e,playerId:t,tournamentId:a},n,i,null,!1)},addon:function(e,t,a,n,i){ServerCom.socketIORequest("tournamentGameEvent|addOn",{channelId:e,playerId:t,tournamentId:a},n,i,null,!1)},sitOutNextHand:function(e){var t=new o(this.gameData.channelId,this.gameData.playerId);ServerCom.pomeloRequest(this.K.PomeloAPI.sitOutNextHand,t,function(t){t.success?this.sitOutValue=g.SitOutNextHand:this.sitOutValue=g.None,null!=e&&e(t)}.bind(this),null,5e3,!1)},sitOutNextBB:function(e){var t=new o(this.gameData.channelId,this.gameData.playerId);ServerCom.pomeloRequest(this.K.PomeloAPI.sitOutNextBigBlind,t,function(t){t.success&&(this.sitOutValue=g.SitOueNextBB),null!=e&&e(t)}.bind(this),null,5e3,!1)},resetSitout:function(e){var t=new s(this.gameData.channelId,this.gameData.playerId);ServerCom.pomeloRequest(this.K.PomeloAPI.resetSitout,t,function(t){t.success&&(this.sitOutValue=g.None),null!=e&&e(t)}.bind(this),null,5e3,!1)},addChips:function(e,t){var a=new n(this.gameData.channelId,this.gameData.playerId,e);ServerCom.pomeloRequest(this.K.PomeloAPI.addChips,a,function(e){e.success&&null!=t&&t()},null,5e3,!1)},resume:function(e){var t=new o(this.gameData.channelId,this.gameData.playerId);ServerCom.pomeloRequest(this.K.PomeloAPI.resume,t,function(t){if(t.success){this.sitOutValue=g.None;var a=this.gameData.tableDetails.players[this.getPlayerById(this.gameData.playerId)];a.state=t.state,a.isTournamentSitout&&(a.isTournamentSitout=!1,a.state=K.PlayerState.Playing),null!=e&&e()}}.bind(this),null,5e3,!1)},makeMove:function(e,t){var a=new this.moveData(this.gameData.channelId,this.gameData.playerId,this.gameData.playerName,e,t);a.access_token=K.Token.access_token,console.log("makeMove",a),cc.audioEngine.stopAllEffects(),ServerCom.pomeloRequest(this.K.PomeloAPI.makeMove,a,function(){},null,5e3,!1)},leave:function(e){clearInterval(this.timerRef);var t=this,n=new a(this.gameData.playerId,this.gameData.channelId,e);n.playerName=this.gameData.playerName,ServerCom.pomeloRequest(this.K.PomeloAPI.leaveTable,n,function(a){a.success||t.gameData.channelType==K.ChannelType.Tournament?(t.emit(K.PokerEvents.onPlayerStandUp),t.sitOutValue=g.None,e||(ServerCom.loading.active=!0,t.alreadyKickingOut=!0,t.kickPlayerOutOfTheGame(t))):GameManager.playerRequestedToLeaveTable[t.gameData.channelId]=!1,!a.success&&a.info&&t.leaveNextHand(function(){GameManager.popUpManager.show(m.NotificationPopup,"You will leave the game after this hand.",function(){}),t.emit("leaveNextHand")})},null,5e3,!1,t.gameData.channelType!=K.ChannelType.Tournament)},leaveClosedTable:function(){clearInterval(this.timerRef),this.emit(K.PokerEvents.onPlayerStandUp),this.sitOutValue=g.None,this.alreadyKickingOut=!0,this.kickPlayerOutOfTheGame(this)},kickPlayerOutOfTheGame:function(e){clearTimeout(e.antiBankingTimer),this.emit("clearTimers",null),e.gameModel&&e.gameModel.onLeave(e)},postConnectedAck:function(){var e=new i(this.gameData.channelId,this.gameData.playerId);ServerCom.pomeloRequest(this.K.PomeloAPI.connectionAck,e,function(e){e.success},null,5e3,!1)},setStraddleSelection:function(e){var t=new r(this.gameData.channelId,this.gameData.playerId,"isStraddleOpted",e);ServerCom.pomeloRequest(this.K.PomeloAPI.setPlayerValOnTable,t,function(e){e.success},null,5e3,!1)},setPostBigBlind:function(e){var t=new r(this.gameData.channelId,this.gameData.playerId,"isForceBlindEnable",e);this.postBigBlindUserFlake=e,ServerCom.pomeloRequest(this.K.PomeloAPI.setPlayerValOnTable,t,function(e){e.success},null,5e3,!1)},setRunItTwice:function(e,t){var a=new r(this.gameData.channelId,this.gameData.playerId,"isRunItTwice",e);ServerCom.pomeloRequest(this.K.PomeloAPI.setPlayerValOnTable,a,function(e){t&&t(e),e.success},null,5e3,!1)},getNote:function(e){new l(GameManager.user.playerId,e)},updateNotes:function(e,t,a){this.gameData.tableDetails.players[this.getPlayerById(e)].noteColor=t,this.gameData.tableDetails.players[this.getPlayerById(e)].noteText=a,this.emit(K.PokerEvents.onPlayerNotes,e)},getHandTab:function(){var e={};e.channelId=this.gameData.channelId,this.handTabs=[],ServerCom.pomeloRequest(this.K.PomeloAPI.getHandTab,e,function(e){e.success&&(e.handHistory.forEach(function(e){this.handTabs.push(e)},this),this.emit(K.PokerEvents.onHandTab,this))}.bind(this),null,5e3,!1,!1)},getHandHistory:function(e,t,a){void 0===a&&(a=!1);var n={};n.channelId=this.gameData.channelId,n.handHistoryId=e,ServerCom.pomeloRequest(this.K.PomeloAPI.getHandHistory,n,function(e){if(e.success){var n={heading:"Hand History",info:e.handHistory.historyLog};a||(GameScreen.isMobile,this.popUpManager.show(m.HandHistoryPopup,n,function(){})),t&&t(n)}}.bind(this),null,5e3,!1,!0)},showHandHistoryDetail:function(){this.popUpManager.show(m.HandHistoryDetailPopup,{},function(){})},setAutoRebuyCheckbox:function(){var e={};e.playerId=GameManager.user.playerId,e.channelId=this.gameData.channelId,ServerCom.pomeloRequest(this.K.PomeloAPI.setAutoRebuy,e,function(e){e.success&&callback&&callback(e)}.bind(this),null,5e3,!1,!1)},setDoubleRebuy:function(){ServerCom.pomeloRequest(this.K.PomeloAPI.setDoubleRebuy,{playerId:"",channelId:""},function(e){e.success&&callback&&callback(e)}.bind(this),null,5e3,!1,!1)},saveReplay:function(){var e=new c(this.gameData.channelId,this.gameData.tableDetails.roundId,JSON.parse(cc.sys.localStorage.getItem(this.gameData.channelId)));ServerCom.pomeloRequest(this.K.PomeloAPI.saveVideo,e,function(e){e.success}.bind(this),null,5e3,!1,!0)},getVideo:function(e,t){var a={};a.videoLogId=e,ServerCom.pomeloRequest(this.K.PomeloAPI.getVideo,a,function(e){e.success&&t&&t(e)}.bind(this),null,5e3,!1,!0)},fireMuckHandEvent:function(){var e={};e.channelId=this.gameData.channelId,e.data={seatIdx:this.getMyPlayer().seatIndex},e.route=this.K.BroadcastRoute.onFireEvent,ServerCom.pomeloRequest(this.K.PomeloAPI.fireChannelEvent,e,function(e){e.success}.bind(this),null,5e3,!1,!0)},registerBroadcasts:function(){this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.sit,this.onSit.bind(this)),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.blindDeduction,this.onBlindDeducted.bind(this)),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.bankrupt,this.onBankrupt.bind(this)),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.gamePlayers,this.onGamePlayers.bind(this)),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.dealerrChat,this.onDealerChat.bind(this)),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.startGame,this.onGameStart.bind(this)),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.turn,this.onMoveMade.bind(this)),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.roundOver,this.onRoundOver.bind(this)),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.gameOver,this.onGameOver.bind(this)),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.leave,this.onLeft.bind(this)),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.chat,this.onChat.bind(this)),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.playerCards,this.onPlayerCards.bind(this)),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.playerState,this.onPlayerStateChange.bind(this)),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.connectionAck,this.onConnectionAck.bind(this)),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.preCheck,this.onPreCheck.bind(this)),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.playerCoins,this.onPlayerCoins.bind(this)),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.avatarChange,this.onAvatarChange.bind(this)),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.handTab,this.onHandTab.bind(this)),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.bestHands,this.onBestHands.bind(this)),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.onTimeBank,this.onTimeBank.bind(this)),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.onFireEvent,this.onFireEvent.bind(this)),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.antiBankingUpdatedData,this.onAntiBankingUpdate.bind(this)),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BroadcastRoute.sendSticker,this.onSendSticker.bind(this)),this.gameModel.registerBroadcastCallbacks(this.gameData.channelId,this.K.BuddyBroadcast.friendRequestReceived,this.onFriendRequestReceived.bind(this))},onFriendRequestReceived:function(e){console.log("onFriendRequestReceived Broadcast ",e)},onFireEvent:function(e){null!=e.seatIdx&&null!=e.seatIdx||(e.seatIdx=e.seatIndex),this.getMyPlayer()&&e.seatIdx==this.getMyPlayer().seatIndex||this.emit(K.PokerEvents.onChannelEvent,e.seatIdx)},onTimeBank:function(e){var t=this.getPlayerById(e.playerId);if(-1!==t){var a=this.gameData.tableDetails.players[t];this.gameData.tableDetails.currentMoveIndex==a.seatIndex&&this.startTimerTick(e.totalTimeBank),this.emit(K.PokerEvents.onTimeBank,e)}},onGameOver:function(e){for(var t=this,a={},n=0;n<e.cardsToShow.length;n++)a[e.cardsToShow[n].playerId]=e.cardsToShow[n].cards;e.cardsToShow=a;var i=[];e.winners.forEach(function(e){this.gameData.tableDetails.players[this.getPlayerById(e.playerId)]&&(this.isVideo||(this.gameData.tableDetails.players[this.getPlayerById(e.playerId)].chips=e.chips),this.gameData.tableDetails.players[this.getPlayerById(e.playerId)].__isMuckHand=e.isMuckHand)},this);var o=null;if(e.endingType!=K.GameEndType.OnePlayerLeft)for(o in e.cardsToShow){var s=null;this.gameData.tableDetails.players[this.getPlayerById(o)]&&(s=this.gameData.tableDetails.players[this.getPlayerById(o)],i.push(s.seatIndex),s.cards=e.cardsToShow[o])}if(e.gameOverBestHands){var r=0,l=this.number0,c=this.number1;5!=l||0!=c&&5!=c||(r=2e3),setTimeout(function(){t.onBestHandsGameOver(e.gameOverBestHands,e.winners)},r)}this.clearTotalRoundBet(),this.gameData.tableDetails.roundMaxBet=0,this.gameData.tableDetails.state=K.GameState.GameOver,this.onGameStateChange(),this.clearTimerTick(),this.emit(K.PokerEvents.onTurnInOtherRoom,this,!1),this.emit(K.PokerEvents.OnGameOver,e,i)},onSit:function(e){if(-1==this.getPlayerById(e.playerId)){var t=new this.player(e),a=this.gameData.tableDetails.players.push(t);this.getNote(e.playerId),this.emit(K.PokerEvents.OnSit,t,a-1)}},updateTotalPot:function(){this.gameData.tableDetails.totalPot=0;for(var e=0;e<this.gameData.tableDetails.pot.length;e++)this.gameData.tableDetails.totalPot+=this.gameData.tableDetails.pot[e]},onBlindDeducted:function(e){for(var t={},a=0;a<e.forceBlind.length;a++)t[e.forceBlind[a].playerId]=e.forceBlind[a].chips;e.forceBlind=t;var n="";for(n in e.forceBlind){var i=this.gameData.tableDetails.players[this.getPlayerById(n)];i.seatIndex!=e.smallBlindIndex&&i.seatIndex!=e.bigBlindIndex&&i.seatIndex!=e.straddleIndex&&(this.gameData.tableDetails.players[this.getPlayerById(n)].totalRoundBet=e.forceBlind[n],this.gameData.tableDetails.players[this.getPlayerById(n)].chips=this.gameData.tableDetails.players[this.getPlayerById(n)].chips-e.forceBlind[n])}this.roomConfig.smallBlind=e.tableSmallBlind,this.roomConfig.bigBlind=e.tableBigBlind,this.gameData.tableDetails.pot=e.pot,this.gameData.tableDetails.totalPot=e.totalPot,this.gameData.tableDetails.players.forEach(function(t){if(e.ante&&(t.ante=e.ante[t.playerId]||0,t.chips-=e.ante[t.playerId]||0),t.seatIndex===e.smallBlindIndex)t.totalRoundBet=e.smallBlind,t.chips=e.smallBlindChips;else if(t.seatIndex===e.bigBlindIndex)t.totalRoundBet=e.bigBlind,t.chips=e.bigBlindChips;else if(t.seatIndex===e.straddleIndex){if(-1===e.straddleChips)return;t.totalRoundBet=t.chips-e.straddleChips,t.chips=e.straddleChips}},this),this.emit(K.PokerEvents.OnBlindDeduction,e)},onBankrupt:function(e){e.playerId===this.gameData.playerId&&this.emit(K.PokerEvents.OnBankrupt,{})},onMoveMade:function(e){var t;""!=e.playerId&&this.gameData.tableDetails.players[this.getPlayerById(e.playerId)]&&(this.gameData.tableDetails.players[this.getPlayerById(e.playerId)].totalRoundLastBet=e.lastPlayerBet+this.gameData.tableDetails.players[this.getPlayerById(e.playerId)].totalRoundBet),e.isRoundOver&&this.clearTotalRoundBet(),this.gameData.tableDetails.currentMoveIndex=""===e.currentMoveIndex?-1:e.currentMoveIndex,this.gameData.tableDetails.roundMaxBet=e.roundMaxBet,this.gameData.tableDetails.pot=e.pot,this.gameData.tableDetails.totalPot=e.totalPot,this.gameData.tableDetails.minRaiseAmount=e.minRaiseAmount,this.gameData.tableDetails.maxRaiseAmount=e.maxRaiseAmount,""!=e.playerId&&this.gameData.tableDetails.players[this.getPlayerById(e.playerId)]?(t=this.getPlayerById(e.playerId),this.gameData.tableDetails.players[t].chips=e.chips,this.gameData.tableDetails.players[t].lastMove=e.action,this.gameData.tableDetails.players[t].lastBet=e.amount,this.gameData.tableDetails.players[t].moves=e.moves,this.gameData.tableDetails.players[t].totalRoundBet=e.totalRoundBet):t=null,this.gameData.tableDetails.roundName=e.roundName,-1!=this.gameData.tableDetails.currentMoveIndex?e.isRoundOver?(this.clearTimerTick(),setTimeout(function(){cc.isValid(this.node)&&this.startTimerTick(this.gameData.tableDetails.turnTime)}.bind(this),1400)):this.startTimerTick(this.gameData.tableDetails.turnTime):this.clearTimerTick(),this.emit(K.PokerEvents.OnTurn,e,t)},clearTotalRoundBet:function(){for(var e=0;e<this.gameData.tableDetails.players.length;e++)this.gameData.tableDetails.players[e].totalRoundBet=0},onGameStateChange:function(){null!==this.timeOut&&clearTimeout(this.timeOut),this.emit(K.PokerEvents.onGameStateChange,this.gameData.tableDetails.state)},onGamePlayers:function(e){if(!this.isVideo){this.gameData.tableDetails.boardCard=[[],[]];for(var t=0;t<e.players.length;t++){var a=this.getPlayerById(e.players[t].playerId);(i=this.gameData.tableDetails.players[a]).reset(e.players[t]),this.emit(K.PokerEvents.OnPlayerStateChange,i)}for(this.gameData.tableDetails.state=K.GameState.Idle,this.onGameStateChange(),a=this.gameData.tableDetails.players.length-1;a>=0;a--){console.log("1this.gameData.tableDetails.players",a),console.log("1this.gameData.tableDetails.players",this.gameData.tableDetails.players[a].playerId);var n=!1;for(t=0;t<e.players.length;t++)this.gameData.tableDetails.players[a].playerId===e.players[t].playerId&&(n=!0);n||((o={}).playerId=this.gameData.tableDetails.players[a].playerId,console.log("!isContinuing",o.playerId),this.onLeft(o))}for(this.clearTotalRoundBet(),this.emit(K.PokerEvents.OnClearHoleCards),this.gameData.tableDetails.roundMaxBet=0,t=0;t<e.removed.length;t++)e.removed[t]&&((o={}).playerId=e.removed[t],this.onLeft(o));var i,o;if(this.getMyPlayer())(i=this.getMyPlayer()).state===K.PlayerState.Playing?((o={}).seatIndex=i.seatIndex,this.emit(K.PokerEvents.onRotateView,o)):i.state===K.PlayerState.OutOfMoney&&(this.roomConfig.minBuyIn=this.roomConfig.originalMinBuyIn,this.roomConfig.maxBuyIn=this.roomConfig.originalMaxBuyIn,this.emit(K.PokerEvents.OnBankrupt,{})),i.isTournamentSitout&&(i.state=K.PlayerState.OnBreak,this.sitOutValue=g.SitOutNextHand),i.state===K.PlayerState.OnBreak&&(this.sitOutValue=g.SitOutNextHand),this.emit(K.PokerEvents.onBestHand);this.emit(K.PokerEvents.OnGamePlayers)}},startTimerTick:function(e,t){this.clearTimerTick();var a=new Date,n=0;arguments.length>1&&(n=1e3*t);var i,o=a.getTime()+1e3*e;this.timer=setInterval(function(){a=new Date;var t=(o-a-n)/1e3;if((i=t/e)<=0)return this.emit(K.PokerEvents.onTimerTick,i,t),void this.clearTimerTick();t=Math.floor(t),this.emit(K.PokerEvents.onTimerTick,i,t)}.bind(this),100)},clearTimerTick:function(){null!==this.timer&&void 0!==this.timer&&(clearInterval(this.timer),this.timer=null)},onPlayerStateChange:function(e){var t=this.getPlayerById(e.playerId);if(-1!==t){var a=this.gameData.tableDetails.players[t];a.state=e.state,e.playerId==this.gameData.playerId&&a.state==K.PlayerState.OnBreak&&(this.sitOutValue=g.SitOutNextHand),a.state==K.PlayerState.Disconnected&&this.gameData.tableDetails.currentMoveIndex==this.gameData.tableDetails.players[t].seatIndex&&e.resetTimer&&this.startTimerTick(this.gameData.tableDetails.extraTurnTime),this.emit(K.PokerEvents.OnPlayerStateChange,a),this.emit(K.PokerEvents.onBestHand)}},onLeft:function(e){if(console.log("onLeft1"),!this.alreadyKickingOut){console.log("onLeft2");var t=null,a=this.getPlayerById(e.playerId);console.log("onLeft3"),-1!==a?(console.log("onLeft4"),t=this.gameData.tableDetails.players.splice(a,1)):(console.log("onLeft5"),this.isMe(e.playerId)&&(console.log("onLeft6"),this.kickPlayerOutOfTheGame(this))),console.log("onLeft7"),this.emit(K.PokerEvents.OnLeave,t)}},onGameStart:function(e){this.gameData.tableDetails.dealerIndex=e.dealerIndex,this.gameData.tableDetails.smallBlindIndex=e.smallBlindIndex,this.gameData.tableDetails.bigBlindIndex=e.bigBlindIndex,this.gameData.tableDetails.straddleIndex=e.straddleIndex,this.gameData.tableDetails.currentMoveIndex=null==e.currentMoveIndex?-1:e.currentMoveIndex,this.gameData.tableDetails.bigBlind=e.bigBlind,this.gameData.tableDetails.smallBlind=e.smallBlind,this.gameData.tableDetails.roundMaxBet=e.roundMaxBet,this.gameData.tableDetails.state=e.state,this.gameData.tableDetails.roundName=e.roundName,this.gameData.tableDetails.minRaiseAmount=e.minRaiseAmount,this.gameData.tableDetails.maxRaiseAmount=e.maxRaiseAmount,this.gameData.tableDetails.roundId=e.roundId,this.gameData.tableDetails.roundNumber=e.roundNumber,this.onGameStateChange(),this.emit(K.PokerEvents.OnStartGame,e)},handleDefaultRunItTwice:function(){this.gameData.tableDetails.isForceRit&&!this.isPlayerStandUp()&&this.getMyPlayer().state!=K.PlayerState.OnBreak&&(this.presenter.runItTwiceCB.node.parent.active=!1,this.setRunItTwice(!0,function(){}.bind(this)))},handlePlayerCards:function(e){this.gameData.tableDetails.players.forEach(function(t){var a=e[t.playerId];t.cards=a},this)},getSuit:function(e){return"spade"===e?K.Suit.Spade:"heart"===e?K.Suit.Heart:"club"===e?K.Suit.Club:"diamond"===e?K.Suit.Diamond:void 0},generateHoleCards:function(e,t){void 0===t&&(t=!0);var a=[[],[]],n=0;e.forEach(function(e){e.forEach(function(e){if(e){var t=this.getSuit(e.type),i=new u(e.rank,t);a[n].push(i)}else a[n].push(null)},this),n++},this),this.emit(K.PokerEvents.OnHoleCard,a,t)},onRoundOver:function(e){var t=this,a=1;this.number0=e.boardCard[0].length,this.number1=e.boardCard[1].length,this.gameData.tableDetails.roundName=e.roundName,this.emit(K.PokerEvents.OnRoundOver,e),e.roundName==K.Round.Showdown&&0!=e.boardCard[1].length&&this.gameData.tableDetails.boardCard[0].forEach(function(){t.gameData.tableDetails.boardCard[1].push(null)});var n=0;e.boardCard.forEach(function(e){e.forEach(function(e){this.gameData.tableDetails.boardCard[n].push(e)},this),n++},this);var i=this.gameData.tableDetails.boardCard[0].filter(function(e,t,a){return!e||t===a.findIndex(function(t){return!!t&&t.rank==e.rank&&t.type==e.type})});this.gameData.tableDetails.boardCard[0].length=0,i.forEach(function(e){this.gameData.tableDetails.boardCard[0].push(e)},this);var o=this.gameData.tableDetails.boardCard[1].filter(function(e,t,a){return!e||t===a.findIndex(function(t){return!!t&&t.rank==e.rank&&t.type==e.type})});this.gameData.tableDetails.boardCard[1].length=0,o.forEach(function(e){this.gameData.tableDetails.boardCard[1].push(e)},this),5==this.number0&&5==this.number1?a=3e3:5==this.number0&&0==this.number1&&(a=2e3),setTimeout(function(){cc.isValid(this.node)&&this.gameData&&this.generateHoleCards(this.gameData.tableDetails.boardCard)}.bind(this),a)},gameChat:function(e,t,a,n,i){e==K.PokerEvents.OnChat&&(this.chat=i.message+"||"+(Number(i.profileImage)-1)),i.orgMsg=i.message,i.message=t+n+": "+a+i.message+"</c>",this.emit(e,i)},onDealerChat:function(e){this.gameData.settings.dealerChat&&this.emit(K.PokerEvents.OnDealerChat,e)},onChat:function(e){e.playerId&&GameManager.isPlayerMute(e.playerId)||this.gameData.settings.playerChat&&!this.isPlayerStandUp()&&this.emit(K.PokerEvents.OnChat,e)},onPlayerCards:function(e){var t=this.getPlayerById(e.playerId),a=e.cards;this.gameData.tableDetails.players[t].cards=a;var n=[];a.forEach(function(e){var t=this.getSuit(e.type);n.push(new u(e.rank,t))},this),e.playerId==this.gameData.playerId&&(this.myCards=a),this.emit(K.PokerEvents.OnPlayerCard,n,this.gameData.tableDetails.players[t].seatIndex)},onConnectionAck:function(){this.postConnectedAck()},onPreCheck:function(e){this.emit(K.PokerEvents.onPreCheck,e)},onPlayerCoins:function(e){if(e.channelId==this.gameData.channelId){var t=this.getPlayerById(e.playerId);this.gameData.tableDetails.players[t].chips=e.amount,this.emit(K.PokerEvents.onPlayerCoins,this.gameData.tableDetails.players[t])}},onAvatarChange:function(e){var t=this.gameData.tableDetails.players[this.getPlayerById(e.playerId)];t&&h(e.avtarImage,t)},onSendSticker:function(e){GameManager.emit(K.PokerEvents.onSendSticker,e)},onHandTab:function(e){this.handTabs||(this.handTabs=[]),this.handTabs.length>10&&this.handTabs.shift(),e.handTab.myCards=this.myCards,this.myCards=[],this.handTabs.push(e.handTab),this.emit(K.PokerEvents.onHandTab,this)},onBestHands:function(e){if(this.gameData.showHandStrength&&this.getMyPlayer()){this.getMyPlayer().bestHand=e.bestHand;var t=this.getPlayerById(e.playerId);this.presenter.getPlayerByIdx(t).onBestHand(e.bestHand),this.emit(K.PokerEvents.onBestHand)}},onBestHandsGameOver:function(e,t){for(var a=0;a<e.length;a++){var n=this.getPlayerById(e[a].playerId);if(-1!=n){var i=this.presenter.getPlayerByIdx(n);if(i){for(var o=!1,s=0;s<t.length;s++)if(t[s].playerId==e[a].playerId){o=!0;break}i.onBestHandsGameOver(e[a].bestHand,o)}}}},onRebuyActivated:function(e){this.emit("rebuyActivated",e)},onRebuyDeactivated:function(e){this.emit("rebuyDeactivated",e)},onResRebuy:function(e){this.emit("resRebuy",e)},onResAddon:function(e){this.emit("resAddon",e)},onInactiveKicked:function(e){this.emit("inactiveKicked",e)},onTournamentCancelled:function(e){this.emit("TournamentCancelled",e)},getCardByData:function(e){var t=this.getSuit(e.type);return new u(e.rank,t)},onPlayerRankChange:function(e){this.emit(K.PokerEvents.onPlayerRankChange,e)},setMuckHand:function(e,t){var a=new r(this.gameData.channelId,this.gameData.playerId,"isMuckHand",e);ServerCom.pomeloRequest(K.PomeloAPI.updateTableSettings,a,function(e){e.success&&(this.gameData.settings.isMuckHand=!this.gameData.settings.isMuckHand),t&&t(e)}.bind(this),null,5e3,!1)}});t.exports={SitOutMode:g,PokerModel:f},cc._RF.pop()},{CardTypes:"CardTypes",EventEmitter:"EventEmitter",PopUpManager:"PopUpManager",PostTypes:"PostTypes","Queue.src":"Queue.src",ResponseTypes:"ResponseTypes"}],PokerPresenter:[function(e,t){"use strict";cc._RF.push(t,"36209yBeoRPuq+HLaSgpMyD","PokerPresenter");var a=e("PokerModel").PokerModel,n=e("BetBtnUtil"),i=e("PlayerPresenter"),o=e("PopUpManager").PopUpManager,s=e("PopUpManager").PopUpType,r=(e("CardTypes").Card,e("CardTypes").Suit,e("OptionalPlayerInput")),l=e("PotSplitter"),c=e("CardDistributer"),d=e("Checkbox"),h=e("PokerModel").SitOutMode,u=e("StickerController"),p=e("Toggle"),m=e("PostTypes").Login;cc.Class({extends:cc.Component,properties:{addChipsButton:{default:null,type:cc.Node},BBToggle:{default:null,type:p},inviteFirendsList:{default:null,type:cc.Node},realBetBtn:{default:null,type:cc.Node},realRaiseBtn:{default:null,type:cc.Node},playerChatBtn:{default:null,type:cc.Node},tableTheme:{default:null,type:cc.Node},settingAvatar:{default:null,type:cc.Node},dealerChatToggle:{default:null,type:p},ChatToggle:{default:null,type:p},dealerChatBtn:{default:null,type:cc.Node},playreChatBtn:{default:null,type:cc.Node},reportBug:{default:null,type:cc.Node},tableClosed:{default:null,type:cc.Node},playerInfoPopup:{default:null,type:cc.Node},gameOptionButton:{default:null,type:cc.Node},gameResultButton:{default:null,type:cc.Node},gameLeaveButton:{default:null,type:cc.Node},gameResult:{default:null,type:cc.Node},model:{default:null,type:a},playerName:{default:null,type:cc.Label},playerTribeName:{default:null,type:cc.Label},image:{default:null,type:cc.Sprite},stickerCtrl:{default:null,type:u},popUpManager:{default:null,type:o},ninePlayerView:{default:null,type:cc.Prefab},eightPlayerView:{default:null,type:cc.Prefab},sevenPlayerView:{default:null,type:cc.Prefab},sixPlayerView:{default:null,type:cc.Prefab},fivePlayerView:{default:null,type:cc.Prefab},fourPlayerView:{default:null,type:cc.Prefab},threePlayerView:{default:null,type:cc.Prefab},twoPlayerView:{default:null,type:cc.Prefab},rightSeatPrefab:{default:null,type:cc.Prefab},leftSeatPrefab:{default:null,type:cc.Prefab},placeholderParent:{default:null,type:cc.Node},placeHolder:{default:null,type:cc.Node},tiledToggle:{default:null,type:cc.Node},untiledToggle:{default:null,type:cc.Node},callAmountLabel:{default:null,type:cc.Label},mobileCallAmountLabel:{default:null,type:cc.Label},playerInputNode:{default:null,type:cc.Node},raisePanelNode:{default:null,type:cc.Node},playerInput:{default:[],type:cc.Node},mobilePlayerInput:{default:[],type:cc.Node},isMobile:!1,optionalPlayerInput:{default:null,type:r},betBtnSlider:{default:null,type:n},tileBetBtnSlider:{default:null,type:n},cardPrefab:{default:null,type:cc.Prefab},holeCardHolder:{default:null,type:cc.Node},runItTwiceHolder:{default:null,type:cc.Node},holeCardsWithTwiceHolder:{default:null,type:cc.Node},playerHand:{default:[],type:[i]},potAmount:{default:[],type:cc.Node},gameOverLabel:{default:null,type:cc.Label},resetTimer:{default:null},potAnimator:{default:null,type:l},cardDistributer:{default:null,type:c},indexOffset:{default:0},maxSeatIndex:{default:9},selfSeatIndex:{default:5},roomNameLbl:{default:null,type:cc.Label},roomNameLbl2:{default:null,type:cc.Label},table:{default:null,type:cc.Sprite},tableColors:{default:[],type:cc.SpriteFrame},tableHighlightColors:{default:[],type:cc.SpriteFrame},colorChangeCb:{default:null},highlightBg:{default:null,type:cc.Sprite},highLightCheckbox:{default:null,type:d},sitOutNextHandCheckBox:{default:null,type:d},leaveNextHandCheckBox:{default:null,type:d},leaveNextHandTag:{default:null,type:cc.Node},straddleCheckBox:{default:null,type:d},autoBuyInCheckBox:{default:null,type:d},autoAddOnCheckBox:{default:null,type:d},tiledView:{default:null,type:cc.Node},unTiledView:{default:null,type:cc.Node},resumeBtn:{default:null,type:cc.Node},sitOutBtns:{default:null,type:cc.Node},totalPotLbl:{default:null,type:cc.Label},postBigBlindCheckBox:{default:null,type:d},cardTimers:null,K:null,rebuyBtn:{default:null,type:cc.Node},bestHand:{default:null,type:cc.Label},joinBtn:{default:null,type:cc.Label},showFoldBtn:{default:null,type:cc.Label},chatPanel:{default:null,type:cc.Node},timerSchedule:null,timerOffSchedule:null,chatSubmitBtn:{default:null,type:cc.Button},runItTwiceCB:{default:null,type:d},replayBtn:{default:null,type:cc.Node},chatEditBox:{default:null,type:cc.EditBox},chatBtn:{type:cc.Node,default:null},preferencesPopUp:{default:null,type:cc.Node},mobGameOptions:{default:null,type:cc.Node},muckHandNode:{default:null,type:cc.Node},notificationBox:{default:null,type:cc.Node},doubleRebuyBtn:{default:null,type:cc.Button},addonBtn:{default:null,type:cc.Button},leaveBtn:{default:null,type:cc.Button},lobbyBtn:{default:null,type:cc.Button},fontFileName:{default:null,type:cc.Font},sureToFoldNode:{default:null,type:cc.Node},sureToLeaveNode:{default:null,type:cc.Node},winnerBannerBase:{default:null,type:cc.SpriteFrame},muckHandCheckbox:{default:null,type:d},dealerNode:{default:null,type:cc.Node},closeBtn:{default:null,type:cc.Node},chatCloseBtn:{default:null,type:cc.Node},mobileSliderChatSection:{default:null,type:cc.Node},leaderboardSection:{default:null,type:cc.Node},leaderboardDummySection:{default:null,type:cc.Node},playerChatNode:{default:null,type:cc.Node},dummyStickerPop:{default:null,type:cc.Node},nameLabel:{default:null,type:cc.Label},containerTabBtnUtil:{default:null,type:cc.Node},HandOther_Left:{default:null,type:cc.Node},showRaisePanel:{default:null,type:cc.Node},hideRaisePanel:{default:null,type:cc.Node}},onEnable:function(){},setTiledView:function(e){this.setChatPanel(e),this.checkSitoutStatus(),this.unTiledView.active=!e,this.tiledView.active=e,this.sureToFoldNode.parent.getChildByName("BuddiesPopup").getComponent("BuddiesPopup").hideIfShowing(),this.onValueChange(),this.setTableColor(),this.preferencesPopUp&&(this.preferencesPopUp.getComponent(cc.Widget).top=e?0:91),this.onSettingsBtnClose(),this.chatBtn&&(this.chatBtn.active=e)},getNumPlayerInTable:function(){var e=0;return this.model.gameData.tableDetails.players.forEach(function(t){t.state==K.PlayerState.Playing&&e++},this),e},manageBtns:function(e){this.sitOutNextHandCheckBox.node.parent.active=e;var t=this.getMyPlayer();t&&t.sitoutNextHand&&this.getMyPlayer().state==K.PlayerState.Playing&&(this.sitOutNextHandCheckBox.node.parent.active=!0),this.model.roomConfig.isAllInAndFold&&(this.straddleCheckBox.node.parent.active=!1,this.addChipsButton.active=!1),this.isStraddleAllowed(),this.checkInBetweenBlinds(),this.model.roomConfig.isAllInAndFold||(console.log("this.model.gameData.tableDetails.players.length",this.model.gameData.tableDetails.players),this.addChipsButton.active=e&&this.model.gameData.tableDetails.players.length>1),this.getMyPlayer()&&this.getMyPlayer().state!=K.PlayerState.Playing&&(this.addChipsButton.active=!1),this.disableShowFoldBtn()},loadSeats:function(){2==this.model.roomConfig.maxPlayers?this.instantiateSeats(5,this.model.roomConfig.maxPlayers,cc.instantiate(this.twoPlayerView),this.twoPlayerView,"PlayerPresenter"):3==this.model.roomConfig.maxPlayers?this.instantiateSeats(5,this.model.roomConfig.maxPlayers,cc.instantiate(this.threePlayerView),this.threePlayerView,"PlayerPresenter"):4==this.model.roomConfig.maxPlayers?this.instantiateSeats(5,this.model.roomConfig.maxPlayers,cc.instantiate(this.fourPlayerView),this.fourPlayerView,"PlayerPresenter"):5==this.model.roomConfig.maxPlayers?this.instantiateSeats(5,this.model.roomConfig.maxPlayers,cc.instantiate(this.fivePlayerView),this.fivePlayerView,"PlayerPresenter"):6==this.model.roomConfig.maxPlayers?this.instantiateSeats(5,this.model.roomConfig.maxPlayers,cc.instantiate(this.sixPlayerView),this.sixPlayerView,"PlayerPresenter"):7==this.model.roomConfig.maxPlayers?this.instantiateSeats(5,this.model.roomConfig.maxPlayers,cc.instantiate(this.sevenPlayerView),this.sevenPlayerView,"PlayerPresenter"):8==this.model.roomConfig.maxPlayers?this.instantiateSeats(5,this.model.roomConfig.maxPlayers,cc.instantiate(this.eightPlayerView),this.eightPlayerView,"PlayerPresenter"):9==this.model.roomConfig.maxPlayers&&this.instantiateSeats(5,this.model.roomConfig.maxPlayers,cc.instantiate(this.ninePlayerView),this.ninePlayerView,"PlayerPresenter")},isSeatAllowed:function(e,t,a){if(e>0&&10==a){var n=[];switch(t){case 2:n=[3,7];break;case 3:n=[2,5,8];break;case 4:n=[1,4,6,9];break;case 5:n=[1,4,5,6,9];break;case 6:n=[1,3,4,6,7,9];break;case 7:n=[1,2,3,5,7,8,9];break;case 8:n=[1,2,3,4,6,7,8,9];break;default:return!0}return-1!=n.indexOf(e)}return!0},getSelfSeatIdx:function(e){switch(e){case 2:return 1;case 3:case 4:return 2;case 5:return 3;case 6:return 2;case 7:return 4;case 8:return 3;case 9:return 5}},instantiateSeats:function(e,t,a,n,o){this.placeHolder=a,this.selfSeatIndex=this.getSelfSeatIdx(t),this.maxSeatIndex=t,this.placeholderParent.addChild(a);for(var s=a.children,r=0,l=0;l<s.length;l++)if(this.isSeatAllowed(l,t,s.length)){var c=null,d=null,h=null;l<s.length/2?(c=cc.instantiate(this.rightSeatPrefab),this.rightSeatPrefab):(c=cc.instantiate(this.leftSeatPrefab),this.leftSeatPrefab),c.setPosition(0,0),d=s[l].children[0],h=s[l].children[1];var u=c.getComponent(o);u.seatIndex=r,u.sitHerePanel.active=!0,u.occupiedPanel.active=!u.sitHerePanel.active,d&&(K.PORTRAIT||(7==t&&(7==l?d.setPosition(d.x-190,d.y+150):3==l&&d.setPosition(d.x+190,d.y+150)),GameManager.isMobile&&t>3&&(4==l?d.setPosition(d.x,d.y+20):6==l&&d.setPosition(d.x,d.y+20)),3==l&&t>8&&d.setPosition(d.x,d.y+25),5==l&&t>4&&d.setPosition(d.x+150,d.y-40)),u.setBetPosition(d.getPosition())),h&&u.setDealerPosition(h.getPosition()),K.PORTRAIT,this.selfSeatIndex==u.seatIndex?(c.scale=1.1,u.setNormalScale(1.1),u.setGrayScale(.9),cc.find("HandSitHere",c).scale=.85,cc.find("HandReserve",c).scale=.85,cc.find("HandEmpty",c).scale=.85):cc.sys.os==cc.sys.OS_IOS?(GameManager.isShorter()&&(c.scale=1.15,u.setNormalScale(1.15),u.setGrayScale(.95)),cc.find("HandSitHere",c).scale=.85,cc.find("HandReserve",c).scale=.85,cc.find("HandEmpty",c).scale=.85,GameManager.isShorter()):(c.scale=.85,u.setNormalScale(.85),u.setGrayScale(.65),cc.find("HandSitHere",c).scale=1.2,cc.find("HandReserve",c).scale=1.2,cc.find("HandEmpty",c).scale=1.2),(8==t&&8==l||6==t&&7==l||4==t&&9==l)&&(cc.find("HandSitHere",c).y+=100,cc.find("HandReserve",c).y+=100,cc.find("HandEmpty",c).y+=100),s[l].addChild(c),r++}else this.isMobile;this.playerHand=a.getComponentsInChildren(i),this.playerHand.forEach(function(e){e.pokerPresenter=this},this),this.betBtnSlider&&(this.betBtnSlider.pokerPresenter=this),this.tileBetBtnSlider&&(this.tileBetBtnSlider.pokerPresenter=this),this.setDealer();var p=[],m=[new cc.Vec2(268,384),new cc.Vec2(699,2),new cc.Vec2(-680,13.2)],g=[new cc.Vec2(268,384),new cc.Vec2(699,2),new cc.Vec2(4.4,-282),new cc.Vec2(-680,13.2)],f=[new cc.Vec2(268,384),new cc.Vec2(450,302),new cc.Vec2(406,-283),new cc.Vec2(-361.2,-281.3),new cc.Vec2(-413.9,309.1)],y=[new cc.Vec2(268,384),new cc.Vec2(450,302),new cc.Vec2(406,-283),new cc.Vec2(4.4,-282),new cc.Vec2(-361.2,-281.3),new cc.Vec2(-413.9,309.1)],b=[new cc.Vec2(268,384),new cc.Vec2(460.9,294.1),new cc.Vec2(699,2),new cc.Vec2(406,-283),new cc.Vec2(-361.2,-281.3),new cc.Vec2(-680,13.2),new cc.Vec2(-440.9,309.1)],v=[new cc.Vec2(268,384),new cc.Vec2(460.9,294.1),new cc.Vec2(699,2),new cc.Vec2(406,-283),new cc.Vec2(4.4,-282),new cc.Vec2(-361.2,-281.3),new cc.Vec2(-680,13.2),new cc.Vec2(-440.9,309.1)],C=[new cc.Vec2(268,384),new cc.Vec2(460.9,294.1),new cc.Vec2(700,129.9),new cc.Vec2(706.3,-86.4),new cc.Vec2(406,-283),new cc.Vec2(-361.2,-274.3),new cc.Vec2(-679.5,-76.1),new cc.Vec2(-674.4,140.3),new cc.Vec2(-440.9,309.1)],S=[new cc.Vec2(268,384),new cc.Vec2(460.9,294.1),new cc.Vec2(700,129.9),new cc.Vec2(706.3,-86.4),new cc.Vec2(406,-283),new cc.Vec2(4.4,-287),new cc.Vec2(-361.2,-274.3),new cc.Vec2(-679.5,-76.1),new cc.Vec2(-674.4,140.3),new cc.Vec2(-440.9,309.1)];p.push(null,null,m,g,f,y,b,v,C,S),K.PORTRAIT||this.playerHand.forEach(function(e,a){e.node.parent.setPosition(p[t][a])},this)},resetGame:function(){this.node.getChildByName("winnerBannerBg")&&(this.node.getChildByName("winnerBannerBg").active=!1),this.clearBreakTimer(),this.popUpManager.hide(2,function(){}),this.checkInBetweenBlinds(),this.hideMoves(),this.muckHandNode.active=!1,this.playerHand.forEach(function(e){e.hideWinningAnim()},this),this.manageBtns(!this.model.isPlayerStandUp()&&this.getMyPlayer().state==K.PlayerState.Playing),this.model.gameData.tableDetails.players.length>1&&this.timersToKill.push(setTimeout(function(){}.bind(this),1)),this.model.isPlayerStandUp()||this.getMyPlayer().state!=K.PlayerState.Playing||(this.resumeBtn.active=!1)},resetGameForReshuffle:function(e){void 0===e&&(e=!1),e&&(cc.director.getActionManager().removeAllActions(),this.model.gameModel.removeBroadcastCallbacks(this.model.gameData.channelId),this.cardDistributer.clearTimers(),this.killTimers()),console.log("%c[Flow/resetGameForReshuffle]","Orange: Tomato;"),this.node.getChildByName("winnerBannerBg")&&(this.node.getChildByName("winnerBannerBg").active=!1),this.clearBreakTimer(),this.popUpManager.hide(2,function(){}),this.checkInBetweenBlinds(),this.hideMoves(),this.clearHoleCards(),this.handleSitOutBtns(!0),this.resetView(),this.muckHandNode.active=!1,console.log("this.playerHand",this.playerHand),this.placeHolder&&(this.placeHolder.removeFromParent(!0),this.placeHolder=null)},setPostBigBlind:function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!0)},setChatPanel:function(){GameScreen.isMobile},getParent:function(){return this.box.node.parent},onLoad:function(){this.checkForWindowScene=!1,cc.sys.os!==cc.sys.OS_WINDOWS||cc.sys.isBrowser||(this.checkForWindowScene=!0),this.timersToKill=[],this.preCheckCounter=0,this.CardStartingPositionOnTable=226,this.CardsPositionOffset=108,this.winnerBannerDeactivateTimerDelay=1.3,this.potDistributionTimerDelay=1,this.potSplitterMoveActionDelay=.6,this.runItTwiceLowerCardDelay=.5,this.runItTwiceSlideToOpenDelay=.3,this.K=K,this.isMobile=GameScreen.isMobile,this.playerInput[0].active=!1,GameManager.isWindows||GameManager.isMobile||1!=GameScreen.viewType||(this.mobilePlayerInput[0].active=!1),this.setChatPanel(1==GameScreen.viewType),this.cardTimers=[],GameManager.on("updateTableImage",this.onUpdateTableImage.bind(this)),GameManager.on("switchBB",this.switchBBNow.bind(this)),GameManager.on("removeTable",this.onRemoveTable.bind(this)),this.model.on("leaveNextHand",this.onleaveNextHand.bind(this)),this.model.on(K.PokerEvents.OnJoin,this.onJoinSuccess.bind(this)),this.model.on(K.PokerEvents.OnHoleCard,this.addHoleCard.bind(this)),this.model.on(K.PokerEvents.OnSit,this.sitSuccess.bind(this)),this.model.on(K.PokerEvents.OnBlindDeduction,this.deductBlind.bind(this)),this.model.on(K.PokerEvents.OnPlayerStateChange,this.playerStateChange.bind(this)),this.model.on(K.PokerEvents.OnGamePlayers,this.resetGame.bind(this)),this.model.on(K.PokerEvents.OnDealerChat,this.dealerChat.bind(this)),this.model.on(K.PokerEvents.OnStartGame,this.startGame.bind(this)),this.model.on(K.PokerEvents.OnTurn,this.nextTurn.bind(this)),this.model.on(K.PokerEvents.OnRoundOver,this.roundOver.bind(this)),this.model.on(K.PokerEvents.OnGameOver,this.gameOver.bind(this)),this.model.on(K.PokerEvents.OnLeave,this.playerLeft.bind(this)),this.model.on(K.PokerEvents.OnChat,this.chat.bind(this)),this.model.on(K.PokerEvents.OnPlayerCard,this.playerCards.bind(this)),this.model.on(K.PokerEvents.onPlayerStandUp,this.onStandUp.bind(this)),this.model.on(K.PokerEvents.onRotateView,this.rotateView.bind(this)),this.model.on(K.PokerEvents.OnClearHoleCards,this.clearTable.bind(this)),this.model.on(K.PokerEvents.onPreCheck,this.onPreCheck.bind(this)),this.model.on(K.PokerEvents.onPlayerNotes,this.onPlayerNotes.bind(this)),this.model.on(K.PokerEvents.onPlayerCoins,this.onPlayerCoins.bind(this)),this.model.on(K.PokerEvents.onBestHand,this.onBestHand.bind(this)),this.model.on(K.PokerEvents.onTimeBank,this.onTimeBank.bind(this)),this.model.on("rebuyActivated",this.onRebuyActivated.bind(this)),this.model.on("rebuyDeactivated",this.onRebuyDeactivated.bind(this)),this.model.on(K.PokerEvents.onChannelEvent,this.showWinnerCards.bind(this)),this.model.on(K.PokerEvents.OnBankrupt,function(){this.onAddChips(this.model.roomConfig.minBuyIn)}.bind(this)),this.model.on("ReservedState",function(e){var t=e.extraAntiBankCase?"extraAntiBankCase":this.model.roomConfig.minBuyIn;this.onAddChips(t,void 0,e.extraAntiBankCase)}.bind(this)),this.model.on("clearTimers",function(){this.killTimers()}.bind(this)),this.colorChangeCb=this.changeTableColor.bind(this),this.tempOnLoad(),GameManager.on(K.GameEvents.OnTableColorChange,this.colorChangeCb),GameManager.on("openBuyInPopup",function(e){if(this.model&&e==this.model.gameData.channelId){var t=this.model.roomConfig.extraAntiBankCase?"extraAntiBankCase":this.model.roomConfig.minBuyIn;this.onAddChips(t,!0)}}.bind(this)),GameManager.on("waiting_List_Event",function(e,t){this.model&&this.model.gameData.channelId==e&&(this.model.gameData.isJoinWaiting=t,this.enableJoinBtn())}.bind(this)),this.sitOutNextHandCheckBox.registerCallback(this.onSitOutNextHand.bind(this)),this.straddleCheckBox.registerCallback(this.onStraddle.bind(this)),this.postBigBlindCheckBox.registerCallback(this.onPostBigBlind.bind(this)),this.runItTwiceCB.registerCallback(this.onRunItTwice.bind(this)),this.muckHandCheckbox.registerCallback(this.onMuckHand.bind(this)),GameScreen.node.on("grid-refreshed",this.checkNotification.bind(this)),this.imageLoadedRef=this.imageLoaded.bind(this),GameManager.on("image-loaded",this.imageLoadedRef),this.playerName.string=GameManager.user.userName,cc.game.pause=function(){},cc.game.resume=function(){},GameManager.on(K.GameEvents.onReset,function(){if(this.playerHand)for(var e=0;e<this.playerHand.length;e++)this.playerHand[e].clearPlayerCards();this.clearPots(),this.clearHoleCards()}.bind(this)),this.singleTime=!1,GameManager.on("connectionAcknowledged",function(e){this.model&&e==this.model.gameData.channelId&&this.hideMoves()}.bind(this)),this.mobileGamePlayOptionsVisible=!1,this.node.parent.getChildByName("GameplayOptions").on("position-changed",function(){}),GameManager.on(K.PokerEvents.onSendSticker,this.displayStickers.bind(this)),GameManager.isMobile||this.setTileUntileToggle(),this.onUpdateTableImage(),this.settingAvatar.getComponent(cc.Sprite).spriteFrame=GameManager.user.urlImg,this.totalPotLbl&&GameManager.user.category,this.potAmount&&this.potAmount.forEach(function(){GameManager.user.category},this)},imageLoaded:function(e){this.model.gameData.playerId,e.playerId},getWorldPos:function(e){return e.convertToWorldSpaceAR(cc.v2(0,0))},setWorldPos:function(e,t){e.setPosition(e.parent.convertToNodeSpaceAR(t))},displayStickers:function(){},setTileUntileToggle:function(){GameScreen.viewType,LayoutType.UnTiled},changeToTiled:function(){for(var e in GameScreen.setTiledView(),GameScreen.activePokerModels)e.presenter.setTileUntileToggle()},changeToUntiled:function(){for(var e in GameScreen.setUnTiledView(),GameScreen.activePokerModels)e.presenter.setTileUntileToggle()},start:function(){var e=this;this.mobileGamePlayOptionsInitPosition=this.node.parent.getChildByName("GameplayOptions").getPosition(),GameManager.isMobile&&(this.mobileChatOptionsInitPosition=this.mobileSliderChatSection.getPosition(),this.scheduleOnce(function(){e.mobileSliderChatSection.active=!1,e.mobileGamePlayOptionsInitPosition=e.node.parent.getChildByName("GameplayOptions").getPosition()},.1)),K.PORTRAIT},checkNotification:function(){this.playerInput&&this.unTiledView.active&&this.playerInput[0].active&&GameManager.activeTableCount>=1&&this.model.emit(K.PokerEvents.onTurnInOtherRoom,this.model,!0),1==GameScreen.viewType&&this.playerInput&&this.unTiledView.active&&(this.playerInput[0].active||this.mobilePlayerInput[0].active)&&GameManager.activeTableCount>=1&&this.model.emit(K.PokerEvents.onTurnInOtherRoom,this.model,!0)},onTimeBank:function(e){var t=this.playerHand[this.getRotatedSeatIndex(this.model.gameData.tableDetails.currentMoveIndex)];e&&this.selfLastMoveData&&e.playerId===this.model.gameData.playerId&&this.enableSelfTurn(t,this.selfLastMoveData),t.enableTimeBank()},setTableColor:function(){this.model.emit(K.GameEvents.OnTableColorChange);var e=this.model.gameData.settings.tableColor+"";void 0===e&&null===e||(this.tiledView.active?this.table.spriteFrame=this.highLightCheckbox&&this.highLightCheckbox.getSelection()?this.tableHighlightColors[e]:this.tableColors[e]:this.table.spriteFrame=this.tableColors[e])},tempOnLoad:function(){},onDestroy:function(){this.cardTimers.forEach(function(e){clearTimeout(e)},this),this.cardTimers=[],this.model.removeAllListeners(),this.clearBreakTimer(),this.killTimers(),GameManager.off(K.GameEvents.OnTableColorChange,this.colorChangeCb),GameManager.off(K.PokerEvents.onSendSticker,this.displayStickers.bind(this)),GameManager.off("image-loaded",this.imageLoadedRef)},setIndexOffset:function(e){this.indexOffset=e-this.selfSeatIndex},getRotatedSeatIndex:function(e){var t=0;return(t=e-this.indexOffset)<1&&(t+=this.maxSeatIndex),t>this.maxSeatIndex&&(t-=this.maxSeatIndex),console.log("getRotatedSeatIndex",e,t),t},enableCurrentPlayerTurn:function(){if(-1!==this.model.gameData.tableDetails.currentMoveIndex){this.displayPots();var e=this.playerHand[this.getRotatedSeatIndex(this.model.gameData.tableDetails.currentMoveIndex)];e.onTurn(this.model.gameData.tableDetails.turnTime),this.checkForSelfTurn(e.playerData.playerId)?(this.selfLastMoveData=e.playerData.moves,this.enableSelfTurn(e,e.playerData.moves)):this.model.emit(K.PokerEvents.onTurnInOtherRoom,this.model,!1)}},setDealer:function(){console.log("setDealer1"),this.playerHand.forEach(function(e){console.log("setDealer2"),e.setDealer(!1)},this),console.log("this.model.gameData.tableDetails.dealerIndex",this.model.gameData.tableDetails.dealerIndex),this.model.gameData.tableDetails.dealerIndex>=0&&this.getPlayerBySeat(this.model.gameData.tableDetails.dealerIndex).setDealer(!0)},placeDummyCards:function(e){void 0===e&&(e=null);for(var t=0;t<this.playerHand.length;t++)this.playerHand[t].displayDummyCards(this.model.dummyCardsCount,e)},allocateSeat:function(){for(var e=0;e<this.model.gameData.tableDetails.players.length;e++)this.getPlayerByIdx(e).playerData=this.model.gameData.tableDetails.players[e],this.getPlayerByIdx(e).enablePlayerView(this.model.gameData.playerId);this.model.gameData.tableDetails.state===K.GameState.Running&&(this.enableCurrentPlayerTurn(),this.placeDummyCards(this.model.gameData.playerId),this.setDealer(),this.enablePrecheckAfterRetry())},enablePrecheckAfterRetry:function(){if(-1!==this.model.gameData.tableDetails.currentMoveIndex){var e=this.getMyPlayer();if(e)if(e.seatIndex==this.model.gameData.tableDetails.currentMoveIndex);else{var t=e.state;if(e.chips<0||t==K.PlayerState.Waiting||t==K.PlayerState.OutOfMoney||t==K.PlayerState.OnBreak||t==K.PlayerState.Reserved||e.lastMove==K.PlayerState.AllIn||e.lastMove==K.PlayerState.Fold);else{var a={channelId:e.channelId,playerId:e.playerId,set:e.preCheck,precheckValue:e.precheckValue,route:"preCheck"};this.onPreCheck(a)}}}},getPlayerByIdx:function(e){return this.getPlayerBySeat(this.model.gameData.tableDetails.players[e].seatIndex)},getPlayerBySeat:function(e){console.log("getPlayerBySeat",e);for(var t=0;t<this.playerHand.length;t++)console.log("index",t),console.log(this.playerHand[t]);return this.playerHand[this.getRotatedSeatIndex(e)]},isObserver:function(){return!1},isObserver2:function(){for(var e=0;e<this.model.gameData.tableDetails.players.length;e++)if(this.model.gameData.tableDetails.players[e].playerId===GameManager.user.playerId)return!1;return!0},onJoinSuccess:function(){this.preCheckCounter=0,this.muckHandNode&&(this.muckHandNode.active=!1),this.model.popUpManager=this.popUpManager,this.loadSeats(),this.clearPots();var e=this.model.getPlayerById(this.model.gameData.playerId);if(this.onJoinExtras(),this.tempOnJoinSuccess(),this.enableJoinBtn(),-1!==e){this.model.gameData.isJoinWaiting=!1;for(var t=0;t<this.playerHand.length;t++)this.playerHand[t].seatState===K.SeatState.Free&&this.playerHand[t].disableView();this.manageBtns(!this.model.isPlayerStandUp()&&this.getMyPlayer().state==K.PlayerState.Playing),this.getMyPlayer().state==K.PlayerState.Playing||this.getMyPlayer().state==K.PlayerState.OnBreak?this.rotateView({seatIndex:this.model.gameData.tableDetails.players[e].seatIndex}):this.allocateSeat(),this.model.gameData.tableDetails.players[e].state===K.PlayerState.OnBreak&&this.handleSitOutBtns(!1),this.getMyPlayer().state==K.PlayerState.Playing&&this.getMyPlayer().lastMove==K.PlayerState.Fold?this.enableShowFoldBtn():this.disableShowFoldBtn()}else this.allocateSeat(),this.manageBtns(!1);this.handleRunItTwice(!0,!0,this.model.gameData.isRunItTwice),""!==this.model.gameData.bestHands&&null!==this.getMyPlayer()&&(this.getMyPlayer().bestHand=this.model.gameData.bestHands),this.showMuckHand(),this.muckHandCheckbox.setSelection(this.model.gameData.settings.isMuckHand),this.model.isVideo&&(this.unTiledView.getChildByName("HandInfoButton").active=!1),GameManager.isP&&GameManager.isMobile&&(this.unTiledView.getChildByName("HandInfoButton").active=!1,this.unTiledView.getChildByName("HandHistoryButton").active=!1),GameManager.isSD,this.dealerNode&&this.dealerNode.getComponent("JohnyChat").onLoad(),this.playerChatNode&&this.playerChatNode.getComponent("ChatInfoPanel").onLoad(),this.leaveBtn.node.active=!0,this.lobbyBtn.node.active=!0,K.PORTRAIT?cc.find("TableName",this.node).active=!0:cc.find("TableName",this.node).active=!1},tempOnJoinSuccess:function(){},enableJoinBtn:function(){this.joinBtn.node.parent.parent.active=null==this.getMyPlayer()&&this.model.gameData.tableDetails.players.length==this.model.roomConfig.maxPlayers,this.model.gameData.isJoinWaiting?this.joinBtn.node.parent.getChildByName("tick").active=!0:this.joinBtn.node.parent.getChildByName("tick").active=!1,this.joinBtn.node.parent.parent.active?this.model.gameData.isJoinWaiting?this.joinBtn.node.parent.parent.parent.getChildByName("FindGame").active=!1:this.joinBtn.node.parent.parent.parent.getChildByName("FindGame").active=!0:this.joinBtn.node.parent.parent.parent.getChildByName("FindGame").active=!1},onJoinWaitingListBtnClick:function(){this.playAudio(K.Sounds.click);var e=this.joinBtn.node.parent.getChildByName("tick").active;TableHandler.joinWaitingList(!e,this.model.gameData.channelId,function(t){t.success&&GameManager.emit("waiting_List_Event",t.channelId,!e)}.bind(this),function(){})},onJoinExtras:function(){if(this.roomNameLbl){this.roomNameLbl.string=this.model.roomConfig.channelName;var e=GameManager.convertChips(this.model.gameData.tableDetails.smallBlind)+"/"+GameManager.convertChips(this.model.gameData.tableDetails.bigBlind);this.roomNameLbl2.string="Blinds: "+e}this.playerInput[0].active=!1,GameManager.isWindows||GameManager.isMobile||1!=GameScreen.viewType||(this.mobilePlayerInput[0].active=!1),this.straddleCheckBox.setSelection(!1),this.checkInBetweenBlinds(!0)},onSitHere:function(e){var t={};t.minValue=this.model.roomConfig.minBuyIn,t.maxValue=this.model.roomConfig.maxBuyIn;var a=LocalizedManager.t("TXT_AVAILABLE_CHIPS")+":";"DIAMOND"==GameManager.user.category?(t.totalChips=GameManager.user.realChips,t.dialogHeadingText=a):(t.totalChips=GameManager.user.freeChips,t.dialogHeadingText=a),GameManager.isMobile&&(t.dialogHeadingText=a),t.autoBuyIn=GameManager.user.autoBuyIn,t.index=e,t.confirm=this.onBuyInConfirm.bind(this),t.onSitHere=!0,t.channelId=this.model.gameData.channelId,t.playerStandUp=this.model.isPlayerStandUp(),t.isRealMoney=this.model.roomConfig.isRealMoney,t.isAllInAndFold=this.model.roomConfig.isAllInAndFold,t.config=this.model.roomConfig,t.autoConfirm=this.model.roomConfig.extraAntiBankCase,t.topHeading=LocalizedManager.t("TXT_BUY_IN"),t.playSound=this.playAudio.bind(this),t.autoConfirm?this.onBuyInConfirm(t.index,t.minValue.toString()):this.popUpManager.show(s.BuyInPopup,t,function(){})},onBuyInConfirm:function(e,t){this.model.sitHere(e,t,function(){}.bind(this))},onLeaveNextHand:function(){this.model.leaveNextHand(function(e){console.log("onLeaveNextHand",e)}.bind(this))},onSitOutNextHand:function(){this.model.sitOutValue==h.None?this.model.sitOutNextHand(function(e){this.handleSitoutResponse(e)}.bind(this)):this.model.sitOutValue==h.SitOueNextBB?this.onResetSitout(function(e){e&&this.model.sitOutNextHand(function(e){this.handleSitoutResponse(e)}.bind(this))}.bind(this)):this.model.sitOutValue==h.SitOutNextHand&&(null!=this.getMyPlayer()&&this.getMyPlayer().state==K.PlayerState.OnBreak?this.onResume():this.onResetSitout(function(){}.bind(this))),this.handleRunItTwice()},handleSitoutResponse:function(e){e.success?this.sitOutNextHandCheckBox.setSelection(!0):this.sitOutNextHandCheckBox.setSelection(!1)},onSitOutNextBB:function(){this.model.sitOutValue==h.None?this.model.sitOutNextBB(function(e){this.handleSitoutBBResponse(e)}.bind(this)):this.model.sitOutValue==h.SitOueNextBB&&(null!=this.getMyPlayer()&&this.getMyPlayer().state==K.PlayerState.OnBreak?this.onResume():this.onResetSitout(function(){}.bind(this))),this.handleRunItTwice()},checkSitoutStatus:function(){if(this.model.gameData.channelType==K.ChannelType.Tournament||this.model.isPlayerStandUp())this.model.sitOutValue!=h.SitOutNextHand||this.model.isPlayerStandUp()||(this.sitOutNextHandCheckBox.node.parent.active=!0,this.sitOutNextHandCheckBox.setSelection(!0));else switch(this.model.sitOutValue){case h.SitOutNextHand:this.sitOutNextHandCheckBox.setSelection(!0);break;case h.SitOueNextBB:this.sitOutNextHandCheckBox.setSelection(!1);break;case h.None:}},onResetSitout:function(e){this.model.resetSitout(function(t){null!=e&&(e(t.success),t.success&&this.handleSitOutBtns(!0))}.bind(this))},onAddChipsConfirm:function(e,t){this.model.addChips(t,function(){})},onResume:function(){this.playAudio(K.Sounds.click),this.resumeBtn.active=!1,this.model.resume(function(){this.handleSitOutBtns(!0);var e=this.playerHand[this.getRotatedSeatIndex(this.model.gameData.tableDetails.currentMoveIndex)];e.playerData&&this.model.gameData.tableDetails.state===K.GameState.Running&&-1!==this.model.gameData.tableDetails.currentMoveIndex&&(this.checkForSelfTurn(e.playerData.playerId)?this.enableSelfTurn(e,e.playerData.moves):this.model.emit(K.PokerEvents.onTurnInOtherRoom,this.model,!1))}.bind(this))},onResumeAll:function(){this.playAudio(K.Sounds.click),GameScreen.resumeAll()},onDisable:function(){},onStraddle:function(){var e=this.straddleCheckBox.getSelection();this.model.setStraddleSelection(e)},onPostBigBlind:function(){var e=this.postBigBlindCheckBox.getSelection();this.model.setPostBigBlind(e),this.postBigBlindCheckBox.node.parent.getChildByName("message").active=!e},onRunItTwice:function(){var e=this.runItTwiceCB.getSelection();this.model.setRunItTwice(e,function(t){t.success||this.runItTwiceCB.setSelection(!e)}.bind(this))},handleRunItTwice:function(e,t,a){void 0===e&&(e=!0),void 0===t&&(t=!1),void 0===a&&(a=!1);var n=!!this.getMyPlayer()&&this.getMyPlayer().state==K.PlayerState.Playing&&this.getMyPlayer().lastMove!==K.PlayerMove.AllIn;n=n&&!(this.model.gameData.channelType==K.ChannelType.Tournament),this.model.gameData.tableDetails.isForceRit||(this.runItTwiceCB.node.parent.active=n&&e),t&&this.runItTwiceCB.setSelection(a)},onAddChips:function(e,t,a){if(void 0===t&&(t=!1),!this.model.isPlayerStandUp()||t){var n={},i=0;t||(i="Open Face Chinese Poker"===this.model.roomConfig.channelVariation?this.model.getMyPlayer().points:this.model.getMyPlayer().chips),n.minValue=this.model.roomConfig.originalMinBuyIn-i,n.maxValue=this.model.roomConfig.originalMaxBuyIn-i,n.minValue<1&&(n.minValue=1),0==a&&(n.minValue=this.model.roomConfig.minBuyIn-i,n.maxValue=this.model.roomConfig.maxBuyIn-i),this.model.gameData.antibanking.isAntiBanking&&(this.model.roomConfig.minBuyIn,this.model.gameData.antibanking.amount),t&&(n.minValue=this.model.roomConfig.minBuyIn-i,n.maxValue=this.model.roomConfig.maxBuyIn-i),this.model.roomConfig.originalMaxBuyIn<i&&(n.maxValue=0,n.minVal=0);var o=LocalizedManager.t("TXT_AVAILABLE_CHIPS")+":";"DIAMOND"==GameManager.user.category?(n.totalChips=GameManager.user.realChips,n.dialogHeadingText=o):(n.totalChips=GameManager.user.freeChips,n.dialogHeadingText=o),GameManager.isMobile&&(n.dialogHeadingText=o),n.autoBuyIn=GameManager.user.autoBuyIn,n.index=this.model.getPlayerById(this.model.gameData.playerId),n.confirm=this.onAddChipsConfirm.bind(this),n.onSitHere=!1,n.cancelCallback=this.onCancelBuyIn.bind(this),n.playerStandUp=this.model.isPlayerStandUp(),n.channelId=this.model.gameData.channelId,n.isAddChips=!0,n.isRealMoney=this.model.roomConfig.isRealMoney,n.topHeading=LocalizedManager.t("TXT_ADD_CHIPS"),n.playSound=this.playAudio.bind(this),n.config=this.model.roomConfig,t&&(n.topHeading=LocalizedManager.t("TXT_BUY_IN")),"extraAntiBankCase"===e?this.onAddChipsConfirm(n.index,(this.model.roomConfig.minBuyIn-i).toString()):this.popUpManager.show(s.BuyInPopup,n,function(){})}this.playAudio(K.Sounds.click)},onCancelBuyIn:function(){this.model.getMyPlayer()&&this.model.getMyPlayer().state==K.PlayerState.Reserved&&(GameManager.playerRequestedToLeaveTable[this.model.gameData.channelId]=!1,this.standUp()),("Open Face Chinese Poker"===this.model.roomConfig.channelVariation?this.model.getMyPlayer().points:this.model.getMyPlayer().chips)<=0&&this.model.getMyPlayer().state!=K.PlayerState.Playing&&(this.resumeBtn.active=!0,this.sitOutNextHandCheckBox.node.parent.active=!1)},onAllIn:function(){this.hideAllSBBB(),this.model.makeMove("0",K.PlayerMove.AllIn),this.hideMoves(),this.playAudio(K.Sounds.click)},onCheck:function(e,t){this.hideAllSBBB(),this.model.makeMove("0",K.PlayerMove.Check),this.hideMoves(),"checkAction"==t&&(this.onCloseSureToFold(),this.playAudio(K.Sounds.click))},onBet:function(e,t){this.hideAllSBBB(),this.model.makeMove(e,t),this.hideMoves()},onFold:function(e,t){this.sureToFold&&"confirmAction"!=t?this.sureToFoldNode.active=!0:(this.hideAllSBBB(),this.model.makeMove("0",K.PlayerMove.Fold),this.hideMoves(),"confirmAction"==t&&(this.onCloseSureToFold(),this.playAudio(K.Sounds.click)))},onCloseSureToFold:function(){this.sureToFoldNode.active=!1},onCall:function(){this.hideAllSBBB(),this.model.makeMove("0",K.PlayerMove.Call),this.hideMoves()},leaveTable:function(){this.playAudio(K.Sounds.click),this.sureToLeaveNode&&this.sureToLeaveNode.active&&(this.sureToLeaveNode.active=!1),!1===GameManager.playerRequestedToLeaveTable[this.model.gameData.channelId]&&(GameManager.playerRequestedToLeaveTable[this.model.gameData.channelId]=!0),this.model.leave(this.isObserver())},onLeaveTableClicked:function(){this.leaveNextHandTag.active?GameManager.popUpManager.show(s.NotificationPopup,"You will leave the game after this hand.",function(){}):this.sureToLeaveNode.active=!0},onLeaveTableCancel:function(){this.playAudio(K.Sounds.click),this.sureToLeaveNode&&this.sureToLeaveNode.active&&(this.sureToLeaveNode.active=!1)},leaveTournament:function(){},standUp:function(){this.model.leave(!0)},onSettingsBtn:function(){var e=this.popUpManager.show(1,this.model,function(){});e&&(this.model.valueChange=!1,2!=GameScreen.viewType||GameManager.isMobile||GameManager.isWindows?1!=GameScreen.viewType||GameManager.isMobile||GameManager.isWindows||(e.unTileViewSelection.isChecked=!1,e.tileViewSelection.isChecked=!0):(e.unTileViewSelection.isChecked=!0,e.tileViewSelection.isChecked=!1),this.model.valueChange=!0),this.playAudio(K.Sounds.click),this.mobileGamePlayOptions()},onInfoBtn:function(){this.mobileGamePlayOptions();var e={};e.playSound=this.playAudio.bind(this),e.info=this.model.roomConfig.info,this.popUpManager.show(s.GameInfoPopup,e,function(){}),this.playAudio(K.Sounds.click)},onSettingsBtnClose:function(){this.popUpManager.hide(1,null,function(){})},addHoleCard:function(e,t){if(this.model.gameData.tableDetails.roundName!=K.Round.Showdown||5!=this.holeCardHolder.getComponentsInChildren("Card").length){var a=this.holeCardHolder.getComponentsInChildren("Card").length,n=this.holeCardsWithTwiceHolder.getComponentsInChildren("Card").length,i=a>n?a:n,o=e[0].length;if(this.runItTwiceCaseRunning=!!(e[1].length>0&&e[1].some(function(e){return null!==e})),this.runItTwiceCaseRunning&&this.node.getChildByName("winnerBannerBg")){var s=this.node.getChildByName("winnerBannerBg");s.active=!0,s.width=400,s.getChildByName("Rectangle 3289").getChildByName("layout1").active=!1,s.getChildByName("Rectangle 3289").getChildByName("layout2").active=!1,s.getChildByName("Rectangle 3289").getChildByName("winningText").getComponent(cc.Label).string="Running it Twice..."}this.cardTimers.forEach(function(e){clearTimeout(e)},this),this.cardTimers=[],this.cardsFinalPosArray=[],this.runItTwiceUpperCardsFinalPosArray=[],this.runItTwiceLowerCardsFinalPosArray=[];for(var r=0,l=0;null==e[1][l]&&l<e[1].length;)l++;for(e[1].length==l&&(l=-1),r=0;r<e.length;r++)for(var c=i;c<o;c++){var d=o-i;e[r][c]&&this.generateCard(r,c,l,200,e[r][c],e,t,d)}d>0&&t&&this.playAudio(K.Sounds.cardOpening)}},generateCard:function(e,t,a,n,i,o,s,r){var l=this,c=CardPool.generateCard(this.cardPrefab.name,function(){});c.opacity=255;var d=c.getComponent("Card");if(d.init(i,this.model),d.isCommunityCard=!0,d.reveal(!0),-1==a){if(c.parent=this.holeCardHolder,!s){var h=-this.CardStartingPositionOnTable+t*this.CardsPositionOffset;c.setPosition(cc.v2(h,0))}c.active=!s,this.cardsFinalPosArray.push(c)}else{for(var u=0;this.holeCardHolder.getComponentsInChildren("Card").length>0;){var p=this.holeCardHolder.children[0];p.parent=this.holeCardsWithTwiceHolder.children[u],p.setPosition(0,0),u++}t<a?c.parent=this.holeCardsWithTwiceHolder.children[t]:0==e?(c.parent=this.runItTwiceHolder.children[t],this.runItTwiceUpperCardsFinalPosArray.push(c)):(c.parent=this.runItTwiceHolder.children[t+5],this.runItTwiceLowerCardsFinalPosArray.push(c)),c.setPosition(0,0),c.active=!s}if(s)if(3==o[0].length&&3==this.cardsFinalPosArray.length||5==o[0].length&&5==this.cardsFinalPosArray.length&&0==o[1].length)this.animateHoleCards(this.cardsFinalPosArray,"SLIDE_TO_OPEN",cc.v2(-this.CardStartingPositionOnTable,0),this.CardsPositionOffset);else if(o[0].length>3&&this.cardsFinalPosArray.length<3&&this.holeCardHolder.childrenCount>2){if(1==this.cardsFinalPosArray.length&&1==r)h=-this.CardStartingPositionOnTable+(o[0].length-1)*this.CardsPositionOffset,this.animateHoleCards(this.cardsFinalPosArray,"FLIP_TO_OPEN",cc.v2(0,250),this.CardsPositionOffset,cc.v2(h,0));else if(2==this.cardsFinalPosArray.length){var m=cc.v2(-this.CardStartingPositionOnTable,0),g=this.CardsPositionOffset;this.cardsFinalPosArray.forEach(function(e,t){var a=m.x+(t+3)*g;e.setPosition(m),0==t?(setTimeout(function(){var t=cc.moveTo(.85,cc.v2(a,0)).easing(cc.easeCubicActionOut());e.active=!0,e.runAction(t)}.bind(l),500),l.timersToKill.push(setTimeout(function(){cc.isValid(this.node)&&e.getNumberOfRunningActions()>0&&(e.stopAllActions(),e.setPosition(cc.v2(a,0)))}.bind(l),1350))):1==t&&(l.timersToKill.push(setTimeout(function(){var t=cc.moveTo(.95,cc.v2(a,0)).easing(cc.easeCubicActionOut());e.active=!0,e.runAction(t)}.bind(l),1e3)),l.timersToKill.push(setTimeout(function(){cc.isValid(this.node)&&e.getNumberOfRunningActions()>0&&(e.stopAllActions(),e.setPosition(cc.v2(a,0)))}.bind(l),2200)))},this)}}else if(5!=o[0].length||5!=o[1].length||5!=this.runItTwiceUpperCardsFinalPosArray.length||0!=this.runItTwiceLowerCardsFinalPosArray.length&&5!=this.runItTwiceLowerCardsFinalPosArray.length){if(5==o[0].length&&5==o[1].length&&2==this.runItTwiceUpperCardsFinalPosArray.length&&2==this.runItTwiceLowerCardsFinalPosArray.length||1==this.runItTwiceUpperCardsFinalPosArray.length&&1==this.runItTwiceLowerCardsFinalPosArray.length)for(var f=2==this.runItTwiceUpperCardsFinalPosArray.length?4:2,y=function(e){var t=[];e<f/2?t.push(l.runItTwiceUpperCardsFinalPosArray[e]):t.push(l.runItTwiceLowerCardsFinalPosArray[e-f/2]),v=l.runItTwiceHolder.convertToWorldSpaceAR(cc.v2(0,250));var a=t[0].parent.convertToNodeSpaceAR(v);l.timersToKill.push(setTimeout(function(){this.animateHoleCards(t,"FLIP_TO_OPEN",a,this.CardsPositionOffset,cc.v2(0,0))}.bind(l),l.runItTwiceLowerCardDelay*e*1e3))},b=0;b<f;b++){var v;y(b)}}else{var C=[];if(5==this.runItTwiceLowerCardsFinalPosArray.length)return this.runItTwiceLowerCardsFinalPosArray.forEach(function(e){var t=this.runItTwiceHolder.convertToWorldSpaceAR(cc.v2(this.runItTwiceHolder.children[5].getPosition()));C.push(e.parent.convertToNodeSpaceAR(t))},this),void this.timersToKill.push(setTimeout(function(){this.animateHoleCards(this.runItTwiceLowerCardsFinalPosArray,"SLIDE_TO_OPEN",this.runItTwiceHolder.children[5].getPosition(),102,null,C)}.bind(this),1e3*(5*this.runItTwiceSlideToOpenDelay+.1)));this.runItTwiceUpperCardsFinalPosArray.forEach(function(e){var t=this.runItTwiceHolder.convertToWorldSpaceAR(cc.v2(this.runItTwiceHolder.children[0].getPosition()));C.push(e.parent.convertToNodeSpaceAR(t))},this),this.animateHoleCards(this.runItTwiceUpperCardsFinalPosArray,"SLIDE_TO_OPEN",this.runItTwiceHolder.children[0].getPosition(),102,null,C)}},animateHoleCards:function(e,t,a,n,i,o){var s=this;if(void 0===n&&(n=this.CardsPositionOffset),"SLIDE_TO_OPEN"==t)5==e.length?e.forEach(function(e,t){var i=a.x+t*n;if(o&&(a=o[t],i=0),e.setPosition(a),0==t||1==t||2==t){var r=cc.moveTo(.15*t,cc.v2(i,0)).easing(cc.easeCubicActionOut());e.active=!0,e.runAction(r),s.timersToKill.push(setTimeout(function(){cc.isValid(this.node)&&e.getNumberOfRunningActions()>0&&(e.stopAllActions(),e.setPosition(cc.v2(i,0)))}.bind(s),180*t))}else 3==t?(s.timersToKill.push(setTimeout(function(){var t=cc.moveTo(.9,cc.v2(i,0)).easing(cc.easeCubicActionOut());e.active=!0,e.runAction(t)}.bind(s),2e3)),s.timersToKill.push(setTimeout(function(){cc.isValid(this.node)&&e.getNumberOfRunningActions()>0&&(e.stopAllActions(),e.setPosition(cc.v2(i,0)))}.bind(s),80))):4==t&&(s.timersToKill.push(setTimeout(function(){var t=cc.moveTo(.9,cc.v2(i,0)).easing(cc.easeCubicActionOut());e.active=!0,e.runAction(t)}.bind(s),4e3)),s.timersToKill.push(setTimeout(function(){cc.isValid(this.node)&&e.getNumberOfRunningActions()>0&&(e.stopAllActions(),e.setPosition(cc.v2(i,0)))}.bind(s),2200)))},this):e.forEach(function(e,t){var i=a.x+t*n;o&&(a=o[t],i=0),e.setPosition(a);var r=cc.moveTo(.18*t,cc.v2(i,0)).easing(cc.easeCubicActionOut());e.active=!0,e.runAction(r),s.timersToKill.push(setTimeout(function(){cc.isValid(this.node)&&e.getNumberOfRunningActions()>0&&(e.stopAllActions(),e.setPosition(cc.v2(i,0)))}.bind(s),200*t))},this);else if("FLIP_TO_OPEN"==t){var r=cc.moveTo(.18,i).easing(cc.easeCubicActionOut());e[0].setPosition(a),e[0].active=!0,e[0].getComponent("Card").frontFace.node.active=!1,e[0].getComponent("Card").backFace.node.active=!0,e[0].runAction(r),e[0].runAction(cc.sequence(cc.delayTime(.15),cc.callFunc(function(){e[0].getComponent("Card").frontFace.node.active=!0,e[0].getComponent("Card").backFace.node.active=!1}))),this.timersToKill.push(setTimeout(function(){cc.isValid(this.node)&&(e[0].stopAllActions(),e[0].setPosition(i),e[0].getComponent("Card").frontFace.node.active=!0,e[0].getComponent("Card").backFace.node.active=!1)}.bind(this),200))}},clearHoleCards:function(){if(null!==this.holeCardHolder){for(var e=this.holeCardHolder.children;e.length>0;)CardPool.destroyCard(e[0],function(){});e=this.runItTwiceHolder.children;for(var t=0;t<e.length;t++)for(;e[t].children.length>0;)CardPool.destroyCard(e[t].children[0],function(){});for(e=this.holeCardsWithTwiceHolder.children,t=0;t<e.length;t++)for(;e[t].children.length>0;)CardPool.destroyCard(e[t].children[0],function(){})}},clearTable:function(){this.node.stopAllActions(),this.unscheduleAllCallbacks(),this.clearHoleCards(),this.clearPots(),this.killTimers(),this.forceAddPlayercardsData=null,this.forceAddPlayercardsSeatIndex=null},sitSuccess:function(e){if(e.playerId===this.model.gameData.playerId){for(var t=0;t<this.playerHand.length;t++)this.playerHand[t].seatState===K.SeatState.Free&&this.playerHand[t].disableView();this.handleSitOutBtns(!0),this.manageBtns(!0),this.model.gameData.isJoinWaiting=!1,this.showMuckHand()}t=this.model.getPlayerById(e.playerId),this.playerHand[this.getRotatedSeatIndex(e.seatIndex)].playerData=this.model.gameData.tableDetails.players[t],this.playerHand[this.getRotatedSeatIndex(e.seatIndex)].enablePlayerView(this.model.gameData.playerId),this.model.gameData.tableDetails.state===K.GameState.Running&&(this.setDealer(),e.playerId===this.model.gameData.playerId&&this.checkInBetweenBlinds(!0)),this.isStraddleAllowed(),this.enableJoinBtn()},checkInBetweenBlinds:function(){console.log("checkInBetweenBlinds 1");var e=this.getMyPlayer();if(this.model.gameData.tableDetails.state===K.GameState.Running&&null!=e&&e.state==K.PlayerState.Waiting){console.log("checkInBetweenBlinds 2",this.model.gameData.tableDetails.state,e.state);var t=this.model.gameData.tableDetails.smallBlindIndex,a=this.model.gameData.tableDetails.bigBlindIndex-t;a<0&&(a+=this.maxSeatIndex);var n=e.seatIndex-t;n<0&&(n+=this.maxSeatIndex),console.log("checkInBetweenBlinds 3",t,a,n),t=0,console.log("checkInBetweenBlinds 5",!0),this.postBigBlindCheckBox.node.parent.active||(this.postBigBlindCheckBox.node.parent.active=!0,this.postBigBlindCheckBox.setSelection(this.model.postBigBlindUserFlake))}else console.log("checkInBetweenBlinds 6"),e&&e.state!==K.PlayerState.Waiting&&(console.log("checkInBetweenBlinds 7"),this.postBigBlindCheckBox.node.parent.active=!1),this.popUpManager.hide(2,function(){});this.model.gameData.tableDetails.state!=K.GameState.Running&&null!=e&&e.state==K.PlayerState.Waiting&&(console.log("checkInBetweenBlinds 8"),this.postBigBlindCheckBox.node.parent.active=!1,this.postBigBlindCheckBox.setSelection(!1))},deductBlind:function(e){this.node.getChildByName("winnerBannerBg")&&(this.node.getChildByName("winnerBannerBg").active=!1),this.timersToKill.push(setTimeout(function(){this.displayPots()}.bind(this),1800)),null!==this.resetTimer&&(clearTimeout(this.resetTimer),this.resetTimer=null);for(var t=this.model.gameData.tableDetails.players,a=0;a<t.length;a++){var n=this.playerHand[this.getRotatedSeatIndex(t[a].seatIndex)];n.node.getChildByName("BB").active=!1,n.node.getChildByName("SB").active=!1,t[a].seatIndex==e.bigBlindIndex?n.node.getChildByName("BB").active=!0:t[a].seatIndex==e.smallBlindIndex&&(n.node.getChildByName("SB").active=!0)}},rotateView:function(e){this.setIndexOffset(e.seatIndex);for(var t=0;t<this.playerHand.length;t++)this.playerHand[t].resetSeat();this.allocateSeat(),this.playerHand.forEach(function(e){e.seatState===K.SeatState.Free&&e.disableView()},this)},hideAllSBBB:function(){for(var e=this.model.gameData.tableDetails.players,t=0;t<e.length;t++){var a=this.playerHand[this.getRotatedSeatIndex(e[t].seatIndex)];a.node.getChildByName("BB").active=!1,a.node.getChildByName("SB").active=!1}},resetView:function(){this.indexOffset=0;for(var e=0;e<this.playerHand.length;e++)this.playerHand[e].resetSeat();this.allocateSeat(),this.playerHand.forEach(function(e){e.seatState!==K.SeatState.Occupied&&e.disablePlayerView()},this)},playerStateChange:function(e){null!==this.gameOverLabel&&(this.gameOverLabel.string=""),null!=this.getMyPlayer()&&this.getMyPlayer().seatIndex==e.seatIndex&&(e.state===K.PlayerState.OnBreak?(this.handleSitOutBtns(!1),this.postBigBlindCheckBox.node.parent.active=!1,this.singleTime=!1):this.model.sitOutValue==h.None&&this.handleSitOutBtns(!0),e.state===K.PlayerState.Waiting&&(this.resumeBtn.active=!1),this.showMuckHand(),console.log("this.getMyPlayer()",this.getMyPlayer()),this.getPlayerByIdx(this.model.getPlayerById(this.getMyPlayer().playerId)).updateTimeBank2(e.timeBankSec)),this.playerHand[this.getRotatedSeatIndex(e.seatIndex)].onStateChange(),this.optionalPlayerInput&&(this.optionalPlayerInput.selectedValue=null),this.checkInBetweenBlinds(),this.isStraddleAllowed(),this.handleRunItTwice()},handleSitOutBtns:function(e){this.resumeBtn.active=!e,this.handleSitAllBtn(),this.sitOutNextHandCheckBox.node.parent.active=e,this.sitOutNextHandCheckBox.setSelection(!e)},handleSitAllBtn:function(){for(var e=0,t=0;t<GameScreen.gameModel.activePokerModels.length&&!(GameScreen.gameModel.activePokerModels[t].node.children[0].getComponent("PokerPresenter").resumeBtn.active&&++e>1);t++);for(t=0;t<GameScreen.gameModel.activePokerModels.length;t++)GameScreen.gameModel.activePokerModels[t].node.children[0].getComponent("PokerPresenter").resumeBtn.children[1].active=e>1},dealerChat:function(){},chat:function(e){var t=this.model.getPlayerById(e.playerId);this.playerHand[this.getRotatedSeatIndex(this.model.gameData.tableDetails.players[t].seatIndex)].showChat(e.message)},onBestHand:function(){},onReBuyInConfirm:function(){this.model.rebuy(this.model.gameData.channelId,GameManager.user.playerId,this.model.gameData.raw.tournamentId,function(e){console.log("onReBuyInConfirm",e)},function(e){console.log("onReBuyInConfirm error",e)})},onRebuyDeactivated:function(){this.popUpManager.hide(s.BuyInPopup,function(){})},onRebuyActivated:function(e){console.log("onRebuyActivated",e),LocalizedManager.t("TXT_AVAILABLE_CHIPS"),"DIAMOND"==GameManager.user.category?e.totalChips=GameManager.user.realChips:e.totalChips=GameManager.user.freeChips,e.isRebuy=!0,e.rebuyChips=this.model.gameData.raw.tourData.raw.rebuyChips,e.rebuyAmount=this.model.gameData.raw.tourData.raw.rebuy.rebuyPrice.rebuyAmount,e.rebuyHoursFee=this.model.gameData.raw.tourData.raw.rebuy.rebuyPrice.rebuyHouseFee,e.rebuyTotalChips=this.model.gameData.raw.tourData.raw.rebuy.rebuyPrice.totalRebuyChip,e.rebuyTimer||(e.rebuyTimer=this.model.gameData.raw.tourData.raw.timeToRebuy),e.confirm=this.onReBuyInConfirm.bind(this),e.channelId=this.model.gameData.channelId,e.playSound=this.playAudio.bind(this),this.popUpManager.show(s.BuyInPopup,e,function(){})},checkForSelfTurn:function(e){return!(!this.model||this.model.gameData.playerId!==e)},getMyPlayer:function(){var e=this.model.getPlayerById(this.model.gameData.playerId);return this.model.gameData.tableDetails.players[e]||null},clearPots:function(){this.totalPotLbl&&(this.totalPotLbl.node.parent.active=!1),this.potAmount&&this.potAmount.forEach(function(e){e.children[0].getComponent("PokerChipsView").destroyChips(),e.parent.active=!1},this)},displayPots:function(){if(this.totalPotLbl)if(this.totalPotLbl.node.parent.active=!0,this.totalPotLbl.string=GameManager.convertChips(this.model.gameData.tableDetails.totalPot),this.totalPotLbl.__string=this.model.gameData.tableDetails.totalPot,this.updateBB(),this.model.gameData.tableDetails.roundName!==K.Round.Preflop)for(var e=0;e<this.model.gameData.tableDetails.pot.length;e++)this.potAmount[e].getComponent(cc.Label).string=GameManager.convertChips(this.model.gameData.tableDetails.pot[e]),this.potAmount[e].getComponent(cc.Label).__string=this.model.gameData.tableDetails.pot[e],this.potAmount[e].parent.active=!0,this.updateBB();else this.model.gameData.tableDetails.players.length},startGame:function(e){this.popUpManager.hide(s.SitNGoResultPopup,function(){}),e.moves,this.playerInput[0].active=!1,GameManager.isWindows||GameManager.isMobile||1!=GameScreen.viewType||(this.mobilePlayerInput[0].active=!1);for(var t=this.model.gameData.tableDetails.players,a=0;a<t.length;a++)this.playerHand[this.getRotatedSeatIndex(t[a].seatIndex)].enablePlayerView(this.model.gameData.playerId,!1);this.timersToKill.push(setTimeout(function(){for(var e=this.model.gameData.tableDetails.players,t=0;t<e.length;t++){var a=this.playerHand[this.getRotatedSeatIndex(e[t].seatIndex)];a.playerData.totalRoundBet>0&&a.displayBlind(a.playerData.totalRoundBet)}}.bind(this),1500)),this.clearHoleCards(),this.setDealer(),this.placeDummyCards(),this.cardAnimation(this.model.gameData.tableDetails.players),this.handleRunItTwice(),this.checkInBetweenBlinds(),this.displayRoundNumber()},cardAnimation:function(e){for(var t=[],a=0;a<e.length;a++)if(e[a].state===K.PlayerState.Playing){if("REBUYING"==e[a].state)continue;var n={};n.targetNode=this.playerHand[this.getRotatedSeatIndex(e[a].seatIndex)].node,t.push(n)}this.cardDistributer.distributeCards(this.model.dummyCardsCount,t,this)},onStandUp:function(){this.hideMoves(),this.enableTempPlayerInput(!1),this.handleSitOutBtns(!0),this.manageBtns(!1),this.enableJoinBtn()},nextTurn:function(e,t){this.onHideRaisePanel();var a=e.moves;if("RAISE"==e.action.toUpperCase()&&null!=this.optionalPlayerInput.selectedValue&&"CALL"==this.optionalPlayerInput.selectedValue.toUpperCase()&&(this.optionalPlayerInput.selectedValue=null),"RAISE"!=e.action.toUpperCase()&&"BET"!=e.action.toUpperCase()&&"ALLIN"!=e.action.toUpperCase()||null==this.optionalPlayerInput.selectedValue||"CHECK"!=this.optionalPlayerInput.selectedValue.toUpperCase()&&"CALL"!=this.optionalPlayerInput.selectedValue.toUpperCase()||(this.optionalPlayerInput.selectedValue=null),"ALLIN"==e.action.toUpperCase()&&GameManager.user.playerId==e.playerId&&this.handleRunItTwice(!1),"FOLD"==e.action.toUpperCase()&&GameManager.user.playerId!=e.playerId&&this.playerHand[this.getRotatedSeatIndex(this.model.gameData.tableDetails.players[t].seatIndex)].fadeOutFoldedCards(),"FOLD"==e.action.toUpperCase()&&GameManager.user.playerId==e.playerId&&this.getNumPlayerInTable()>2&&this.enableShowFoldBtn(),this.playerInput[0].active=!1,GameManager.isWindows||GameManager.isMobile||1!=GameScreen.viewType||(this.mobilePlayerInput[0].active=!1),null!=t&&this.playerHand[this.getRotatedSeatIndex(this.model.gameData.tableDetails.players[t].seatIndex)].displayMove(e.action),-1==e.currentMoveIndex)return this.hideMoves(),void this.enableTempPlayerInput(!1);if(""!==e.currentMoveIndex){if(e.isRoundOver){if(console.log("On TURN CURRENT MOVE INDEX ",e.currentMoveIndex),console.log(this.playerHand),console.log(this.getRotatedSeatIndex(e.currentMoveIndex)),!this.playerHand[this.getRotatedSeatIndex(e.currentMoveIndex)])return;this.playerHand[this.getRotatedSeatIndex(e.currentMoveIndex)].onTurn(this.model.gameData.tableDetails.turnTime);var n=this.playerHand[this.getRotatedSeatIndex(e.currentMoveIndex)];this.checkForSelfTurn(this.playerHand[this.getRotatedSeatIndex(e.currentMoveIndex)].playerData.playerId)?(this.enableTempPlayerInput(!1),this.timersToKill.push(setTimeout(function(){this.selfLastMoveData=a,e.currentMoveIndex==this.model.gameData.tableDetails.currentMoveIndex&&(this.optionalPlayerInput.selectedValue=null,this.enableSelfTurn(n,a))}.bind(this),1400))):(this.onCloseSureToFold(),this.model.emit(K.PokerEvents.onTurnInOtherRoom,this.model,!1),null!=(i=this.getMyPlayer())&&(i.state,K.PlayerState.Playing))}else{var i;this.playerHand[this.getRotatedSeatIndex(e.currentMoveIndex)].onTurn(this.model.gameData.tableDetails.turnTime),(n=this.playerHand[this.getRotatedSeatIndex(e.currentMoveIndex)]).playerData?(n.onTurn(this.model.gameData.tableDetails.turnTime),this.checkForSelfTurn(n.playerData.playerId)?(this.selfLastMoveData=a,this.enableTempPlayerInput(!1),this.enableSelfTurn(n,a)):(this.onCloseSureToFold(),this.model.emit(K.PokerEvents.onTurnInOtherRoom,this.model,!1),null!=(i=this.getMyPlayer())&&(i.state,K.PlayerState.Playing))):cc.error("!playerPresenter",n)}"precheck"==e.runBy&&e.currentMoveIndex==this.model.gameData.tableDetails.currentMoveIndex&&(this.optionalPlayerInput.selectedValue=null)}},playAudio:function(e){ScreenManager.currentScreen==K.ScreenEnum.GamePlayScreen&&(this.model.gameData.settings.muteGameSound||GameManager.playSound(e))},onSecondEventClickSoud:function(){this.playAudio(K.Sounds.click)},enableSelfTurn:function(e,t){if(e.playerData.state==K.PlayerState.Playing||e.playerData.state==K.PlayerState.Disconnected){this.playAudio(K.Sounds.userTurn),GameManager.popUpManager.hide(s.GamePreferencesPopup,function(){}),this.model.emit(K.PokerEvents.onTurnInOtherRoom,this.model,!0),!GameManager.isMobile&&this.playerInput[0]?GameManager.gameModel.activePokerModels.length>=2&&!GameManager.isWindows&&1==GameScreen.viewType?(GameManager.isWindows||(this.mobilePlayerInput[0].active=!0),this.playerInput[0].active&&(this.playerInput[0].active=!1,this.mobilePlayerInput[0].active=!0)):this.playerInput[0]&&(this.playerInput[0].active=!0):this.playerInput[0].active=!0,this.hideMoves();var a={},n=e.playerData.playerId,i=this.model.getPlayerById(n);a.maxAmount=this.model.gameData.tableDetails.maxRaiseAmount.roundOff(2),a.minAmount=this.model.gameData.tableDetails.minRaiseAmount.roundOff(2),a.playerChips=this.getMyPlayer().chips,a.roundBet=this.getMyPlayer().totalRoundBet||0,a.potAmount=this.model.gameData.tableDetails.totalPot,a.roundName=this.model.gameData.tableDetails.roundName,a.bb=this.model.gameData.tableDetails.bigBlind,a.roundMaxBet=this.model.gameData.tableDetails.roundMaxBet;var o="Omaha"===this.model.roomConfig.channelVariation||"Omaha Hi-Lo"===this.model.roomConfig.channelVariation||"Omaha 5"===this.model.roomConfig.channelVariation||"Omaha 6"===this.model.roomConfig.channelVariation,r=!this.model.roomConfig.isPotLimit&&this.model.roomConfig.channelVariation===K.Variation.TexasHoldem&&this.model.gameData.tableDetails.roundName===K.Round.Preflop;this.betBtnSlider.updateData(a,o,r),this.tileBetBtnSlider&&this.tileBetBtnSlider.updateData(a,o,r),this.enableTempPlayerInput(!1),this.sureToFold=t.includes(1)&&t.includes(6),this.displayMoves(t,i),GameManager.isMobile||GameManager.isWindows||1!=GameScreen.viewType?this.playerInput[0].active=!0:GameManager.gameModel.activePokerModels.length>=2?(this.mobilePlayerInput[0]&&(this.mobilePlayerInput[0].active=!0),this.playerInput[0].active&&(this.playerInput[0].active=!1,this.mobilePlayerInput[0].active=!0)):this.playerInput[0]&&(this.playerInput[0].active=!0)}},displayMoves:function(e,t){null!=this.optionalPlayerInput.selectedValue||(this.enableInputs(e,t),GameManager.gameModel.activePokerModels.length>=2&&!GameManager.isMobile&&!GameManager.isWindows&&1==GameScreen.viewType?(console.log("display moves Tiled"),this.enableInputsForTileAndUntiled(e,t)):console.log("display moves UnTiled")),GameScreen.gameModel.activePokerModels[GameScreen.prevSelection]&&GameScreen.gameModel.activePokerModels[GameScreen.prevSelection]&&GameScreen.gameModel.activePokerModels[GameScreen.prevSelection].gameData.channelId==this.model.gameData.channelId&&GameManager.emit("disablePageView")},enableInputs:function(e,t,a){void 0===a&&(a=this.playerInput);var n=cc.director.getScene().name;"Login"!=n&&"Mac"!=n&&"Windows"!=n?(K.PORTRAIT,this.realBetBtn.active=!1,this.realRaiseBtn.active=!1,e.forEach(function(e){a[e].active=!0,3!==e&&4!==e||(K.PORTRAIT,3===e?this.realBetBtn.active=!0:4===e&&(this.realRaiseBtn.active=!0)),2===e&&(this.callAmountLabel.string=(this.model.gameData.tableDetails.roundMaxBet-this.model.gameData.tableDetails.players[t].totalRoundBet).roundOff(2),this.updateBB()),K.PORTRAIT&&5===e&&(a[3].active||a[4].active)&&(a[e].active=!1)},this)):this.enableInputsForTileAndUntiled(e,t)},enableInputsForTileAndUntiled:function(e,t){var a=this.mobilePlayerInput,n=this.playerInput;e.forEach(function(e){if(a[e].active=!0,n[e].active=!0,2===e){var i=(this.model.gameData.tableDetails.roundMaxBet-this.model.gameData.tableDetails.players[t].totalRoundBet).roundOff(2);this.callAmountLabel.string=i,this.mobileCallAmountLabel.string=i,this.updateBB()}},this)},makePredefinedMove:function(e,t,a){setTimeout(function(){if(cc.isValid(this.node)){switch(e){case"Call":t.indexOf(2)>=0||this.enableInputs(t,a);break;case"CallAny":t.indexOf(2);break;case"Fold":this.sureToFold=!1;break;case"Check":t.indexOf(1)>=0||this.enableInputs(t,a);break;case"CallAny_Check":t.indexOf(1)>=0||t.indexOf(2);break;case"AllIn":break;case"Check_Fold":t.indexOf(1)>=0||(this.sureToFold=!1)}this.optionalPlayerInput.selectedValue=null}}.bind(this),500)},hideMoves:function(){this.mobilePlayerInput.forEach(function(e){e.active=!1},this),this.playerInput.forEach(function(e){e.active=!1},this),GameScreen.gameModel.activePokerModels[GameScreen.prevSelection]&&GameScreen.gameModel.activePokerModels[GameScreen.prevSelection]&&GameScreen.gameModel.activePokerModels[GameScreen.prevSelection].gameData.channelId==this.model.gameData.channelId&&GameManager.emit("enablePageView")},roundOver:function(){for(var e=0;e<this.playerHand.length;e++)this.playerHand[e].activatePlayerBet(!1,!0),this.playerHand[e].playerData&&"FOLD"!=this.playerHand[e].playerData.lastMove&&"ALLIN"!=this.playerHand[e].playerData.lastMove&&(this.playerHand[e].moveShower.scale=0);this.timersToKill.push(setTimeout(function(){this.displayPots()}.bind(this),700))},gameOver:function(e,t){var a=this;console.log("GAME OVER",e),this.disableShowFoldBtn();var n=0,i=this.node.parent.getComponent("PokerModel").number0,o=this.node.parent.getComponent("PokerModel").number1;5!=i||0!=o&&5!=o||(n=2e3),setTimeout(function(){t.forEach(function(t){this.playerHand[this.getRotatedSeatIndex(t)].winningRevealCards(e.endingType==K.GameEndType.EverybodyPacked)},a),a.model.gameData.tableDetails.players.forEach(function(a){!t.includes(a.seatIndex)&&this.playerHand[this.getRotatedSeatIndex(a.seatIndex)]&&this.playerHand[this.getRotatedSeatIndex(a.seatIndex)].winningRevealCards(e.endingType==K.GameEndType.EverybodyPacked)},a)},n),setTimeout(function(){var t,n,i,o,s;cc.isValid(a.node)&&function(){a.preCheckCounter=0,a.optionalPlayerInput.requestMappings={},a.runItTwiceCaseRunning=!1,a.handleRunItTwice(!1),a.enableTempPlayerInput(!1),a.optionalPlayerInput.selectedValue=null,t={};for(var r={},l=0;l<e.winners.length;l++){if(n=a.model.getPlayerById(e.winners[l].playerId),e.winners[l].playerId==GameManager.user.playerId){var c=a.model.gameData.settings.isMuckHand;console.log("this.model.gameData.settings.isMuckHand",c),c||e.endingType!=K.GameEndType.EverybodyPacked||(a.muckHandNode.active=!0)}(i={}).amount=e.winners[l].amount,i.totalChips=e.winners[l].chips,i.potIndex=e.winners[l].potIndex,i.internalPotSplitIndex=e.winners[l].internalPotSplitIndex,a.model.gameData.tableDetails.players[n]&&(i.targetNode=a.playerHand[a.getRotatedSeatIndex(a.model.gameData.tableDetails.players[n].seatIndex)].node,i.set=e.winners[l].set,i.handCard=e.winners[l].handCard,i.boardCard=e.winners[l].boardCard,i.playerId=e.winners[l].playerId,i.winningAmount=e.winners[l].winningAmount,i.type=e.winners[l].type?e.winners[l].type:"LOW CASE ",e.winners[l].isRefund?r.playerId?r.winningAmount+=e.winners[l].winningAmount:((r=i).set=[],r.handCard=[],r.boardCard=[],r.type="REFUND"):(t[e.winners[l].internalPotSplitIndex]||(t[e.winners[l].internalPotSplitIndex]=[]),t[e.winners[l].internalPotSplitIndex].push(i)))}var d=[];if(r.playerId){var h=[];h.push(r),d.push(h)}for(o in t)t.hasOwnProperty(o)&&d.push(t[o]);t=d;var u=new Array(9);u.fill(0);for(var p=0;p<t.length;p++)u[t[p][0].potIndex]=u[t[p][0].potIndex]+1;s=null;for(var m=0;m<t.length;m++)(function(e,a){a.timersToKill.push(setTimeout(function(){var n=null;if(u[t[e][0].potIndex]>1?u[t[e][0].potIndex]=u[t[e][0].potIndex]-1:n=a.potAmount[t[e][0].potIndex],a.timersToKill.push(setTimeout(function(){if(!n){for(var i=0,o=0;o<t[e].length;o++)i+=t[e][o].winningAmount;i=i.roundOff(2),i=a.potAmount[t[e][0].potIndex].getComponent(cc.Label).__string-i,a.potAmount[t[e][0].potIndex].getComponent(cc.Label).string=GameManager.convertChips(i),a.potAmount[t[e][0].potIndex].getComponent(cc.Label).__string=i,a.updateBB()}a.playAudio(K.Sounds.chipDistribution),a.potAnimator.runPotSplitter(t[e],n,function(){})}.bind(a),1e3*a.potSplitterMoveActionDelay)),"Every Body Else Folded"!=t[e][0].type&&"REFUND"!=t[e][0].type&&a.node.getChildByName("winnerBannerBg")){var i=a.node.getChildByName("winnerBannerBg");i.active=!0,i.width=400,i.getChildByName("Rectangle 3289").getChildByName("layout1").active=!1,i.getChildByName("Rectangle 3289").getChildByName("layout2").active=!1,i.getChildByName("Rectangle 3289").getChildByName("winningText").getComponent(cc.Label).string=t[e][0].type,i.getChildByName("Rectangle 3289").getChildByName("layout1").children.forEach(function(e){e.active=!1},this),i.getChildByName("Rectangle 3289").getChildByName("layout1").active=!0;for(var o=0;o<t[e][0].set.length;o++)i.getChildByName("Rectangle 3289").getChildByName("layout1").children[o].active=!0,i.getChildByName("Rectangle 3289").getChildByName("layout1").children[o].getChildByName("rank").getComponent(cc.Label).string=t[e][0].set[o].name,i.getChildByName("Rectangle 3289").getChildByName("layout1").children[o].getChildByName("1").active=!1,i.getChildByName("Rectangle 3289").getChildByName("layout1").children[o].getChildByName("2").active=!1,i.getChildByName("Rectangle 3289").getChildByName("layout1").children[o].getChildByName("3").active=!1,i.getChildByName("Rectangle 3289").getChildByName("layout1").children[o].getChildByName("4").active=!1,"spade"===t[e][0].set[o].type?i.getChildByName("Rectangle 3289").getChildByName("layout1").children[o].getChildByName("1").active=!0:"heart"===t[e][0].set[o].type?i.getChildByName("Rectangle 3289").getChildByName("layout1").children[o].getChildByName("2").active=!0:"club"===t[e][0].set[o].type?i.getChildByName("Rectangle 3289").getChildByName("layout1").children[o].getChildByName("3").active=!0:"diamond"===t[e][0].set[o].type&&(i.getChildByName("Rectangle 3289").getChildByName("layout1").children[o].getChildByName("4").active=!0);a.timersToKill.push(setTimeout(function(){i.active=!1},3e3))}for(var r=0;r<t[e].length;r++){null!=s&&a.dullAllCards(s,!0);var l=t[e][r].targetNode.getChildByName("HandPlayer").getChildByName("MyCardsShow").getComponentsInChildren("Card");s=l;var c=a.holeCardHolder.getComponentsInChildren("Card"),d=a.holeCardsWithTwiceHolder.getComponentsInChildren("Card"),h=a.runItTwiceHolder.getComponentsInChildren("Card"),p=d.concat(h);0!=t[e][r].set.length&&a.highlightWinningCards(t[e][r].set,t[e][r].handCard||[],t[e][r].boardCard||[],c.concat(p),l)}}.bind(a),e*a.potDistributionTimerDelay*1e3))})(m,a);a.model.gameData.tableDetails.players.forEach(function(e){this.playerHand[this.getRotatedSeatIndex(e.seatIndex)].gameOver()},a),a.hideMoves()}()},n)},highlightWinningCards:function(e,t,a,n,i){this.dullAllCards(i);for(var o=0;o<t.length;o++){var s=0;switch(t[o].type){case"spade":s=1;break;case"heart":s=2;break;case"club":s=3;break;case"diamond":s=4}i.forEach(function(e){e.cardRank==t[o].rank&&e.suit==s&&(e.node.getChildByName("CardGlow").active=!0,e.node.y=10,e.node.getChildByName("FrontFace").color=cc.Color.WHITE)},this)}for(this.dullAllCards(n),o=0;o<a.length;o++){switch(s=0,a[o].type){case"spade":s=1;break;case"heart":s=2;break;case"club":s=3;break;case"diamond":s=4}n.forEach(function(e){e.cardRank==a[o].rank&&e.suit==s&&(e.node.getChildByName("CardGlow").active=!0,e.node.y=10,e.node.getChildByName("FrontFace").color=cc.Color.WHITE)},this)}},dullAllCards:function(e,t){e.forEach(function(e){var a=e.node;a.y=0,a.getChildByName("FrontFace").color=new cc.Color(170,161,161),a.getChildByName("CardGlow").active=!1,t&&(a.getChildByName("FrontFace").color=cc.Color.WHITE)})},showWinnerCards:function(e){this.getRotatedSeatIndex(e)&&this.playerHand[this.getRotatedSeatIndex(e)]&&this.playerHand[this.getRotatedSeatIndex(e)].winningRevealCards2()},playerLeft:function(e){console.log("playerLeft ",e),null!==e&&(e[0].playerId===this.model.gameData.playerId&&(!0===GameManager.playerRequestedToLeaveTable[this.model.gameData.channelId]?GameManager.playerRequestedToLeaveTable[this.model.gameData.channelId]=!1:(this.handleSitOutBtns(!0),this.resetView(),this.manageBtns(!1),this.popUpManager.hide(2,function(){}),this.popUpManager.hide(s.BuyInPopup,function(){}),this.showMuckHand(),this.handleRunItTwice(!0,!0),this.singleTime=!1)),-1!==this.model.getPlayerById(this.model.gameData.playerId)?this.playerHand[this.getRotatedSeatIndex(e[0].seatIndex)].disableView():this.playerHand[this.getRotatedSeatIndex(e[0].seatIndex)].disablePlayerView(),this.playerHand[this.getRotatedSeatIndex(e[0].seatIndex)].clearTimers(),this.isStraddleAllowed(),this.enableJoinBtn(),e[0].playerId==GameManager.user.playerId&&this.onTableCloseLeave())},isAutoAddOnAllowed:function(){var e=this.model.gameData.channelType==K.ChannelType.Tournament;return e&&!this.getMyPlayer()&&!this.model.roomConfig.isAutoAddOnEnable&&this.getMyPlayer().state==K.PlayerState.Playing},isAutoRebuyAllowed:function(){return this.model.gameData.channelType==K.ChannelType.Tournament},isStraddleAllowed:function(){var e=!(this.model.gameData.channelType==K.ChannelType.Tournament);return e=e&&!!this.getMyPlayer()&&!this.model.roomConfig.isStraddleEnable&&this.getMyPlayer().state==K.PlayerState.Playing&&this.getNumPlayerInTable()>3,this.straddleCheckBox.node.parent.active=e,e},playerCards:function(e,t){this.forceAddPlayercardsData=e,this.forceAddPlayercardsSeatIndex=t},forceAddPlayerCards:function(){cc.isValid(this.node)&&this.forceAddPlayercardsData&&this.playerHand[this.getRotatedSeatIndex(this.forceAddPlayercardsSeatIndex)].addPlayerCards(this.forceAddPlayercardsData)},onPreCheck:function(e){this.preCheckCounter++;var t=(this.model.gameData.tableDetails.roundMaxBet-this.model.gameData.tableDetails.players[this.model.getPlayerById(GameManager.user.playerId)].totalRoundBet).roundOff(2);this.optionalPlayerInput.selectedValue="NONE"==e.precheckValue?null:e.precheckValue,this.enableTempPlayerInput(!0,e.set,t,e.precheckValue),this.scheduleOnce(function(){var e=(this.model.gameData.tableDetails.roundMaxBet-this.model.gameData.tableDetails.players[this.model.getPlayerById(GameManager.user.playerId)].totalRoundBet).roundOff(2);this.optionalPlayerInput.tempTestFunction(e)}.bind(this),1)},onPlayerCoins:function(e){this.playerHand[this.getRotatedSeatIndex(e.seatIndex)].updateCoins()},enableTempPlayerInput:function(e,t,a,n){void 0===n&&(n="NONE"),this.optionalPlayerInput.enableTempPlayerInput(e,t,a,n)},changeTableColor:function(e){this.node.parent.active&&(this.table.spriteFrame=e)},onPlayerNotes:function(e){var t=this.model.getPlayerById(e);this.playerHand[this.getRotatedSeatIndex(this.model.gameData.tableDetails.players[t].seatIndex)].displayNote()},onValueChange:function(){this.highLightCheckbox&&this.highLightCheckbox.getSelection();for(var e=-1,t=0;t<this.tableHighlightColors.length;t++)if(this.table.spriteFrame==this.tableHighlightColors[t]){e=t;break}e>=0&&(this.table.spriteFrame=this.tableColors[e])},toLobby:function(){K.PORTRAIT&&this.mobileGamePlayOptionsVisible&&this.mobileGamePlayOptions(),GameManager.isMobile?GameScreen.onShowLobby():window.versions.ping(),this.playAudio(K.Sounds.click)},onRebuyTournament:function(e){s.PlayerInfoPopup,e&&Pop;var t={playerId:GameManager.user.playerId,tournamentId:this.model.roomConfig.tableId};TournamentHandler.rebuyInTournament(t,function(e){if(e.success);else{var t={};t.info=e.info,this.popUpManager.show(s.PlayerInfoPopup,t,function(){})}}.bind(this),null),this.playAudio(K.Sounds.click)},clearBreakTimer:function(){clearTimeout(this.timerOffSchedule),clearInterval(this.timerSchedule)},onReplay:function(){if(this.playAudio(K.Sounds.click),!(this.model.handTabs.length<=0)){var e={};e.currentId=this.model.handTabs[this.model.handTabs.length-1].videoId,e.refModel=this.model,e.id=this.model.handTabs.length-1,e.playSound=this.playAudio.bind(this),GameScreen.isMobile&&this.model.handTabs,GameManager.popUpManager.show(s.VideoPlayerPopup,e,function(){})}},onMobGameOptions:function(){this.mobGameOptions.active=!this.mobGameOptions.active},showMuchHand:function(e,t){this.playAudio(K.Sounds.click),this.muckHandNode.active=!1,"true"==t&&this.model.fireMuckHandEvent()},addOnBtnCallBack:function(){},activeDeactiveReBuyInBtn:function(e){this.reBuyBtn2.active=e},onReBuyBtn2:function(){this.model.onReBuyCall()},reBuyBtnCallBack:function(){},showMuckHand:function(){this.muckHandCheckbox.node.parent.active=!!this.getMyPlayer()&&this.getMyPlayer().state==K.PlayerState.Playing},onMuckHand:function(){var e=this.muckHandCheckbox.getSelection();this.model.setMuckHand(e,function(t){t.success?this.muckHandCheckbox.setSelection(e):this.muckHandCheckbox.setSelection(!e)}.bind(this))},killTimers:function(){this.timersToKill.forEach(function(e){clearTimeout(e)},this),this.timersToKill=[],this.playerHand.forEach(function(e){e.clearTimers()},this)},displayRoundNumber:function(){this.roomNameLbl.string=this.model.roomConfig.channelName;var e=GameManager.convertChips(this.model.gameData.tableDetails.smallBlind)+"/"+GameManager.convertChips(this.model.gameData.tableDetails.bigBlind);this.roomNameLbl2.string="Blinds: "+e},onLobby:function(){K.PORTRAIT&&this.mobileGamePlayOptionsVisible&&this.mobileGamePlayOptions(),GameManager.isMobile?GameScreen.onShowLobby():window.versions.ping(),this.playAudio(K.Sounds.click)},OnLeaveJohny:function(){K.PORTRAIT&&this.mobileGamePlayOptionsVisible&&this.mobileGamePlayOptions(),GameScreen.leaveCurrent(),this.playAudio(K.Sounds.click)},mobileGamePlayOptions:function(){var e=this,t=this.node.parent.getChildByName("DummGameplayOpt").getPosition();if(this.mobileGamePlayOptionsVisible){var a=cc.sequence(cc.moveTo(0,this.mobileGamePlayOptionsInitPosition.x,this.mobileGamePlayOptionsInitPosition.y).easing(cc.easeCircleActionIn()),cc.callFunc(function(){e.node.parent.getChildByName("GameplayOptions").children[1].active=!1,GameManager.emit("showJoinSimlar")},this));this.node.parent.getChildByName("GameplayOptions").runAction(a)}else{var n=cc.sequence(cc.callFunc(function(){e.node.parent.getChildByName("GameplayOptions").children[1].active=!0},this),cc.moveTo(.1,t.x,t.y).easing(cc.easeCircleActionInOut()));this.node.parent.getChildByName("GameplayOptions").runAction(n),GameManager.emit("hideJoinSimlar")}this.mobileGamePlayOptionsVisible=!this.mobileGamePlayOptionsVisible},mobileChatOptions:function(){this.mobileSliderChatSection.active||(GameManager.emit("hideJoinSimlar"),this.mobileChatOptionsInitPosition=this.mobileSliderChatSection.getPosition(),this.mobileSliderChatSection.parent.getChildByName("DummyChatOpt").getPosition(),this.chatCloseBtn.active=!0,this.mobileSliderChatSection.active=!0,this.dealerChatToggle.state!==this.model.gameData.settings.dealerChat&&this.dealerChatToggle.onToggle(),this.model.gameData.settings.playerChat!==this.ChatToggle.state&&this.ChatToggle.onToggle(),this.mobileSliderChatSection.runAction(cc.moveTo(.3,393,0).easing(cc.easeCircleActionInOut())))},onClose:function(){var e=this,t=cc.sequence(cc.moveTo(.001,this.mobileChatOptionsInitPosition.x,this.mobileChatOptionsInitPosition.y).easing(cc.easeCircleActionIn()),cc.callFunc(function(){e.mobileSliderChatSection.active=!1,GameManager.emit("showJoinSimlar")},this));this.mobileSliderChatSection.runAction(t)},onLeaderboard:function(){this.leaderboardInitPosition=this.leaderboardSection.getPosition(),this.leaderboardSection.x=this.leaderboardDummySection.x,GameManager.emit("hideJoinSimlar")},onCloseLeaderboard:function(){this.leaderboardSection.x=this.leaderboardInitPosition.x,GameManager.emit("showJoinSimlar")},onMobilDealerClick:function(){this.dealerNode.active=!0,this.playAudio(K.Sounds.click)},onMobileHistoryClick:function(){GameManager.emit("hideJoinSimlar"),this.model.showHandHistoryDetail(),this.playAudio(K.Sounds.click)},onViewChangedToTiled:function(){if(this.playerInput[0].active){this.mobilePlayerInput[0].active=!0,this.playerInput[0].active=!1;for(var e=1;e<this.playerInput.length;e++)this.mobilePlayerInput[e].active=this.playerInput[e].active}},onViewChangedToUnTiled:function(){if(this.mobilePlayerInput[0].active){this.mobilePlayerInput[0].active=!1,this.playerInput[0].active=!0;for(var e=1;e<this.mobilePlayerInput.length;e++)this.playerInput[e].active=this.mobilePlayerInput[e].active}},onShowRaisePanel:function(){K.PORTRAIT&&(this.playerInputNode.active=!1,this.raisePanelNode.active=!0,this.playerChatBtn.active=!1)},onHideRaisePanel:function(){K.PORTRAIT&&(this.playerInputNode.active=!0,this.raisePanelNode.active=!1,this.playerChatBtn.active=!0)},onGameResult:function(){var e=this;ServerCom.pomeloRequest("room.channelHandler.getCurrentGameResult",{channelId:this.model.gameData.channelId,access_token:K.Token.access_token},function(t){console.log("getCurrentGameResult",t),e.gameResult.active=!0,e.gameResult.getComponent("GameResult").onShow(t.data),GameManager.emit("hideJoinSimlar")},null,5e3,!1)},onClosePlayerInfoPopup:function(){this.playerInfoPopup.active=!1,GameManager.emit("showJoinSimlar")},updateBB:function(){this.potAmount.forEach(function(e){e.parent.getChildByName("bb").getComponent(cc.Label).string=(Number(e.getComponent(cc.Label).__string)/this.model.gameData.tableDetails.bigBlind).toFixed(1)+"BB"},this),this.totalPotLbl.node.parent.getChildByName("bb").getComponent(cc.Label).string=(Number(this.totalPotLbl.__string)/this.model.gameData.tableDetails.bigBlind).toFixed(1)+"BB",this.callAmountLabel.node.parent.getChildByName("bb").getComponent(cc.Label).string=(Number(this.callAmountLabel.string)/this.model.gameData.tableDetails.bigBlind).toFixed(1)+"BB",GameManager.isBB&&GameManager.user.settings.stackInBB?(this.potAmount.forEach(function(e){e.opacity=0,e.parent.getChildByName("bb").opacity=255},this),this.totalPotLbl.node.scale=0,this.totalPotLbl.node.parent.getChildByName("bb").scale=.5,this.callAmountLabel.node.scale=0,this.callAmountLabel.node.parent.getChildByName("bb").scale=.5):(this.potAmount.forEach(function(e){e.opacity=255,e.parent.getChildByName("bb").opacity=0},this),this.totalPotLbl.node.scale=.5,this.totalPotLbl.node.parent.getChildByName("bb").scale=0,this.callAmountLabel.node.scale=.5,this.callAmountLabel.node.parent.getChildByName("bb").scale=0),this.betBtnSlider.updateBB()},switchBBUI:function(){console.log("switchBBUI"),GameManager.user.settings.stackInBB!==this.BBToggle.state&&this.BBToggle.onToggle()},switchBBNow:function(){console.log("switchBBNow"),this.updateBB()},onToggleBB:function(){var e={};e.playerId=GameManager.user.playerId,e.stackInBB=this.BBToggle.state,e.access_token=K.Token.access_token,e.isLoggedIn=!0,ServerCom.pomeloRequest("connector.entryHandler.changeStackInBB",e,function(e){e.success?(GameManager.user.settings.stackInBB=!GameManager.user.settings.stackInBB,GameManager.isBB=GameManager.user.settings.stackInBB,GameManager.emit("switchBB")):this.BBToggle.onToggle()}.bind(this),null,5e3,!1)},onleaveNextHand:function(){this.leaveNextHandTag.active=!0},onRemoveTable:function(e){console.log("onRemoveTable",e),this.model&&this.model.gameData&&(e.channelId==this.model.gameData.channelId||e._id==this.model.gameData.channelId)&&(this.tableClosed.active=!0)},onTableCloseLeave:function(){!1===GameManager.playerRequestedToLeaveTable[this.model.gameData.channelId]&&(GameManager.playerRequestedToLeaveTable[this.model.gameData.channelId]=!0),this.model.leaveClosedTable()},onTogglePlayerChat:function(){var e={};e.channelId=this.model.gameData.channelId,e.playerId=GameManager.user.playerId,e.key="playerChat",e.value=this.ChatToggle.state,ServerCom.pomeloRequest(K.PomeloAPI.updateTableSettings,e,function(e){e.success?this.model.gameData.settings.playerChat=!this.model.gameData.settings.playerChat:this.ChatToggle.onToggle()}.bind(this),null,5e3,!1)},onToggleDealerChat:function(){var e={};e.channelId=this.model.gameData.channelId,e.playerId=GameManager.user.playerId,e.key="dealerChat",e.value=this.dealerChatToggle.state,ServerCom.pomeloRequest(K.PomeloAPI.updateTableSettings,e,function(e){e.success?this.model.gameData.settings.dealerChat=!this.model.gameData.settings.dealerChat:this.dealerChatToggle.onToggle()}.bind(this),null,5e3,!1)},onUpdateTableImage:function(){for(var e=0;e<GameManager.tableImages.length;e++){var t=GameManager.tableImages[e];""!=GameManager.user.defaultTheme&&GameManager.user.defaultTheme._id&&t.___data._id==GameManager.user.defaultTheme._id&&(this.node.getChildByName("TableBg").getComponent(cc.Sprite).spriteFrame=GameManager.tableImagesTour[e],GameScreen.updateTabImage(!1,GameManager.tabActImages[e],GameManager.tabDeactImages[e]))}},onReport:function(){var e=this;ServerCom.pomeloRequest("connector.entryHandler.getReportIssues",{},function(t){console.log("getReportIssues",t),e.mobileGamePlayOptions(),e.reportBug.active=!0,e.reportBug.getComponent("ReportBug").onShow(t.data),e.reportBug.opacity=0;var a=e.reportBug.getComponent("AnimBase");null!==a&&a.play("showPopUp",function(){})},null,5e3,!1)},updateRebuyChips:function(e){console.log("updateRebuyChips",e);var t=this.model.getPlayerById(e.playerId);if(-1!==t){var a=this.getPlayerByIdx(t);a.playerData.chips=e.data.chips,a.amountLabel.string=Number(e.data.chips.toFixed(2))}},onDebug:function(){console.log("onDebugxxx")},onChangeTheme:function(){this.tableTheme.active=!0,GameManager.emit("enablePageView"),this.popUpManager.hide(1,function(){}),this.mobileGamePlayOptions(),GameManager.emit("showJoinSimlar")},onDashboardAddCash:function(){GameManager.onDashboardAddCash()},onBuyInConfirmQuick:function(e,t){ServerCom.pomeloRequest("room.channelHandler.quickSeat",{roomId:this.model.gameData.raw.tableDetails.roomId,isLoggedIn:!0,access_token:K.Token.access_token,imageAvtar:"",chips:Number(t),playerId:GameManager.user.playerId,playerName:GameManager.user.userName,isRequested:!0},function(e,t){if(e){console.log(e);var a=K.PomeloAPI.joinChannel;GameManager.join2(e.data.channelId,a,{channelId:e.data.channelId,isRequested:!0,channelType:e.data.channelType,tableId:"",playerId:GameManager.user.playerId,playerName:GameManager.user.userName,networkIp:m.ipV4Address,maxPlayers:5,isPrivateTable:!1})}else GameManager.popUpManager.show(s.NotificationPopup,t.err.info,function(){})},null,5e3,!1)},quickSeat:function(){if(GameManager.isMobile?GameManager.activeTableCount=GameScreen.gridParent.getComponent(cc.PageView).getPages().length:GameManager.activeTableCount=GameScreen.gridParent.children.length,GameManager.activeTableCount>=GameManager.maxTableCounts)GameManager.popUpManager.show(s.MaxTablesJoinedPopup,null,function(){});else{var e={};e.minValue=this.model.roomConfig.minBuyIn,e.maxValue=this.model.roomConfig.maxBuyIn;var t=LocalizedManager.t("TXT_AVAILABLE_CHIPS")+":";"DIAMOND"==GameManager.user.category?e.totalChips=GameManager.user.realChips:e.totalChips=GameManager.user.freeChips,e.dialogHeadingText=t,e.autoBuyIn=GameManager.user.autoBuyIn,e.confirm=this.onBuyInConfirmQuick.bind(this),e.channelId=this.model.gameData.raw.tableDetails.roomId,e.isRealMoney=!0,e.autoConfirm=!0,e.config=this.model.roomConfig,e.isAllInAndFold=this.model.roomConfig.isAllInAndFold,e.topHeading=LocalizedManager.t("TXT_BUY_IN"),GameManager.popUpManager.show(s.BuyInPopup,e,function(){})}},onDealerChatBtn:function(){this.dealerChatBtn.getChildByName("pressed").active=!0,this.playreChatBtn.getChildByName("pressed").active=!1,this.dealerNode.active=!0,this.playerChatNode.active=!1},onChatBtn:function(){this.dealerChatBtn.getChildByName("pressed").active=!1,this.playreChatBtn.getChildByName("pressed").active=!0,this.dealerNode.active=!1,this.playerChatNode.active=!0},onShowInviteFriendList:function(){this.inviteFirendsList.active=!0,this.inviteFirendsList.getComponent("InvliteFriendsList").onShow(this)},playAudioClick:function(){navigator.vibrate&&navigator.vibrate(200),this.playAudio(K.Sounds.click)},enableShowFoldBtn:function(){this.showFoldBtn.node.parent.parent.active=!0,this.showFoldBtn.node.parent.getChildByName("tick").active=this.model.gameData.settings.isShowCard},disableShowFoldBtn:function(){this.showFoldBtn.node.parent.parent.active=!1,this.showFoldBtn.node.parent.getChildByName("tick").active=!1},onShowFoldCardsBtnClick:function(){this.playAudio(K.Sounds.click);var e=this.showFoldBtn.node.parent.getChildByName("tick").active,t={};t.channelId=this.model.gameData.channelId,t.playerId=GameManager.user.playerId,t.key="isShowCard",t.value=!e,ServerCom.pomeloRequest(K.PomeloAPI.updateTableSettings,t,function(e){e.success&&(this.showFoldBtn.node.parent.getChildByName("tick").active=t.value,this.model.gameData.settings.isShowCard=!this.model.gameData.settings.isShowCard)}.bind(this),null,5e3,!1)}}),cc._RF.pop()},{BetBtnUtil:"BetBtnUtil",CardDistributer:"CardDistributer",CardTypes:"CardTypes",Checkbox:"Checkbox",OptionalPlayerInput:"OptionalPlayerInput",PlayerPresenter:"PlayerPresenter",PokerModel:"PokerModel",PopUpManager:"PopUpManager",PostTypes:"PostTypes",PotSplitter:"PotSplitter",StickerController:"StickerController",Toggle:"Toggle"}],PopUpBase:[function(e,t){"use strict";cc._RF.push(t,"a3b45pRi6pD+KRWu4FM2w8t","PopUpBase");var a=e("EventEmitter");cc.Class({extends:a,properties:{data:{default:null,visible:!1}},onLoad:function(){},onShow:function(e){this.data=e},onHide:function(){},onButtonClickEvent:function(){},onDestroy:function(){},onClickEnter:function(){}}),cc._RF.pop()},{EventEmitter:"EventEmitter"}],PopUpManager:[function(e,t){"use strict";cc._RF.push(t,"7df3bT5AH5AYIB463t/OXck","PopUpManager");var a=e("PopUpBase"),n=new cc.Enum({DisconnectDialog:0,TableColorPreferenceDialog:1,SeatPreferenceDialog:2,AvatarDialog:3,BuyInPopup:4,LobbySettingsPopup:5,CashierPopup:6,PlayerAccountPopup:7,InsufficientPopup:8,TournamentLobbyInfoPopup:9,GamePreferencesPopup:10,MaxTablesJoinedPopup:11,SitNGoResultPopup:12,QuickSeatPopUp:13,ResultPopup:14,BlindChangedPopup:15,PlayerInfoPopup:16,ConfirmDialogQuickSeatSitNGo:17,HandHistoryPopup:18,VideoPlayerPopup:19,InstructionPopup:20,MultiLoginPopup:21,JoinGamePopup:22,NotificationPopup:23,MaintenancePopup:24,UpdatePopup:25,InGamePreferencesPopup:26,OnLogOutPopup:27,CashoutPopup:28,ForgotPasswordPopUp:29,EnterPasswordPopup:30,GameInfoPopup:31,HandHistoryDetailPopup:32,GameVariation:33,InviteToPlayPopup:34,ProfilePopup:35,RegDialog:36,CommonDialog:37,FreeBuyin:38,UpdateCategory:39,RemoveDataDialog:40,NewVersionPopup:41,AdminNoticePopup:42,None:100}),i=cc.Class({extends:cc.Component,properties:{popUps:{default:[],type:a},currentPopUp:{default:n.None,type:n},currentOverLayedPopUps:{default:[],type:n},enterListener:{default:null,visible:!1},PopupType:{visible:!1,get:function(){return n}}},onLoad:function(){window.PopupManager=this},onEnable:function(){this.registerEnterKey()},onDisable:function(){this.unregisterEnterKey()},show:function(e,t,a){var i=null,o=-1!==this.currentOverLayedPopUps.indexOf(e);if(null!==e&&e!==n.None&&!o){this.currentOverLayedPopUps.push(e),(i=this.popUps[e]).node.active=!0;var s=this.popUps[e].getComponent("AnimBase"),r=this;null!==s?(s.node.opacity=0,s.play("showPopUp",function(){r.popUps[e].onShow(t),a&&a()})):(this.popUps[e].onShow(t),a&&a()),this.currentPopUp=e,GameManager.emit("hideJoinSimlar")}return i},hide:function(e,t){var a=-1!=this.currentOverLayedPopUps.indexOf(e);null!==e&&e!==n.None&&a&&(this.currentOverLayedPopUps.splice(this.currentOverLayedPopUps.indexOf(e),1),this.popUps[e].onHide(),t&&t(),this.popUps[e].node.active=!1,this.currentPopUp=this.currentOverLayedPopUps[this.currentOverLayedPopUps.length-1]||null),GameManager.emit("showJoinSimlar")},hideCurrentPopUp:function(){this.hide(this.currentPopUp)},hideAllPopUps:function(){0!==this.currentOverLayedPopUps.length&&this.hide(this.currentOverLayedPopUps[this.currentOverLayedPopUps.length-1],this.hideAllPopUps.bind(this))},checkIfPopupActive:function(){return!!(this.currentPopUp||this.currentOverLayedPopUps.length>0)},checkIfPopupTypeActive:function(e){return!(!this.currentPopUp||this.currentPopUp!==e)},registerEnterKey:function(){},unregisterEnterKey:function(){}});t.exports={PopUpManager:i,PopUpType:n},cc._RF.pop()},{PopUpBase:"PopUpBase"}],PostTypes:[function(e,t){"use strict";cc._RF.push(t,"a9064d7dKNMh5Z7OAduXCbS","PostTypes");var a={loginType:"registration",deviceType:"browser",loginMode:"normal",userName:"kumarsushil",emailId:"sushil@creatiosoft.com",password:"abcd",ipV4Address:"324324",ipV6Address:"123123",regotp:"",mobileNumber:"",appVersion:"",access_token:"",refresh_token:"",client:"",os:"",userAgent:"",deviceId:""};t.exports={Login:a,ForgotPassword:{userName:"sdfdsfsdfdsf",emailId:"sushil@creatiosoft.com"},ResetPassword:{passwordResetToken:"dhjsahdd",password:"fjdshfjd"},UserID:{playerId:"fdsfdsfdsf"},OTP:{playerId:"fdsfdsfdsf",otp:324234},TransactionHistory:{playerId:"dshfkdhf",lowerLimit:10,upperLimit:20},TableFilter:{isRealMoney:!0},JoinChannel:function(e){this.playerId=e.playerId||"",this.channelId=e.channelId||e._id||"",this.channelType=e.channelType,this.tableId=e.tableId||"",this.maxPlayers=e.maxPlayers,this.isRequested=!0,this.isPrivateTable=e.isPrivateTabel},SitData:function(e,t,n,i,o,s,r){this.channelId=e,this.playerId=t,this.chips=n,this.seatIndex=i,this.playerName=o,this.imageAvtar="",this.isRequested=!0,this.isAutoReBuy=r,this.networkIp=a.ipV4Address},MoveData:function(e,t,a,n,i){this.channelId=e,this.playerId=t,this.playerName=a,this.amount=n,this.action=i,this.isRequested=!0},LeaveData:function(e,t,a,n){this.playerId=e,this.channelId=t,this.isStandup=a,this.playerName=n,this.isRequested=!0},ConnectAckData:function(e,t){this.playerId=t,this.channelId=e},Tournament:function(e,t,a){this.playerId=t,this.tournamentId=e,this.gameVersionCount=a},reportIssue:function(e,t){this.playerId=e,this.issue=t},ChatData:function(e,t,a,n){this.playerId=e,this.channelId=a,this.message=n,this.playerName=t,this.isRequested=!0},SitOutData:function(e,t){this.channelId=e,this.playerId=t,this.isRequested=!0},ResetSitout:function(e,t){this.channelId=e,this.playerId=t,this.isRequested=!0},AddChipsData:function(e,t,a){this.channelId=e,this.playerId=t,this.amount=a,this.isRequested=!0},GetRegisteredUsersData:function(e,t,a){this.playerId=e,this.tournamentId=t,this.gameVersionCount=a},GetTournamentLobbyInfo:function(e,t){this.tournamentId=e,this.gameVersionCount=t},BlindAndPrize:function(e,t,a){this.blindRule=e,this.gameVersionCount=t,this.prizeRule=a},FavTableData:function(e,t,a){this.playerId=e,this.favourateTable={channelId:t,type:a}},RemoveFavTableData:function(e,t){this.playerId=e,this.channelId=t},JoinSimilar:function(e,t,a,n,i,o,s){this.searchParams={},this.searchParams.isRealMoney=e,this.searchParams.channelVariation=t,this.searchParams.smallBlind=a,this.searchParams.bigBlind=n,this.searchParams.maxPlayers=i,this.searchParams.turnTime=o,this.playerId=s,this.isRequested=!0},GetPrizeData:function(e){this.playerId=e},CreateNote:function(e,t,a,n){this.playerId=e,this.forPlayerId=t,this.notes=a,this.color=n},GetNote:function(e,t){this.playerId=e,this.forPlayerId=t},OpenTable:function(e){this.playerId=e.playerId||"",this.channelId=e._id||"",this.channelType=e.channelType,this.tableId=e.tableId||"",this.isRequested=!0,this.playerName=e.playerName||"",this.networkIp=a.ipV4Address},QuickSeatSitNGo:function(e,t,a,n,i){this.isRealMoney=e,this.gameVariation=t,this.buyIn=a,this.maxPlayersForTournament=n,this.turnTime=i},QuickSeatTourn:function(e,t,a,n,i){this.isRealMoney=e,this.gameVariation=t,this.buyIn=a,this.tournamentType=n,this.timeSpan=i},BlindAndPrizeTournament:function(e,t){this.tournamentId=e,this.noOfPlayers=t},SetPlayerValData:function(e,t,a,n){this.isRequested=!0,this.channelId=e,this.playerId=t,this.key=a,this.value=n},ReplayData:function(e,t,a){this.channelId=e,this.roundId=t,this.logData=a},BlindAndPrizeSatellite:function(e,t){this.tournamentId=e,this.gameVersionCount=t},FreeRoll:function(e){this.raceId=e.raceId||"abcd",this.configId=e._id||"",this.channelVariation=e.variation||"",this.isRequested=!0,this.playerId=e.playerId||"",this.channelType=e.channelType||"",this.tableId=e.tableId||""}},cc._RF.pop()},{}],PotSplitter:[function(e,t){"use strict";cc._RF.push(t,"b1e1fUVOBhBVYJBgK1Zw6GW","PotSplitter"),e("PopUpManager").PopUpType,cc.Class({extends:cc.Component,properties:{centralPot:{default:null,type:cc.Node},potPosRef:{default:[],type:cc.Node}},onLoad:function(){},runPotSplitter:function(e,t,a){var n=e.length;e.forEach(function(e){"REFUND"!=e.type&&e.targetNode.getComponent("PlayerPresenter").showWinnerBanner();var i=!1,o=cc.instantiate(this.centralPot);o.active=!0;var s=this.potPosRef[e.potIndex||0].getPosition();s=new cc.Vec2(s.x+2*Math.random(),s.y-50),o.parent=e.targetNode.parent.parent.parent,o.setPosition(s),o.getChildByName("PotAmount").getComponent(cc.Label).string=Math.roundOff(e.winningAmount,2)+"",s=e.targetNode.parent.getPosition();var r=cc.moveTo(.45,cc.v2(s.x,s.y)),l=cc.callFunc(function(){i||(i=!0,(Math.roundOff(e.targetNode.getComponent("PlayerPresenter").amountLabel.string,2)+e.winningAmount).roundOff(2)<=e.totalChips&&(e.targetNode.getComponent("PlayerPresenter").amountLabel.string=(e.winningAmount+Number(e.targetNode.getComponent("PlayerPresenter").amountLabel.string)).roundOff(2))),t&&t.children[0].getComponent("PokerChipsView").destroyChips(),o.destroy(),0==n&&null!=a&&a()},this),c=cc.sequence(cc.callFunc(function(){t&&(t.parent.active=!1)}),r,l);o.runAction(c),n--,setTimeout(function(){cc.isValid(o)&&(t&&(t.parent.active=!1),i||(Math.roundOff(e.targetNode.getComponent("PlayerPresenter").amountLabel.string,2)+e.winningAmount).roundOff(2)<=e.totalChips&&(e.targetNode.getComponent("PlayerPresenter").amountLabel.string=(e.winningAmount+Number(e.targetNode.getComponent("PlayerPresenter").amountLabel.string)).roundOff(2)),o.stopAllActions(),o.destroy(),0==n&&null!=a&&a())}.bind(this),600)},this)}}),cc._RF.pop()},{PopUpManager:"PopUpManager"}],PrivateTableContent:[function(e,t){"use strict";cc._RF.push(t,"e885f+zpiNBf6ReSUVaBi5C","PrivateTableContent"),e("PostTypes").JoinChannel,e("PopUpManager").PopUpManager;var a=e("PopUpManager").PopUpType,n=e("PostTypes").Login;cc.Class({extends:cc.Component,properties:{},onLoad:function(){ServerCom.pomeloBroadcast(K.LobbyBroadcastRoute.tableUpdate,this.onTableUpdated.bind(this))},onTableUpdated:function(e){if(e._id==this.table._id)for(var t in e.updated)if("playingPlayers"==t){if(e.updated.playingPlayers>0)cc.find("expire",this.node).active=!1,cc.find("remove/scaler/New Node",this.node).getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")),cc.find("remove",this.node).getComponent(cc.Button).enabled=!1;else if(cc.find("expire",this.node).active=!0,cc.find("remove/scaler/New Node",this.node).getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),cc.find("remove",this.node).getComponent(cc.Button).enabled=!0,e.updated.expiredAt){this.table.expiredAt=e.updated.expiredAt;var a=GameManager.getMTimeDuration(Number(this.table.expiredAt));cc.find("expire",this.node).getComponent(cc.Label).string="Expire in: "+a}break}},init:function(e){var t=this,a=this;this.table=e;var n=GameManager.getMTimeDuration(Number(e.expiredAt));cc.find("expire",this.node).getComponent(cc.Label).string="Expire in: "+n,cc.find("TableName",this.node).getComponent(cc.Label).string=e.channelName,cc.find("sta/Stakes",this.node).getComponent(cc.Label).string="Blinds: "+e.smallBlind+"/"+e.bigBlind,cc.find("vari/vari",this.node).getComponent(cc.Label).string=e.channelVariation,e.playingPlayers>0?(cc.find("expire",this.node).active=!1,cc.find("remove/scaler/New Node",this.node).getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")),cc.find("remove",this.node).getComponent(cc.Button).enabled=!1):(cc.find("expire",this.node).active=!0,cc.find("remove/scaler/New Node",this.node).getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),cc.find("remove",this.node).getComponent(cc.Button).enabled=!0),this.schedule(function(){var e=new Date;if(parseInt(t.table.expiredAt),e.getTime()<t.table.expiredAt){var a=GameManager.getMTimeDuration(Number(t.table.expiredAt));cc.find("expire",t.node).getComponent(cc.Label).string="Expire in: "+a}else GameManager.getMTimeDuration(Number(t.table.expiredAt)),cc.find("expire",t.node).getComponent(cc.Label).string="Expired"},1),"Texas Hold\u2019em"==e.channelVariation?(cc.find("vari/vari",this.node).getComponent(cc.Label).string="Hold\u2019em",cc.loader.loadRes("tags/holdem",cc.SpriteFrame,function(e,t){e||(cc.find("vari",a.node).getComponent(cc.Sprite).spriteFrame=t)})):"Omaha"==e.channelVariation?(cc.find("vari/vari",this.node).getComponent(cc.Label).string="PLO",cc.loader.loadRes("tags/plo",cc.SpriteFrame,function(e,t){e||(cc.find("vari",a.node).getComponent(cc.Sprite).spriteFrame=t)})):"Omaha 5"==e.channelVariation?(cc.find("vari/vari",this.node).getComponent(cc.Label).string="PLO5",cc.loader.loadRes("tags/plo5",cc.SpriteFrame,function(e,t){e||(cc.find("vari",a.node).getComponent(cc.Sprite).spriteFrame=t)})):"Omaha 6"==e.channelVariation?(cc.find("vari/vari",this.node).getComponent(cc.Label).string="PLO6",cc.loader.loadRes("tags/plo6",cc.SpriteFrame,function(e,t){e||(cc.find("vari",a.node).getComponent(cc.Sprite).spriteFrame=t)})):"Mega Hold\u2019em"==e.channelVariation?(cc.find("vari/vari",this.node).getComponent(cc.Label).string="Mega Hold\u2019em",cc.loader.loadRes("tags/mega",cc.SpriteFrame,function(e,t){e||(cc.find("vari",a.node).getComponent(cc.Sprite).spriteFrame=t)})):cc.loader.loadRes("tags/holdem",cc.SpriteFrame,function(e,t){e||(cc.find("vari",a.node).getComponent(cc.Sprite).spriteFrame=t)}),cc.find("buy/Background/MinMax",this.node).getComponent(cc.Label).string=e.minBuyIn+"/"+e.maxBuyIn,cc.find("avgPot",this.node).getComponent(cc.Label).string="Avrg. Pot: "+e.avgStack,cc.find("remove",this.node).getComponent(cc.Button).clickEvents[0].customEventData=e._id,this.node.__inviteCode=e.inviteCode},onDestroy:function(){},onJoin:function(){null!=GameScreen?GameManager.isMobile?GameManager.activeTableCount=GameScreen.gridParent.getComponent(cc.PageView).getPages().length:GameManager.activeTableCount=GameScreen.gridParent.children.length:GameManager.activeTableCount=0,GameManager.activeTableCount>=GameManager.maxTableCounts?GameManager.popUpManager.show(a.MaxTablesJoinedPopup,null,function(){}):ServerCom.pomeloRequest("room.channelHandler.joinChannelByInvitecode",{inviteCode:this.table.inviteCode,playerId:GameManager.user.playerId,networkIp:n.ipV4Address},function(e){console.log(e),GameManager.emit("joinChannelByInvitecode"),GameManager.verifyTablePrivate(e.channelId)&&GameManager.onJoinSuccess(e,e.data)},null,5e3,!1)}}),cc._RF.pop()},{PopUpManager:"PopUpManager",PostTypes:"PostTypes"}],PrivateTablePopup:[function(e,t){"use strict";cc._RF.push(t,"dc025XgTAtGPoRJWDiwU7LY","PrivateTablePopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase"),o=e("SliderTouch");cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},sliderTouch:{default:null,type:o},s:{default:null,type:cc.Label},b:{default:null,type:cc.Label},errorLbl:{default:null,type:cc.Label},tableName:{default:null,type:cc.EditBox},smallBlind:{default:null,type:cc.EditBox},bigBlind:{default:null,type:cc.EditBox},minBuyIn:{default:null,type:cc.EditBox},maxBuyIn:{default:null,type:cc.EditBox},maxPlayers:{default:null,type:cc.EditBox},password:{default:null,type:cc.EditBox},isPotLimit:{default:null,type:cc.Toggle},holdem:{default:null,type:cc.Toggle},omaha:{default:null,type:cc.Toggle},omaha5:{default:null,type:cc.Toggle},omaha6:{default:null,type:cc.Toggle},p2:{default:null,type:cc.Toggle},p3:{default:null,type:cc.Toggle},p4:{default:null,type:cc.Toggle},p5:{default:null,type:cc.Toggle},p6:{default:null,type:cc.Toggle},minAmount:{default:.5,visible:!1},maxAmount:{default:500,visible:!1},callback:null},onLoad:function(){this.sliderTouch.registerCallback(this.onSliderValueChange.bind(this))},onSliderValueChange:function(e){this.minAmount=1,this.maxAmount=500;var t=(e=(e=(e=Number(e).toFixed(1))<0?0:e)>1?1:e)*(this.maxAmount-this.minAmount+1)+this.minAmount;t=t>this.maxAmount?this.maxAmount:t,0==e?t=.5:1==e?t=500:t-=1,this.s.string=t,this.b.string=2*t,this.minBuyIn.string=10*t,this.maxBuyIn.string=20*t},onShow:function(){this.minAmount=1,this.maxAmount=500,this.onSliderValueChange(0)},onEditEndSmallBlind:function(){var e=Number(this.smallBlind.string);e<1&&(e=1,this.smallBlind.blur(),this.blured=!0,this.smallBlind.string=e,this.smallBlind.focus()),e>=1e5&&(e=99999),this.bigBlind.string=2*e+""},onEditEndMinBuyIn:function(){var e=Number(this.minBuyIn.string);e<10*Number(this.s.string)&&(e=this.s.string,this.minBuyIn.blur(),this.blured=!0,this.minBuyIn.string=e,this.minBuyIn.focus()),e>=1e5&&(e=99999)},onClick:function(){if(GameManager.playSound(K.Sounds.click),this.errorLbl.string="",new RegExp(/^(?=.*[a-zA-Z])(?=.*[0-9])[a-zA-Z0-9]+$/).test(this.tableName.string))if(Number(this.minBuyIn.string)<Number(this.s.string))this.errorLbl.string="minBuyIn should not be lower than the stake amount";else if(Number(this.minBuyIn.string)>=Number(this.maxBuyIn.string))this.errorLbl.string="Invalid maxBuyIn";else{var e="";this.holdem.isChecked?e="Texas Hold\u2019em":this.omaha5.isChecked?e="Omaha 5":this.omaha6.isChecked?e="Omaha 5":this.omaha.isChecked&&(e="Omaha");var t=2;this.p2.isChecked?t=2:this.p3.isChecked?t=3:this.p4.isChecked?t=4:this.p5.isChecked?t=5:this.p6.isChecked&&(t=6),ServerCom.pomeloRequest("connector.entryHandler.createPrivateTable",{tableName:this.tableName.string,gameVariation:e,isPotLimit:!this.holdem.isChecked,smallBlind:Number(this.s.string),bigBlind:Number(this.b.string),minBuyIn:Number(this.minBuyIn.string),maxBuyIn:Number(this.maxBuyIn.string),maxPlayers:t,passwordForPrivate:"11111111",userName:GameManager.user.userName},function(e){console.log("response",e),e.success?(cc.sys.localStorage.setItem("PRIVATE_TABLE_"+this.tableName.string,e.passwordForPrivate),GameManager.popUpManager.show(n.NotificationPopup,e.info,function(){}),GameManager.emit("refresh_private_table")):GameManager.popUpManager.show(n.CommonDialog,{title:"Error!",content:e.info},function(){}),this.onClose()}.bind(this))}else this.errorLbl.string="Table name should be alpha numeric"},onTextChanged:function(e,t){console.log("text",e,t.string);var a=new RegExp(/^\d*\.?\d*$/);console.log(a.test(e)),a.test(e)?(this.last=e,t.blur(),this.blured=!0,this.smallBlind.string=e,this.last=e,t.focus()):(t.blur(),this.blured=!0,this.smallBlind.string=this.last,t.focus())},onTextBegan:function(){this.blured=!1,this.last=this.smallBlind.string},onClose:function(){this.tableName.string="",this.smallBlind.string="",this.bigBlind.string="",this.minBuyIn.string="",this.maxBuyIn.string="",this.maxPlayers.string="",this.password.string="",this.isPotLimit.string="",this.holdem.isChecked=!0,this.omaha.isChecked=!1,this.minAmount=1,this.maxAmount=500,this.sliderTouch.setSliderValue(0,!1),this.onSliderValueChange(0),this.node.active=!1}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager",SliderTouch:"SliderTouch"}],ProfileHandler:[function(e,t){"use strict";cc._RF.push(t,"908c28ZXRtHfKtJhN88X1/U","ProfileHandler");var a=e("ServerCom"),n=e("PostTypes").TransactionHistory,i=e("PostTypes").UserID;cc.Class({extends:cc.Component,properties:{},start:function(){},getTransactionHistory:function(e,t,i){var o=K.ServerAddress.ipAddress+":"+K.ServerAddress.port+K.ServerAPI.transactionHistory,s=n,r=GameManager.user;null!=r&&(s.userId=r.userId,s.lowerLimit=e,s.upperLimit=t),a.httpPostRequest(o,s,i)},getWalletInfo:function(e){var t=K.ServerAddress.ipAddress+":"+K.ServerAddress.port+K.ServerAPI.wallet,n=i,o=GameManager.user;null!=o&&(n.userId=o.userId),a.httpPostRequest(t,n,e)}}),cc._RF.pop()},{PostTypes:"PostTypes",ServerCom:"ServerCom"}],ProfilePresenter:[function(e,t){"use strict";cc._RF.push(t,"562f2bI7lpMkJhPsi5QhMx+","ProfilePresenter");var a=e("ProfileHandler");cc.Class({extends:cc.Component,properties:{ipAddress:{default:"",visible:!1},portID:{default:0,visible:!1},transaction:{default:null,type:a}},onLoad:function(){},onGetTransactionHistory:function(){this.transaction.getTransactionHistory(0,20,function(e){e.success&&e.result})},onGetWalletInfo:function(){this.transaction.getWalletInfo(function(e){e.success&&e.result})}}),cc._RF.pop()},{ProfileHandler:"ProfileHandler"}],Profile:[function(e,t){"use strict";cc._RF.push(t,"1ab6a4XD1xN7auks1CJUs2e","Profile"),cc.Class({extends:cc.Component,properties:{},start:function(){}}),cc._RF.pop()},{}],QSTournamentDetail:[function(e,t){"use strict";cc._RF.push(t,"13c4cy59xVDTKN0Y/MAfO8I","QSTournamentDetail");var a=e("PopUpManager").PopUpType;cc.Class({extends:cc.Component,properties:{tournamentTitleLbl:{default:null,type:cc.Label},startsInTimeLbl:{default:null,type:cc.Label},startsAtTimeLbl:{default:null,type:cc.Label},buyInLbl:{default:null,type:cc.Label},prizePoolLbl:{default:null,type:cc.Label},entriesLbl:{default:null,type:cc.Label},data:null},onLoad:function(){},setValues:function(e){this.data=e,this.tournamentTitleLbl.string=e.channelName||"",this.startsAtTimeLbl.string=GameManager.getTimeByMilli(e.tournamentStartTime);var t=(new Date).getTime();e.tournamentStartTime>t?this.startsInTimeLbl.string=GameManager.getTimeDuration(e.tournamentStartTime,!1)||"":this.startsInTimeLbl.string="",this.buyInLbl.string=e.buyIn||"",this.prizePoolLbl.string=e.enrolledPlayers&&e.entryfees?e.enrolledPlayers*e.entryfees:"0",this.entriesLbl.string=e.enrolledPlayers||"0"},onRegister:function(){var e={};e._id=this.data._id,e.gameVersionCount=this.data.gameVersionCount,TournamentHandler.registerTournament(e,function(){}.bind(this),function(){},5e3,!1)},onTournamentLobby:function(){var e={};e._id=this.data._id,e.gameVersionCount=this.data.gameVersionCount,e.tournamentType=K.TournamentType.Normal,TournamentHandler.tournamentLobbyInfo(this.data,function(e){e.tableData&&GameManager.popUpManager.show(a.TournamentLobbyInfoPopup,e,function(){})}.bind(this),function(){}.bind(this))}}),cc._RF.pop()},{PopUpManager:"PopUpManager"}],"Queue.src":[function(e,t){"use strict";cc._RF.push(t,"85b572KZ5pEToiKYBB641Z1","Queue.src"),t.exports=function(){var e=[],t=0;this.getLength=function(){return e.length-t},this.isEmpty=function(){return 0==e.length},this.enqueue=function(t){e.push(t)},this.dequeue=function(){if(0!=e.length){var a=e[t];return 2*++t>=e.length&&(e=e.slice(t),t=0),a}},this.peek=function(){return e.length>0?e[t]:void 0}},cc._RF.pop()},{}],QuickSeatPopup:[function(e,t){"use strict";cc._RF.push(t,"6dc74hvqI1DN71B6iG/YCyJ","QuickSeatPopup");var a=e("DropDown"),n=e("PopUpBase"),i=e("PopUpManager").PopUpManager,o=e("PopUpManager").PopUpType,s=e("PostTypes").JoinSimilar,r=e("PostTypes").QuickSeatSitNGo,l=e("PostTypes").QuickSeatTourn,c=null;cc.Class({extends:n,properties:{popupManager:{default:null,type:i},tournGameDropDown:{default:null,type:a},tournBuyInDropDown:{default:null,type:a},tourntypeDropDown:{default:null,type:a},tournStartingDropDown:{default:null,type:a},tournGamesGrid:{default:null,type:cc.Node},tournPrefab:{default:null,type:cc.Prefab},cashGameDropDown:{default:null,type:a},cashSmallBlindDropDown:{default:null,type:a},cashBigBlindDropDown:{default:null,type:a},cashSpeedDropDown:{default:null,type:a},cashPlayersReqDropDown:{default:null,type:a},sitNGoGameDropDown:{default:null,type:a},sitNGoBuyInDropDown:{default:null,type:a},sitNGoSpeedDropDown:{default:null,type:a},sitNGoPlayersReqDropDown:{default:null,type:a}},onLoad:function(){c=this,this.sitNGoBuyInDropDown.registerCallback(this.onSitNGo.bind(this)),this.sitNGoPlayersReqDropDown.registerCallback(this.onSitNGo.bind(this))},onShow:function(e){this.realMoney=e,ServerCom.pomeloRequest(K.PomeloAPI.getFilters,e,function(e){c.initDropdowns(e)},function(){})},initDropdowns:function(e){this.cashGameDropDown.setContent(e.normal.game),this.cashSmallBlindDropDown.setContent(this.getStakesData(e.normal.smallBlind,e.normal.bigBlind)),this.cashSpeedDropDown.setContent(this.getSpeedData(e.normal.speed)),this.cashPlayersReqDropDown.setContent(e.normal.playersRequired),this.sitNGoGameDropDown.setContent(e.sitNGo.game),this.sitNGoBuyInDropDown.setContent(e.sitNGo.buyIn),this.sitNGoSpeedDropDown.setContent(this.getSpeedData(e.normal.speed)),this.sitNGoPlayersReqDropDown.setContent(e.sitNGo.playersRequired),this.tournGameDropDown.setContent(e.tournament.game),this.tournBuyInDropDown.setContent(e.tournament.buyIn),this.tourntypeDropDown.setContent(e.tournament.type);var t=["30 Mins","2 hrs","4 hrs","12 hrs","1 day","1 week","Anytime"];this.tournStartingDropDown.setContent(t)},getStakesData:function(e,t){for(var a=[],n=0;n<e.length;n++)-1!=t.indexOf(2*e[n])&&a.push(e[n]+"/"+2*e[n]);return a},getSpeedData:function(e){for(var t=[],a=e.length-1;a>=0;a--)t.push(GameManager.getGameTypeByValue(e[a]));return t},updateGameTypeVal:function(){},onCashTab:function(){},onSitNGo:function(){this.sitNGoBuyInDropDown.getSelection(),this.sitNGoPlayersReqDropDown.getSelection()},onTournnTab:function(){},onTournConfirm:function(){var e=this.tournGameDropDown.getSelection(),t=this.tournBuyInDropDown.getSelection(),a=this.tourntypeDropDown.getSelection(),n=this.getTimeVal(this.tournStartingDropDown.getSelection()),i=new l(this.realMoney,e,t,a,n);ServerCom.pomeloRequest(K.PomeloAPI.quickSeatTournament,i,function(e){if(e.success){GameManager.removeAllChildren(this.tournGamesGrid);for(var t=0;t<e.result.length;t++){var a=cc.instantiate(this.tournPrefab);a.getComponent("QSTournamentDetail").setValues(e.result[t]),this.tournGamesGrid.addChild(a)}}}.bind(this),function(){})},onCashPlayNow:function(){this.joinRequest(!0)},onCashObserve:function(){this.joinRequest(!1)},joinRequest:function(e){var t=this.cashGameDropDown.getSelection(),a=parseInt(this.cashSmallBlindDropDown.getSelection().split("/")[0]),n=parseInt(this.cashSmallBlindDropDown.getSelection().split("/")[1]),i=parseInt(this.cashPlayersReqDropDown.getSelection()),o=parseInt(GameManager.getValueByGameType(this.cashSpeedDropDown.getSelection())),r=new s(this.realMoney,t,a,n,i,o,GameManager.user.playerId);ServerCom.pomeloRequest(K.PomeloAPI.joinSimilar,r,function(t){if(t.success){var a,n=t,o=K.PomeloAPI;a=e?o.autoSit:o.joinChannel;var s={};s.channelId=n.similarChannelId||"",s.channelType="NORMAL",s.tableId="",s.isRequested=!0,e&&(s.seatIndex=GameManager.getPreferredSeat(i),s.imageAvtar=""),GameManager.join(s.channelId,a,s)}},function(){})},onSitRegister:function(){var e=this.sitNGoGameDropDown.getSelection(),t=parseInt(this.sitNGoBuyInDropDown.getSelection()),a=parseInt(this.sitNGoPlayersReqDropDown.getSelection()),n=GameManager.getValueByGameType(this.sitNGoSpeedDropDown.getSelection()),i=new r(this.realMoney,e,t,a,n);ServerCom.pomeloRequest(K.PomeloAPI.quickSeatSitNGo,i,function(e){e.success&&(e.data=i,this.popupManager.show(o.ConfirmDialogQuickSeatSitNGo,e,function(){}))}.bind(this),function(){})},getTimeVal:function(e){var t=0;switch(e){case"30 Mins":t=30;break;case"2 hrs":t=120;break;case"4 hrs":t=240;break;case"12 hrs":t=720;break;case"1 day":t=1440;break;case"1 week":t=604800;break;default:t=1e7}return t},onCancel:function(){this.popupManager.hide(o.QuickSeatPopUp,function(){})}}),cc._RF.pop()},{DropDown:"DropDown",PopUpBase:"PopUpBase",PopUpManager:"PopUpManager",PostTypes:"PostTypes"}],RegPopup:[function(e,t){"use strict";cc._RF.push(t,"e6fd55KPUlLzadR+AZlvoRU","RegPopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase");cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},regSuccessNode:{default:null,type:cc.Node},regFailNode:{default:null,type:cc.Node}},onShow:function(e){console.log("onShow",e),1==e?(this.regSuccessNode.active=!0,this.regFailNode.active=!1):(this.regSuccessNode.active=!1,this.regFailNode.active=!0)},onLoad:function(){},onClose:function(){this.popUpManager.hide(n.RegDialog,function(){})}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],RemoveDataPopup:[function(e,t){"use strict";cc._RF.push(t,"9c7e1VkdehFoJNp0CMLF7Kb","RemoveDataPopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase");cc.Class({extends:i,properties:{popUpManager:{default:null,type:a}},onShow:function(e){this.data=e},onLoad:function(){},onClickEnter:function(){},onYES:function(){this.data.callback&&this.data.callback(),this.popUpManager.hide(n.RemoveDataDialog,function(){})},onNo:function(){GameManager.playSound(K.Sounds.click),this.popUpManager.hide(n.RemoveDataDialog,function(){})}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],ReportBug:[function(e,t){"use strict";cc._RF.push(t,"8c3d1fWWdVKkra/OWCgnLhe","ReportBug");var a=e("PopUpManager").PopUpType;cc.Class({extends:cc.Component,properties:{pokerModel:{default:null,type:cc.Node},contentParent:{default:null,type:cc.Node},item:{default:null,type:cc.Node},scrollView:{default:null,type:cc.Node},tableId:{default:null,type:cc.Label},gameId:{default:null,type:cc.Label},gameType:{default:null,type:cc.Label},gameDate:{default:null,type:cc.Label},selected:{default:null,type:cc.Label},description:{default:null,type:cc.EditBox}},onLoad:function(){this.pokerGame=this.pokerModel.getComponent("PokerModel")},start:function(){},onShow:function(e){this.scrollView.active=!1,this.selected.string="Select your Issue",this.description.string="",GameManager.emit("disablePageView"),this.tableId.string="#"+this.pokerGame.gameData.tableId,this.gameId.string="#"+this.pokerGame.gameData.channelId,this.gameType.string=this.pokerGame.roomConfig.channelVariation;var t=new Date;this.gameDate.string=t.toLocaleDateString("en-US",{day:"numeric",month:"short"})+", "+t.toLocaleTimeString("en-US").substr(0,(t.toLocaleTimeString("en-US")+" ").indexOf(" ")),console.log("this.pokerGame.roomConfig",this.pokerGame.roomConfig),console.log("this.pokerGame.gameData",this.pokerGame.gameData),this.contentParent.removeAllChildren(!0);for(var a=0;a<e.length;a++){var n=e[a],i=cc.instantiate(this.item);i.active=!0,i.y=0,i.getComponent(cc.Label).string=n,i.getComponent(cc.Button).clickEvents[0].customEventData=n,i.parent=this.contentParent}},onSelect:function(e,t){this.selected.string=t,this.scrollView.active=!1},onShowScrollView:function(){this.scrollView.active?this.scrollView.active=!1:this.scrollView.active=!0},onHideScrollView:function(){this.scrollView.active=!1},onClose:function(){GameManager.emit("enablePageView"),this.node.active=!1},onReport:function(){if("Select your Issue"!=this.selected.string&&""!=this.description.string.trim()){var e=this;ServerCom.pomeloRequest("connector.entryHandler.reportBug",{gameType:this.pokerGame.roomConfig.channelVariation,gameId:this.pokerGame.gameData.tableId,tableId:"tableId",issue:this.selected.string,note:this.description.string,playerId:GameManager.user.playerId},function(t){console.log("reportBug",t),t.success&&(e.description.string="",e.selected.string="Select your Issue",e.node.active=!1,GameManager.popUpManager.show(a.CommonDialog,{title:"Thanks!",content:"Your report has been sent to the developer."},function(){}))})}}}),cc._RF.pop()},{PopUpManager:"PopUpManager"}],ResponseTypes:[function(e,t){"use strict";function a(e){this.playerId=e.playerId,this.channelId=e.channelId,this.playerName=e.playerName,this.tribeName=e.tribeName,this.active=e.active||!1,this.chips=e.chips||0,this.seatIndex=e.seatIndex,this.imageAvtar=Number(e.imageAvtar)-1,e.playerId,n(this.imageAvtar,this);var t=e.cards||null;this.cards=t||[],this.moves=e.moves||{},this.state=e.state||K.PlayerState.Waiting,this.lastBet=e.lastBet||0,this.lastMove=e.lastMove||"",this.totalRoundBet=e.totalRoundBet||0,this.isMuckHand=e.isMuckHand||!1,this.isRunItTwice=e.isRunItTwice||!1,this.bigBlindMissed=e.bigBlindMissed||!1,this.isAutoReBuy=e.isAutoReBuy||!1,this.autoReBuyAmount=e.autoReBuyAmount||0,this.isPlayed=e.isPlayed||!1,this.sitoutNextHand=e.sitoutNextHand||!1,this.sitoutNextBigBlind=e.sitoutNextBigBlind||!1,this.isTournamentSitout=e.isTournamentSitout||!1,this.precheckValue=e.precheckValue,this.preCheck=e.preCheck,this.timeBankSec=e.timeBankSec||0,this.timeBankSec<0&&(this.timeBankSec=0)}function n(e,t){if(isNaN(e)&&isNaN(parseInt(e))&&""!=e)cc.loader.load(e+"?w=125&h=125",function(e,a){e?(this.profileImage=Math.round(Math.random()*GameManager.avatarImages.length-1),t.urlImg=GameManager.avatarImages[this.profileImage]):t.urlImg=new cc.SpriteFrame(a),GameManager.emit("image-loaded",t)});else{if(GameManager.avatarImages[e])t.urlImg=GameManager.avatarImages[e];else{var a=Math.round(Math.random()*GameManager.avatarImages.length-1);t.urlImg=GameManager.avatarImages[a]}GameManager.emit("image-loaded",t)}}cc._RF.push(t,"5b113vuUidC57JDGxa/Cs96","ResponseTypes"),a.prototype.reset=function(e){this.chips=e.chips,this.state=e.state,this.lastMove="",this.cards=[],this.bestHand=null,this.timeBankSec=e.timeBankSec||0,this.timeBankSec<0&&(this.timeBankSec=0)},t.exports={User:function(e){this.category="DIAMOND",this.isParentUserName=e.isParentUserName||"",this.claimedFreeChipsAt=e.claimedFreeChipsAt,this.nextClaimBonusTime=e.nextClaimBonusTime,this.defaultTheme=e.defaultTheme||"",this.defaultCard=e.defaultCard||"",this.defaultGameBackground=e.defaultGameBackground||"",this.defaultTourCard=e.defaultTourCard||"",this.defaultTourGameBackground=e.defaultTourGameBackground||"",this.defaultTourTheme=e.defaultTourTheme||"",this.tableCountAllowed=e.tableCountAllowed||{browser:6,phone:2,androidApp:2,iosApp:2,windows:6,mac:6},GameManager.emit("updateTableImage"),GameManager.emit("updateTableBgImage"),cc.sys.isBrowser?cc.sys.os===cc.sys.OS_ANDROID||cc.sys.os===cc.sys.OS_IOS||(cc.sys.os,cc.sys.OS_OSX):cc.sys.os===cc.sys.OS_ANDROID||cc.sys.os===cc.sys.OS_IOS||cc.sys.os===cc.sys.OS_WINDOWS||(cc.sys.os,cc.sys.OS_OSX),GameManager.maxTableCounts=2,console.log(">>>GameManager.maxTableCounts",GameManager.maxTableCounts),this.mobileNumber=e.mobileNumber,this.firstName=e.firstName,this.lastName=e.lastName,this.emailId=e.emailId,this.playerId=e.playerId,this.userName=e.userName,this.tribeName=e.tribeName,this.settings=e.settings||{},this.profileImage=""==e.profileImage||"undefined"==e.profileImage?1:Number(e.profileImage)-1,n(this.profileImage,this),this.muteGameSound=e.settings.muteGameSound,GameManager.playMusic(!this.muteGameSound),this.runItTwice=void 0!==e.settings.runItTwice&&null!=e.settings.runItTwice&&e.settings.runItTwice,this.isMuckHand=void 0!==e.isMuckHand&&null!=e.isMuckHand&&e.isMuckHand,this.isShowCard=void 0!==e.isShowCard&&null!=e.isShowCard&&e.isShowCard,this.cardColor=void 0===e.prefrences.cardColor||null===e.prefrences.cardColor||e.prefrences.cardColor,this.seatPreferances=void 0!==e.settings.seatPrefrence&&null!=e.settings.seatPrefrence&&""!=e.settings.seatPrefrence?e.settings.seatPrefrence:1,this.seatPreferancesTwo=void 0!==e.settings.seatPrefrenceTwo&&null!=e.settings.seatPrefrenceTwo&&""!=e.settings.seatPrefrenceTwo?e.settings.seatPrefrenceTwo:1,this.seatPreferancesSix=void 0!==e.settings.seatPrefrenceSix&&null!=e.settings.seatPrefrenceSix&&""!=e.settings.seatPrefrenceSix?e.settings.seatPrefrenceSix:1,this.dealerChat=void 0===e.settings.dealerChat||null==e.settings.dealerChat||e.settings.dealerChat,this.playerChat=void 0===e.settings.playerChat||null==e.settings.playerChat||e.settings.playerChat,this.tableColor=void 0!==e.settings.tableColor&&null!==e.settings.tableColor&&""!==e.settings.tableColor?e.settings.tableColor:3,this.tableLayout=e.tableLayout,this.autoBuyIn=e.autoBuyIn,this.autoBuyInAmountInPercent=e.autoBuyInAmountInPercent,this.isEmailVerified=e.isEmailVerified,this.isMobileNumberVerified=e.isMobileNumberVerified,this.dailyBonusCollectionTime=e.dailyBonusCollectionTime,this.freeChips=e.freeChips,this.realChips=e.realChips,this.loyalityRakeLevel=e.loyalityRakeLevel,this.host=e.host,this.port=e.port,this.megaPointDetail={},this.megaPointDetail.megaPointLevel=e.statistics.megaPointLevel,this.megaPointDetail.megaPoints=e.statistics.megaPoints,this.megaPointDetail.megaPointsPercent=e.statistics.megaPointsPercent,this.affiliateId=e.isParentUserName?e.isParentUserName:null,this.isCashout=e.cashoutGamePlay?e.cashoutGamePlay:null,this.unclamedBonus=e.unclamedBonus||0,this.password=""},Player:a,GameData:function(e){this.success=e.success,this.raw=e,this.channelId=e.channelId,this.playerId=e.playerId,this.tableId=e.tableId,this.showHandStrength=e.showHandStrength||!1,this.playerName=e.playerName,this.isJoinWaiting=e.isJoinWaiting,this.bestHands=e.bestHands,this.isRunItTwice=!!e.isRunItTwice&&e.isRunItTwice,this.antibanking=e.antibanking,this.settings=e.settings,this.timeBankLeft=e.timeBankLeft||0,this.tableDetails={},this.tableDetails.roundId=e.tableDetails.roundId,this.tableDetails.state=e.tableDetails.state,this.tableDetails.isStraddleEnable=e.tableDetails.isStraddleEnable,this.tableDetails.runItTwiceEnable=e.tableDetails.runItTwiceEnable,this.tableDetails.roundCount=e.tableDetails.roundCount,this.tableDetails.turnTime=e.tableDetails.turnTime,this.tableDetails.extraTurnTime=e.tableDetails.extraTurnTime||10,this.tableDetails.additionalTurnTime=e.tableDetails.additionalTurnTime||0,this.tableDetails.minRaiseAmount=e.tableDetails.minRaiseAmount,this.tableDetails.maxRaiseAmount=e.tableDetails.maxRaiseAmount;var t=[];e.tableDetails.players.forEach(function(n){this.playerId==n.playerId&&(n.cards=e.cards),t.push(new a(n))},this),this.tableDetails.remainingMoveTime=e.tableDetails.remainingMoveTime,this.tableDetails.players=t,this.tableDetails.roundName=e.tableDetails.roundName,this.tableDetails.roundNumber=e.tableDetails.roundNumber,this.tableDetails.roundBets=e.tableDetails.roundBets,this.tableDetails.roundMaxBet=e.tableDetails.roundMaxBet,this.tableDetails.smallBlind=e.tableDetails.smallBlind,this.tableDetails.bigBlind=e.tableDetails.bigBlind,this.tableDetails.maxBetAllowed=e.tableDetails.maxBetAllowed,this.tableDetails.pot=e.tableDetails.pot||[],this.tableDetails.totalPot=e.tableDetails.totalPot||0,this.tableDetails.boardCard=e.tableDetails.boardCard,this.tableDetails.dealerIndex=e.tableDetails.dealerIndex,this.tableDetails.smallBlindIndex=e.tableDetails.smallBlindIndex,this.tableDetails.bigBlindIndex=e.tableDetails.bigBlindIndex,this.tableDetails.straddleIndex=e.tableDetails.straddleIndex,this.tableDetails.currentMoveIndex=e.tableDetails.currentMoveIndex,this.tableDetails.actionName=e.tableDetails.actionName,this.tableDetails.isTimeBankUsed=e.tableDetails.isTimeBankUsed,this.tableDetails.isPrivateTable=e.tableDetails.isPrivateTable,this.tableDetails.totalTimeBank=e.tableDetails.totalTimeBank,this.tableDetails.timeBankLeft=e.tableDetails.timeBankLeft,this.tableDetails.breakTimeLeft=e.tableDetails.breakTimeRemaining,this.tableDetails.isOnBreak=void 0!==e.tableDetails.isOnBreak&&e.tableDetails.isOnBreak,this.tableDetails.breakEnds=e.tableDetails.breakEnds,this.tableDetails.rebuyTimeRemaining=e.tableDetails.rebuyTimeRemaining,this.tableDetails.addonTimeRemaining=e.tableDetails.addonTimeRemaining,this.tableDetails.blindTimeRemaining=e.tableDetails.blindTimeRemaining,this.tableDetails.isAddonEnabled=e.tableDetails.isAddonEnabled,this.tableDetails.isRebuy=e.tableDetails.isRebuy,this.tableDetails.isAutoRebuy=e.tableDetails.isAutoRebuy,this.tableDetails.isAutoAddOn=e.tableDetails.isAutoAddOn,this.tableDetails.isAddon=e.tableDetails.isAddon,this.tableDetails.isForceRit=!!e.tableDetails.isForceRit},changeAvatar:n},cc._RF.pop()},{}],ResultPopup:[function(e,t){"use strict";cc._RF.push(t,"bcf42p1AU9HxK9xPabUGrNu","ResultPopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase");cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},infoLbl:{default:null,type:cc.Label},prizeInfo:null,messageLbl:{default:null,type:cc.Label},headingLbl:{default:null,type:cc.Label}},onLoad:function(){},onShow:function(e){null!=e&&(this.prizeInfo=e,this.infoLbl.string="Rank - "+e.rank+"\n Chips earned - "+e.chipsWon,this.headingLbl.string=(e.channelName?e.channelName:"")+" Results",e.chipsWon<1?this.messageLbl.string="Better Luck Next Time":this.messageLbl.string="Congratulations!!!")},onClickEnter:function(){this.onCollectPrize()},onCollectPrize:function(){var e={playerId:this.prizeInfo.playerId,gameVersionCount:this.prizeInfo.gameVersionCount,tournamentId:this.prizeInfo.tournamentId};ServerCom.pomeloRequest(K.PomeloAPI.collectPrize,e,function(e){e.success&&(null!=this.prizeInfo.callback&&this.prizeInfo.callback(),this.onExit())}.bind(this))},onExit:function(){this.popUpManager.hide(n.ResultPopup,function(){})}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],RoundRectMask:[function(e,t,a){"use strict";cc._RF.push(t,"b94e83FDXNPhp5ctdQ9rv3l","RoundRectMask");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(s=(o<3?i(s):o>3?i(t,a,s):i(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.RoundRectMask=void 0;var s=cc._decorator.property,r=cc._decorator.ccclass,l=cc._decorator.executeInEditMode,c=cc._decorator.disallowMultiple,d=cc._decorator.requireComponent,h=cc._decorator.menu;cc.macro.ENABLE_WEBGL_ANTIALIAS=!0;var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._radius=50,t.mask=null,t}return i(t,e),Object.defineProperty(t.prototype,"radius",{get:function(){return this._radius},set:function(e){this._radius=e,this.updateMask(e)},enumerable:!1,configurable:!0}),t.prototype.onEnable=function(){this.mask=this.getComponent(cc.Mask),this.updateMask(this.radius)},t.prototype.updateMask=function(e){var t=e>=0?e:0;t<1&&(t=Math.min(this.node.width,this.node.height)*t),this.mask.radius=t,this.mask.onDraw=this.onDraw.bind(this.mask),this.mask._updateGraphics=this._updateGraphics.bind(this.mask),this.mask.type=cc.Mask.Type.RECT},t.prototype._updateGraphics=function(){var e=this._graphics;e&&this.onDraw(e)},t.prototype.onDraw=function(e){e.clear(!1);var t=this.node,a=t.width,n=t.height,i=-a*t.anchorX,o=-n*t.anchorY;e.roundRect(i,o,a,n,this.radius||0),cc.game.renderType===cc.game.RENDER_TYPE_CANVAS?e.stroke():e.fill()},o([s()],t.prototype,"_radius",void 0),o([s({tooltip:"\u5706\u89d2\u534a\u5f84:\n0-1\u4e4b\u95f4\u4e3a\u6700\u5c0f\u8fb9\u957f\u6bd4\u4f8b\u503c, \n>1\u4e3a\u5177\u4f53\u50cf\u7d20\u503c"})],t.prototype,"radius",null),o([r(),l(!0),c(!0),d(cc.Mask),h("\u6e32\u67d3\u7ec4\u4ef6/\u5706\u89d2\u906e\u7f69")],t)}(cc.Component);a.RoundRectMask=u,cc._RF.pop()},{}],ScaleTween:[function(e,t){"use strict";cc._RF.push(t,"9b18c55SRRAy6U8Q50I06QT","ScaleTween"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.act=cc.repeatForever(cc.sequence(cc.scaleTo(1,.36,.36),cc.delayTime(.1),cc.scaleTo(1,.46,.46)))},onEnable:function(){this.node.runAction(this.act)},onDisable:function(){this.node.stopAction(this.act),this.node.setScale(.46,.46)}}),cc._RF.pop()},{}],ScreenData:[function(e,t){"use strict";cc._RF.push(t,"123b54IzE1HBI4KpUd6nyie","ScreenData"),cc._RF.pop()},{}],ScreenManager:[function(e,t){"use strict";cc._RF.push(t,"0dcbdJFxlhGHZDSBYhc80k7","ScreenManager");var a=e("AbstractScreen"),n=window,i=new cc.Enum({SplashScreen:0,SignupScreen:1,LoginScreen:2,LobbyScreen:3,GamePlayScreen:4,ForgotPasswordScreen:5,None:100}),o=new cc.Enum({SHOWN:0,HIDDEN:1}),s=cc.Class({extends:cc.Component,properties:{screens:{default:[],type:a},currentScreen:{default:i.LoginScreen,type:i},screenState:{default:null,type:o,visible:!1}},statics:{instance:null},onLoad:function(){n.ScreenManager=this,s.instance=this},showScreen:function(e,t,a){this.enableNewScreen(e,t,a),K.PORTRAIT},enableNewScreen:function(e,t,a){console.log("enableNewScreen",e),this.currentScreen!==K.ScreenEnum.None?this.hideCurrentScreen(e,t,a):this.showNextScreen(e,t,a)},showNextScreen:function(e,t,a){console.log("showNextScreen",e),this.screens[e].node.active=!0,this.currentScreen=e,this.screens[e].onShow(t),null!==a&&a(),this.screenState=o.SHOWN},hideCurrentScreen:function(e,t,a){console.log("hideCurrentScreen",e),this.screens[this.currentScreen].onHide(),this.screens[this.currentScreen].node.active=!1,this.screenState=o.HIDDEN,this.currentScreen=i.None,null!=e&&this.showNextScreen(e,t,a)}});t.exports={ScreenManager:s,ScreenEnum:i},cc._RF.pop()},{AbstractScreen:"AbstractScreen"}],ScreenResPolicyUtil:[function(e,t){"use strict";cc._RF.push(t,"9aa9b2GNCZEXLgEQa9uUP1K","ScreenResPolicyUtil");var a=cc.Enum({EXACT_FIT:0,NO_BORDER:1,SHOW_ALL:2,FIXED_HEIGHT:3,FIXED_WIDTH:4,UNKNOWN:5});cc.Class({extends:cc.Component,properties:{policy:{default:a.UNKNOWN,type:a}},onLoad:function(){this.setResPolicy()},setResPolicy:function(){cc.view.setResolutionPolicy(this.policy)}}),cc._RF.pop()},{}],SeatPreferencesPopup:[function(e,t){"use strict";cc._RF.push(t,"d33afk6i2FFqbyAQA3JThhk","SeatPreferencesPopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase"),o=e("Checkbox");cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},checkBox:{default:[],type:o},selectedSeat:"1",maxPlayers:0,twoSeatsView:{default:null,type:cc.Node},sixSeatsView:{default:null,type:cc.Node},nineSeatsView:{default:null,type:cc.Node},activeView:{default:null,type:cc.Node}},onLoad:function(){this.scheduleOnce(function(){this.showSelected()}.bind(this),.2)},onShow:function(e){switch(this.maxPlayers=e,e){case 2:this.setView(!0,!1,!1,this.twoSeatsView);break;case 6:this.setView(!1,!0,!1,this.sixSeatsView);break;case 9:this.setView(!1,!1,!0,this.nineSeatsView)}this.showSelected()},setView:function(e,t,a,n){this.twoSeatsView.active=e,this.sixSeatsView.active=t,this.nineSeatsView.active=a,this.activeView=n},showSelected:function(){var e;switch(this.maxPlayers){case 2:e=this.activeView.getChildByName("Seat_"+GameManager.user.seatPreferancesTwo);break;case 6:e=this.activeView.getChildByName("Seat_"+GameManager.user.seatPreferancesSix);break;case 9:e=this.activeView.getChildByName("Seat_"+GameManager.user.seatPreferances)}null!=e&&(e.getComponent(o).setSelection(!0),e.getComponent(o).updateGroup(!0))},onButtonClick:function(e){var t=e.currentTarget.parent.name;t=t.slice(-1),this.selectedSeat=t},onConfirm:function(){var e={query:{}};switch(e.query.playerId=GameManager.user.playerId,e.updateKeys={},this.maxPlayers){case 2:e.updateKeys["settings.seatPrefrenceTwo"]=this.selectedSeat;break;case 6:e.updateKeys["settings.seatPrefrenceSix"]=this.selectedSeat;break;case 9:e.updateKeys["settings.seatPrefrence"]=this.selectedSeat}var t=this;ServerCom.pomeloRequest(K.PomeloAPI.updateProfile,e,function(e){if(e.success)switch(t.maxPlayers){case 2:GameManager.user.seatPreferancesTwo=t.selectedSeat;break;case 6:GameManager.user.seatPreferancesSix=t.selectedSeat;break;case 9:GameManager.user.seatPreferances=t.selectedSeat}}.bind(this)),this.onCancel()},onCancel:function(){this.popUpManager.hide(n.SeatPreferenceDialog,function(){})}}),cc._RF.pop()},{Checkbox:"Checkbox",PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],ServerCom:[function(e,t){"use strict";cc._RF.push(t,"12387CWFjJMmJ9GzI59imIG","ServerCom");var a=window,n=e("EventEmitter"),i=(e("PopUpManager").PopUpManager,e("PopUpManager").PopUpType);cc.Class({extends:n,properties:{tracker:{default:{}},launch:{default:null,type:cc.Node},loading:{default:null,type:cc.Node},loadingLogin:{default:null,type:cc.Node},reconnecting:{default:null,type:cc.Node},preLogin:{default:null,type:cc.Node},trackerCount:0,cconnectCB:null,forceKeepLoading:!1,inGame:!1,sessionExpired:!1,pomeloConnected:!0,socketConnected:!0,pomeloReconnecting:!0,socketReconnecting:!0,pomeloReconnectedCount:0,socketReconnectedCount:0,socketReconnected:!1,pomeloReconnected:!1,reconncetTimer:null,reconnectionDelay:1e3,reconnectMaxAttempts:8},onLoad:function(){a.ServerCom=this,cc.sys.isNative},httpPostRequest:function(e,t,a,n){console.log(ServerCom.getFormattedTime(),"Network [REQ] httpPostRequest",e,t);var o=this,s=new XMLHttpRequest;if(s.timeout=5e3,ServerCom.loading&&(ServerCom.preLogin.active||(ServerCom.loading.active=!0)),s.onreadystatechange=function(){if(K.internetAvailable=!0,ServerCom.loading&&(ServerCom.loading.active=!1),403!=s.status)if(400!=s.status&&401!=s.status&&429!=s.status){if(4==s.readyState&&s.status>=200&&s.status<400){var t=s.responseText;if(null!=a){var r=JSON.parse(t);console.log(ServerCom.getFormattedTime(),"Network [RES] httpPostRequest",e,r),r.success||r.status&&"success"==r.status||(l={code:K.Error.SuccessFalseError,response:r.info,errorType:r.errorType||"",isRetry:void 0!==t.isRetry&&null!==t.isRetry&&t.isRetry},(void 0===t.isDisplay||null===t.isDisplay||t.isDisplay)&&o.emit("error",l),null!=n&&n(l)),null!=a&&a(r)}}}else null!=a&&s.responseText&&a(JSON.parse(s.responseText));else{GameManager.popUpManager.hideAllPopUps();var l={code:K.Error.SessionError,response:"Session error, please reload the game."};GameManager.popUpManager.show(i.DisconnectDialog,l,function(){})}},s.onerror=function(e){ServerCom.loading&&(ServerCom.loading.active=!1),ServerCom.preLogin.active=!1,K.disconnectRequestedByPlayer=!1,K.internetAvailable=!1,o.emit("error",{code:K.Error.ConnectionError,response:e}),null!=n&&n({code:K.Error.ConnectionError,response:e})},s.ontimeout=function(){ServerCom.loading&&(ServerCom.loading.active=!1),ServerCom.preLogin.active=!1,K.disconnectRequestedByPlayer=!1,K.internetAvailable=!1,o.emit("error",{code:K.Error.TimeOutError,response:"Timeout"+e}),null!=n&&n({code:K.Error.TimeOutError,response:"Timeout"+e})},s.open("POST",e,!0),s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),""!=K.Token.access_token){var r=K.Token.access_token;s.setRequestHeader("Authorization","Bearer "+r)}s.send(JSON.stringify(t))},httpPatchRequest:function(e,t,a,n){var o=this,s=new XMLHttpRequest;if(s.timeout=5e3,ServerCom.loading&&(ServerCom.preLogin.active||(ServerCom.loading.active=!0)),s.onreadystatechange=function(){if(K.internetAvailable=!0,ServerCom.loading&&(ServerCom.loading.active=!1),403!=s.status)if(400!=s.status&&401!=s.status&&429!=s.status){if(4==s.readyState&&s.status>=200&&s.status<400){var e=s.responseText;if(null!=a){var t=JSON.parse(e);t.success||t.status&&"success"==t.status||(r={code:K.Error.SuccessFalseError,response:t.info,errorType:t.errorType||"",isRetry:void 0!==e.isRetry&&null!==e.isRetry&&e.isRetry},(void 0===e.isDisplay||null===e.isDisplay||e.isDisplay)&&o.emit("error",r),null!=n&&n(r)),null!=a&&a(t)}}}else null!=a&&s.responseText&&a(JSON.parse(s.responseText));else{GameManager.popUpManager.hideAllPopUps();var r={code:K.Error.SessionError,response:"Session error, please reload the game."};GameManager.popUpManager.show(i.DisconnectDialog,r,function(){})}},s.onerror=function(e){ServerCom.loading&&(ServerCom.loading.active=!1),ServerCom.preLogin.active=!1,K.disconnectRequestedByPlayer=!1,K.internetAvailable=!1,o.emit("error",{code:K.Error.ConnectionError,response:e}),null!=n&&n({code:K.Error.ConnectionError,response:e})},s.ontimeout=function(){ServerCom.loading&&(ServerCom.loading.active=!1),ServerCom.preLogin.active=!1,K.disconnectRequestedByPlayer=!1,K.internetAvailable=!1,o.emit("error",{code:K.Error.TimeOutError,response:"Timeout"+e}),null!=n&&n({code:K.Error.TimeOutError,response:"Timeout"+e})},s.open("PATCH",e,!0),s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),""!=K.Token.access_token){var r=K.Token.access_token;s.setRequestHeader("Authorization","Bearer "+r)}s.send(JSON.stringify(t))},httpGetRequest:function(e,t,a,n){console.log(ServerCom.getFormattedTime(),"Network [REQ] httpGetRequest",e,t);var o=this,s=new XMLHttpRequest;if(s.timeout=5e3,ServerCom.loading&&(ServerCom.preLogin.active||(ServerCom.loading.active=!0)),s.onreadystatechange=function(){if(K.internetAvailable=!0,ServerCom.loading&&(ServerCom.loading.active=!1),403!=s.status){if(4==s.readyState&&s.status>=200&&s.status<400){var t=s.responseText;if(null!=a){var r=JSON.parse(t);console.log(ServerCom.getFormattedTime(),"Network [RES] httpGetRequest",e,r),r.success||r.status&&"success"==r.status||(l={code:K.Error.SuccessFalseError,response:r.info,errorType:r.errorType||"",isRetry:void 0!==t.isRetry&&null!==t.isRetry&&t.isRetry},(void 0===t.isDisplay||null===t.isDisplay||t.isDisplay)&&o.emit("error",l),null!=n&&n(l)),null!=a&&a(r)}}}else{GameManager.popUpManager.hideAllPopUps();var l={code:K.Error.SessionError,response:"Session error, please reload the game."};GameManager.popUpManager.show(i.DisconnectDialog,l,function(){})}},s.onerror=function(e){ServerCom.loading&&(ServerCom.loading.active=!1),K.disconnectRequestedByPlayer=!1,K.internetAvailable=!1,ServerCom.preLogin.active=!1,o.emit("error",{code:K.Error.ConnectionError,response:e}),null!=n&&n({code:K.Error.ConnectionError,response:e})},s.ontimeout=function(){ServerCom.loading&&(ServerCom.loading.active=!1),ServerCom.preLogin.active=!1,K.disconnectRequestedByPlayer=!1,K.internetAvailable=!1,o.emit("error",{code:K.Error.TimeOutError,response:"Timeout"+e}),null!=n&&n({code:K.Error.TimeOutError,response:"Timeout"+e})},s.open("GET",e,!0),s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),""!=K.Token.access_token){var r=K.Token.access_token;"-1"!=e.indexOf("/api/auth/refresh")&&(r=K.Token.refresh_token),s.setRequestHeader("Authorization","Bearer "+r)}s.send()},pomeloRequest:function(e,t,a,n,i,o,s,r){void 0===o&&(o=!0),void 0===s&&(s=!0),ServerCom.socketIORequest("common|"+e,t,a,n,i,o,s,"",r)},pomeloBroadcast:function(e,t){cc.systemEvent.on(e,function(a){console.log("%c[broadcast] \n%o","color: Green;",a),null!=t&&(a.route||(a.route=e),t(a))})},updateTracker:function(e,t,a){var n=e?1:-1;this.trackerCount=this.trackerCount+n,ServerCom.loading&&(this.loading.active=e&&a),ServerCom.forceKeepLoading&&(ServerCom.preLogin.active||(this.loading.active=!0)),this.tracker[t]=e},refreshConnectToServer:function(){console.log("socket.io refreshConnectToServer"),socketIO.emit("RefreshToken",K.Token.access_token,function(e){console.log(e)})},refreshConnectToPomelo:function(){console.log("pomelo refreshConnectToServer"),K.Token.access_token},socketIOConnectTable:function(){ServerCom.preLogin.active},clearConnectCB:function(){this.cconnectCB=null},socketIOConnect:function(e,t){var a=this;ServerCom.preLogin.active||(this.loading.active=!0),this.isLoading=!0,this.cconnectCB=t;var n=window,o=new window.SocketService;cc.sys.isNative?o.io(e,{reconnection:!1,rejectUnauthorized:!1,auth:{access_token:K.Token.access_token}}):o.io(e,{reconnection:!1,pingTimeout:500,pingInterval:100,auth:{access_token:K.Token.access_token}}),n.socketIO=o,console.log(ServerCom.getFormattedTime(),"Network [connect] Socket",e),o.socket.on("connect",function(){console.log(ServerCom.getFormattedTime(),"Network [connected] Socket",e),GameManager.isSocketIOConnected=!0,ServerCom.socketConnected=!0,clearTimeout(a.reconncetTimer),ServerCom.reconnecting.active=!1,a.preLogin.active=!1,a.cconnectCB&&a.cconnectCB(),a.socketReconnectedCount>0&&(a.socketReconnected=!0),a.socketReconnectedCount=0}),o.socket.on("disconnect",function(e){console.log(ServerCom.getFormattedTime(),"Network [disconnected] Socket",e),GameManager.isSocketIOConnected=!1,ServerCom.socketConnected=!1,ServerCom.socketReconnected=!1,K.disconnectRequestedByPlayer=!1,K.disconnectMultiLogin?K.disconnectMultiLogin=!1:GameManager.isConnected&&a.socketReconnectedCount<a.reconnectMaxAttempts&&!a.sessionExpired?(a.socketReconnectedCount+=1,a.socketReconnectedCount>1&&(ServerCom.reconnecting.active=!0),a.reconncetTimer=setTimeout(function(){console.log("socket retry: ",this.socketReconnectedCount),o.socket.disconnect(),o.socket.connect()}.bind(a),a.reconnectionDelay)):(ServerCom.reconnecting.active=!1,clearTimeout(a.reconncetTimer),a.socketReconnectedCount=0,a.preLogin.active=!1,console.log("socket retry over"))}),o.socket.on("connect_error",function(e){if(console.log(ServerCom.getFormattedTime(),"Network [Error] Socket",e),console.log(JSON.stringify(e)),console.log(JSON.stringify(e,null)),GameManager.isSocketIOConnected=!1,ServerCom.socketConnected=!1,a.preLogin.active=!1,ServerCom.loading.active=!1,ServerCom.reconnecting.active=!1,GameManager.isConnected=!0,K.disconnectRequestedByPlayer=!1,cc.sys.localStorage.setItem("auto_login_token",null),cc.sys.localStorage.setItem("auto_login_refresh_token",null),cc.sys.localStorage.setItem("auto_login_access_token_expire_at",null),cc.sys.localStorage.setItem("auto_login_refresh_token_expire_at",null),cc.sys.localStorage.setItem("auto_login_username",null),"jwt expired"==e.message||"Invalid Session"==e.message);else{if(LoginHandler.isLoading&&(GameManager.popUpManager.hide(i.NotificationPopup,function(){}),K.disconnectRequestedByPlayer?K.disconnectRequestedByPlayer=!1:(GameManager.popUpManager.show(i.NotificationPopup,"Please check your\n Internet Connection.",function(){}),LoginHandler.isLoading=!1)),console.log(a.socketReconnectedCount,a.reconnectMaxAttempts),ServerCom.loading.active=!1,GameManager.isConnected&&!GameManager.isSocketIOConnected&&a.socketReconnectedCount>=a.reconnectMaxAttempts){ServerCom.reconnecting.active=!1,GameManager.isConnected=!1;var t={code:K.Error.ConnectionError,response:"Connection error"};GameManager.popUpManager.hideAllPopUps(),K.disconnectRequestedByPlayer?(ServerCom.launch.active=!1,K.disconnectRequestedByPlayer=!1):(ServerCom.launch.active=!1,ScreenManager.currentScreen===K.ScreenEnum.LoginScreen||ScreenManager.currentScreen===K.ScreenEnum.SignupScreen||GameManager.popUpManager.show(i.DisconnectDialog,t,function(){}))}else console.log(a.socketReconnectedCount,a.reconnectMaxAttempts),console.log("GameManager.isConnected",GameManager.isConnected),console.log("this.sessionExpired",a.sessionExpired),GameManager.isConnected&&a.socketReconnectedCount<a.reconnectMaxAttempts&&!a.sessionExpired?(a.socketReconnectedCount+=1,ServerCom.reconnecting.active=!0,a.reconncetTimer=setTimeout(function(){console.log("socket retry: ",this.socketReconnectedCount),o.socket.disconnect(),o.socket.connect()}.bind(a),a.reconnectionDelay)):(ServerCom.reconnecting.active=!1,clearTimeout(a.reconncetTimer),a.socketReconnectedCount=0,a.preLogin.active=!1,console.log("socket retry over"),t={code:K.Error.ConnectionError,response:"Connection error"},GameManager.popUpManager.hideAllPopUps(),K.disconnectRequestedByPlayer?K.disconnectRequestedByPlayer=!1:ScreenManager.currentScreen===K.ScreenEnum.LoginScreen||ScreenManager.currentScreen===K.ScreenEnum.SignupScreen||GameManager.popUpManager.show(i.DisconnectDialog,t,function(){}));GameManager.isConnected||LoginHandler.isLoading||!K.disconnectRequestedByPlayer||(K.disconnectRequestedByPlayer=!1)}}),o.onAny(function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];"commonEventResponse"==e&&a[0].eventOrigin?cc.systemEvent.emit(a[0].eventOrigin,a[0].data):a[0].channelId?a[0].channelId.length>30&&-1!=a[0].channelId.indexOf("-")?console.log("!!!!!!!! filter"):a[0].eventName?cc.systemEvent.emit(a[0].eventName,a[0].data):a[0].route&&"playerCoins"==a[0].route&&cc.systemEvent.emit(a[0].route,a[0].data):a[0].data&&a[0].data.channelId?cc.systemEvent.emit(a[0].route,a[0].data):a[0].data||-1==e.indexOf("Tournament")?"forcedisconnect"==e?(K.disconnectMultiLogin=!0,cc.systemEvent.emit("forcedisconnect",a)):"buddyResponseEvent"==e&&cc.systemEvent.emit("buddyResponseEvent",a[0]):cc.systemEvent.emit(a[0].eventName,a)})},socketIORequest:function(e,t,a,n,i,o,s,r,l){void 0===o&&(o=!0),void 0===s&&(s=!0),void 0===r&&(r="");var c=this;if("object"!=typeof t){var d={};d.data=t,t=d}if(t||(t={}),"object"==typeof t){if(null!=t.isLoggedIn&&null!=t.isLoggedIn||(t.isLoggedIn=!0),t.isLoggedIn&&!GameManager.isConnected)return void c.emit("error",{code:K.Error.ConnectionError,response:"You are not logged in !!"})}else if(!GameManager.isConnected)return c.emit("error",{code:K.Error.ConnectionError,response:"You are not logged in !!"}),void(c.preLogin.active=!1);if(!GameManager.isSocketIOConnected)return c.emit("error",{code:K.Error.ConnectionError,response:"socket.io connection error"}),ServerCom.loading.active=!1,ServerCom.preLogin.active=!1,void(ServerCom.launch.active=!1);this.tracker=this.tracker||{};var h=t.channelId||"";""==h&&(h=t.tableId||""),h+=e,void 0!==this.tracker[h]&&this.tracker[h]?console.log("false "+h):this.updateTracker(!0,h,o,r);var u=setTimeout(function(){c.tracker[h]=!1,this.updateTracker(!1,h,o),ServerCom.loading.active=!1,ServerCom.preLogin.active=!1}.bind(this),i||5e3);delete t.isLoggedIn,console.log(ServerCom.getFormattedTime(),"Network [REQ] Socket",e,t),socketIO.emit(e.split("|")[0],{eventName:e.split("|")[1],data:t},function(i){console.log(ServerCom.getFormattedTime(),"Network [RES] Socket",e,i);var d=i.channelId||"";""==d&&(d=i.tableId||""),d+=e,c.updateTracker(!1,d,o,r);var h=void 0!==i.isDisplay&&null!==i.isDisplay?i.isDisplay:!i.success,u={code:K.Error.SuccessFalseError,response:i.info,errorType:i.errorType||"",channelId:i.channelId||"",isRetry:void 0!==i.isRetry&&null!==i.isRetry&&i.isRetry};i.success?h&&c.emit("error",u):(s&&h&&c.emit("error",u),null!=n&&n(u)),null!=a&&("resume"!=i.action&&"preCheck"!=i.action&&"sitOut"!=i.action||!i.success||a(i,t)),null!=l&&l(i,t)}).then(function(e){console.log("then",e),clearTimeout(u),null!=a&&a(e.data,e)})},socketIOBroadcast:function(e,t){socketIO.socket.on(e,function(a){"Tournament:Refresh"!=e&&console.log(ServerCom.getFormattedTime(),"Network [B/REV] Socket",e,a),null!=t&&t(a)})},getFormattedTime:function(){var e=new Date,t=Date.now();return"["+e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")+":"+e.getSeconds().toString().padStart(2,"0")+"."+e.getMilliseconds().toString().padStart(3,"0")+"/"+t+"]"}}),cc._RF.pop()},{EventEmitter:"EventEmitter",PopUpManager:"PopUpManager"}],SignupScreen:[function(e,t){"use strict";cc._RF.push(t,"afd89nGfMhDCJ0NYtPMUInL","SignupScreen");var a,n=e("AbstractScreen"),i=e("PopUpManager").PopUpManager,o=(e("PopUpManager").PopUpType,e("LoginHandler")),s=e("CustomEditBox");cc.Class({extends:n,properties:{vpRegister:{default:null,type:cc.Button},vpErrorMessage:{default:null,type:cc.Label},vpUserName:{default:null,type:cc.EditBox},vpEmailId:{default:null,type:cc.EditBox},vpPassword:{default:null,type:cc.EditBox},vpConfirmPassword:{default:null,type:cc.EditBox},vpMobileNumber:{default:null,type:cc.EditBox},vpIsAbove18:{default:null,type:cc.Toggle},countryCode:{default:null,type:cc.EditBox},flagScrollView:{default:null,type:cc.Node},flagScrollViewContent:{default:null,type:cc.Node},flagItem:{default:null,type:cc.Node},flagNode:{default:null,type:cc.Node},timerNode:{default:null,type:cc.Node},resendNode:{default:null,type:cc.Node},loginNode:{default:null,type:cc.Node},otpNode:{default:null,type:cc.Node},phone:{default:null,type:cc.EditBox},showInviteCode:{default:null,type:cc.Node},inviteCode:{default:null,type:cc.EditBox},loginHandler:{default:null,type:o},userName:{default:null,type:cc.EditBox},email:{default:null,type:cc.EditBox},password:{default:null,type:cc.EditBox},signupDebug:{default:[],type:cc.Node},popupManager:{default:null,type:i},lobby:{default:null,type:cc.Node},userNameEdit:{default:null,type:cc.Label},passwordEdit:{default:null,type:cc.Label},affiliateId:{default:null,type:cc.EditBox},isWindows:!1,customEditBox:{default:null,type:s},sendOtpButton:{default:null,type:cc.Button},resendOtpButton:{default:null,type:cc.Button},buttonsNode:{default:null,type:cc.Node},otpBlock:{default:null,type:cc.Node},mobileNumber:{default:null,type:cc.EditBox},timer:{default:null,type:cc.Label},otp:{default:null,type:cc.EditBox},lobbySelectorNode:{default:null,type:cc.Node},lobbyScreen:{default:null,type:cc.Node},time:0,timerSchedule:null,resendTimer:60,verfyOtpClickable:!0},showFlagScrollView:function(){this.flagScrollView.active=!this.flagScrollView.active;for(var e=0;e<this.flagScrollViewContent.children.length;e++)this.flagScrollViewContent.children[e].children[0].active=!1,this.flagScrollViewContent.children[e].__data.dial_code==this.countryCode.string&&(this.flagScrollViewContent.children[e].children[0].active=!0)},hideFlagScrollView:function(){this.flagScrollView.active=!1},onEndEdit:function(){for(var e=0;e<window.CountryCodes.length;e++)if(this.countryCode.string==window.CountryCodes[e].dial_code)return cc.sys.localStorage.setItem("country",window.CountryCodes[e].code),cc.sys.localStorage.setItem("countryCode",this.countryCode.string),void cc.resources.load("flags/"+window.CountryCodes[e].code.toLowerCase(),cc.SpriteFrame,function(e,t){e||(a.flagNode.getComponent(cc.Sprite).spriteFrame=t)});for(cc.resources.load("flags/"+window.CountryCodes[230].code.toLowerCase(),cc.SpriteFrame,function(e,t){e||(a.flagNode.getComponent(cc.Sprite).spriteFrame=t)}),this.countryCode.string=window.CountryCodes[230].dial_code,cc.sys.localStorage.setItem("country",window.CountryCodes[230].code),cc.sys.localStorage.setItem("countryCode",window.CountryCodes[230].string),e=0;e<this.flagScrollViewContent.children.length;e++)this.flagScrollViewContent.children[e].children[0].active=!1,this.flagScrollViewContent.children[e].__data.dial_code==this.countryCode.string&&(this.flagScrollViewContent.children[e].children[0].active=!0)},onSelectFlag:function(e,t){for(var n=0;n<this.flagScrollViewContent.children.length;n++)this.flagScrollViewContent.children[n].children[0].active=!1;e.target.children[0].active=!0,cc.sys.localStorage.setItem("country",t.code),cc.resources.load("flags/"+t.code.toLowerCase(),cc.SpriteFrame,function(e,t){e||(a.flagNode.getComponent(cc.Sprite).spriteFrame=t)}),this.countryCode.string=t.dial_code,cc.sys.localStorage.setItem("countryCode",this.countryCode.string),this.hideFlagScrollView()},loadFlags:function(){var e=this;this.flagScrollViewContent.removeAllChildren(),console.log(window.CountryCodes),cc.sys.localStorage.getItem("phone")?this.countryCode.string=cc.sys.localStorage.getItem("countryCode"):(cc.sys.localStorage.setItem("country",window.CountryCodes[230].code),cc.resources.load("flags/"+window.CountryCodes[230].code.toLowerCase(),cc.SpriteFrame,function(e,t){e||(a.flagNode.getComponent(cc.Sprite).spriteFrame=t)}),this.countryCode.string=window.CountryCodes[230].dial_code);for(var t=function(){var t=cc.instantiate(e.flagItem);t.setPosition(0,0),t.active=!0,t.children[0].active=!1,t.children[2].getComponent(cc.Label).string="+"+window.CountryCodes[n].dial_code,cc.resources.load("flags/"+window.CountryCodes[n].code.toLowerCase(),cc.SpriteFrame,function(e,a){e||(t.children[1].getComponent(cc.Sprite).spriteFrame=a)}),t.getComponent(cc.Button).clickEvents[0].customEventData=window.CountryCodes[n],t.parent=e.flagScrollViewContent,t.__data=window.CountryCodes[n],cc.sys.localStorage.getItem("country")==window.CountryCodes[n].code&&(t.children[0].active=!0,cc.resources.load("flags/"+window.CountryCodes[n].code.toLowerCase(),cc.SpriteFrame,function(e,t){e||(a.flagNode.getComponent(cc.Sprite).spriteFrame=t)}))},n=0;n<window.CountryCodes.length;n++)t()},onLoad:function(){a=this,this.time=3e5,this.submitEnter()},togglePassword:function(){this.password.inputFlag==cc.EditBox.InputFlag.DEFAULT?this.password.inputFlag=cc.EditBox.InputFlag.PASSWORD:this.password.inputFlag=cc.EditBox.InputFlag.DEFAULT},onShow:function(){this.verfyOtpClickable=!0,this.hideInviteCodeButton(),this.resetAll(),GameManager.isP&&(this.sendOtpButton.node.active=!1)},validateOTPEditBoxInput:function(){this.validateNumericValue(this.otp)},NumericValue:function(e){if(isNaN(e.string)){var t="";if(i=e.string.match(/\d+/g))for(var a=0;a<i.length;a++)t+=i[a];e.string=t}else{if(/\s/.test(e.string)){var n=e.string.toString().trim();e.string=n}var i;t=".",-1!=e.string.indexOf(t)&&(i=(i=e.string).replace(".",""),e.string=i),t="e",-1!=e.string.indexOf(t)&&(i=(i=e.string).replace("e",""),e.string=i),t="-",-1!=e.string.indexOf(t)&&(i=(i=e.string).replace("-",""),e.string=i),(e.string.length>1?/[0-9]/:/[1-9]/).test(e.string)||(i=(i=e.string).replace("0",""),e.string=i)}},validateMobileEditBoXInput:function(){this.validateNumericValue(this.mobileNumber)},submitEnter:function(){},resetAll:function(){this.vpRegister.interactable=!1,this.vpUserName.string="",this.vpPassword.string="",this.vpConfirmPassword.string="",this.vpEmailId.string="",this.vpMobileNumber.string="",this.vpIsAbove18.isChecked=!1},onCheck:function(){this.vpRegister.interactable=!1,""!==this.vpUserName.string&&""!==this.vpPassword.string&&""!==this.vpConfirmPassword.string&&""!==this.vpEmailId.string&&""!==this.vpMobileNumber.string&&this.vpIsAbove18.isChecked&&(this.vpRegister.interactable=!0)},onHide:function(){this.password.string="",this.email.string="",this.userName.string="",(GameManager.isMobile||cc.sys.os===cc.sys.OS_WINDOWS&&!cc.sys.isBrowser)&&this.manageOtpView(!1),this.hideInviteCodeButton()},onRegister:function(){return this.vpErrorMessage.string="",this.vpUserName.node.getChildByName("red").active=!1,this.vpPassword.node.getChildByName("red").active=!1,this.vpConfirmPassword.node.getChildByName("red").active=!1,this.vpEmailId.node.getChildByName("red").active=!1,this.vpMobileNumber.node.getChildByName("red").active=!1,this.vpPassword.string!=this.vpConfirmPassword.string?(this.vpErrorMessage.node.active=!0,this.vpErrorMessage.string="Password unmatched",this.vpPassword.node.getChildByName("red").active=!0,void(this.vpConfirmPassword.node.getChildByName("red").active=!0)):/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.vpEmailId.string)?void a.loginHandler.vpRegister(this.vpUserName.string,this.vpEmailId.string,this.vpPassword.string,this.vpConfirmPassword.string,"+976"+this.vpMobileNumber.string,this.vpIsAbove18.isChecked,function(e){e.success&&"fail"!=e.status?(cc.sys.localStorage.setItem("vpUserName",a.vpUserName.string),cc.sys.localStorage.setItem("vpPassword",a.vpPassword.string),K.Token.access_token=e.access_token,K.Token.refresh_token=e.refresh_token,K.Token.access_token_expire_at=e.access_token_expire_at,K.Token.refresh_token_expire_at=e.refresh_token_expire_at,a.vpErrorMessage.string="",a.node.active=!1,ServerCom.socketIOConnect(K.ServerAddress.gameServer+":"+K.ServerAddress.gamePort,function(){ServerCom.socketConnected&&(GameManager.setUserData(e.user),setTimeout(function(){a.loginNode.getComponent("LoginScreen").onSuccessfullLogin(a.loginNode.getComponent("LoginScreen"))},100))})):(a.vpErrorMessage.node.active=!0,e.message?a.vpErrorMessage.string=e.message:a.vpErrorMessage.string=e.error[0].message,-1!=a.vpErrorMessage.string.indexOf("email")&&(a.vpEmailId.node.getChildByName("red").active=!0),-1!=a.vpErrorMessage.string.indexOf("Username")&&(a.vpUserName.node.getChildByName("red").active=!0),-1!=a.vpErrorMessage.string.indexOf("Password")&&(a.vpPassword.node.getChildByName("red").active=!0,a.vpConfirmPassword.node.getChildByName("red").active=!0),-1!=a.vpErrorMessage.string.indexOf("Mobile")&&(a.vpMobileNumber.node.getChildByName("red").active=!0))}):(this.vpErrorMessage.node.active=!0,this.vpErrorMessage.string="Invalid email address",void(this.vpEmailId.node.getChildByName("red").active=!0))},updateResend:function(){this.resendTimer-=1,0==this.resendTimer?(this.unschedule(this.updateResend),this.timerNode.active=!1,this.resendNode.active=!0):(this.timerNode.active=!0,this.timerNode.getChildByName("timer2").getComponent(cc.Label).string=this.resendTimer+"s")},onResend:function(){var e=this;e.loginHandler.sendOtp(this.phone.string,this.userName.string,this.inviteCode.string,function(t){console.log("loginSTD",t),t&&(cc.find("InvisibleWhenBuilt/Inputs/ErrorMessage1",e.otpNode).active=!1,e.preLogin.active=!1,ServerCom.loading.active=!1,t.success?(cc.find("InvisibleWhenBuilt/Inputs/ErrorMessage1",e.otpNode).active=!0,cc.find("InvisibleWhenBuilt/Inputs/ErrorMessage1",e.otpNode).getComponent(cc.Label).string="OTP sent successfully: "+t.data,e.otpNode.active=!0,e.resendNode.active=!1,e.resendTimer=61,e.schedule(e.updateResend,1)):(e.signupDebug[2].getComponent(cc.Label).string=t.message,e.signupDebug[2].active=!0))})},onCloseOtp:function(){cc.find("InvisibleWhenBuilt/Inputs/ErrorMessage1",this.otpNode).active=!1,this.unschedule(this.updateResend),this.resendNode.active=!1,this.otpNode.active=!1,this.otp.string=""},onVerfyOtp:function(){var e=this;if(this.verfyOtpClickable){this.verfyOtpClickable=!1,setTimeout(function(){e.verfyOtpClickable=!0},2e3);var t=this;cc.find("InvisibleWhenBuilt/Inputs/ErrorMessage1",t.otpNode).active=!1,this.loginHandler.verifyOtp(this.otp.string,function(e){console.log("otp",e),"success"==e.status?(t.otpNode.active=!1,cc.sys.localStorage.setItem("countryCode",t.countryCode.string),cc.sys.localStorage.setItem("phone",t.phone.string),K.Token.access_token=e.access_token,K.Token.refresh_token=e.refresh_token,K.Token.access_token_expire_at=e.access_token_expire_at,K.Token.refresh_token_expire_at=e.refresh_token_expire_at,ServerCom.socketIOConnect(K.ServerAddress.gameServer+":"+K.ServerAddress.gamePort,function(){ServerCom.socketConnected&&(t.otp.string="",t.unschedule(t.updateResend),t.timerNode.getChildByName("timer2").getComponent(cc.Label).string="",GameManager.setUserData(e.user),setTimeout(function(){t.loginNode.getComponent("LoginScreen").onSuccessfullLogin(t.loginNode.getComponent("LoginScreen"))},100))})):t.verfyOtpClickable=!0})}},ConnectToGameSever:function(e,t,a){a.loginHandler.startPomelo(e,t,function(){a.onSuccessfullLogin(a)})},onSuccessfullLogin:function(e){var t=this;GameManager.isConnected=!1,this.lobbySelectorNode.active=!0;var a=this.lobbySelectorNode.getComponent("MainLobby");cc.sys.localStorage.setItem("auto_login_token",K.Token.access_token),cc.sys.localStorage.setItem("auto_login_refresh_token",K.Token.refresh_token),cc.sys.localStorage.setItem("auto_login_access_token_expire_at",K.Token.access_token_expire_at),cc.sys.localStorage.setItem("auto_login_refresh_token_expire_at",K.Token.refresh_token_expire_at),cc.sys.localStorage.setItem("auto_login_username",GameManager.user.userName),a.setOnClickCallback("POKER",function(){t.lobbySelectorNode.active=!1,e.loginHandler.checkForMultiClient(function(t){console.log("MULTI CLIENT RESPONSE ",t),t.success?(GameManager.isConnected=!0,GameManager.reset(),t.joinChannels&&t.joinChannels.length>0?GameManager.scheduleOnce(function(){var e=t.joinChannels.length;t.joinChannels.forEach(function(t,a){var n=new JoinData(t);n.channelId?(TableHandler.joinTableList.push(n.channelId),n.tableId="",GameManager.join(n.channelId,K.PomeloAPI.joinChannel,n,null,null,a+1,e)):GameManager.join(n.tableId,K.PomeloAPI.joinChannel,n,null,null,a+1,e)},this)},.1):ScreenManager.showScreen(K.ScreenEnum.LobbyScreen,10,function(){},!1)):(e.verfyOtpClickable=!0,K.disconnectRequestedByPlayer=!0,pomelo.disconnect(),ScreenManager.showScreen(K.ScreenEnum.LoginScreen,10,function(){},!1))})}),a.setOnClickCallback("BINGO",function(){t.lobbySelectorNode.active=!1,console.log("Successfully login into BINGO!")})},onAlreadyRegistered:function(){this.resetAll(),ScreenManager.showScreen(K.ScreenEnum.LoginScreen,10,function(){},!1)},manageOtpView:function(e){this.sendOtpButton.node.active=!e,this.otpBlock.active=e},sendOtp:function(){""==this.mobileNumber.string?(this.mobileNumber.string="",this.mobileNumber.placeholder="     Enter your mobile number",this.signupDebug[4].getComponent(cc.Label).string=LocalizedManager.t("TXT_ENTER_10_NUMBER"),this.signupDebug[4].active=!0):this.mobileNumber.string.length<10?(this.signupDebug[4].getComponent(cc.Label).string=LocalizedManager.t("TXT_ENTER_10_NUMBER"),this.signupDebug[4].active=!0):this.loginHandler.sendOTP(function(e){e.success&&(this.otpStartTimer=new Date,this.manageOtpView(!0))}.bind(this),this.mobileNumber.string)},startOtpTimer:function(){null==this.otpTimeRef||this.clearOtpTimer(this.otpTimeRef),this.otpTimeRef=setInterval(function(){var e=new Date-this.otpStartTimer;this.time-e<=0&&(this.time=0,this.clearOtpTimer(this.otpTimeRef),this.manageOtpView(!1))}.bind(this),1e3)},clearOtpTimer:function(e){clearInterval(e),e=null,this.time=3e5},validateRegisterUserNamePattern:function(){},validateRegisterPasswordPattern:function(){},validateRegisterEmailID_Pattern:function(){console.log("VALIDATING EMAIL",this.email.string);var e=this.email.string;if(""==e)return this.signupDebug[2].getComponent(cc.Label).string=LocalizedManager.t("TXT_PLS_ENTER_EMAIL_ID"),void(this.signupDebug[2].active=!0);e.match(/[^A-Za-z0-9@_.]/)||-1!==e.indexOf("@",1)&&-1!==e.indexOf(".",2)||(this.signupDebug[2].getComponent(cc.Label).string=LocalizedManager.t("TXT_INVALID_EMAIL"),this.signupDebug[2].active=!0)},validateRegisterMobile_Pattern:function(){},showInviteCodeButton:function(){this.showInviteCode.active=!1,this.inviteCode.node.parent.active=!0},hideInviteCodeButton:function(){this.showInviteCode.active=!0,this.inviteCode.node.parent.active=!1}}),cc._RF.pop()},{AbstractScreen:"AbstractScreen",CustomEditBox:"CustomEditBox",LoginHandler:"LoginHandler",PopUpManager:"PopUpManager"}],SitNGoModelHandler:[function(e,t){"use strict";cc._RF.push(t,"2e62aG7nelLOLKPM3eVhO6U","SitNGoModelHandler");var a=e("PopUpManager").PopUpType;function n(){}e("ResponseTypes").GameData,n.prototype.setSitNGoModel=function(e){e.playerElimination=function(t){e.emit(K.PokerEvents.onSitnGoElimination,t)},e.sitHere=function(){},e.playerNewChannel=function(t){for(var a=0;a<e.gameModel.activePokerModels.length;a++)if(e===e.gameModel.activePokerModels[a]){e.gameModel.activePokerModels.splice(a,1);break}e.roomConfig.tableId,e.node.destroy(),GameManager.scheduleOnce(function(){GameManager.gameModel.emit(K.GameEvents.OnTableClosed);var e={};e.channelId=t.newChannelId,e.channelType="TOURNAMENT",e.tableId="",e.isRequested=!0,GameManager.join(e.channelId,K.PomeloAPI.joinChannel,e)}.bind(this),.3)},e.onBreakTime=function(t){e.emit(K.PokerEvents.onBreakTime,t)},e.onBreakTimeStart=function(t){e.emit(K.PokerEvents.onBreakTimeStart,t)},e.onRebuyStatus=function(t){e.emit(K.PokerEvents.onRebuyStatus,t)},e.onBlindsChanged=function(t){e.gameData.tableDetails.blindTimeRemaining=t.blindTimeRemaining,e.roomConfig.nextSmallBlind=t.nextSmallBlind,e.roomConfig.nextBigBlind=t.nextBigBlind,e.roomConfig.nextAnte=t.nextAnte,e.emit(K.PokerEvents.onBlindsChanged)},e.startBlindChangeTimer=function(){e.timerRef=setInterval(function(){e.gameData.tableDetails.blindTimeRemaining-=1e3,e.gameData.tableDetails&&e.gameData.tableDetails.blindTimeRemaining<=0&&(e.gameData.tableDetails.blindTimeRemaining=0,e.emit(K.PokerEvents.onBlindsChanged),clearInterval(e.timerRef)),e.emit(K.PokerEvents.onBlindsChanged)}.bind(e),1e3)},e.stopBlindChangeTimer=function(){e.emit(K.PokerEvents.onBlindsChangeStopped)},e.onAddOnTimeStarts=function(){this.gameData.tableDetails.isAddon=!0,e.emit(K.PokerEvents.onAddonChanged)},e.onAddOnTimeEnds=function(){this.gameData.tableDetails.isAddon=!1,e.emit(K.PokerEvents.onAddonChanged)},e.onAddonClick=function(){if(pokerPresenter.model.tableDetails.isAddon){var t={};t.channelId=e.gameData.channelId,t.playerId=e.gameData.playerId,t.tournamentId=e.roomConfig.tableId,ServerCom.pomeloRequest(K.PomeloAPI.addon,t,function(t){t.success&&pokerPresenter.onPlayerCoins(e.getPlayerById(e.gameData.playerId))},null,!1,!1)}},e.onDoubleRebuyClick=function(){var t={};t.tournamentId=e.gameData.roomConfig.tableId,t.playerId=e.gameData.playerId.requestObject.gameVersionCount,t.channelId=e.gameData.channelId,ServerCom.pomeloRequest(K.PomeloAPI.doubleRebuy,t,function(t){t.success&&pokerPresenter.onPlayerCoins(e.getPlayerById(e.gameData.playerId))},null,!1,!1)},e.onRebuyClick=function(){var t={};t.tournamentId=e.gameData.roomConfig.tableId,t.playerId=e.gameData.playerId.requestObject.gameVersionCount,t.channelId=e.gameData.channelId,ServerCom.pomeloRequest(K.PomeloAPI.rebuyInTournament,t,function(t){t.success&&pokerPresenter.onPlayerCoins(e.getPlayerById(e.gameData.playerId))},null,!1,!1)},e.onBankrupt=function(){},e.onLeaveTournament=function(){},e.onInitializePoker=function(){e.gameModel.registerBroadcastCallbacks(e.gameData.channelId,K.BroadcastRoute.playerNewChannel,e.playerNewChannel.bind(e)),e.gameModel.registerBroadcastCallbacks(e.gameData.channelId,K.BroadcastRoute.playerElimination,e.playerElimination.bind(e)),e.gameModel.registerBroadcastCallbacks(e.gameData.channelId,K.BroadcastRoute.breakTime,e.onBreakTime.bind(e)),e.gameModel.registerBroadcastCallbacks(e.gameData.channelId,K.BroadcastRoute.breakTimerStart,e.onBreakTimeStart.bind(e)),e.gameModel.registerBroadcastCallbacks(e.gameData.channelId,K.BroadcastRoute.rebuyStatus,e.onRebuyStatus.bind(e)),e.gameModel.registerBroadcastCallbacks(e.gameData.channelId,K.BroadcastRoute.onBankrupt,e.onBankrupt.bind(e)),e.gameModel.registerBroadcastCallbacks(e.gameData.channelId,K.BroadcastRoute.updateBlind,e.onBlindsChanged.bind(e)),e.gameModel.registerBroadcastCallbacks(e.gameData.channelId,K.BroadcastRoute.addonTimeStarts,e.onAddOnTimeStarts.bind(e)),e.gameModel.registerBroadcastCallbacks(e.gameData.channelId,K.BroadcastRoute.addonTimeEnds,e.onAddOnTimeEnds.bind(e)),e.roomConfig.tournamentType==e.K.TournamentType.Normal&&e.emit(K.PokerEvents.onBlindsChanged)},e.setAddOnCheckbox=function(t,a){var n={};n.playerId=GameManager.user.playerId,n.channelId=e.gameData.channelId,n.isAutoAddOn=!t,ServerCom.pomeloRequest(e.K.PomeloAPI.updateAutoAddon,n,function(e){e.success&&a&&a(e)}.bind(this),null,5e3,!1,!1)},e.setRebuyCheckBox=function(t,a){var n={};n.playerId=GameManager.user.playerId,n.channelId=e.gameData.channelId,n.isAutoRebuy=!t,ServerCom.pomeloRequest(e.K.PomeloAPI.updateAutoRebuy,n,function(e){a&&a(e)}.bind(this),null,5e3,!1,!1)}},n.prototype.setSitNGoPresenter=function(e){e.onSitnGoElimination=function(t){(t.playerId=GameManager.user.playerId)&&(t.pokerPresenter=e,setTimeout(function(){e&&e.popUpManager.show(a.SitNGoResultPopup,t,function(){})},2e3))},e.tempOnLoad=function(){e.model.on(K.PokerEvents.onSitnGoElimination,e.onSitnGoElimination.bind(e)),e.model.on(K.PokerEvents.onBreakTime,e.onBreakTime.bind(e)),e.model.on(K.PokerEvents.onBreakTimeStart,e.onBreakTimeStart.bind(e)),e.model.on(K.PokerEvents.onRebuyStatus,e.onRebuyStatus.bind(e)),e.model.on(K.PokerEvents.onBlindsChanged,e.notifyBlindsChanged.bind(e)),e.model.on(K.PokerEvents.onBlindsChangeStopped,e.stopBlindsChangeNotification.bind(e)),e.model.on(K.PokerEvents.onAddonChanged,e.onAddonChanged.bind(e)),e.model.on(K.PokerEvents.onAddOnCheckBox,e.addOnCheckCB.bind(e)),e.model.on(K.PokerEvents.onRebuyCheckBox,e.reBuyCheckCB.bind(e)),this.autoAddOnCheckBox.registerCallback(this.onAddOnCheckBox.bind(this)),this.autoBuyInCheckBox.registerCallback(this.onRebuyCheckBox.bind(this))},e.tempOnJoinSuccess=function(){if(this.model.roomConfig.tournamentType==this.model.K.TournamentType.Normal&&(this.setCheckBoxValues(),this.rebuyBtn.active=this.model.gameData.tableDetails.isRebuy&&!this.model.gameData.tableDetails.isAutoAddOn),this.tournamentAlreadyOver(),this.model.gameData.tableDetails.isOnBreak){var e=this.model.gameData.tableDetails.breakEnds;this.startBreakTimer(void 0!==e&&e)}},e.setCheckBoxValues=function(){this.sitOutNextBBCheckBox.node.parent.active=!1,this.autoAddOnCheckBox.node.parent.active=!0,this.autoBuyInCheckBox.node.parent.active=!0,this.autoAddOnCheckBox.setSelection(this.model.gameData.tableDetails.isAutoAddOn),this.autoBuyInCheckBox.setSelection(this.model.gameData.tableDetails.isAutoRebuy)},e.resetView=function(){e.indexOffset=0;for(var t=0;t<e.playerHand.length;t++)e.playerHand[t].resetSeat();e.allocateSeat(),e.playerHand.forEach(function(e){e.seatState===K.SeatState.Free&&e.disableView()},e)},e.onBreakTime=function(){e.popUpManager.show(a.PlayerInfoPopup,{info:"Break Time Starts..."},function(){})},e.onBreakTimeStart=function(t){e.startBreakTimer(t.breakTime)},e.onRebuyStatus=function(t){e.rebuyBtn.active=t.status},e.startBreakTimer=function(e){this.tournamentInfo.parent.active=!0,this.tournamentInfo.active=!0;var t,a=this.tournamentInfo.getComponent(cc.Label);e||(a.string="This table is on Break"),t=e>1e3?parseInt(parseInt(e)/1e3):60*parseInt(e),this.timerSchedule=setInterval(function(){a.string="Break Time Starts...\nTime Left : "+parseInt(t/60)+":"+t%60,--t<=0&&(clearInterval(this.timerSchedule.bind(this)),this.tournamentInfo.parent.active=!1)}.bind(this),1e3)},e.playerLeft=function(t){null!==t&&(t[0].playerId===e.model.gameData.playerId&&(this.handleSitOutBtns(!0),e.resetView()),e.playerHand[e.getRotatedSeatIndex(t[0].seatIndex)].disableView(),this.scheduleOnce(function(){if(0==e.model.gameData.tableDetails.players.length){var t={};t.pokerPresenter=e,e.popUpManager.show(a.SitNGoResultPopup,t,function(){})}},5))},e.notifyBlindsChanged=function(){var t;e.notificationBox.active=!0,e.model.gameData.tableDetails.nextSmallBlind<=0?e.stopBlindsChangeNotification():(t="",t+="Next Blinds "+e.model.roomConfig.nextSmallBlind+"/"+e.model.roomConfig.nextBigBlind+"Next Ante "+e.model.roomConfig.nextAnte),e.notificationBox.getChildByName("Message").getComponent(cc.Label).string=t},e.stopBlindsChangeNotification=function(){e.notificationBox.active=!1},e.onAddonChanged=function(){this.addonBtn.active=this.model.gameData.tableDetails.isAddon},e.onAddOnCheckBox=function(){var t=e.autoAddOnCheckBox.getSelection();this.model.gameData.isAutoRebuy=t,this.model.setAddOnCheckbox(t,function(e){e.success||(this.model.gameData.isAutoRebuy=!t),this.addOnCheckCB.bind(this)}.bind(this))},e.addOnCheckCB=function(){this.autoAddOnCheckBox.setSelection(this.model.gameData.isAutoRebuy)},e.onRebuyCheckBox=function(){var t=e.autoBuyInCheckBox.getSelection();this.model.setRebuyCheckBox(t,function(e){e.success||(this.model.gameData.isAutoRebuy=!t),this.reBuyCheckCB.bind(this)}.bind(this))},e.reBuyCheckCB=function(){e.autoBuyInCheckBox.setSelection(this.model.gameData.isAutoRebuy)}},t.exports={SitNGoModelHandler:n},cc._RF.pop()},{PopUpManager:"PopUpManager",ResponseTypes:"ResponseTypes"}],SitNGoResultPopup:[function(e,t){"use strict";cc._RF.push(t,"ac108oHszRFFq0/sDBN49HJ","SitNGoResultPopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase");cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},infoLbl:{default:null,type:cc.Label},prizeData:null,spectator:!1,dataA:null,messageLbl:{default:null,type:cc.Label},headingLbl:{default:null,type:cc.Label}},onLoad:function(){},onShow:function(e){null!=e&&(e.rank?(this.infoLbl.string="Rank - "+e.rank+"\n Chips earned - "+e.chipsWon,e.chipsWon<1?this.messageLbl.string="Better Luck Next Time":this.messageLbl.string="Congratulations!!!"):(this.spectator=!0,this.infoLbl.string="Game Over",this.messageLbl.string=""),this.dataA=e.pokerPresenter,this.prizeData=e,this.headingLbl.string=this.dataA.model.roomConfig.channelName+" Results")},onClickEnter:function(){this.onExit()},onExit:function(){var e={playerId:this.prizeData.playerId,gameVersionCount:this.prizeData.gameVersionCount,tournamentId:this.prizeData.tournamentId},t=this;this.spectator?t.exitGame(t):ServerCom.pomeloRequest(K.PomeloAPI.collectPrize,e,function(e){e.success&&(e.isGameRunning?(t.dataA.leaveTable(),t.popUpManager.hide(n.SitNGoResultPopup,function(){})):t.exitGame(t))})},exitGame:function(e){for(var t=0;t<GameManager.gameModel.activePokerModels.length;t++)if(this.dataA.model===GameManager.gameModel.activePokerModels[t]){GameManager.gameModel.activePokerModels.splice(t,1);break}this.dataA.model.node.destroy(),GameManager.scheduleOnce(function(){GameManager.gameModel.emit(K.GameEvents.OnTableClosed)},.3),e.popUpManager.hide(n.SitNGoResultPopup,function(){})}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],SitTablePresenter:[function(e,t){"use strict";cc._RF.push(t,"eba16ewWmxPAYyckqbf4JcJ","SitTablePresenter");var a=e("PostTypes").JoinChannel,n=e("Table"),i=e("TableContent"),o=e("Checkbox"),s=e("DropDown"),r=e("PopUpManager").PopUpType;cc.Class({extends:n,properties:{registerBtn:{default:null,type:cc.Node},deregisterBtn:{default:null,type:cc.Node},joinBtn:{default:null,type:cc.Node},gameTypeDropdown:{default:null,type:s},stakesDropdown:{default:null,type:s},maxPlayersDropdown:{default:null,type:s},hideFullTablesCB:{default:null,type:o},sideTableInfoPrefab:{default:null,type:cc.Prefab},tournamentPlayersInfo:[],tableInfoHolder:{default:null,type:cc.Node},warningLbl:{default:null,type:cc.Label},channelNameLbl:{default:null,type:cc.Label},PrizePoolLbl:{default:null,type:cc.Label},favTableCB:{default:null,type:o},favPrimaryCB:{default:null,type:o},sideTableInfo:{default:null,type:cc.Node}},onEnable:function(){this._super(),this.switchButtons(!1),!GameManager.isMobile&&this.DropDownData&&this.initDropDowns(this.DropDownData.sitNGo)},addTable:function(e){e.updated.channelType==K.ChannelType.Tournament&&e.updated.tournamentType==K.TournamentType.SitNGo&&this._super(e)},filterByTournamentType:function(e,t,a){return void 0===t&&(t=!0),void 0===a&&(a=!0),this._super(e,!1)},tableContentClick:function(){var e=this;this.handler.checkRegistration(i.prevSelection.channelData,function(t){t.success&&(e.switchButtons(t.result.isRegistered,t.result.tournamentState,t.result.isEliminated),null!==i.prevSelection&&(e.tempSelection=e.contentPool.indexOf(i.prevSelection.node)))},function(){}),this.refreshSideTable()},setSideTableData:function(e){GameManager.removeAllChildren(this.tableInfoHolder);var t=i.prevSelection.channelData,a=t.entryfees+t.housefees+t.bountyfees,n=t.maxPlayersForTournament*t.entryfees;if(i.prevSelection.channelData.buyIn=a,i.prevSelection.channelData.prizePool=n,this.PrizePoolLbl.string=n,this.channelNameLbl.string=t.channelName,e.success&&e.result.ranks){this.currentSideTableData=e,null!=i.prevSelection&&(i.prevSelection.channelData.playersInfo=e.result.ranks);for(var o=0;o<e.result.ranks.length;o++){var s=cc.instantiate(this.sideTableInfoPrefab);if(this.tableInfoHolder.addChild(s),i.prevSelection.channelData.state==K.SitNGoState.REGISTER)var r=[e.result.ranks[o].userName,"",""];else{var l=e.result.ranks[o].rank?e.result.ranks[o].rank:"";r=[e.result.ranks[o].userName,l,e.result.ranks[o].chipsWon]}s.getComponent("TableContent").setContentText(r),e.result.ranks[o].eliminated&&(s.getChildByName("Bg").color=new cc.Color(182,181,163))}}},onSideTableUpdate:function(e){null!=i.prevSelection&&0!=this.contentPool.length&&e.tournamentId&&i.prevSelection.channelData._id==e.tournamentId&&(this.currentSideTableData={},this.currentSideTableData.success=!0,this.currentSideTableData.result=e.updated,this.refreshSideTable(!1))},OnRegisterTournament:function(){if(null!==i.prevSelection){var e=this;this.handler.registerTournament(i.prevSelection.channelData,function(t){return t.success?(e.switchButtons(!0),!1):"user already registered in this tournament"===t.info},function(){})}},OnDeRegisterTournament:function(){if(null!==i.prevSelection){var e=this;this.handler.deRegisterTournament(i.prevSelection.channelData,function(t){t.success&&e.switchButtons(!1)},function(){})}},onTournamentLobbyInfo:function(){null!==i.prevSelection&&this.handler.tournamentLobbyInfo(i.prevSelection.channelData,function(e){e.tableData&&this.popUpManager.show(r.TournamentLobbyInfoPopup,e,function(){})}.bind(this),function(){this.warningLbl.node.active=!0,setTimeout(function(){this.warningLbl.node.active=!1}.bind(this),2e3)}.bind(this))},onJoinTournament:function(){if(null!==i.prevSelection){var e=new a(i.prevSelection.channelData);e.tableId=i.prevSelection.channelData._id,e.channelId="",GameManager.join(e.tableId,K.PomeloAPI.joinChannel,e)}},onGetTableData:function(){this._super(K.ChannelType.Tournament)},makeContent:function(e){if(this.variation==K.Variation.OpenFaceChinesePoker)var t=[e.channelName,e.chipsPointRatio,e.channelVariation,GameManager.getGameTypeByValue(e.turnTime),e.minBuyIn,e.maxBuyIn,e.playingPlayers+"/"+e.maxPlayers];else t=[e.channelName,e.isPotLimit?"L":"NL",e.entryfees+e.housefees+e.bountyfees,GameManager.getGameTypeByValue(e.turnTime),e.channelVariation,this.capitalizeFirstLetter(e.state),(e.enrolledPlayers?e.enrolledPlayers:0)+"/"+e.maxPlayersForTournament,"0","0"];return t},switchButtons:function(e,t,a){if(this.registerBtn.active=!e,this.deregisterBtn.active=e,t)switch(t){case K.SitNGoState.RUNNING:this.registerBtn.active=this.deregisterBtn.active=!1,this.joinBtn.active=e&&!a,this.deregisterBtn.active=!1;break;case K.SitNGoState.REGISTER:this.joinBtn.active=!1;break;case K.SitNGoState.FINISHED:case K.SitNGoState.UPCOMING:this.joinBtn.active=this.registerBtn.active=this.registerBtn.active=!1}}}),cc._RF.pop()},{Checkbox:"Checkbox",DropDown:"DropDown",PopUpManager:"PopUpManager",PostTypes:"PostTypes",Table:"Table",TableContent:"TableContent"}],SitTournComingSoon:[function(e,t){"use strict";cc._RF.push(t,"8df02OcK2VB/IJnXpOlnjUI","SitTournComingSoon"),cc.Class({extends:cc.Component,properties:{comingSoon:{default:null,type:cc.Node}},start:function(){},onEnable:function(){this.comingSoon.active=!0},onDisable:function(){this.comingSoon.active=!1}}),cc._RF.pop()},{}],SliderTouchV:[function(e,t){"use strict";cc._RF.push(t,"ca7e3ZTd4BDUpSrs5+HeDv8","SliderTouchV"),cc.Class({extends:e("./SliderTouch"),properties:{id:{default:0,visible:!1},initValue:{default:0},knob:{default:null,type:cc.Node},fillColor:{default:null,type:cc.Sprite},width:{default:0,visible:!1},value:{default:0,visible:!1},progressBar:{default:null,type:cc.ProgressBar},callback:{default:null,visible:!1},offset:0},onLoad:function(){this.height=this.node.height,this.bound=this.height/2,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,function(e){e.stopPropagation()},this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){e.stopPropagation()},this),this.setSliderValue(this.initValue)},onTouchStart:function(e){var t=this.node.convertToNodeSpaceAR(e.getLocation());this.updateFill(t.y),e.stopPropagation()},onTouchMove:function(e){var t=this.node.convertToNodeSpaceAR(e.getLocation());this.updateFill(t.y),e.stopPropagation()},updateFill:function(e){this.bound=this.height/2,null!=this.knob&&(e>this.bound-this.offset?this.knob.y=this.bound-this.offset+this.node.height/2:e<-this.bound+this.offset?this.knob.y=-this.bound+this.offset+this.node.height/2:this.knob.y=e+this.node.height/2),e+=this.bound,e/=this.height,this.progressBar.progress=e,this.value=e,null!==this.callback&&void 0!==this.callback&&this.callback(e)},setSliderValue:function(e,t,a){void 0===t&&(t=!0),void 0===a&&(a=!1),this.bound=this.height/2,e<0?(this.progressBar.progress=0,this.value=0,e=0):e>1?(this.progressBar.progress=1,this.value=1,e=1):(this.progressBar.progress=e,this.value=e),t&&null!==this.callback&&void 0!==this.callback&&this.callback(e,a),e*=this.height,e-=this.bound,null!=this.knob&&(e>this.bound-this.offset?e=this.bound-this.offset:e<-this.bound+this.offset&&(e=-this.bound+this.offset),this.knob.y=e+this.node.height/2)},setSliderValue2:function(e,t,a){void 0===t&&(t=!0),void 0===a&&(a=!1),this.bound=this.height/2,e<0?(this.progressBar.progress=0,this.value=0,e=0):e>1?(this.progressBar.progress=1,this.value=1,e=1):(this.progressBar.progress=e,this.value=e),t&&null!==this.callback&&void 0!==this.callback&&this.callback(e,a),e*=this.height,e-=this.bound,null!=this.knob&&(e>this.bound-this.offset?e=this.bound-this.offset:e<-this.bound+this.offset&&(e=-this.bound+this.offset),this.knob.y=e+this.node.height/2)},getSliderValue:function(){return this.value},registerCallback:function(e){this.callback=e},removeAllCallbacks:function(){this.callback=null}}),cc._RF.pop()},{"./SliderTouch":"SliderTouch"}],SliderTouch:[function(e,t){"use strict";cc._RF.push(t,"7940cuOb6ZJw7nY1FW3Uebv","SliderTouch"),cc.Class({extends:cc.Component,properties:{id:{default:0,visible:!1},initValue:{default:0},knob:{default:null,type:cc.Node},fillColor:{default:null,type:cc.Sprite},width:{default:0,visible:!1},value:{default:0,visible:!1},progressBar:{default:null,type:cc.ProgressBar},callback:{default:null,visible:!1},offset:15},onLoad:function(){this.width=this.node.width,this.bound=this.width/2,this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,function(e){e.stopPropagation()},this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){e.stopPropagation()},this),this.setSliderValue(this.initValue)},onTouchStart:function(e){var t=this.node.convertToNodeSpaceAR(e.getLocation());this.updateFill(t.x),e.stopPropagation()},onTouchMove:function(e){var t=this.node.convertToNodeSpaceAR(e.getLocation());this.updateFill(t.x),e.stopPropagation()},updateFill:function(e){this.bound=this.width/2,null!=this.knob&&(e>this.bound-this.offset?this.knob.x=this.bound-this.offset:e<-this.bound+this.offset?this.knob.x=-this.bound+this.offset:this.knob.x=e),e+=this.bound,e/=this.width,this.progressBar.progress=e,this.value=e,null!==this.callback&&void 0!==this.callback&&this.callback(e)},setSliderValue:function(e,t){void 0===t&&(t=!0),this.bound=this.width/2,e<0?(this.progressBar.progress=0,this.value=0,e=0):e>1?(this.progressBar.progress=1,this.value=1,e=1):(this.progressBar.progress=e,this.value=e),t&&null!==this.callback&&void 0!==this.callback&&this.callback(e),e*=this.width,e-=this.bound,null!=this.knob&&(e>this.bound-this.offset?e=this.bound-this.offset:e<-this.bound+this.offset&&(e=-this.bound+this.offset),this.knob.x=e)},getSliderValue:function(){return this.value},registerCallback:function(e){this.callback=e},removeAllCallbacks:function(){this.callback=null}}),cc._RF.pop()},{}],StateMachine:[function(e,t){"use strict";cc._RF.push(t,"069bfKEc+tH26Zuvh5jibRC","StateMachine");var a=e("State"),n=e("Transition"),i=e("EventEmitter");cc.Class({extends:i,properties:{states:{default:[],type:[n]},currentState:{default:null,type:a}},addState:function(e){this.states.push(this.node.addComponent(e))},addTransition:function(e,t,a){var n=this.node.getComponent(e),i=this.node.addComponent(t);i.fromState=n,i.on("onTransition",this.onTransition.bind(this)),i.toState=this.node.getComponent(a),n.transitions.push(i)},onTransition:function(e){this.currentState==e.fromState&&this.changeState(e.toState)},initStateMachine:function(e){var t=this.node.getComponent(e);this.states.forEach(function(e){e.transitions.forEach(function(e){e.enabled=!1},this),e.enabled=!1},this),this.changeState(t)},changeState:function(e){null==this.currentState?(this.currentState=e,this.currentState.onStateEnter()):(this.currentState.onStateExit(),this.currentState=e,this.currentState.onStateEnter())}}),cc._RF.pop()},{EventEmitter:"EventEmitter",State:"State",Transition:"Transition"}],State:[function(e,t){"use strict";cc._RF.push(t,"91d51v+n/pEdbGN2sHRjPLa","State"),cc.Class({extends:cc.Component,properties:{transitions:{default:[]}},onStateEnter:function(){this.enabled=!0,this.transitions.forEach(function(e){e.enabled=!0},this)},onStateExit:function(){this.transitions.forEach(function(e){e.enabled=!1},this),this.enabled=!1}}),cc._RF.pop()},{}],StickerBase:[function(e,t){"use strict";cc._RF.push(t,"75ecb49oW1O5bB5lpEQ83xU","StickerBase"),e("StickersPopup"),cc.Class({extends:cc.Component,properties:{stickerId:{default:"",visible:!0}},onLoad:function(){},start:function(){},registerHoverEvents:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(){cc.isValid(this.node)&&this.onMouse_Enter()}.bind(this),this)},onMouse_Enter:function(){console.log("stickerId ",this.stickerId)}}),cc._RF.pop()},{StickersPopup:"StickersPopup"}],StickerController:[function(e,t){"use strict";cc._RF.push(t,"382acKrbPVAVKoQrlH+tUys","StickerController"),cc.Class({extends:cc.Component,properties:{stickerList:{default:[],type:cc.Prefab,visible:!0},stickerSprite:{default:null,type:cc.Sprite,visible:!0},stickerTemp:{default:null,type:cc.Prefab}},onLoad:function(){this.stickerList=[]},getWorldPos:function(e){return e.convertToWorldSpaceAR(cc.v2(0,0))},setWorldPos:function(e,t){e.setPosition(e.parent.convertToNodeSpaceAR(t))},showSticker:function(e,t,a,n,i){var o=this;void 0===i&&(i=1),console.log("@@@@@ showSticker   ",t);var s=cc.instantiate(this.stickerTemp);s.active=!0,s.getComponent(cc.Sprite).spriteFrame=GameManager.stickerImages[Number(t)-1],s.parent=this.node,this.setWorldPos(s,n),s.active=!0,s.scale=.25,setTimeout(function(){o.hideSticker(s)},3e3)},hideSticker:function(e){e.active=!1,e.destroy()},start:function(){}}),cc._RF.pop()},{}],StickersPopup:[function(e,t){"use strict";cc._RF.push(t,"6cfaeS08v9BEZ5hElruFu9H","StickersPopup"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){this.defaultPos=this.node.getPosition()},init:function(e,t){this.targetPlayerId=e,this.pokerPresenter=t,this.show()},show:function(){this.node.active=!0},hide:function(){this.defaultPos,this.node.active=!1},onClickSticker:function(e,t){this.hide(),this.clientSendStickerEvent(t)},clientSendStickerEvent:function(e){var t={};t.channelId=this.pokerPresenter.model.gameData.channelId,t.senderId=this.pokerPresenter.model.gameData.playerId,t.sendToAll=!1,t.stickerId=e+"",t.receiverId=this.targetPlayerId,this.pokerPresenter.isTournament()?ServerCom.socketIORequest("tournamentGameEvent|emoji",{tournamentId:this.pokerPresenter.model.gameData.raw.tournamentId,tableId:this.pokerPresenter.model.gameData.channelId,emoji:e,playerId:t.senderId,toPlayerId:t.receiverId},function(e){e.success},null,5e3,!1):ServerCom.pomeloRequest(K.PomeloAPI.sendSticker,t,function(e){console.log("sendSticker reponse",e),e.success},null,5e3,!1)}}),cc._RF.pop()},{}],SuperCustomEditBox:[function(e,t,a){"use strict";cc._RF.push(t,"0b58coAHDVE9Zcvg0Pdjg7q","SuperCustomEditBox");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(s=(o<3?i(s):o>3?i(t,a,s):i(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onAndroidBegin=function(){},t.prototype.onAndroidEnded=function(){},o([r],t)}(cc.Component));a.default=l,cc._RF.pop()},{}],TabBtnUtil:[function(e,t){"use strict";cc._RF.push(t,"271cfuTQMlA5amb/ZzbBOZI","TabBtnUtil"),cc.Class({extends:cc.Component,properties:{tabs:{default:[],type:cc.Node},tabButtons:{default:[],type:cc.Sprite},currentTab:{default:0},activeSprite:{default:null,type:cc.SpriteFrame},inactiveSprite:{default:null,type:cc.SpriteFrame},activeColor:{default:new cc.Color},inactiveColor:{default:new cc.Color},chatBtn:{default:null,type:cc.Node},tableVariation:{default:null,type:cc.Node},tournemantVariation:{default:null,type:cc.Node},buddiesVariaton:{default:null,type:cc.Node},gameTypeFilter:{default:null,type:cc.Node},ifSwitchOutline:!1,inactiveOutline:new cc.Color,activeOutline:new cc.Color},onLoad:function(){this.onShowTab_01},start:function(){},updateCurrentTable:function(){this.tabs[this.currentTab].getComponent("Table")&&this.tabs[this.currentTab].getComponent("Table").onEnable()},setActiveTab:function(e,t){null!==t&&(t.active=!1),e.active=!0},setActiveButton:function(e,t){null!==t&&(t.getComponent(cc.Sprite).spriteFrame=this.inactiveSprite,t.node.getChildByName("Label").color=this.inactiveColor,this.ifSwitchOutline&&(t.node.getChildByName("Label").getComponent(cc.LabelOutline).color=this.inactiveOutline),t.node.getChildByName("Label").enableUnderline=!1),e.node.getChildByName("Label").color=this.activeColor,e.node.getChildByName("Label").enableUnderline=!0},onShowTab_01:function(){this.setActiveTab(this.tabs[0],this.tabs[this.currentTab]),this.setActiveButton(this.tabButtons[0],this.tabButtons[this.currentTab]),this.currentTab=0,this.tableVariation&&(this.tableVariation.active=!0,this.buddiesVariaton&&(this.buddiesVariaton.active=!1),this.gameTypeFilter&&(this.gameTypeFilter.active=!0)),this.tournemantVariation&&(this.tournemantVariation.active=!1)},onShowTab_02:function(){this.chatBtn&&GameManager.isMobile,GameManager.gameModel.activePokerModels.length>=2&&this.chatBtn,this.setActiveTab(this.tabs[1],this.tabs[this.currentTab]),this.setActiveButton(this.tabButtons[1],this.tabButtons[this.currentTab]),this.currentTab=1,this.tableVariation&&(this.tableVariation.active=!1),this.tournemantVariation&&(this.tournemantVariation.active=!0)},onShowTab_03:function(){this.setActiveTab(this.tabs[2],this.tabs[this.currentTab]),this.setActiveButton(this.tabButtons[2],this.tabButtons[this.currentTab]),this.currentTab=2,this.tableVariation&&(this.tableVariation.active=!1),this.tournemantVariation&&(this.tournemantVariation.active=!0)},onShowTab_04:function(){this.setActiveTab(this.tabs[3],this.tabs[this.currentTab]),this.setActiveButton(this.tabButtons[3],this.tabButtons[this.currentTab]),this.currentTab=3,this.tableVariation&&(this.tableVariation.active=!1,this.buddiesVariaton.active=!0),this.gameTypeFilter&&(this.gameTypeFilter.active=!1),this.tournemantVariation&&(this.tournemantVariation.active=!1)},onShowTab_05:function(){this.setActiveTab(this.tabs[4],this.tabs[this.currentTab]),this.setActiveButton(this.tabButtons[4],this.tabButtons[this.currentTab]),this.currentTab=4},onShowTab_06:function(){this.tabs.length<6||(this.setActiveTab(this.tabs[5],this.tabs[this.currentTab]),this.setActiveButton(this.tabButtons[5],this.tabButtons[this.currentTab]),this.currentTab=5)}}),cc._RF.pop()},{}],TableColorSelectionPopup:[function(e,t){"use strict";cc._RF.push(t,"3ebdfjdG3VEDo9I3eycZR34","TableColorSelectionPopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase");e("Checkbox"),cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},tables:{default:[],type:cc.Node},selection:{default:null,type:cc.Node},selectedID:0},onLoad:function(){},onShow:function(){this.selectedID=GameManager.user.tableColor,this.selectTable()},onTable1Selection:function(){this.selectedID=0,this.selectTable()},onTable2Selection:function(){this.selectedID=1,this.selectTable()},onTable3Selection:function(){this.selectedID=2,this.selectTable()},onTable4Selection:function(){this.selectedID=3,this.selectTable()},selectTable:function(){this.selection.position=this.tables[this.selectedID].position},onConfirm:function(){var e={query:{}};e.query.playerId=GameManager.user.playerId,e.updateKeys={},e.updateKeys["settings.tableColor"]=this.selectedID,ServerCom.pomeloRequest(K.PomeloAPI.updateProfile,e,function(e){e.success&&(GameManager.user.tableColor=this.selectedID,GameManager.emit(K.GameEvents.OnTableColorChange,this.tables[this.selectedID].getChildByName("TableImg").getComponent(cc.Sprite).spriteFrame))}.bind(this)),this.onCancel()},onCancel:function(){this.popUpManager.hide(n.TableColorPreferenceDialog,function(){})}}),cc._RF.pop()},{Checkbox:"Checkbox",PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],TableContent:[function(e,t){"use strict";cc._RF.push(t,"fc33bs9ZXxJSYXG3Jp0cYFE","TableContent");var a=e("PostTypes").JoinChannel,n=e("PopUpManager").PopUpManager,i=(e("PopUpManager").PopUpType,e("PostTypes").Login,cc.Class({extends:cc.Component,properties:{textFields:{default:[],type:cc.Label},playerSprite:{default:null,type:cc.Sprite},normalColor:{default:cc.Color.WHITE},selectedColor:{default:cc.Color.WHITE},channelData:{default:{},visible:!1},bg:{default:null,type:cc.Node},dblClk:!1,popUpManager:{default:null,type:n},joinEffect:{default:null,type:cc.Node},lockedNode:{default:null,type:cc.Node},turbo:{default:null,type:cc.Node},rit:{default:null,type:cc.Node},plyrText:{default:null,type:cc.Label},runItTwiceIcon:{default:null,type:cc.Node}},statics:{prevSelection:null,callback:null,registered:!1},onLoad:function(){"SideTable"!=this.node.parent.parent.parent.parent.parent.name&&(this.tableListChange=this.onTableListChanged.bind(this),this.onTableUpdate=this.onTableUpdated.bind(this),ServerCom.pomeloBroadcast(K.LobbyBroadcastRoute.tableUpdate,this.onTableUpdate),ServerCom.pomeloBroadcast(K.LobbyBroadcastRoute.joinTableList,this.tableListChange))},onDestroy:function(){this.tableListChange},onClick:function(){null!==i.prevSelection&&void 0!==i.prevSelection&&null!==i.prevSelection.node&&void 0!==i.prevSelection.node&&(i.prevSelection.joinEffect.active||i.prevSelection.textFields.forEach(function(){},this),i.prevSelection.bg);var e=this.bg?this.bg:this.node.getChildByName("Bg");this.normalColor=e.color,i.prevSelection=this,i.prevSelection.textFields.forEach(function(){},this),null!==i.callback&&i.callback()},setContentText:function(e,t){void 0===t&&(t=!0);var a=0;this.textFields.forEach(function(t){t.string=e[a],a++},this),this.plyrText.string=e[5]},onTableListChanged:function(e){this.joinEffect&&this.channelData&&e.channelId==this.channelData._id&&("PLAYERJOINTABLE"==e.event?(this.joinEffect.active=!0,this.textFields.forEach(function(){},this)):"PLAYERLEAVETABLE"==e.event&&(this.joinEffect.active=!1,i.prevSelection!=this&&this.textFields.forEach(function(){},this)))},onTableUpdated:function(e){if(this.channelData&&e._id==this.channelData._id)for(var t in e.updated){this.channelData[t]=e.updated[t];var a=i.prevSelection&&i.prevSelection._id==this.channelData._id;this.setContentText(this.table.makeContent(this.channelData),!a)}},onGo:function(){var e=(new Date).getTime();console.log("onGo",e-GameManager.lastClickTime),e-GameManager.lastClickTime<GameManager.clickInterval?console.log("onGo1"):(console.log("onGo2"),GameManager.lastClickTime=e,GameManager.join(this.channelData._id,K.PomeloAPI.joinChannel,new a(this.channelData)))}}));cc._RF.pop()},{PopUpManager:"PopUpManager",PostTypes:"PostTypes"}],TableHandler:[function(e,t){"use strict";cc._RF.push(t,"b3ea4+aqnFIaYwbef9YbWO9","TableHandler");var a=e("EventEmitter"),n=e("PostTypes").TableFilter,i=(e("ResponseTypes").GameData,e("TableContent"),e("PostTypes").FavTableData),o=(e("PostTypes").OpenTable,e("PostTypes").RemoveFavTableData);cc.Class({extends:a,properties:{joinTableList:[]},onLoad:function(){window.TableHandler=this,ServerCom.pomeloBroadcast(K.LobbyBroadcastRoute.joinTableList,this.onJoinTableList.bind(this))},onJoinTableList:function(e){var t=this.joinTableList.indexOf(e.channelId);"PLAYERJOINTABLE"==e.event?-1==t&&this.joinTableList.push(e.channelId):"PLAYERLEAVETABLE"==e.event&&-1!==t&&this.joinTableList.splice(t,1)},getTableData:function(e,t,a,i){var o=n;o.isRealMoney=!0,o.channelVariation=t,o.isLoggedIn=!0,o.access_token=K.Token.access_token,o.isPracticeGame=!0,o.blindsType=a,o.playerId=GameManager.user.playerId,ServerCom.pomeloRequest(K.PomeloAPI.getTables,o,i,null,5e3,!1)},getTableData2:function(e,t,a){ServerCom.pomeloRequest("connector.entryHandler.getTableByRoomId",{isRealMoney:!0,channelVariation:"All",playerId:GameManager.user.playerId,isLoggedIn:!0,access_token:K.Token.access_token,roomId:e},a,null,5e3,!1)},getFilter:function(e){return e},sort:function(e,t,a){var n=a?function(t){return a(t[e])}:function(t){return t[e]};return t=t?-1:1,function(e,a){return e=n(e),a=n(a),t*((e>a)-(a>e))}},sortByString:function(e,t,a){var n=[];return(n=n.concat(e)).sort(function(e,n){var i=e[a],o=n[a];return t?o<i?-1:o>i?1:0:i<o?-1:i>o?1:0})},setFavTable:function(e,t,a,n){var o=new i(e,t,a);ServerCom.pomeloRequest(K.PomeloAPI.setFavTable,o,function(e){n(e)},function(){},5e3,!1)},removeFavTable:function(e,t,a){var n=new o(e,t);ServerCom.pomeloRequest(K.PomeloAPI.removeFavTable,n,function(e){a(e)},function(){},5e3,!1)},refreshSideTable:function(e,t,a){var n={channelId:e._id,playerId:GameManager.user.playerId};ServerCom.pomeloRequest(K.PomeloAPI.getTableData,n,t,a,5e3,!1)},sortByNumber:function(e,t,a){var n=[];return(n=n.concat(e)).sort(this.sort(a,t,parseInt))},sortByJoined:function(e){if(this.joinTableList.length>0)for(var t=0;t<e.length;t++)this.joinTableList.forEach(function(a){if(e[t]._id==a){var n=e[t];e.splice(t,1),e.unshift(n)}});return e},joinWaitingList:function(t,a,i,o,s){var r={channelId:a,playerId:GameManager.user.playerId,isRequested:!0,playerName:GameManager.user.userName};s&&(r.password=s);var l=K.PomeloAPI.joinWaitingList;t?"Open Face Chinese Poker"==n.channelVariation&&(l=e("OFCConfigs").PomeloAPI.joinWaitingList):l=K.PomeloAPI.unJoinWaitingList,ServerCom.pomeloRequest(l,r,i,o,5e3,!1)}}),cc._RF.pop()},{EventEmitter:"EventEmitter",OFCConfigs:"OFCConfigs",PostTypes:"PostTypes",ResponseTypes:"ResponseTypes",TableContent:"TableContent"}],TableInfoPanel:[function(e,t){"use strict";cc._RF.push(t,"bba12GsLXNIDaXN629mmsu5","TableInfoPanel"),cc.Class({extends:cc.Component,properties:{infoLabel:{default:null,type:cc.Label},pokerModel:{default:null,type:cc.Node},tableInfoDataCell:{default:null,type:cc.Prefab},scrollViewContent:{default:null,type:cc.Node}},onLoad:function(){this.populateTableInfo(this.pokerModel.getComponent("PokerModel").roomConfig.info)},populateTableInfo:function(e){for(var t in this.infoLabel.string=JSON.stringify(e),e){var a=cc.instantiate(this.tableInfoDataCell);a.getChildByName("Key").getComponent(cc.Label).string=t,a.getChildByName("data").getComponent(cc.Label).string=e[t],this.scrollViewContent.addChild(a)}},onEnable:function(){}}),cc._RF.pop()},{}],TableOld:[function(e,t){"use strict";cc._RF.push(t,"6f4a7P/xTxNdouh8mppmEg5","TableOld");var a=e("TableContent"),n=e("TableHandler"),i=e("Checkbox"),o=e("PopUpManager").PopUpManager,s=e("PopUpManager").PopUpType,r=e("GameConfig").K,l=cc.Enum({None:-1,TexasHoldem:1,Omaha:2,OmahaHiLo:3,OpenFaceChinesePoker:4});cc.Enum({CashGames:1,SitAndGo:2,Tournaments:3}),cc.Class({extends:cc.Component,properties:{handler:{default:null,type:n},realMoney:{default:null,type:i},variation:l.TexasHoldem,contentHolder:{default:null,type:cc.Node},original:{default:null,type:cc.Node},originalOFC:{default:null,type:cc.Node},headContent:{default:null,type:cc.Node},headContentOFC:{default:null,type:cc.Node},stakeFilterLabel:{default:null,type:cc.Label},contentPool:{default:[]},popUpManager:{default:null,type:o},darkColor:{default:new cc.Color},lightColor:{default:new cc.Color},isSortedByName:{default:!1,visible:!1},isSortedByVariation:{default:!1,visible:!1},isSortedByType:{default:!1,visible:!1},isSortedByMinBuy:{default:!1,visible:!1},isSortedByMaxBuy:{default:!1,visible:!1},isSortedByMinPlayers:{default:!1,visible:!1},isSortedByMaxPlayers:{default:!1,visible:!1},isSortedByStakes:{default:!1,visible:!1},isSortedByFlops:{default:!1,visible:!1},isSortedByWaiting:{default:!1,visible:!1},isSortedByPots:{default:!1,visible:!1},nameReverse:{default:!1,visible:!1},variationReverse:{default:!1,visible:!1},typeReverse:{default:!1,visible:!1},minBuyReverse:{default:!1,visible:!1},maxBuyReverse:{default:!1,visible:!1},minPlayersReverse:{default:!1,visible:!1},maxPlayersReverse:{default:!1,visible:!1},flopReverse:{default:!1,visible:!1},stakeReverse:{default:!1,visible:!1},waitingReverse:{default:!1,visible:!1},potReverse:{default:!1,visible:!1},noFavInfo:{default:null,type:cc.Node},createRowsCallBack:null,tempCallback:null,tempSelection:null,DropDownData:null},onLoad:function(){this.lobbyData=[],this.contentHolder.getComponent(cc.Widget).isAlignTop=!1,this.createRowsCallBack=this.createRows.bind(this),GameManager.on(r.GameEvents.onReset,function(){this.tempSelection=null,this.lobbyData=[]}.bind(this)),ServerCom.pomeloBroadcast(r.LobbyBroadcastRoute.tableUpdate,this.onTableUpdate.bind(this)),ServerCom.pomeloBroadcast(r.LobbyBroadcastRoute.tableView,this.onSideTableUpdate.bind(this)),ServerCom.pomeloBroadcast(r.LobbyBroadcastRoute.removeTable,this.removeTable.bind(this)),ServerCom.pomeloBroadcast(r.LobbyBroadcastRoute.addTable,this.addTable.bind(this)),ServerCom.pomeloRequest(r.PomeloAPI.getFilters,this.realMoney.getSelection(),function(e){this.DropDownData=e,this.onEnable()}.bind(this),function(){}),this.initGameTypeFilter(),this.tableInfoHolder&&(this.tableInfoHolder.getComponent(cc.Widget).isAlignTop=!1),this.favTableCB.registerCallback(this.setFavTable.bind(this)),this.resetAllBools(),this.applyFilterCB=this.applyFilter.bind(this)},registerUPandDOWN:function(){},scroll:function(e){if(e==cc.KEY.enter)return a.prevSelection.dblClk=!0,void a.prevSelection.node.emit("touchstart");var t,n=this.contentHolder.children;for(t=0;t<n.length&&a.prevSelection!=n[t].getComponent("TableContent");t++);var i=t+(e=e==cc.KEY.up?-1:1);i>-1&&i<n.length&&n[t+e].getComponent("TableContent").onClick()},initDropDowns:function(e){"All"!==e.playersRequired[0]&&e.playersRequired.splice(0,0,"All"),this.maxPlayersDropdown.setContent(e.playersRequired)},setFavTable:function(){var e=this.favTableCB.getSelection(),t=this;a.prevSelection?e?this.handler.setFavTable(GameManager.user.playerId,a.prevSelection.channelData._id,a.prevSelection.channelData.channelType,function(n){if(n.success){a.prevSelection.channelData.favourite=!0;var i=t.handler.contents.indexOf(a.prevSelection.channelData);t.handler.contents[i].favourite=!0}else this.favTableCB.setSelection(!e)}):this.handler.removeFavTable(GameManager.user.playerId,a.prevSelection.channelData._id,function(n){if(n.success){a.prevSelection.channelData.favourite=!1;var i=t.handler.contents.indexOf(a.prevSelection.channelData);t.handler.contents[i].favourite=!1,t.favPrimaryCB&&t.favPrimaryCB.getSelection()&&t.applyFilter()}else this.favTableCB.setSelection(!e)}):this.favTableCB.setSelection(!e)},onTableUpdate:function(e){for(var t in this.lobbyData)for(var a=0;a<this.lobbyData[t].length;a++)if(this.lobbyData[t][a]._id==e._id){for(var n in e.updated)this.lobbyData[t][a][n]=e.updated[n];break}this.scheduleOnce(function(){this.applyFilter(!0)},.2)},onSideTableUpdate:function(){},addTable:function(e){e.updated._id=e._id;var t=e.updated.isRealMoney+""+e.updated.channelVariation;this.lobbyData[t]&&this.lobbyData[t].push(e.updated),this.realMoney.getSelection()+this.variation==t&&(this.createRow(e.updated,this.contentPool.length,null,null),this.applyFilter(!0))},removeTable:function(e){for(var t in this.lobbyData)for(var a=0;a<this.lobbyData[t].length;a++)if(this.lobbyData[t][a]._id==e._id){this.lobbyData[t].splice(a,1);break}for(a=0;a<this.contentPool.length;a++)if(this.contentPool[a].getComponent("TableContent").channelData._id==e._id){this.contentPool[a].destroy(),this.contentPool.splice(a,1),this.applyFilter(!0);break}},onDisable:function(){this.favPrimaryCB&&this.favPrimaryCB.deregisterCallback(this.applyFilterCB)},onEnable:function(){this.registerUPandDOWN(),this.favPrimaryCB&&(this.favPrimaryCB.callbacks=[],this.favPrimaryCB.registerCallback(this.applyFilterCB)),a.prevSelection=null,a.callback=this.tableContentClick.bind(this),this.unschedule(this.tempCallback),this.variation==r.Variation.OpenFaceChinesePoker?(this.headContent.active=!1,this.headContentOFC.active=!0,this.stakeFilterLabel.string="Point Cost:"):(this.headContent.active=!0,this.headContentOFC.active=!1,LocalizedManager.setTextKey(this.stakeFilterLabel.node,"TXT_STAKES")),this.setPlayerFilters(),this.scheduleOnce(function(){this.onGetTableData()}.bind(this),.2)},onGetTableData:function(e){void 0===e&&(e=null),a.prevSelection=null;var t=this,n=this.realMoney.getSelection(),i=n+""+this.variation;this.lobbyData[i]?(t.handler.contents=this.lobbyData[i],t.applyFilter(!0)):(this.clearContents(),this.handler.getTableData(n,this.variation,function(e){e.success&&(t.handler.contents=t.filterByTournamentType(e.result),t.lobbyData[i]=t.handler.contents,t.applyFilter(!0))},e))},filterByTournamentType:function(e,t,a){if(void 0===t&&(t=!0),void 0===a&&(a=!0),t)return e;for(var n=[],i=0;i<e.length;i++){var o=e[i].tournamentType===r.TournamentType.SitNGo;(o=a?o:!o)&&n.push(e[i])}return n},startPomelo:function(e,t){pomelo.init({host:e.gameServer,port:e.gamePort,log:!0},function(){null!=t&&t()})},initGameTypeFilter:function(){this.gameTypeDropdown.setContent(["All","Standard (30s)","Turbo (20s)","Hyper-Turbo (10s)"]),this.setPlayerFilters(),this.stakesDropdown.setContent(["All","Low","Mid","High"]),this.gameTypeDropdown.registerCallback(this.applyFilter.bind(this)),this.stakesDropdown.registerCallback(this.applyFilter.bind(this)),this.maxPlayersDropdown.registerCallback(this.applyFilter.bind(this)),this.hideFullTablesCB.registerCallback(this.applyFilter.bind(this))},setPlayerFilters:function(){if(this.variation==r.Variation.OpenFaceChinesePoker)var e=["All",2,3];else e=["All",2,6,9];this.maxPlayersDropdown.setContent(e)},populateTable:function(e){this.unschedule(this.tempCallback);var t=this.variation==r.Variation.OpenFaceChinesePoker?this.originalOFC:this.original;0==this.contentPool.length?this.createRows(e):this.contentPool[0].name==t.name?this.contentPool.length>e.length?(this.destroyRows(e.length),this.updateTable(e,e.length)):this.contentPool.length<e.length?(this.createRows(e),this.updateTable(e)):this.updateTable(e):this.destroyRows(0,this.createRows.bind(this),e)},updateTable:function(e,t){void 0===t&&(t=null),t=t||this.contentPool.length;for(var a=null,n=null,i=0;i<t;i++)a=this.contentPool[i].getComponent("TableContent"),n=this.makeContent(e[i]),a.channelData=e[i],a.setContentText(n),a.bg.color=i%2==0?this.lightColor:this.darkColor,a.joinEffect&&(-1!==this.handler.joinTableList.indexOf(a.channelData._id)?a.joinEffect.active=!0:a.joinEffect.active=!1);this.showSelection()},createRows:function(e,t){void 0===t&&(t=!1);var a=t?0:e.length;this.contentPool.length<a?this.createRow(e[this.contentPool.length],this.contentPool.length,e,this.createRowsCallBack):this.showSelection()},createRow:function(e,t,a,n){var i,o=null,s=null;i=this.makeContent(e),(o=this.variation==r.Variation.OpenFaceChinesePoker?cc.instantiate(this.originalOFC):cc.instantiate(this.original)).setPosition(0,0),this.contentHolder.addChild(o),(s=o.getComponent("TableContent")).setContentText(i),s.channelData=e,s.table=this,o.active=!0,this.contentPool.push(o),s.bg.color=t%2==0?this.lightColor:this.darkColor,s.joinEffect&&(-1!==this.handler.joinTableList.indexOf(e._id)?s.joinEffect.active=!0:s.joinEffect.active=!1),null!=n&&(this.tempCallback=function(){n(a)},this.scheduleOnce(this.tempCallback,.1))},destroyRows:function(e,t,a){void 0===t&&(t=null),void 0===a&&(a=null),this.contentPool.length>e?(this.contentPool[e].destroy(),this.contentPool.splice(e,1),this.destroyRows(e,t,a)):null!=t&&t(a)},clearContents:function(){this.unschedule(this.tempCallback);for(var e=0;e<this.contentPool.length;e++)this.contentPool[e].active=!1,this.contentPool[e].destroy();this.contentPool=[]},refreshSideTable:function(e){void 0===e&&(e=!0),null!=a.prevSelection&&0!=this.contentPool.length?(this.disableSideTable(!1),a.prevSelection.channelData.favourite?this.favTableCB.setSelection(!0):this.favTableCB.setSelection(!1),e?(this.currentSideTableData=null,this.handler.refreshSideTable(a.prevSelection.channelData,function(e){this.setSideTableData(e)}.bind(this),function(){})):this.setSideTableData(this.currentSideTableData)):this.disableSideTable(!0)},getFilteredContent:function(){for(var e=[],t=0;t<this.contentPool.length;t++)e.push(this.contentPool[t].getComponent("TableContent").channelData);return e},onSortByName:function(){this.nameReverse=!this.nameReverse,this.removeAllSorting(),this.isSortedByName=!0,this.applyFilter()},onSortByStakes:function(){this.stakeReverse=!this.stakeReverse,this.removeAllSorting(),this.isSortedByStakes=!0,this.applyFilter()},onSortByVariation:function(){this.variationReverse=!this.variationReverse,this.removeAllSorting(),this.isSortedByVariation=!0,this.applyFilter()},onSortByType:function(){this.typeReverse=!this.typeReverse,this.removeAllSorting(),this.isSortedByType=!0,this.applyFilter()},onSortByMinBuy:function(){this.minBuyReverse=!this.minBuyReverse,this.removeAllSorting(),this.isSortedByMinBuy=!0,this.applyFilter()},onSortByMaxBuy:function(){this.maxBuyReverse=!this.maxBuyReverse,this.removeAllSorting(),this.isSortedByMaxBuy=!0,this.applyFilter()},onSortByPlayers:function(){this.maxPlayersReverse=!this.maxPlayersReverse,this.removeAllSorting(),this.isSortedByMaxPlayers=!0,this.applyFilter()},onSortByFlops:function(){this.flopReverse=!this.flopReverse,this.removeAllSorting(),this.isSortedByFlops=!0,this.applyFilter()},onSortByPots:function(){this.potReverse=!this.potReverse,this.removeAllSorting(),this.isSortedByPots=!0,this.applyFilter()},onSortByWaitingPlayers:function(){this.waitingReverse=!this.waitingReverse,this.removeAllSorting(),this.isSortedByWaiting=!0,this.applyFilter()},onSortByMinPlayers:function(){this.removeAllSorting(),this.isSortedByMinPlayers=!0,this.applyFilter()},onSortByMaxPlayers:function(){this.removeAllSorting(),this.isSortedByMaxPlayers=!0,this.applyFilter()},sortByName:function(){var e=[];e=this.getFilteredContent(),e=this.handler.sortByString(e,this.nameReverse,"channelName"),this.updateTable(e),this.nameReverse=!this.nameReverse},sortByStakes:function(){var e=[];e=this.getFilteredContent(),e=this.handler.sortByString(e,this.stakeReverse,"smallBlind"),this.updateTable(e),this.stakeReverse=!this.stakeReverse},sortByVariation:function(){var e=[];e=this.getFilteredContent(),e=this.handler.sortByString(e,this.variationReverse,"channelVariation"),this.updateTable(e),this.variationReverse=!this.variationReverse},sortByType:function(){var e=[];e=this.getFilteredContent(),e=this.handler.sortByString(e,this.typeReverse,"turnTime"),this.updateTable(e),this.typeReverse=!this.typeReverse},sortByMinBuy:function(){var e=[];e=this.getFilteredContent(),e=this.handler.sortByNumber(e,this.minBuyReverse,"minBuyIn"),this.updateTable(e),this.minBuyReverse=!this.minBuyReverse},sortByMaxBuy:function(){var e=[];e=this.getFilteredContent(),e=this.handler.sortByNumber(e,this.maxBuyReverse,"maxBuyIn"),this.updateTable(e),this.maxBuyReverse=!this.maxBuyReverse},sortByPlayers:function(){this.sortByMaxPlayers()},sortByFlops:function(){this.isSortedByFlops=!0;var e=[];e=this.getFilteredContent(),e=this.handler.sortByString(e,this.flopReverse,"flopPercent"),this.updateTable(e),this.flopReverse=!this.flopReverse},sortByPots:function(){this.isSortedByPots=!0;var e=[];e=this.getFilteredContent(),e=this.handler.sortByString(e,this.potReverse,"avgStack"),this.updateTable(e),this.potReverse=!this.potReverse},sortByWaitingPlayers:function(){this.isSortedByWaiting=!0;var e=[];e=this.getFilteredContent(),e=this.handler.sortByString(e,this.waitingReverse,"queuePlayers"),this.updateTable(e),this.waitingReverse=!this.waitingReverse},sortByMinPlayers:function(){this.isSortedByMinPlayers=!0;var e=[];e=this.getFilteredContent(),e=this.handler.sortByNumber(e,this.minPlayersReverse,"minPlayers"),this.updateTable(e),this.minPlayersReverse=!this.minPlayersReverse},sortByMaxPlayers:function(){this.isSortedByMaxPlayers=!0,e=[];var e=this.getFilteredContent();e=this.handler.sortByNumber(e,this.maxPlayersReverse,"maxPlayers"),this.updateTable(e),this.maxPlayersReverse=!this.maxPlayersReverse},resetAllBools:function(){this.nameReverse=!1,this.stakeReverse=!1,this.variationReverse=!1,this.typeReverse=!1,this.minBuyReverse=!1,this.maxBuyReverse=!1,this.minPlayersReverse=!1,this.maxPlayersReverse=!1,this.flopReverse=!1,this.waitingReverse=!1,this.potReverse=!1},removeAllSorting:function(){this.isSortedByName=!1,this.isSortedByStakes=!1,this.isSortedByFlops=!1,this.isSortedByWaiting=!1,this.isSortedByVariation=!1,this.isSortedByType=!1,this.isSortedByMinBuy=!1,this.isSortedByMaxBuy=!1,this.isSortedByMinPlayers=!1,this.isSortedByMaxPlayers=!1,this.isSortedByPots=!1},applySorting:function(){this.isSortedByName&&(this.nameReverse=!this.nameReverse,this.sortByName()),this.isSortedByStakes&&(this.stakeReverse=!this.stakeReverse,this.sortByStakes()),this.isSortedByFlops&&(this.flopReverse=!this.flopReverse,this.sortByFlops()),this.isSortedByWaiting&&(this.waitingReverse=!this.waitingReverse,this.sortByWaitingPlayers()),this.isSortedByVariation&&(this.variationReverse=!this.variationReverse,this.sortByVariation()),this.isSortedByType&&(this.typeReverse=!this.typeReverse,this.sortByType()),this.isSortedByMinBuy&&(this.minBuyReverse=!this.minBuyReverse,this.sortByMinBuy()),this.isSortedByMaxBuy&&(this.maxBuyReverse=!this.maxBuyReverse,this.sortByMaxBuy()),this.isSortedByMinPlayers&&(this.minPlayersReverse=!this.minPlayersReverse,this.sortByMinPlayers()),this.isSortedByMaxPlayers&&(this.maxPlayersReverse=!this.maxPlayersReverse,this.sortByMaxPlayers()),this.isSortedByPots&&(this.potReverse=!this.potReverse,this.sortByPots())},applyFilter:function(e){void 0===e&&(e=!1);var t=this.hideFullTablesCB.getSelection(),a=!!this.favPrimaryCB&&this.favPrimaryCB.getSelection(),n=this.gameTypeDropdown.getSelection(),i=this.stakesDropdown.getSelection(),o=this.maxPlayersDropdown.getSelection();if(this.handler.contents&&this.handler.contents.length>0){for(var s=[],l=!0,c=null,d=0;d<this.handler.contents.length;d++){if(c=this.handler.contents[d],l=!0,t){var h=c.channelType==r.ChannelType.Tournament?c.enrolledPlayers:c.playingPlayers;c.channelType==r.ChannelType.Tournament?c.maxPlayersForTournament:c.maxPlayers,l=h<c.maxPlayers}a&&(l=l&&c.favourite),l=l&&this.isValidByGameType(n,c.turnTime),(l=(l=this.variation==r.Variation.OpenFaceChinesePoker?l&&this.isValidByStakesOFC(c.chipsPointRatio,i):l&&this.isValidByStakes(c.smallBlind,i))&&this.isValidByMaxPlayers(o,c.maxPlayers))&&s.push(c)}this.populateTable(s),this.applySorting(),this.disableSideTable(0==s.length,!1,!0)}else this.clearContents(),e=typeof e==typeof!0&&e,this.disableSideTable(!0,!1,e)},showSelection:function(){this.contentPool.length>0?null==this.tempSelection||this.tempSelection>=this.contentPool.length?this.contentPool[0].getComponent("TableContent").onClick():null!==this.tempSelection&&this.tempSelection<this.contentPool.length&&(-1==this.tempSelection&&(this.tempSelection=0),this.contentPool[this.tempSelection].getComponent("TableContent").onClick()):this.tempSelection},getFavourites:function(e,t){if(this.favPrimaryCB&&this.favPrimaryCB.getSelection()){for(var a=[],n=0;n<e.length;n++)e[n].favourite&&a.push(e[n]);t(a)}else t(e)},filterByGameType:function(e,t,a){for(var n=[],i=0;i<t.length;i++)this.isValidByGameType(e,t[i].turnTime)&&n.push(t[i]);a(n)},isValidByGameType:function(e,t){var a=!1;switch(e){case"Hyper-Turbo (10s)":a=10==t;break;case"Turbo (20s)":a=20==t;break;case"Standard (30s)":a=30==t;break;default:a=!0}return a},filterByMaxPlayers:function(e,t,a){for(var n=[],i=0;i<t.length;i++)this.isValidByMaxPlayers(e,t[i].maxPlayers)&&n.push(t[i]);a(n)},isValidByMaxPlayers:function(e,t){return"All"==e||e==t},filterByStakes:function(e,t,a){var n=[];if(this.variation==r.Variation.OpenFaceChinesePoker)for(var i=0;i<t.length;i++)this.isValidByStakesOFC(t[i].chipsPointRatio,e)&&n.push(t[i]);else for(i=0;i<t.length;i++)this.isValidByStakes(t[i].smallBlind,e)&&n.push(t[i]);a(n)},isValidByStakes:function(e,t){return"All"==t||("Low"==t?e>0&&e<=25:"Mid"==t?e>25&&e<=100:"High"==t&&e>100)},isValidByStakesOFC:function(e,t){return"All"==t||("Low"==t?e>0&&e<10:"Mid"==t?e>=10&&e<20:"High"==t&&e>=20)},hideFullTables:function(e){var t=[];if(this.hideFullTablesCB.getSelection()){for(var a=0;a<this.handler.contents.length;a++){var n=this.handler.contents[a],i=n.channelType==r.ChannelType.Tournament?n.enrolledPlayers:n.playingPlayers;n.channelType==r.ChannelType.Tournament?n.maxPlayersForTournament:n.maxPlayers,i<n.maxPlayers&&t.push(this.handler.contents[a])}e(t)}else e(this.handler.contents)},disableSideTable:function(e,t,n){void 0===e&&(e=!0),void 0===t&&(t=!1),void 0===n&&(n=!0),t=!!this.favPrimaryCB&&this.favPrimaryCB.getSelection(),e?(this.noFavInfo.active=t,this.sideTableInfo.active=!t,this.sideTableInfo.getComponentInChildren(cc.Label).node.active=n,a.prevSelection=null):(this.noFavInfo.active=e,this.sideTableInfo.active=e)},showFavInstructions:function(){GameManager.popUpManager.show(s.InstructionPopup,null,function(){})},capitalizeFirstLetter:function(e){return(e=e.toLowerCase()).replace(/^.{1}/g,e[0].toUpperCase())},updateTableVal:function(){},highlightJoinTable:function(){}}),cc._RF.pop()},{Checkbox:"Checkbox",GameConfig:"GameConfig",PopUpManager:"PopUpManager",TableContent:"TableContent",TableHandler:"TableHandler"}],TableSwiper:[function(e,t){"use strict";cc._RF.push(t,"89dbbkDhZhICbMsShQucTqp","TableSwiper"),cc.Class({extends:cc.Component,properties:{holder:cc.Node,blockNode:cc.Node,startScrollingWaitTimer:.4,selfMoveTimer:null,swipeTimer:.4},onLoad:function(){},forceReset:function(){this.holder.setPosition(0,0);var e=0;this.holder.children.forEach(function(t){cc.isValid(t,!0)&&(t.setPosition(e*ScreenManager.node.width,0),e++)},this)},getPositionsForResolution:function(){var e=this;this.worldPositions=[],this.holder.children.forEach(function(t){e.worldPositions.push(t.parent.convertToWorldSpaceAR(t.position).x)},this),console.log("getPositionsForResolution",this.worldPositions)},registerTouchSwipeEvents:function(){this.getPositionsForResolution();var e=this.node.parent.children[0];e.on(cc.Node.EventType.TOUCH_START,function(e){this.correctViewIfNeeded(),this.startPos=new cc.Vec2(e.touch.getLocation()),this.startDate=new Date,this.originalPos=this.holder.position.x}.bind(this)),e.on(cc.Node.EventType.TOUCH_MOVE,function(e){var t=this;this.moveDate=new Date;var a=(this.moveDate-this.startDate)/1e3,n=e.touch.getLocation();this.prevMovePos=this.movePos?this.movePos:this.startPos,this.movePos=new cc.Vec2(n.x,n.y),console.log("this.movePos",this.movePos.x,this.movePos.y),a>this.startScrollingWaitTimer?(console.log("startSlowSwipe"),this.startSlowSwipe()):null==this.selfMoveTimer&&(this.selfMoveTimer=setTimeout(function(){t.startSlowSwipe(!0)},1e3*this.startScrollingWaitTimer))}.bind(this)),e.on(cc.Node.EventType.TOUCH_END,function(e){clearTimeout(this.selfMoveTimer),this.selfMoveTimer=null,this.endDate=new Date;var t=(this.endDate-this.startDate)/1e3,a=e.touch.getLocation();this.endPos=new cc.Vec2(a.x,a.y),t>this.startScrollingWaitTimer?this.checkIfSwipe():this.doImmediateSwipe(),this.movePos=null}.bind(this))},deRegisterTouchSwipeEvents:function(){var e=this.node.parent.children[0];e.off(cc.Node.EventType.TOUCH_START),e.off(cc.Node.EventType.TOUCH_MOVE),e.off(cc.Node.EventType.TOUCH_END)},getCurrentViewStatus:function(e,t,a){void 0===e&&(e=10),void 0===t&&(t=!1),console.log("getCurrentViewStatus",e,t,a);var n=-1,i=e,o=e;return t&&("LEFT"==a&&(i=50),"RIGHT"==a&&(o=50)),this.holder.children.forEach(function(e,t){var a=e.parent.convertToWorldSpaceAR(e.position).x;console.error("Z ",t,"   ",parseInt(a),this.worldPositions[0],parseInt(a)>parseInt(this.worldPositions[0])-i,parseInt(a)<parseInt(this.worldPositions[0])+o),parseInt(a)>parseInt(this.worldPositions[0])-i&&parseInt(a)<parseInt(this.worldPositions[0])+o&&(n=t)},this),console.log("toReturn",n),n},correctViewIfNeeded:function(){-1==this.getCurrentViewStatus()&&this.tryToRestore()},tryToRestore:function(){},restoreEverything:function(){},swipeBtn:function(){this.node.children[0].active?this.node.children[0].active=!1:this.node.children[1].active=!1},startSlowSwipe:function(e){var t=this.prevMovePos.sub(this.movePos),a=this.startPos.sub(this.movePos);t.x>0?(console.log("startSlowSwipe RIGHT"),this.adjustPagesHeirarchy("RIGHT","move")):(console.log("startSlowSwipe LEFT"),this.adjustPagesHeirarchy("LEFT","move")),e?this.holder.runAction(cc.moveTo(this.swipeTimer/1.3,this.originalPos-a.x,0).easing(cc.easeIn(.5))):this.holder.setPosition(this.originalPos-a.x,0)},checkIfSwipe:function(){var e=this,t=this.startPos.sub(this.endPos);this.blockNode.active=!0;var a,n=cc.callFunc(function(){e.blockNode.active=!1,e.restoreEverything();var t=e.getCurrentViewStatus();-1==t?GameScreen.onTabSelection(0):GameScreen.onTabSelection(t)});a=Math.abs(t.x)>200?t.x>0?cc.sequence(cc.moveTo(this.swipeTimer,this.originalPos-ScreenManager.node.width,0).easing(cc.easeIn(.5)),n):cc.sequence(cc.moveTo(this.swipeTimer,this.originalPos+ScreenManager.node.width,0).easing(cc.easeIn(.5)),n):cc.sequence(cc.moveTo(this.swipeTimer,this.originalPos,0).easing(cc.easeIn(.5)),n),this.holder.runAction(a)},doImmediateSwipe:function(){var e=this.startPos.sub(this.endPos);if(Math.abs(e.x)>60)return e.x>0?(this.adjustPagesHeirarchy("RIGHT"),void this.runSwipeAction(this.originalPos-ScreenManager.node.width)):(this.adjustPagesHeirarchy("LEFT"),void this.runSwipeAction(this.originalPos+ScreenManager.node.width))},runSwipeAction:function(e){var t=this;this.blockNode.active=!0;var a=cc.sequence(cc.moveTo(.3,e,0),cc.callFunc(function(){t.blockNode.active=!1;var e=t.getCurrentViewStatus();-1==e?GameScreen.onTabSelection(0):GameScreen.onTabSelection(e)}));this.holder.runAction(a)},adjustPagesHeirarchy:function(e,t){var a;console.log("adjustPagesHeirarchy",e,t),a="move"==t?this.getCurrentViewStatus(400,!0,e):this.getCurrentViewStatus(400),this.newChecker(a,e)},newChecker:function(e,t){if(-1!=e){var a=[];if(this.holder.children.forEach(function(e){a.push(e.x)},this),a.sort(function(e,t){return e-t}),"LEFT"==t){if(this.holder.children[e].x==a[0]){var n=null;this.holder.children.forEach(function(e){e.x==a[a.length-1]&&(n=e)},this),null!=n&&n.setPosition(a[0]-ScreenManager.node.width,0)}}else if("RIGHT"==t&&this.holder.children[e].x==a[a.length-1]){var i=null;this.holder.children.forEach(function(e){e.x==a[0]&&(i=e)},this),null!=i&&i.setPosition(a[a.length-1]+ScreenManager.node.width,0)}}}}),cc._RF.pop()},{}],TableTab:[function(e,t){"use strict";cc._RF.push(t,"4cf4aKqNmtOvajNzIncd2hd","TableTab");var a=e("EventEmitter");cc.Class({extends:a,properties:{tabId:-1,tabNode:{default:null,type:cc.Node},tabActiveNode:{default:null,type:cc.Node},addButton:{default:null,type:cc.Node},activeView:{default:null,type:cc.Node},deactiveView:{default:null,type:cc.Node},activeTableNameLbl:{default:null,type:cc.Label},deactiveTableNameLbl:{default:null,type:cc.Label},turnAlert:{default:null,type:cc.Node},cardPrefab:{default:null,type:cc.Prefab},cardPPrefab:{default:null,type:cc.Prefab},cardParent:{default:null,type:cc.Node},tableColors:{default:[],type:[cc.SpriteFrame]},selectedTableColors:{default:[],type:[cc.SpriteFrame]},model:null,cards:null},onLoad:function(){this.tableColorChange=this.setTableColor.bind(this),this.playerCardsChange=this.showCards.bind(this),this.gameOverChange=this.removeCards.bind(this)},onClick:function(){GameManager.playSound(K.Sounds.click),this.emit(K.PokerEvents.onTableTabSelected,this.tabId)},setActiveView:function(){this.scheduleOnce(function(){this.activeView.active=!0,this.deactiveView.active=!1},.1)},setDeactiveView:function(){this.scheduleOnce(function(){this.activeView.active=!1,this.deactiveView.active=!0},.1)},setModel:function(e){this.model=e,GameScreen.isMobile&&(this.model.off("FoldEvent",this.gameOverChange),this.model.on("FoldEvent",this.gameOverChange),this.model.off(K.GameEvents.OnTableColorChange,this.tableColorChange),this.model.on(K.GameEvents.OnTableColorChange,this.tableColorChange),this.model.off(K.PokerEvents.OnPlayerCard,this.playerCardsChange),this.model.on(K.PokerEvents.OnPlayerCard,this.playerCardsChange),this.model.off(K.PokerEvents.OnGameOver,this.gameOverChange),this.model.on(K.PokerEvents.OnGameOver,this.gameOverChange),this.showCards(),this.setTableColor())},showCards:function(){if(this.node.getChildByName("vari").string="",this.model.myCards){GameManager.removeAllChildren(this.cardParent);for(var e=this.model.myCards,t=0;t<e.length;t++){var a,n=this.model.getCardByData(e[t]);K.PORTRAIT,(a=cc.instantiate(this.cardPrefab)).getComponent("Card").init(n,this.model),a.getComponent("Card").reveal(!0),this.cardParent.addChild(a)}0==e.length&&this.model&&this.model.gameData?this.node.getChildByName("vari").getComponent(cc.Label).string=this.model.gameData.raw.roomConfig.channelVariation:this.node.getChildByName("vari").getComponent(cc.Label).string=""}else this.model&&this.model.gameData?this.node.getChildByName("vari").getComponent(cc.Label).string=this.model.gameData.raw.roomConfig.channelVariation:this.node.getChildByName("vari").getComponent(cc.Label).string=""},removeCards:function(){GameManager.removeAllChildren(this.cardParent),this.model&&this.model.gameData?this.node.getChildByName("vari").getComponent(cc.Label).string=this.model.gameData.raw.roomConfig.channelVariation:this.node.getChildByName("vari").getComponent(cc.Label).string=""},playAudio:function(e){this.model.gameData.settings.muteGameSound||GameManager.playSound(e)},showAlert:function(e){this.turnAlert.active=e,e&&this.playAudio(K.Sounds.turnSoundTopBar)},setTableColor:function(){this.model&&this.model.gameData&&this.model.gameData.settings.tableColor},joinSimilarTable:function(){GameManager.joinSimilar()}}),cc._RF.pop()},{EventEmitter:"EventEmitter"}],TableTheme:[function(e,t){"use strict";cc._RF.push(t,"28d3f0cxCBJIbK6ZsI0QQwF","TableTheme");var a=e("PopUpManager").PopUpManager,n=(e("PopUpManager").PopUpType,e("PopUpBase"));e("Checkbox"),e("GameScreen"),e("ResponseTypes").GameData,e("PostTypes").JoinSimilar,e("Toggle"),cc.Class({extends:n,properties:{popUpManager:{default:null,type:a},pokerPresenter:{default:null,type:cc.Node},tablePreview:{default:null,type:cc.Sprite},tableBgPreview:{default:null,type:cc.Sprite},cardPreview:{default:null,type:cc.Sprite},cardBackPreview:{default:null,type:cc.Sprite},tableTab:{default:null,type:cc.Node},cardTab:{default:null,type:cc.Node},tableBgTab:{default:null,type:cc.Node},cardBackTab:{default:null,type:cc.Node},content:{default:null,type:cc.Node},template:{default:null,type:cc.Node},template2:{default:null,type:cc.Node},template3:{default:null,type:cc.Node},template4:{default:null,type:cc.Node},tableImageSelected:0,tableBgImageSelected:0,cardBackImageSelected:0,tableImageSelectedId:0,tableBgImageSelectedId:0,cardBackImageSelectedId:0},onLoad:function(){this.isTournament=!1,this.onTableTab(),this.tablePreview.spriteFrame=(this.isTournament?GameManager.tableImagesTour:GameManager.tableImages)[this.tableImageSelected];for(var e=0;e<(this.isTournament?GameManager.cardBackImagesTour:GameManager.cardBackImages).length;e++){var t=(this.isTournament?GameManager.cardBackImagesTour:GameManager.cardBackImages)[e];""!=GameManager.user.defaultCard&&GameManager.user.defaultCard._id?t.___data._id==GameManager.user.defaultCard._id&&(this.cardBackImageSelected=e,this.cardBackImageSelectedId=t.___data._id):0==e&&(this.cardBackImageSelected=e,this.cardBackImageSelectedId=t.___data._id)}for(this.cardBackPreview.spriteFrame=(this.isTournament?GameManager.cardBackImagesTour:GameManager.cardBackImages)[this.cardBackImageSelected],e=0;e<(this.isTournament?GameManager.tableBgImagesTour:GameManager.tableBgImages).length;e++){var a=(this.isTournament?GameManager.tableBgImagesTour:GameManager.tableBgImages)[e];""!=GameManager.user.defaultGameBackground&&GameManager.user.defaultGameBackground._id?a.___data._id==GameManager.user.defaultGameBackground._id&&(this.tableBgImageSelected=e,this.tableBgImageSelectedId=a.___data._id):0==e&&(this.tableBgImageSelected=e,this.tableBgImageSelectedId=a.___data._id)}this.tableBgPreview.spriteFrame=(this.isTournament?GameManager.tableBgImagesTour:GameManager.tableBgImages)[this.tableBgImageSelected]},onTableTab:function(){cc.Color.BLACK,this.tableTab.children[0].active=!0,this.cardTab.children[0].active=!1,this.tableBgTab.children[0].active=!1,this.cardBackTab.children[0].active=!1,this.content.removeAllChildren(!0);for(var e=0;e<(this.isTournament?GameManager.tableImagesTour:GameManager.tableImages).length;e++){var t=(this.isTournament?GameManager.tableImagesTour:GameManager.tableImages)[e],a=cc.instantiate(this.template);a.active=!0,a.y=0,a.children[0].getComponent(cc.Sprite).spriteFrame=t,a.children[1].getComponent(cc.Label).string=t.___data.name,a.getComponent(cc.Button).clickEvents[0].customEventData=t.___data,a.parent=this.content,""!=GameManager.user.defaultTheme&&GameManager.user.defaultTheme._id?t.___data._id==GameManager.user.defaultTheme._id&&(a.children[2].active=!0,this.tableImageSelected=e,this.tableImageSelectedId=t.___data._id):0==e&&(a.children[2].active=!0,this.tableImageSelected=e,this.tableImageSelectedId=t.___data._id)}},onTableBgTab:function(){cc.Color.BLACK,this.tableTab.children[0].active=!1,this.tableBgTab.children[0].active=!0,this.cardTab.children[0].active=!1,this.cardBackTab.children[0].active=!1,this.content.removeAllChildren(!0);for(var e=0;e<(this.isTournament?GameManager.tableBgImagesTour:GameManager.tableBgImages).length;e++){var t=(this.isTournament?GameManager.tableBgImagesTour:GameManager.tableBgImages)[e],a=cc.instantiate(this.template4);a.active=!0,a.y=0,a.children[0].getComponent(cc.Sprite).spriteFrame=t,a.children[1].getComponent(cc.Label).string=t.___data.name,a.getComponent(cc.Button).clickEvents[0].customEventData=t.___data,a.parent=this.content,""!=GameManager.user.defaultGameBackground&&GameManager.user.defaultGameBackground._id?t.___data._id==GameManager.user.defaultGameBackground._id&&(a.children[2].active=!0,this.tableBgImageSelected=e,this.tableBgImageSelectedId=t.___data._id):0==e&&(a.children[2].active=!0,this.tableBgImageSelected=e,this.tableBgImageSelectedId=t.___data._id)}},onCardTab:function(){cc.Color.BLACK,this.tableTab.children[0].active=!1,this.cardTab.children[0].active=!0,this.tableBgTab.children[0].active=!1,this.cardBackTab.children[0].active=!1},onCardBackTab:function(){cc.Color.BLACK,this.tableTab.children[0].active=!1,this.cardTab.children[0].active=!1,this.tableBgTab.children[0].active=!1,this.cardBackTab.children[0].active=!0,this.content.removeAllChildren(!0);for(var e=0;e<(this.isTournament?GameManager.cardBackImagesTour:GameManager.cardBackImages).length;e++){var t=(this.isTournament?GameManager.cardBackImagesTour:GameManager.cardBackImages)[e],a=cc.instantiate(this.template3);a.active=!0,a.y=0,a.children[0].getComponent(cc.Sprite).spriteFrame=t,a.children[1].getComponent(cc.Label).string=t.___data.name,a.getComponent(cc.Button).clickEvents[0].customEventData=t.___data,a.parent=this.content,""!=GameManager.user.defaultCard&&GameManager.user.defaultCard._id?t.___data._id==GameManager.user.defaultCard._id&&(a.children[2].active=!0,this.cardBackImageSelected=e,this.cardBackImageSelectedId=t.___data._id):0==e&&(a.children[2].active=!0,this.cardBackImageSelected=e,this.cardBackImageSelectedId=t.___data._id)}},onSelectTable:function(e,t){this.content.children.forEach(function(t){t==e.target?t.children[2].active=!0:t.children[2].active=!1},this),this.tablePreview.spriteFrame=(this.isTournament?GameManager.tableImagesTour:GameManager.tableImages)[t.___id],this.tableImageSelected=t.___id,this.tableImageSelectedId=t._id},onSelectTableBg:function(e,t){this.content.children.forEach(function(t){t==e.target?t.children[2].active=!0:t.children[2].active=!1},this),this.tableBgPreview.spriteFrame=(this.isTournament?GameManager.tableBgImagesTour:GameManager.tableBgImages)[t.___id],this.tableBgImageSelected=t.___id,this.tableBgImageSelectedId=t._id},onSelectCard:function(){},onSelectCardBack:function(e,t){this.content.children.forEach(function(t){t==e.target?t.children[2].active=!0:t.children[2].active=!1},this),this.cardBackPreview.spriteFrame=(this.isTournament?GameManager.cardBackImagesTour:GameManager.cardBackImages)[t.___id],this.cardBackImageSelected=t.___id,this.cardBackImageSelectedId=t._id},onApply:function(){var e=this,t=0;0!=this.tableImageSelectedId&&(t+=1,ServerCom.pomeloRequest("connector.entryHandler.playerChangeTableTheme",{playerId:GameManager.user.playerId,themeId:this.tableImageSelectedId},function(a){console.log("playerChangeTableTheme",a),GameManager.user.defaultTheme=a.result,GameManager.tableImageTour=GameManager.tableImage=e.tableImageSelected,GameManager.emit("updateTableImage"),0==(t-=1)&&e.onClose()})),0!=this.tableBgImageSelectedId&&(t+=1,ServerCom.pomeloRequest(this.isTournament?"connector.entryHandler.playerChangeTourGameBackground":"connector.entryHandler.playerChangeGameBackground",{playerId:GameManager.user.playerId,gameBGId:this.tableBgImageSelectedId},function(a){console.log("playerChangeGameBackground",a),GameManager.user.defaultGameBackground=a.result,GameManager.tableBgImage=e.tableBgImageSelected,GameManager.emit("updateTableBgImage"),0==(t-=1)&&e.onClose()})),0!=e.cardBackImageSelectedId&&(t+=1,ServerCom.pomeloRequest(this.isTournament?"connector.entryHandler.playerChangeTourCard":"connector.entryHandler.playerChangeCard",{playerId:GameManager.user.playerId,cardId:e.cardBackImageSelectedId},function(a){console.log("playerChangeCard",a),GameManager.user.defaultCard=a.result,GameManager.cardBackImage=e.cardBackImageSelected,GameManager.emit("updateCardBackImage"),0==(t-=1)&&e.onClose()}))},onReset:function(){this.onLoad()},onShow:function(){GameManager.emit("disablePageView")},onClose:function(){setTimeout(function(){GameManager.emit("showJoinSimlar")},100),GameManager.emit("enablePageView"),this.node.active=!1}}),cc._RF.pop()},{Checkbox:"Checkbox",GameScreen:"GameScreen",PopUpBase:"PopUpBase",PopUpManager:"PopUpManager",PostTypes:"PostTypes",ResponseTypes:"ResponseTypes",Toggle:"Toggle"}],Table:[function(e,t){"use strict";cc._RF.push(t,"31bbe/aU79GTYTDPfcg6zJR","Table");var a=e("TableContent"),n=e("TableHandler"),i=(e("Checkbox"),e("PopUpManager").PopUpManager),o=e("PopUpManager").PopUpType,s=e("GameConfig").K,r=e("CashRoom"),l=e("Advancefilter"),c=cc.Enum({None:-1,TexasHoldem:1,Omaha:2,OmahaHiLo:3,OpenFaceChinesePoker:4}),d=(cc.Enum({CashGames:1,SitAndGo:2,Tournaments:3}),cc.Class({extends:cc.Component,properties:{handler:{default:null,type:n},filter:{default:null,type:cc.Node},tabButtons:{default:[],type:cc.Sprite},realMoney:{default:null,type:cc.Toggle},variation:c.TexasHoldem,contentHolder:{default:null,type:cc.Node},original:{default:null,type:cc.Node},originalOFC:{default:null,type:cc.Node},headContent:{default:null,type:cc.Node},headContentOFC:{default:null,type:cc.Node},stakeFilterLabel:{default:null,type:cc.Label},contentPool:{default:[]},popUpManager:{default:null,type:i},darkColor:{default:new cc.Color},lightColor:{default:new cc.Color},isSortedByName:{default:!1,visible:!1},isSortedByVariation:{default:!1,visible:!1},isSortedByType:{default:!1,visible:!1},isSortedByMinBuy:{default:!1,visible:!1},isSortedByMaxBuy:{default:!1,visible:!1},isSortedByMinPlayers:{default:!1,visible:!1},isSortedByMaxPlayers:{default:!1,visible:!1},isSortedByStakes:{default:!1,visible:!1},isSortedByFlops:{default:!1,visible:!1},isSortedByWaiting:{default:!1,visible:!1},isSortedByPots:{default:!1,visible:!1},isSortedByPlayingPlayers:{default:!1,visible:!1},nameReverse:{default:!1,visible:!1},variationReverse:{default:!1,visible:!1},typeReverse:{default:!1,visible:!1},minBuyReverse:{default:!1,visible:!1},maxBuyReverse:{default:!1,visible:!1},minPlayersReverse:{default:!1,visible:!1},maxPlayersReverse:{default:!1,visible:!1},flopReverse:{default:!1,visible:!1},stakeReverse:{default:!1,visible:!1},waitingReverse:{default:!1,visible:!1},potReverse:{default:!1,visible:!1},isSortByJoined:{default:!0,visible:!0},tableJoined:{default:!1,visible:!1},noFavInfo:{default:null,type:cc.Node},createRowsCallBack:null,tempCallback:null,tempSelection:null,DropDownData:null,roomId:null,roomData:null,privateToggle:{default:null,type:cc.Toggle}},statics:{filter:0,low:!0,mid:!1,high:!1},onLoad:function(){this.lobbyData=[],this.currentData=null,this.contentHolder.getComponent(cc.Widget).isAlignTop=!1,this.createRowsCallBack=this.createRows.bind(this),GameManager.on("forceReloadTable",this.onForceReloadTable.bind(this)),GameManager.on("AdvancefilterUpdated",this.onAdvancefilterUpdated.bind(this)),GameManager.on(s.GameEvents.onReset,function(){this.tempSelection=null,this.lobbyData=[]}.bind(this)),ServerCom.pomeloBroadcast("roomUpdate",this.onRoomUpdate.bind(this)),ServerCom.pomeloBroadcast("addNewTable",this.onAddNewTable.bind(this)),ServerCom.pomeloBroadcast(s.LobbyBroadcastRoute.tableUpdate,this.onTableUpdate.bind(this)),ServerCom.pomeloBroadcast(s.LobbyBroadcastRoute.tableView,this.onSideTableUpdate.bind(this)),ServerCom.pomeloBroadcast(s.LobbyBroadcastRoute.removeTable,this.removeTable.bind(this)),ServerCom.pomeloBroadcast(s.LobbyBroadcastRoute.addTable,this.addTable.bind(this)),cc.systemEvent.on("leaveLobby",this.leaveLobby,this),cc.systemEvent.on(LocalizedManager.LanguageDidChangeEvent,this.onTableUpdateWithLang,this),this.isSortedByStakes=!0,this.stakeReverse=!0,GameManager.isMobile,this.resetAllBools(),this.isSortedByStakes=!0,this.stakeReverse=!0,this.applyFilterCB=this.applyFilter.bind(this)},registerUPandDOWN:function(){},leaveLobby:function(){},scroll:function(e){if(e==cc.KEY.enter)return a.prevSelection.dblClk=!0,void a.prevSelection.node.emit("touchstart");var t,n=this.contentHolder.children;for(t=0;t<n.length&&a.prevSelection!=n[t].getComponent("TableContent");t++);var i=t+(e=e==cc.KEY.up?-1:1);i>-1&&i<n.length&&n[t+e].getComponent("TableContent").onClick()},onForceReloadTable:function(){a.prevSelection=null;var e=this,t=!0+""+this.variation;this.lobbyData[t],this.handler.getTableData(!0,"All","All",function(a){a.success&&(e.handler.contents=e.filterByTournamentType(a.result),e.lobbyData[t]=e.handler.contents,e.applyFilter(!0))},null)},initDropDowns:function(e){"All"!==e.playersRequired[0]&&e.playersRequired.splice(0,0,"All"),this.maxPlayersDropdown.setContent(["All",2,3,4,5,6,7,8,9])},setFavTable:function(){if(GameManager.playSound(s.Sounds.click),!GameManager.isMobile){var e=this.favTableCB.isChecked,t=a.prevSelection.channelData.favourite,n=this;a.prevSelection?e&&!t?this.handler.setFavTable(GameManager.user.playerId,a.prevSelection.channelData._id,a.prevSelection.channelData.channelType,function(t){if(t.success){a.prevSelection.channelData.favourite=!0,n.updateFavKeys();var i=n.handler.contents.indexOf(a.prevSelection.channelData);n.handler.contents[i].favourite=!0}else n.favTableCB.isChecked=!e}):!e&&t&&this.handler.removeFavTable(GameManager.user.playerId,a.prevSelection.channelData._id,function(t){if(t.success){a.prevSelection.channelData.favourite=!1,n.updateFavKeys();var i=n.handler.contents.indexOf(a.prevSelection.channelData);n.handler.contents[i].favourite=!1,n.favPrimaryCB&&n.favPrimaryCB.isChecked&&n.applyFilter()}else this.favTableCB.isChecked=!e}):this.favTableCB.isChecked=!e}},updateFavKeys:function(){var e=a.prevSelection.channelData,t={_id:e._id,event:"TABLENEWVALUES",route:"tableUpdate",updated:{favourite:e.favourite}};this.onTableUpdate(t)},onAddNewTable:function(e){console.log("onAddNewTable",e),this.lobbyData=[],this.clearContents(),this.onGetTableData()},onRoomUpdate:function(){},onTableUpdate:function(e){for(var t in this.lobbyData)for(var a=0;a<this.lobbyData[t].length;a++)if(this.lobbyData[t][a]._id==e._id){for(var n in e.updated)this.lobbyData[t][a][n]=e.updated[n];break}this.applyFilter(!0)},onSideTableUpdate:function(){},addTable:function(){this.onGetTableData()},removeTable:function(e){this.onGetTableData(),GameManager.emit("removeTable",e)},onDisable:function(){},onEnable:function(){a.prevSelection=null,a.callback=this.tableContentClick.bind(this),this.onGetTableData()},onEnable2:function(e){a.prevSelection=null,this.clearContents(),this.handler.contents=this.filterByTournamentType(e);var t=!0+""+this.variation;this.lobbyData[t]=this.handler.contents,this.applyFilter(!0),this.tables.string&&this.handler.contents&&(this.tables.string=this.handler.contents.length+" tables")},onGetTableData:function(e){void 0===e&&(e=null),a.prevSelection=null;var t=this,n=!0+""+this.variation;this.lobbyData[n],t.clearContents(),this.handler.getTableData(!0,"All","All",function(e){e.success&&(t.handler.contents=t.filterByTournamentType(e.result),t.lobbyData[n]=t.handler.contents,t.applyFilter(!0))},e)},filterByTournamentType:function(e,t,a){if(void 0===t&&(t=!0),void 0===a&&(a=!0),t)return e;for(var n=[],i=0;i<e.length;i++){var o=e[i].tournamentType===s.TournamentType.SitNGo;(o=a?o:!o)&&n.push(e[i])}return n},startPomelo:function(e,t){pomelo.init({host:e.gameServer,port:e.gamePort,log:!0},function(){null!=t&&t()})},initGameTypeFilter:function(){this.gameTypeDropdown.setContent(["All","Standard (30s)","Turbo (20s)","Hyper-Turbo (10s)"]),this.setPlayerFilters(),this.stakesDropdown.setContent(["All","Low","Mid","High"]),this.gameTypeDropdown.registerCallback(this.applyFilter.bind(this)),this.stakesDropdown.registerCallback(this.applyFilter.bind(this)),this.maxPlayersDropdown.registerCallback(this.applyFilter.bind(this))},setPlayerFilters:function(){if(this.variation==s.Variation.OpenFaceChinesePoker)var e=["All",2,3];else e=["All",2,6,9];this.maxPlayersDropdown.setContent(e)},populateTable:function(e){var t=this.variation==s.Variation.OpenFaceChinesePoker?this.originalOFC:this.original;0==this.contentPool.length?this.createRows(e):this.contentPool[0].name==t.name?this.contentPool.length>e.length?(this.destroyRows(e.length),this.updateTable(e,e.length)):this.contentPool.length<e.length?(this.createRows(e),this.updateTable(e)):this.updateTable(e):this.destroyRows(0,this.createRows.bind(this),e)},updateTable:function(e,t){void 0===t&&(t=null),this.currentData=e,t=t||this.contentPool.length;for(var n=null,i=null,o=0;o<t;o++)if(n=this.contentPool[o].getComponent("TableContent"),i=this.makeContent(e[o]),n.channelData=e[o],n.runItTwiceIcon.active=e[o].isRunItTwice,n.setContentText(i),n.joinEffect&&(-1!==this.handler.joinTableList.indexOf(n.channelData._id)?(n.joinEffect.active=!0,n.textFields.forEach(function(){},this)):(n.joinEffect.active=!1,a.prevSelection!=n&&n.textFields.forEach(function(){},this))),cc.find("Rit_Icon",n.node).active=e[o].isRunItTwice,cc.find("Low",n.node).active=!1,cc.find("Mid",n.node).active=!1,cc.find("High",n.node).active=!1,cc.find(e[o].blindsType,n.node).active=!0,n.channelData.channelVariation==s.Variation.TexasHoldem?(cc.find("l/vari",n.node).active=!0,cc.find("l/vari2",n.node).active=!1):n.channelData.channelVariation==s.Variation.Omaha&&(cc.find("l/vari",n.node).active=!1,cc.find("l/vari2",n.node).active=!0),n.channelData.roomImage){var r=GameManager.cachedRoomImages[n.channelData.roomImage];r?(cc.find("icon",n.node).roomImage=n.channelData.roomImage,cc.find("icon",n.node).getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(r)):function(e,t){cc.find("icon",t).getComponent(cc.Sprite).spriteFrame?e==cc.find("icon",t).roomImage||cc.loader.load(s.ServerAddress.assets_server_s+e,function(a,n){a||(cc.find("icon",t).roomImage=e,cc.find("icon",t).getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n),GameManager.cachedRoomImages[e]=n)}):(cc.find("icon",t).roomImage=e,cc.loader.load(s.ServerAddress.assets_server_s+e,function(a,n){a||(cc.find("icon",t).getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n),GameManager.cachedRoomImages[e]=n)}))}(n.channelData.roomImage,n.node)}this.showSelection()},createRows:function(e,t){void 0===t&&(t=!1);var a=t?0:e.length;this.contentPool.length<a?this.createRow(e[this.contentPool.length],this.contentPool.length,e,this.createRowsCallBack):(this.applySorting(),this.showSelection())},createRow:function(e,t,a,n){var i,o=null,r=null;i=this.makeContent(e),(o=this.variation==s.Variation.OpenFaceChinesePoker?cc.instantiate(this.originalOFC):cc.instantiate(this.original)).setPosition(0,0),o.active=!0,this.contentHolder.addChild(o),(r=o.getComponent("TableContent")).setContentText(i),r.channelData=e,r.runItTwiceIcon.active=e.isRunItTwice,cc.find("Rit_Icon",r.node).active=e.isRunItTwice,r.table=this,o.active=!0,this.contentPool.push(o),r.joinEffect&&(-1!==this.handler.joinTableList.indexOf(e._id)?(r.joinEffect.active=!0,r.textFields.forEach(function(){},this)):(r.joinEffect.active=!1,r.textFields.forEach(function(){},this))),null!=n&&n(a)},destroyRows:function(e,t,a){void 0===t&&(t=null),void 0===a&&(a=null),this.contentPool.length>e?(this.contentPool[e].destroy(),this.contentPool.splice(e,1),this.destroyRows(e,t,a)):null!=t&&t(a)},clearContents:function(){for(var e=0;e<this.contentPool.length;e++)this.contentPool[e].active=!1,this.contentPool[e].destroy();this.contentPool=[]},refreshSideTable:function(e){void 0===e&&(e=!0),this.selectedTableDetails.active=!0,this.selectedTableDetailsTour.active=!1,null!=a.prevSelection&&0!=this.contentPool.length?(this.disableSideTable(!1),!GameManager.isMobile&&a.prevSelection.channelData.favourite?this.favTableCB.isChecked=!0:GameManager.isMobile||(this.favTableCB.isChecked=!1),e?(this.currentSideTableData=null,this.handler.refreshSideTable(a.prevSelection.channelData,function(e){this.setSideTableData(e)}.bind(this),function(){})):this.setSideTableData(this.currentSideTableData)):this.disableSideTable(!0)},getFilteredContent:function(){for(var e=[],t=0;t<this.contentPool.length;t++)e.push(this.contentPool[t].getComponent("TableContent").channelData);return e},onSortByName:function(){this.nameReverse=!this.nameReverse,this.removeAllSorting(),this.isSortedByName=!0,this.applyFilter()},onSortByNameSound:function(){GameManager.playSound(s.Sounds.click),this.onSortByName()},onSortByStakes:function(){this.stakeReverse=!this.stakeReverse,this.removeAllSorting(),this.isSortedByStakes=!0,this.applyFilter()},onSortByStakesSound:function(){GameManager.playSound(s.Sounds.click),this.onSortByStakes()},onSortByVariation:function(){this.variationReverse=!this.variationReverse,this.removeAllSorting(),this.isSortedByVariation=!0,this.applyFilter()},onSortByVariationSound:function(){GameManager.playSound(s.Sounds.click),this.onSortByVariation()},onSortByType:function(){this.typeReverse=!this.typeReverse,this.removeAllSorting(),this.isSortedByType=!0,this.applyFilter()},onSortByMinBuy:function(){this.minBuyReverse=!this.minBuyReverse,this.removeAllSorting(),this.isSortedByMinBuy=!0,this.applyFilter()},onSortByMinBuySound:function(){GameManager.playSound(s.Sounds.click),this.onSortByMinBuy()},onSortByMaxBuy:function(){this.maxBuyReverse=!this.maxBuyReverse,this.removeAllSorting(),this.isSortedByMaxBuy=!0,this.applyFilter()},onSortByMaxBuySound:function(){GameManager.playSound(s.Sounds.click),this.onSortByMaxBuy()},onSortByPlayers:function(){this.maxPlayersReverse=!this.maxPlayersReverse,this.removeAllSorting(),this.isSortedByMaxPlayers=!0,this.applyFilter()},onSortByPlayersSound:function(){GameManager.playSound(s.Sounds.click),this.onSortByPlayers()},onSortByFlops:function(){this.flopReverse=!this.flopReverse,this.removeAllSorting(),this.isSortedByFlops=!0,this.applyFilter()},onSortByFlopsSound:function(){GameManager.playSound(s.Sounds.click),this.onSortByFlops()},onSortByPots:function(){this.potReverse=!this.potReverse,this.removeAllSorting(),this.isSortedByPots=!0,this.applyFilter()},onSortByWaitingSound:function(){GameManager.playSound(s.Sounds.click),this.onSortByWaitingPlayers()},onSortByWaitingPlayers:function(){this.waitingReverse=!this.waitingReverse,this.removeAllSorting(),this.isSortedByWaiting=!0,this.applyFilter()},onSortByMinPlayers:function(){this.removeAllSorting(),this.isSortedByMinPlayers=!0,this.applyFilter()},onSortByMaxPlayers:function(){this.removeAllSorting(),this.isSortedByMaxPlayers=!0,this.applyFilter()},sortByName:function(){var e=[];e=this.getFilteredContent(),e=this.handler.sortByString(e,this.nameReverse,"channelName"),this.updateTable(e),this.nameReverse=!this.nameReverse},sortByStakes:function(){var e=[];e=this.getFilteredContent(),e=this.handler.sortByString(e,this.stakeReverse,"smallBlind"),this.updateTable(e),this.stakeReverse=!this.stakeReverse},sortByVariation:function(){var e=[];e=this.getFilteredContent(),e=this.handler.sortByString(e,this.variationReverse,"channelVariation"),this.updateTable(e),this.variationReverse=!this.variationReverse},sortByType:function(){var e=[];e=this.getFilteredContent(),e=this.handler.sortByString(e,this.typeReverse,"turnTime"),this.updateTable(e),this.typeReverse=!this.typeReverse},sortByMinBuy:function(){var e=[];e=this.getFilteredContent(),e=this.handler.sortByNumber(e,this.minBuyReverse,"minBuyIn"),this.updateTable(e),this.minBuyReverse=!this.minBuyReverse},sortByMaxBuy:function(){var e=[];e=this.getFilteredContent(),e=this.handler.sortByNumber(e,this.maxBuyReverse,"maxBuyIn"),this.updateTable(e),this.maxBuyReverse=!this.maxBuyReverse},sortByPlayers:function(){this.sortByMaxPlayers()},sortByFlops:function(){this.isSortedByFlops=!0;var e=[];e=this.getFilteredContent(),e=this.handler.sortByString(e,this.flopReverse,"flopPercent"),this.updateTable(e),this.flopReverse=!this.flopReverse},sortByPots:function(){this.isSortedByPots=!0;var e=[];e=this.getFilteredContent(),e=this.handler.sortByString(e,this.potReverse,"avgStack"),this.updateTable(e),this.potReverse=!this.potReverse},sortByPlayingPlayers:function(){var e=[];e=this.getFilteredContent(),e=this.handler.sortByNumber(e,!0,"playingPlayers"),this.updateTable(e)},sortByWaitingPlayers:function(){this.isSortedByWaiting=!0;var e=[];e=this.getFilteredContent(),e=this.handler.sortByNumber(e,this.waitingReverse,"queuePlayers"),this.updateTable(e),this.waitingReverse=!this.waitingReverse},sortByMinPlayers:function(){this.isSortedByMinPlayers=!0;var e=[];e=this.getFilteredContent(),e=this.handler.sortByNumber(e,this.minPlayersReverse,"minPlayers"),this.updateTable(e),this.minPlayersReverse=!this.minPlayersReverse},sortByMaxPlayers:function(){this.isSortedByMaxPlayers=!0,e=[];var e=this.getFilteredContent();e=this.handler.sortByNumber(e,this.maxPlayersReverse,"maxPlayers"),this.updateTable(e),this.maxPlayersReverse=!this.maxPlayersReverse},sortByJoined:function(){this.isSortByJoined=!0;var e=[];e=this.getFilteredContent(),e=this.handler.sortByJoined(e),this.updateTable(e),this.tableJoined=!this.tableJoined},resetAllBools:function(){this.nameReverse=!1,this.stakeReverse=!1,this.variationReverse=!1,this.typeReverse=!1,this.minBuyReverse=!1,this.maxBuyReverse=!1,this.minPlayersReverse=!1,this.maxPlayersReverse=!1,this.flopReverse=!1,this.waitingReverse=!1,this.potReverse=!1},removeAllSorting:function(){this.isSortedByName=!1,this.isSortedByStakes=!1,this.isSortedByFlops=!1,this.isSortedByWaiting=!1,this.isSortedByVariation=!1,this.isSortedByType=!1,this.isSortedByMinBuy=!1,this.isSortedByMaxBuy=!1,this.isSortedByMinPlayers=!1,this.isSortedByMaxPlayers=!1,this.isSortedByPots=!1,this.isSortedByPlayingPlayers=!1},applySorting:function(){this.isSortedByPlayingPlayers&&(this.sortByPlayingPlayers(),this.scheduleOnce(function(){this.isSortedByPlayingPlayers=!1}.bind(this),1)),this.isSortedByName&&(this.nameReverse=!this.nameReverse,this.sortByName()),this.isSortedByStakes&&(this.stakeReverse=!this.stakeReverse,this.sortByStakes()),this.isSortedByFlops&&(this.flopReverse=!this.flopReverse,this.sortByFlops()),this.isSortedByWaiting&&(this.waitingReverse=!this.waitingReverse,this.sortByWaitingPlayers()),this.isSortedByVariation&&(this.variationReverse=!this.variationReverse,this.sortByVariation()),this.isSortedByType&&(this.typeReverse=!this.typeReverse,this.sortByType()),this.isSortedByMinBuy&&(this.minBuyReverse=!this.minBuyReverse,this.sortByMinBuy()),this.isSortedByMaxBuy&&(this.maxBuyReverse=!this.maxBuyReverse,this.sortByMaxBuy()),this.isSortedByMinPlayers&&(this.minPlayersReverse=!this.minPlayersReverse,this.sortByMinPlayers()),this.isSortedByMaxPlayers&&(this.maxPlayersReverse=!this.maxPlayersReverse,this.sortByMaxPlayers()),this.isSortedByPots&&(this.potReverse=!this.potReverse,this.sortByPots()),this.isSortByJoined&&(this.tableJoined=!this.tableJoined,this.sortByJoined())},applyFilter:function(e){void 0===e&&(e=!1),console.log("CashRoom.isShowHoldem",r.isShowHoldem),console.log("CashRoom.isShowPLO",r.isShowPLO),console.log("CashRoom.isShowAllIn",r.isShowAllIn),console.log(l.config);var t,a,n,i=this.hideFullTablesCB.isChecked,o=!!this.favPrimaryCB&&this.favPrimaryCB.isChecked;if(GameManager.isMobile,t=a=n="All",this.handler.contents&&this.handler.contents.length>0){for(var c=[],h=!0,u=null,p=0;p<this.handler.contents.length;p++){if(u=this.handler.contents[p],h=!0,i&&(h=(u.channelType==s.ChannelType.Tournament?u.enrolledPlayers:u.playingPlayers)<(u.channelType==s.ChannelType.Tournament?u.maxPlayersForTournament:u.maxPlayers)),o&&(h=h&&u.favourite),h=h&&this.isValidByGameType(t,u.turnTime),h=(h=this.variation==s.Variation.OpenFaceChinesePoker?h&&this.isValidByStakesOFC(u.chipsPointRatio,a):h&&this.isValidByStakes(u.smallBlind,a))&&this.isValidByMaxPlayers(n,u.maxPlayers),d.low||d.mid||d.high){var m=!1;d.low&&"Low"==u.blindsType&&(m=!0),d.mid&&"Mid"==u.blindsType&&(m=!0),d.high&&"High"==u.blindsType&&(m=!0),m||(h=!1)}if(r.isShowHoldem?"Texas Hold\u2019em"==u.channelVariation&&1!=u.isAllInAndFold||(h=!1):r.isShowPLO&&("Omaha"==u.channelVariation&&1!=u.isAllInAndFold||(h=!1)),r.isShowAllIn&&(1==u.isAllInAndFold||(h=!1)),h){var g=!1;if(l.config.enabled&&(l.config.format.rit&&u.isRunItTwice&&(g=!0),""!=l.config.stakes.min&&""!=l.config.stakes.max?u.minBuyIn>=Number(l.config.stakes.min)&&u.minBuyIn<=Number(l.config.stakes.max)&&(g=!0):""!=l.config.stakes.max&&u.minBuyIn<=Number(l.config.stakes.max)?g=!0:""!=l.config.stakes.min&&u.minBuyIn>=Number(l.config.stakes.min)&&(g=!0),!g))continue}h&&c.push(u)}c=this.handler.sortByJoined(c),this.populateTable(c),this.applySorting(),GameManager.isMobile||this.disableSideTable(0==c.length,!1,!0)}else this.clearContents(),e=typeof e==typeof!0&&e,GameManager.isMobile||this.disableSideTable(!0,!1,e)},showSelection:function(){this.contentPool.length>0?null==this.tempSelection||this.tempSelection>=this.contentPool.length?this.contentPool[0].getComponent("TableContent").onClick():null!==this.tempSelection&&this.tempSelection<this.contentPool.length&&(-1==this.tempSelection&&(this.tempSelection=0),this.contentPool[this.tempSelection].getComponent("TableContent").onClick()):this.tempSelection},getFavourites:function(e,t){if(this.favPrimaryCB&&this.favPrimaryCB.isChecked){for(var a=[],n=0;n<e.length;n++)e[n].favourite&&a.push(e[n]);t(a)}else t(e)},filterByGameType:function(e,t,a){for(var n=[],i=0;i<t.length;i++)this.isValidByGameType(e,t[i].turnTime)&&n.push(t[i]);a(n)},isValidByGameType:function(e,t){var a=!1;switch(e){case"Hyper-Turbo (10s)":a=10==t;break;case"Turbo (20s)":a=20==t;break;case"Standard (30s)":a=30==t;break;default:a=!0}return a},onTableUpdateWithLang:function(){console.log("onTableUpdateWithLang",this.currentData),this.currentData&&(console.log("Update Lang"),this.updateTable(this.currentData))},filterByMaxPlayers:function(e,t,a){for(var n=[],i=0;i<t.length;i++)this.isValidByMaxPlayers(e,t[i].maxPlayers)&&n.push(t[i]);a(n)},isValidByMaxPlayers:function(e,t){return"All"==e||e==t},filterByStakes:function(e,t,a){var n=[];if(this.variation==s.Variation.OpenFaceChinesePoker)for(var i=0;i<t.length;i++)this.isValidByStakesOFC(t[i].chipsPointRatio,e)&&n.push(t[i]);else for(i=0;i<t.length;i++)this.isValidByStakes(t[i].smallBlind,e)&&n.push(t[i]);a(n)},isValidByStakes:function(e,t){return"All"==t||("Low"==t?e>0&&e<=25:"Mid"==t?e>25&&e<=100:"High"==t&&e>100)},isValidByStakesOFC:function(e,t){return"All"==t||("Low"==t?e>0&&e<10:"Mid"==t?e>=10&&e<20:"High"==t&&e>=20)},hideFullTables:function(e){console.log("hide full tables called");var t=[];if(this.hideFullTablesCB.isChecked){for(var a=0;a<this.handler.contents.length;a++){var n=this.handler.contents[a],i=n.channelType==s.ChannelType.Tournament?n.enrolledPlayers:n.playingPlayers;n.channelType==s.ChannelType.Tournament?n.maxPlayersForTournament:n.maxPlayers,i<n.maxPlayers&&t.push(this.handler.contents[a])}e(t)}else e(this.handler.contents)},disableSideTable:function(e,t,a){void 0===e&&(e=!0),void 0===t&&(t=!1),void 0===a&&(a=!0)},showFavInstructions:function(){GameManager.popUpManager.show(o.InstructionPopup,null,function(){})},capitalizeFirstLetter:function(e){return(e=e.toLowerCase()).replace(/^.{1}/g,e[0].toUpperCase())},updateTableVal:function(){},highlightJoinTable:function(){},onAll:function(){d.low?(this.setInActiveButton(this.tabButtons[0],this.tabButtons[0]),d.low=!1):(this.setActiveButton(this.tabButtons[0],this.tabButtons[0]),d.low=!0),this.applyFilter()},onTurbo:function(){d.mid?(this.setInActiveButton(this.tabButtons[1],this.tabButtons[1]),d.mid=!1):(this.setActiveButton(this.tabButtons[1],this.tabButtons[1]),d.mid=!0),this.applyFilter()},onRit:function(){d.high?(this.setInActiveButton(this.tabButtons[2],this.tabButtons[2]),d.high=!1):(this.setActiveButton(this.tabButtons[2],this.tabButtons[2]),d.high=!0),this.applyFilter()},setActiveButton:function(e){e.node.getChildByName("pressed")&&(e.node.getChildByName("pressed").active=!0)},setInActiveButton:function(e){e.node.getChildByName("pressed")&&(e.node.getChildByName("pressed").active=!1)},onAdvancefilterUpdated:function(){l.config.enabled?this.filter.color=new cc.color(255,166,39):this.filter.color=new cc.color(255,255,255),this.applyFilter()}}));cc._RF.pop()},{Advancefilter:"Advancefilter",CashRoom:"CashRoom",Checkbox:"Checkbox",GameConfig:"GameConfig",PopUpManager:"PopUpManager",TableContent:"TableContent",TableHandler:"TableHandler"}],TestSM:[function(e,t){"use strict";cc._RF.push(t,"20fabRrZkdIhZ4e52U3gmS8","TestSM");var a=e("StateMachine");cc.Class({extends:a,properties:{},onLoad:function(){}}),cc._RF.pop()},{StateMachine:"StateMachine"}],TimerUtil:[function(e,t){"use strict";cc._RF.push(t,"cdf3fdsF9ZJaqzHZEnjCQDN","TimerUtil"),cc.Class({extends:cc.Component,properties:{timer:{default:0,visible:!1},maxTimer:{default:5}},onLoad:function(){},onEnable:function(){this.timer=0},onDisable:function(){},update:function(e){this.timer+=e,this.timer>this.maxTimer&&(this.node.active=!1)}}),cc._RF.pop()},{}],Toggle:[function(e,t){"use strict";cc._RF.push(t,"31f3dzQsYJFM4LkDhTNaEpF","Toggle"),cc.Class({extends:cc.Component,properties:{state:!1,defaultState:!1,on:{default:null,type:cc.Node},off:{default:null,type:cc.Node},callbacks:[]},onLoad:function(){this.defaultState!=this.state&&this.onToggle()},onToggle:function(){this.state=!this.state,this.on.active=this.state,this.off.active=!this.state,this.callbacks.forEach(function(e){e(this.state)},this),"JohnnyMobilePokerModel"==!this.node.parent.parent.parent.parent.parent.parent.parent.name&&(GameManager.playSound(K.Sounds.click),this.isInsideSetting=!0)},registerCallback:function(e){this.callbacks.push(e)},deregisterCallback:function(e){var t=this.callbacks.indexOf(e);this.callbacks.splice(t,1)}}),cc._RF.pop()},{}],TournamentBreakTimeAddon:[function(e,t){"use strict";cc._RF.push(t,"5686dfNAEBN7KTRl8NvQvnw","TournamentBreakTimeAddon"),e("GameConfig").K,cc.Class({extends:cc.Component,properties:{pokerPresenter:{default:null,type:cc.Node},addonMyChipsLbl:{default:null,type:cc.Label},addonChips:{default:null,type:cc.Label},addonHouseFee:{default:null,type:cc.Label},addonAmount:{default:null,type:cc.Label},addonTimer:{default:null,type:cc.Label},confirmButton:{default:null,type:cc.Button},rebuyTimerCount:0},onLoad:function(){},onDisable:function(){},onEnable:function(){},onBuy:function(){this.pokerPresenter.getComponent("PokerPresenter").model.addon(this.pokerPresenter.getComponent("PokerPresenter").model.gameData.channelId,GameManager.user.playerId,this.pokerPresenter.getComponent("PokerPresenter").model.gameData.raw.tourData.raw._id,function(e){console.log("onAddon",e)},function(e){console.log("onAddon",e)})},onClose:function(){this.node.active=!1},addonDone:function(e){console.log("addonDone",e),this.unschedule(this.updateRebuy),this.addonTimer.string=" ",this.confirmButton.interactable=!1},updateRebuy:function(){var e=this;this.rebuyTimerCount-=1e3,this.rebuyTimerCount<=0&&(this.rebuyTimerCount=0,this.unschedule(this.updateRebuy),this.confirmButton.interactable=!1,this.scheduleOnce(function(){e.onClose()},1)),this.addonTimer.string="("+parseInt(this.rebuyTimerCount/1e3)+"s)"},setData:function(e){this.data=e,this.confirmButton.interactable=!0;var t=this.pokerPresenter.getComponent("PokerPresenter").model.gameData.raw.tourData.raw;this.addonMyChipsLbl.string=GameManager.user.realChips,this.addonChips.string=t.addonChips,this.addonHouseFee.string=t.addonHouseFee,this.addonAmount.string=t.addonAmount,this.rebuyTimerCount=e.breakTime,this.updateRebuy(),this.schedule(this.updateRebuy,1)}}),cc._RF.pop()},{GameConfig:"GameConfig"}],TournamentBreakTime:[function(e,t){"use strict";cc._RF.push(t,"9f96bIRk6pINaToHHHPuLFh","TournamentBreakTime"),e("GameConfig").K,cc.Class({extends:cc.Component,properties:{pokerPresenter:{default:null,type:cc.Node}},onLoad:function(){},onDisable:function(){},onEnable:function(){},onClose:function(){this.pokerPresenter.getComponent("PokerPresenter").toLobby()},setData:function(e){if(this.data=e,this.data.currentBreakDetails){var t=GameManager.getMTimeDuration(Number(this.data.currentBreakDetails.breakEndTime));cc.find("Timer/t1/v",this.node).getComponent(cc.Label).string=t.split(":")[0][0],cc.find("Timer/t2/v",this.node).getComponent(cc.Label).string=t.split(":")[0][1],cc.find("Timer/t3/v",this.node).getComponent(cc.Label).string=t.split(":")[1][0],cc.find("Timer/t4/v",this.node).getComponent(cc.Label).string=t.split(":")[1][1],this.updateBreakEndsTimer()}else{var a=GameManager.getMTimeDuration(Number(this.data.currentTournamentBreak.breakEndTime));cc.find("Timer/t1/v",this.node).getComponent(cc.Label).string=a.split(":")[0][0],cc.find("Timer/t2/v",this.node).getComponent(cc.Label).string=a.split(":")[0][1],cc.find("Timer/t3/v",this.node).getComponent(cc.Label).string=a.split(":")[1][0],cc.find("Timer/t4/v",this.node).getComponent(cc.Label).string=a.split(":")[1][1],this.updateBreakEndsTimer()}},updateBreakEndsTimer:function(){this.unschedule(this.breakEndsTimer),this.breakEndsTimer(),this.schedule(this.breakEndsTimer,1)},breakEndsTimer:function(){if(this.data.currentBreakDetails){var e=GameManager.getMTimeDuration(Number(this.data.currentBreakDetails.breakEndTime));cc.find("Timer/t1/v",this.node).getComponent(cc.Label).string=e.split(":")[0][0],cc.find("Timer/t2/v",this.node).getComponent(cc.Label).string=e.split(":")[0][1],cc.find("Timer/t3/v",this.node).getComponent(cc.Label).string=e.split(":")[1][0],cc.find("Timer/t4/v",this.node).getComponent(cc.Label).string=e.split(":")[1][1],"00:00"==e&&(this.unschedule(this.breakEndsTimer),this.node.active=!1)}else{var t=GameManager.getMTimeDuration(Number(this.data.currentTournamentBreak.breakEndTime));cc.find("Timer/t1/v",this.node).getComponent(cc.Label).string=t.split(":")[0][0],cc.find("Timer/t2/v",this.node).getComponent(cc.Label).string=t.split(":")[0][1],cc.find("Timer/t3/v",this.node).getComponent(cc.Label).string=t.split(":")[1][0],cc.find("Timer/t4/v",this.node).getComponent(cc.Label).string=t.split(":")[1][1],"00:00"==t&&(this.unschedule(this.breakEndsTimer),this.node.active=!1)}}}),cc._RF.pop()},{GameConfig:"GameConfig"}],TournamentBuyin:[function(e,t){"use strict";cc._RF.push(t,"fcc10AA941GZI6qZB6N7RXB","TournamentBuyin"),e("GameConfig").K;var a=e("../../Utilities/ScreensAndPopUps/PopUps/PopUpManager").PopUpType;cc.Class({extends:cc.Component,properties:{chipsLabel:{default:null,type:cc.Label},feesLabel:{default:null,type:cc.Label},feesLabel2:{default:null,type:cc.Label},regButton:{default:null,type:cc.Node},addCashButton:{default:null,type:cc.Node},type:0},onLoad:function(){},onDisable:function(){},onEnable:function(){},onClose:function(){this.node.active=!1},setData:function(e,t){console.log(e),this.tourItemInfo=e,this.type=t;var a=(e.raw.entryFees||0)+(e.raw.houseFees||0);this.chipsLabel.string=Number(GameManager.user.realChips.toFixed(2)),1==this.type||2==this.type?(this.feesLabel.string=(e.raw.entryFees||0)+"(Reg.)",this.feesLabel2.string=(e.raw.houseFees||0)+"(Fee)"):3==this.type?(this.feesLabel.string=e.raw.reentry.reentryPrice.reentryAmount+"(Reg.)",this.feesLabel2.string=e.raw.reentry.reentryPrice.reentryHouseFee+"(Fee)"):4==this.type&&(this.feesLabel.string=(e.raw.entryFees||0)+"(Reg.)",this.feesLabel2.string=(e.raw.houseFees||0)+"(Fee)"),GameManager.user.realChips<a?(this.regButton.active=!1,this.addCashButton.active=!0):(this.regButton.active=!0,this.addCashButton.active=!1)},onReg:function(){this.node.active=!1,1==this.type?"SIT N GO"!=this.tourItemInfo.raw.tournamentType&&window.TournamentLobbyHandler.requestTournamentRegister({tournamentId:this.tourItemInfo.id},function(){},function(e){ServerCom.forceKeepLoading=!1,ServerCom.loading.active=!1,GameManager.popUpManager.show(a.CommonDialog,{title:"Error!",content:e.info},function(){})}):2==this.type?window.TournamentLobbyHandler.requestTournamentLateRegister({tournamentId:this.tourItemInfo.id},function(){},function(e){ServerCom.forceKeepLoading=!1,ServerCom.loading.active=!1,GameManager.popUpManager.show(a.CommonDialog,{title:"Error!",content:e.info},function(){})}):3==this.type?window.TournamentLobbyHandler.requestTournamentReEntry({tournamentId:this.tourItemInfo.id},function(){},function(e){ServerCom.forceKeepLoading=!1,ServerCom.loading.active=!1,GameManager.popUpManager.show(a.CommonDialog,{title:"Error!",content:e.info},function(){})}):4==this.type&&window.TournamentLobbyHandler.requestTournamentSitAndGoRegister({tournamentId:this.tourItemInfo.id},function(){},function(e){ServerCom.forceKeepLoading=!1,ServerCom.loading.active=!1,GameManager.popUpManager.show(a.CommonDialog,{title:"Error!",content:e.info},function(){})})},onAddCash:function(){this.node.active=!1}}),cc._RF.pop()},{"../../Utilities/ScreensAndPopUps/PopUps/PopUpManager":"PopUpManager",GameConfig:"GameConfig"}],TournamentDetailsHandInfo:[function(e,t){"use strict";cc._RF.push(t,"89a82N6hVJN5ZoRnIxdVf6j","TournamentDetailsHandInfo"),cc.Class({extends:cc.Component,properties:{startLbl:{default:null,type:cc.Label},stopLbl:{default:null,type:cc.Label}},onLoad:function(){},setValues:function(){this.startLbl.string="",this.stopLbl.string=""}}),cc._RF.pop()},{}],TournamentDetailsPlayerInfo:[function(e,t){"use strict";cc._RF.push(t,"d8feazLgRZJMasIi4imkK8m","TournamentDetailsPlayerInfo"),cc.Class({extends:cc.Component,properties:{rankLbl:{default:null,type:cc.Label},playerIdLbl:{default:null,type:cc.Label},ChipsLbl:{default:null,type:cc.Label}},onLoad:function(){},setValues:function(e){this.rankLbl.string=e.rank||"",this.playerIdLbl.string=e.userName||"",this.ChipsLbl.string=e.chipsWon}}),cc._RF.pop()},{}],TournamentDetailsPrizeInfo:[function(e,t){"use strict";cc._RF.push(t,"b830fHIMSZJkYjha6y+lK28","TournamentDetailsPrizeInfo"),cc.Class({extends:cc.Component,properties:{placeLbl:{default:null,type:cc.Label},awardIdLbl:{default:null,type:cc.Label},satelliteTicketLbl:{default:null,type:cc.Label},callback:null,callbackData:null},onLoad:function(){},setValues:function(e,t,a,n,i){n===K.TournamentType.Normal?(this.placeLbl.string=a,this.awardIdLbl.string=t,this.satelliteTicketLbl.string=""):(this.placeLbl.string=a+1,this.awardIdLbl.string=t*e.value/100,this.satelliteTicketLbl.string=e.satelliteTicket||""),this.callback=i},setAllPrizeValues:function(e,t){this.placeLbl.string=e.lowerLimit+"-"+e.upperlimit,this.awardIdLbl.string=e.noOfPrizes,this.satelliteTicketLbl.string=e.satelliteTicket||"",this.callbackData=e.prizes,this.callback=t},onClick:function(){this.callback&&this.callback(this.callbackData)}}),cc._RF.pop()},{}],TournamentHandler:[function(e,t){"use strict";cc._RF.push(t,"2d59edfmFtENI/8NwQ0DjCD","TournamentHandler");var a=e("TableHandler"),n=e("PostTypes").Tournament,i=(e("ResponseTypes").GameData,e("PostTypes").JoinChannel,e("PostTypes").GetRegisteredUsersData),o=e("PostTypes").GetTournamentLobbyInfo,s=e("PostTypes").BlindAndPrize,r=e("PostTypes").BlindAndPrizeTournament,l=e("PostTypes").BlindAndPrizeSatellite;cc.Class({extends:a,onLoad:function(){window.TournamentHandler=this,ServerCom.pomeloBroadcast(K.LobbyBroadcastRoute.tournamentLobby,this.onTournamentLobbyBroadcast.bind(this))},registerTournament:function(e,t,a,i){var o=new n(e._id,GameManager.user.playerId,e.gameVersionCount);i?ServerCom.pomeloRequest(K.PomeloAPI.lateRegistration,o,t,a,5e3,!1):ServerCom.pomeloRequest(K.PomeloAPI.registerTournament,o,t,a,5e3,!1)},refreshSideTable:function(e,t,a){var n=new i(GameManager.user.playerId,e._id,e.gameVersionCount);ServerCom.pomeloRequest(K.PomeloAPI.getUsers,n,t,a,5e3,!1)},tournamentLobbyInfo:function(e,t,a){var n=this,i=new o(e._id,e.gameVersionCount),s=null;switch(e.tournamentType){case K.TournamentType.Normal:s=this.blindAndPrizeInfoForTournament;break;case K.TournamentType.Satellite:s=this.blindAndPrizeInfoForSatellite;break;case K.TournamentType.SitNGo:s=this.blindAndPrizeInfo}s(e,function(o){o.success&&ServerCom.pomeloRequest(K.PomeloAPI.getTableStructure,i,function(a){n.refreshSideTable(e,function(n){e.playersInfo=n.result.ranks;var i={tableData:e,lobbyInfo:a,blindInfo:o.result.blindRule[0]||o.result.blindRule};e.tournamentType==K.TournamentType.Normal?i.prizeInfo=o.result.prizeRule&&o.result.prizeRule[0]?o.result.prizeRule:[]:e.tournamentType==K.TournamentType.Satellite?(i.prizeInfo={},i.prizeInfo.parentTournament=o.result.parentTournament,i.prizeInfo.usersPerPrize=o.result.usersPerPrize):i.prizeInfo=o.result.prizeRule&&o.result.prizeRule[0]?o.result.prizeRule[0]:[],i.isPrizeDecided=null===o.result.isPrizeDecided||void 0===o.result.isPrizeDecided||o.result.isPrizeDecided,t(i)}.bind(this),null)}.bind(this),a,5e3,!1,!1)},function(){})},deRegisterTournament:function(e,t,a){var i=new n(e._id,GameManager.user.playerId,e.gameVersionCount);ServerCom.pomeloRequest(K.PomeloAPI.deRegisterTournament,i,t,a,5e3,!1)},checkRegistration:function(e,t,a){var i=new n(e._id,GameManager.user.playerId,e.gameVersionCount);ServerCom.pomeloRequest(K.PomeloAPI.checkRegistration,i,t,a,5e3,!1)},blindAndPrizeInfo:function(e,t,a){var n=new s(e.blindRule,e.gameVersionCount,e.prizeRule);ServerCom.pomeloRequest(K.PomeloAPI.getBlindAndPrize,n,t,a,5e3,!1,!1)},blindAndPrizeInfoForTournament:function(e,t,a){var n=parseInt(Math.random()*(e.maxPlayersForTournament-e.minPlayersForTournament)+e.minPlayersForTournament);e.isLateRegistrationOpened||e.state!=K.SitNGoState.RUNNING||(n=e.enrolledPlayers);var i=new r(e._id,n);ServerCom.pomeloRequest(K.PomeloAPI.getBlindPrizeTournament,i,t,a,5e3,!1,!1)},rebuyInTournament:function(e,t,a){ServerCom.pomeloRequest(K.PomeloAPI.rebuyInTournament,e,t,a,5e3,!1,!1)},blindAndPrizeInfoForSatellite:function(e,t,a){var n=new l(e._id,e.gameVersionCount);ServerCom.pomeloRequest(K.PomeloAPI.getBlindAndPrizeForSatellite,n,t,a,5e3,!1,!1)},onTournamentLobbyBroadcast:function(e){"PRIZEPOOL"==e.event&&e.updated&&this.emit(K.LobbyEvents.prizePoolUpdated)}}),cc._RF.pop()},{PostTypes:"PostTypes",ResponseTypes:"ResponseTypes",TableHandler:"TableHandler"}],TournamentInGameInfo:[function(e,t,a){"use strict";cc._RF.push(t,"95b00j07HpPJIx4HivRfrGo","TournamentInGameInfo");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(s=(o<3?i(s):o>3?i(t,a,s):i(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.TournamentInGameInfo=a.TOUR_LOBBY_MAIN_TAB=a.TOUR_LOBBY_TAB=void 0;var s=cc._decorator,r=s.ccclass,l=s.property,c=e("../data/TournamentResponseTypes");(function(e){e[e.INFO=0]="INFO",e[e.TABLE=1]="TABLE",e[e.BLIND_STRUCT=2]="BLIND_STRUCT"})(a.TOUR_LOBBY_TAB||(a.TOUR_LOBBY_TAB={})),function(e){e[e.STATS=0]="STATS",e[e.TOURNAMENT=1]="TOURNAMENT"}(a.TOUR_LOBBY_MAIN_TAB||(a.TOUR_LOBBY_MAIN_TAB={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tournamentName=null,t.desc=null,t.tabBtns=[],t.tabPage=[],t.tabBtnSprite=[],t.labeActiveColor=[],t.tabBtnsMain=[],t.tabPageMain=[],t.tabBtnSpriteMain=[],t.labeActiveColorMain=[],t}return i(t,e),t.prototype.setTabActive=function(e){this.setButtonActive(e),console.log("@@@@@ setTabActive ",e),this.tabPage.forEach(function(t,a){t.active=e==a,console.log("@@@@@ page ",a,"active ",t.active)})},t.prototype.setTabActiveMain=function(e){this.setButtonActiveMain(e),console.log("@@@@@ setTabActiveMain ",e)},t.prototype.setButtonActive=function(e){var t=this;this.tabBtns.forEach(function(a,n){var i=e==n?0:1;a.children[0].color=t.labeActiveColor[i],a.children[0].getComponent(cc.Label).enableUnderline=e==n})},t.prototype.setButtonActiveMain=function(e){var t=this;this.tabBtnsMain.forEach(function(a,n){var i=e==n?0:1;a.children[0].color=t.labeActiveColor[i],a.children[0].getComponent(cc.Label).enableUnderline=e==n})},t.prototype.onLoad=function(){K.GoToTable||(this.setTabActive(0),this.setTabActiveMain(0),cc.systemEvent.on(K.SocketIOEvent.Lobby.TournamentRefresh,this.onTournamentRefresh.bind(this),this.node))},t.prototype.onBtnClick=function(e,t){parseInt(t),this.setTabActive(t)},t.prototype.onBtnClickMain=function(e,t){parseInt(t),this.setTabActiveMain(t)},t.prototype.onBackBtnClick=function(){this.node.active=!1},t.prototype.onTournamentResultsWinnerBtnClick=function(){this.tournamentResultsWinner.active=!0},t.prototype.onTournamentResultsPlacementBtnClick=function(){this.tournamentResultsPlacement.active=!0},t.prototype.start=function(){this.tourData=this.node.parent.parent.getComponent("PokerModel").tourData,this.updateData()},t.prototype.onTournamentUpdated=function(e){console.log(">>>>>>>>>> onTournamentUpdated in game"),console.log(e)},t.prototype.onTournamentRefresh=function(e){console.log(">>>>>>>>>> onTournamentRefresh in game"),e&&this.tourData&&e._id==this.tourData.id&&(this.tourData=new c.Tournament(e),this.updateData())},t.prototype.onEnable=function(){this.tourData=this.node.parent.parent.getComponent("PokerModel").tourData},t.prototype.updateData=function(){K.GoToTable||(this.updateInfo(),this.updateTables(),this.updatePrize(),this.updatePositionPaid(),this.updateBlindAndPayout())},t.prototype.updateInfo=function(){this.tournamentName.string=this.tourData.tournamentName;var e=new Date(this.tourData.raw.tournamentStartTime);this.tourData.raw.isReentryAllowed?cc.find("Bg/Stats/GameInfo/Level/Rectangle 2963/Reentriesv",this.node).getComponent(cc.Label).string=this.tourData.raw.playerData.reentries+"/"+this.tourData.raw.numberOfReentry:cc.find("Bg/Stats/GameInfo/Level/Rectangle 2963/Reentriesv",this.node).getComponent(cc.Label).string="N/A",this.desc.string=e.toLocaleDateString("en-US",{day:"numeric",month:"short"})+", "+e.toLocaleTimeString("en-US").substr(0,(e.toLocaleTimeString("en-US")+" ").indexOf(" "))+"("+this.tourData.gameVariation+")",cc.find("Bg/Stats/GameInfo/Level/Rectangle 2963/Entrantsv",this.node).getComponent(cc.Label).string=this.tourData.raw.playerRemainingRatio?this.tourData.raw.playerRemainingRatio.inGamePlayers+"/"+this.tourData.raw.playerRemainingRatio.registeredPlayers:"N/A",cc.find("Bg/Stats/GameInfo/Level/Rectangle 2963/Entrantsv2",this.node).getComponent(cc.Label).string=this.tourData.raw.playerRemainingRatio?this.tourData.raw.maxPlayersAllowed-this.tourData.raw.playerRemainingRatio.inGamePlayers+"Remainning":"",cc.find("Bg/Stats/GameInfo/Level/Rectangle 2963/v",this.node).getComponent(cc.Label).string=this.tourData.raw.currentBlindLevel.smallBlind+"/"+this.tourData.raw.currentBlindLevel.bigBlind+"/"+this.tourData.raw.currentBlindLevel.ante+"("+this.tourData.raw.currentBlindLevel.level+")";for(var t=null,a=0;a<this.tourData.raw.blindRule.blindRuleArr.length;a++)if(this.tourData.raw.blindRule.blindRuleArr[a].level==this.tourData.raw.currentBlindLevel.level){t=a==this.tourData.raw.blindRule.blindRuleArr.length-1?this.tourData.raw.blindRule.blindRuleArr[a]:this.tourData.raw.blindRule.blindRuleArr[a+1];break}cc.find("Bg/Stats/GameInfo/Level/Rectangle 2963/v2",this.node).getComponent(cc.Label).string=t.smallBlind+"/"+t.bigBlind+"/"+t.ante+"("+t.level+")",cc.find("Bg/Stats/GameInfo/Stacks Statistics/Rectangle 2963/v",this.node).getComponent(cc.Label).string=0==this.tourData.tablesStack.length?"N/A":this.tourData.maxStack,cc.find("Bg/Stats/GameInfo/Stacks Statistics/Rectangle 2963/v3",this.node).getComponent(cc.Label).string=0==this.tourData.tablesStack.length?"N/A":this.tourData.minStack,cc.find("Bg/Stats/GameInfo/Stacks Statistics/Rectangle 2963/v2",this.node).getComponent(cc.Label).string=0==this.tourData.tablesStack.length?"N/A":this.tourData.avgStack,cc.find("Bg/Stats/GameInfo/Level/Rectangle 2963/v3",this.node).getComponent(cc.Label).string="10:00:00",console.log("!!!!!!!!!!!! updateInfo",this.tourData.currentBlindLevel),this.tourData.currentBlindLevel.nextBlindLevelTime>0?this.updateBlindTimer():cc.find("Bg/Stats/GameInfo/Level/Rectangle 2963/v3",this.node).getComponent(cc.Label).string="00:00","SIT N GO"!=this.tourData.raw.tournamentType?(this.updateBreakTimer(),cc.find("Bg/Stats/GameInfo/Level",this.node).active=!0,cc.find("Bg/Stats/GameInfo/Total Registrations",this.node).active=!0,cc.find("Bg/Stats/GameInfo/Stacks Statistics",this.node).active=!0,cc.find("Bg/Stats/GameInfo/Timebreak",this.node).active=!0,cc.find("Bg/TopBase/MainVariationTab/Detail",this.node).active=!0,cc.find("Bg/TopBase/MainVariationTab/Stats",this.node).active=!0,cc.find("Bg/TopBase/MainVariationTab/StatsSitAndGo",this.node).active=!1,this.tourData.raw.isLateEntryOpen?(cc.find("Bg/Stats/GameInfo/Level/Rectangle 2963/btn/state",this.node).getComponent(cc.Label).string="Late Reg",this.updateEndsInTimer()):cc.find("Bg/Stats/GameInfo/Level/Rectangle 2963/btn/state",this.node).getComponent(cc.Label).string="Running"):(cc.find("Bg/TopBase/MainVariationTab/Detail",this.node).active=!1,cc.find("Bg/TopBase/MainVariationTab/Stats",this.node).active=!1,cc.find("Bg/TopBase/MainVariationTab/StatsSitAndGo",this.node).active=!0,cc.find("Bg/Stats/GameInfo/Level",this.node).active=!0,cc.find("Bg/Stats/GameInfo/Total Registrations",this.node).active=!1,cc.find("Bg/Stats/GameInfo/Stacks Statistics",this.node).active=!0,cc.find("Bg/Stats/GameInfo/Timebreak",this.node).active=!1)},t.prototype.updateBlindTimer=function(){this.unschedule(this.blindTimer),this.blindTimer(),this.schedule(this.blindTimer,1)},t.prototype.blindTimer=function(){var e=GameManager.getMTimeDuration(1e3*Number(this.tourData.raw.currentBlindLevel.nextBlindLevelTime));cc.find("Bg/Stats/GameInfo/Level/Rectangle 2963/v3",this.node).getComponent(cc.Label).string=e},t.prototype.updateBreakTimer=function(){this.unschedule(this.breakTimer),this.breakTimer(),this.schedule(this.breakTimer,1)},t.prototype.breakTimer=function(){var e=GameManager.getMTimeDuration(Number(this.tourData.raw.nextBreakDetails.breakStartTime));cc.find("Bg/Stats/GameInfo/Timebreak/Rectangle 2963/v",this.node).getComponent(cc.Label).string=e},t.prototype.updateTables=function(){cc.find("scrollView/view/content",this.tabPage[2]).removeAllChildren();for(var e=0;e<this.tourData.tablesStack.length;e++){var t=this.tourData.tablesStack[e];if(!(t.playersCount<=0)){var a=null;(a=e%2==0?cc.instantiate(cc.find("scrollView/view/rule_base",this.tabPage[2])):cc.instantiate(cc.find("scrollView/view/rule_base2",this.tabPage[2]))).setPosition(0,0),a.active=!0,cc.find("scrollView/view/content",this.tabPage[2]).addChild(a),cc.find("tableId/frame/tableId",a).getComponent(cc.Label).string=t.tableMockName,cc.find("players/players",a).getComponent(cc.Label).string=t.playersCount,cc.find("min/min",a).getComponent(cc.Label).string=t.minStack,cc.find("max/max",a).getComponent(cc.Label).string=t.maxStack,a.___tableId=t.id.slice(1)}}},t.prototype.updatePrize=function(){function e(e){return["st","nd","rd"][((e+90)%100-10)%10-1]||"th"}cc.find("info_top/v",this.tabPage[1]).getComponent(cc.Label).string=this.tourData.guaranteedValue,cc.find("info_top/v1",this.tabPage[1]).getComponent(cc.Label).string=this.tourData.playersPayout.length,cc.find("Bg/Stats/GameInfo/Level/Rectangle 2963/Paidv",this.node).getComponent(cc.Label).string=this.tourData.playersPayout.length,cc.find("scrollView/view/content",this.tabPage[1]).removeAllChildren();for(var t=null,a=0;a<this.tourData.raw.playersPayout.length;a++){var n=this.tourData.raw.playersPayout[a];this.tourData.raw.payoutType;var i=null;i=a%2==0?cc.instantiate(cc.find("scrollView/view/list",this.tabPage[1])):cc.instantiate(cc.find("scrollView/view/list2",this.tabPage[1])),0==a&&(cc.find("Bg/Stats/GameInfo/Stacks Statistics/Rectangle 2963/1stprize",this.node).getComponent(cc.Label).string=n.payout*this.tourData.guaranteedValue/100),i.setPosition(0,0),i.active=!0,cc.find("scrollView/view/content",this.tabPage[1]).addChild(i),cc.find("viewTitle/rank/rank",i).getComponent(cc.Label).string=n.rank,cc.find("viewTitle/userName/userName",i).getComponent(cc.Label).string=n.playerName,cc.find("viewTitle/value/value",i).getComponent(cc.Label).string=n.payout*this.tourData.guaranteedValue/100,cc.find("Bg/Stats/GameInfo/Stacks Statistics/Rectangle 2963/nextv",this.node).getComponent(cc.Label).string="N/A",t||"-"==n.playerId||(0==a?t="end":(t=this.tourData.raw.playersPayout[a-1],cc.find("Bg/Stats/GameInfo/Stacks Statistics/Rectangle 2963/nextv",this.node).getComponent(cc.Label).string=t.payout*this.tourData.guaranteedValue/100))}this.tourData.raw.payoutType,cc.find("info_top/v2",this.tabPage[1]).getComponent(cc.Label).string=t?"end"!=t?t.rank+e(t.rank)+"-"+t.payoutAmount:"--":this.tourData.raw.playersPayout[this.tourData.raw.playersPayout.length-1].rank+e(this.tourData.raw.playersPayout[this.tourData.raw.playersPayout.length-1].rank)+"-"+this.tourData.raw.playersPayout[this.tourData.raw.playersPayout.length-1].payoutAmount},t.prototype.searchPlayerTextChanged=function(e){this.playerFilter=e.trim(),this.updatePositionPaid()},t.prototype.getUsernameRe=function(e,t){for(var a=0,n=e+1;n<this.tourData.leaderBoard.length;n++)this.tourData.leaderBoard[n].playerName==t&&(a+=1);return 0==a?t:t+"("+a+")"},t.prototype.updatePositionPaid=function(){cc.find("scrollView/view/content",this.tabPage[0]).removeAllChildren();for(var e=0,t=0;t<this.tourData.leaderBoard.length;t++){var a=this.tourData.leaderBoard[t];0==e&&a.playerId==GameManager.user.playerId&&(e=t+1);var n=null;(n=t%2==0?cc.instantiate(cc.find("scrollView/view/list",this.tabPage[0])):cc.instantiate(cc.find("scrollView/view/list2",this.tabPage[0]))).setPosition(0,0),n.active=!0,cc.find("scrollView/view/content",this.tabPage[0]).addChild(n),"Open To Register"==this.tourData.state?cc.find("viewTitle/rank/rank",n).getComponent(cc.Label).string="1":cc.find("viewTitle/rank/rank",n).getComponent(cc.Label).string=t+1,cc.find("viewTitle/userName/userName",n).getComponent(cc.Label).string=this.getUsernameRe(t,a.playerName),cc.find("viewTitle/value/value",n).getComponent(cc.Label).string=a.chips}0!=e?(cc.find("info_top/v",this.tabPage[0]).getComponent(cc.Label).string=e,cc.find("Bg/Stats/GameInfo/Level/Rectangle 2963/vrank",this.node).getComponent(cc.Label).string=e+"/"+this.tourData.leaderBoard.length):cc.find("Bg/Stats/GameInfo/Level/Rectangle 2963/vrank",this.node).getComponent(cc.Label).string="N/A"},t.prototype.updateBlindAndPayout=function(){cc.find("BlindStruct/ScrollView/view/content",this.tabPage[3]).removeAllChildren();for(var e=0;e<this.tourData.blindRule.blindRuleArr.length;e++){var t=this.tourData.blindRule.blindRuleArr[e],a=null;(a=e%2==0?cc.instantiate(cc.find("BlindStruct/ScrollView/view/rule_base",this.tabPage[3])):cc.instantiate(cc.find("BlindStruct/ScrollView/view/rule_base2",this.tabPage[3]))).setPosition(0,0),a.active=!0,cc.find("BlindStruct/ScrollView/view/content",this.tabPage[3]).addChild(a),cc.find("level/level",a).getComponent(cc.Label).string=t.level,cc.find("blind/blind",a).getComponent(cc.Label).string=t.smallBlind+"/"+t.bigBlind,cc.find("ante/ante",a).getComponent(cc.Label).string=t.ante,cc.find("duration/duration",a).getComponent(cc.Label).string=60*t.minutes}},t.prototype.reset=function(){cc.systemEvent.off(K.SocketIOEvent.Lobby.TournamentRefresh),this.node&&this.node.targetOff&&this.node.targetOff(this.node)},t.prototype.onDestroy=function(){cc.systemEvent.off(K.SocketIOEvent.Lobby.TournamentRefresh),this.node&&this.node.targetOff&&this.node.targetOff(this.node)},t.prototype.updateEndsInTimer=function(){this.unschedule(this.endsInTimer),this.endsInTimer(),this.schedule(this.endsInTimer,1)},t.prototype.endsInTimer=function(){var e=GameManager.getMTimeDuration(1e3*Number(this.tourData.raw.lateRegistrationEndTime));cc.find("Bg/Stats/GameInfo/Level/Rectangle 2963/latev",this.node).getComponent(cc.Label).string="Ends in "+e,"00:00"==e&&(this.unschedule(this.endsInTimer),cc.find("Bg/Stats/GameInfo/Level/Rectangle 2963/btn/state",this.node).getComponent(cc.Label).string="Running",cc.find("Bg/Stats/GameInfo/Level/Rectangle 2963/latev",this.node).getComponent(cc.Label).string="")},o([l(cc.Label)],t.prototype,"tournamentName",void 0),o([l(cc.Label)],t.prototype,"desc",void 0),o([l(cc.Node)],t.prototype,"tabBtns",void 0),o([l(cc.Node)],t.prototype,"tabPage",void 0),o([l(cc.SpriteFrame)],t.prototype,"tabBtnSprite",void 0),o([l(cc.Color)],t.prototype,"labeActiveColor",void 0),o([l(cc.Node)],t.prototype,"tabBtnsMain",void 0),o([l(cc.Node)],t.prototype,"tabPageMain",void 0),o([l(cc.SpriteFrame)],t.prototype,"tabBtnSpriteMain",void 0),o([l(cc.Color)],t.prototype,"labeActiveColorMain",void 0),o([r],t)}(cc.Component);a.TournamentInGameInfo=d,cc._RF.pop()},{"../data/TournamentResponseTypes":"TournamentResponseTypes"}],TournamentInfoBlindInfo:[function(e,t){"use strict";cc._RF.push(t,"40d9fha7r9H6avfR7FIVU0M","TournamentInfoBlindInfo"),cc.Class({extends:cc.Component,properties:{rankLbl:{default:null,type:cc.Label},blindsLbl:{default:null,type:cc.Label},anteLbl:{default:null,type:cc.Label},minutesLbl:{default:null,type:cc.Label},timeBankLbl:{default:null,type:cc.Label}},onLoad:function(){},setValues:function(e){this.rankLbl.string=e.level||"",this.blindsLbl.string=e.smallBlind+"/"+e.bigBlind||"",this.anteLbl.string=e.ante||"",this.minutesLbl.string=e.minutes||""}}),cc._RF.pop()},{}],TournamentInfo:[function(e,t){"use strict";cc._RF.push(t,"73cccUKo9pFzLyxpgCnydPg","TournamentInfo"),e("GameConfig").K,cc.Class({extends:cc.Component,properties:{pokerPresenter:{default:null,type:cc.Node}},onLoad:function(){},onDisable:function(){},onEnable:function(){},onClose:function(){this.node.active=!1,this.pokerPresenter.getComponent("PokerPresenter").model.kickPlayerOutOfTheGame(this.pokerPresenter.getComponent("PokerPresenter").model),this.pokerPresenter.getComponent("PokerPresenter").leaveTable()},setData:function(e){this.data=e,cc.find("Title",this.node).getComponent(cc.Label).string=this.data.title,cc.find("Content",this.node).getComponent(cc.Label).string=this.data.content}}),cc._RF.pop()},{GameConfig:"GameConfig"}],TournamentLobbyDetailsMain:[function(e,t){"use strict";cc._RF.push(t,"2603aNbWIpLPp/Pb8k8rx9P","TournamentLobbyDetailsMain");var a=e("TournamentDetailsPrizeInfo"),n=e("TournamentDetailsPlayerInfo"),i=e("PopUpManager").PopUpType,o=e("TableContent");cc.Class({extends:cc.Component,properties:{playerInfoOddPrefab:{default:null,type:cc.Prefab},playerInfoEvenPrefab:{default:null,type:cc.Prefab},playerInfoGrid:{default:null,type:cc.Node},prizeOddPrefab:{default:null,type:cc.Prefab},prizeEvenPrefab:{default:null,type:cc.Prefab},prizeGrid:{default:null,type:cc.Node},registerPrizeContainer:{default:null,type:cc.Node},runningPrizeContainer:{default:null,type:cc.Node},registeredPrizeGrid:{default:null,type:cc.Node},registeredSpecificGrid:{default:null,type:cc.Node},satellitePrizeContainer:{default:null,type:cc.Node},satelliteValLbl:{default:null,type:cc.Label},satelliteParentLbl:{default:null,type:cc.RichText},tournamentCurrentInformation:{default:null,type:cc.Node},satelliteParent:null,setPlayersRankFunc:null},onLoad:function(){this.setPlayersRankFunc=this.setPlayersRank1.bind(this),ServerCom.pomeloBroadcast(K.LobbyBroadcastRoute.tableView,this.setPlayersRankFunc)},setPlayersRank1:function(e){e.tournamentId==o.prevSelection.channelData._id&&this.setPlayersRank(e.updated.ranks)},onDestroy:function(){pomelo.off(K.LobbyBroadcastRoute.tableView,this.setPlayersRankFunc)},setTableData:function(e,t,a,n,i){var o;(n===K.TournamentType.Normal?(this.registerPrizeContainer.active=!i,this.runningPrizeContainer.active=i,this.satellitePrizeContainer.active=!1):n==K.TournamentType.Satellite?(this.registerPrizeContainer.active=!1,this.runningPrizeContainer.active=!1,this.satellitePrizeContainer.active=!0):(this.registerPrizeContainer.active=!1,this.runningPrizeContainer.active=!0,this.satellitePrizeContainer.active=!1),this.setPlayersRank(e),GameManager.removeAllChildren(this.registeredPrizeGrid),GameManager.removeAllChildren(this.prizeGrid),GameManager.removeAllChildren(this.registeredSpecificGrid),n==K.TournamentType.Satellite)?(this.satelliteValLbl.string="One entry for every "+t.parentTournament.buyIn+" in the prize pool will be awarded for :",this.satelliteParentLbl.string="<u>"+t.parentTournament.channelName+"</>",this.satelliteParent=t.parentTournament):(o=void 0!==t.list?t.list:t,this.handlePrizeTable(o,i,n,a))},setPlayersRank:function(e){GameManager.removeAllChildren(this.playerInfoGrid);for(var t=0;t<e.length;t++){var a=null;a=t%2==0?cc.instantiate(this.playerInfoEvenPrefab):cc.instantiate(this.playerInfoOddPrefab),this.playerInfoGrid.addChild(a),a.getComponent(n).setValues(e[t])}},handlePrizeTable:function(e,t,a,n){var i;e.length>0&&(i=a===K.TournamentType.Normal?e:e[0].playerprizepercent,a===K.TournamentType.Normal?t?this.showSpecificPrizes(i,a,n,this.prizeGrid):this.showAllPrizes(i):this.showSpecificPrizes(i,a,n,this.prizeGrid))},showSpecificPrizes:function(e,t,n,i,o){void 0===t&&(t=K.TournamentType.Normal),void 0===n&&(n=0),void 0===i&&(i=this.registeredSpecificGrid),void 0===o&&(o=function(){}),GameManager.removeAllChildren(this.prizeGrid),GameManager.removeAllChildren(this.registeredSpecificGrid);for(var s=0;s<e.length;s++){var r=null;r=s%2==0?cc.instantiate(this.prizeEvenPrefab):cc.instantiate(this.prizeOddPrefab),i.addChild(r),t===K.TournamentType.Normal?r.getComponent(a).setValues(e[s],e[s].prizeMoney,e[s].position,t,o):r.getComponent(a).setValues(e[s],n,s,t,o)}},showAllPrizes:function(e){for(var t=0;t<e.length;t++){var n=null;n=t%2==0?cc.instantiate(this.prizeEvenPrefab):cc.instantiate(this.prizeOddPrefab),this.registeredPrizeGrid.addChild(n),n.getComponent(a).setAllPrizeValues(e[t],this.showSpecificPrizes.bind(this))}this.showSpecificPrizes(e[0].prizes)},showParentTourLobby:function(){this.satelliteParent&&TournamentHandler.tournamentLobbyInfo(this.satelliteParent,function(e){e.tableData&&(GameManager.popUpManager.hide(i.TournamentLobbyInfoPopup,function(){}),GameManager.popUpManager.show(i.TournamentLobbyInfoPopup,e,function(){}))}.bind(this),function(){}.bind(this))}}),cc._RF.pop()},{PopUpManager:"PopUpManager",TableContent:"TableContent",TournamentDetailsPlayerInfo:"TournamentDetailsPlayerInfo",TournamentDetailsPrizeInfo:"TournamentDetailsPrizeInfo"}],TournamentLobbyHandler:[function(e,t){"use strict";cc._RF.push(t,"a30a0vLJEJK364OYDarlS9l","TournamentLobbyHandler");var a=e("TableHandler");e("PostTypes").Tournament,e("ResponseTypes").GameData,e("PostTypes").JoinChannel,e("PostTypes").GetRegisteredUsersData,e("PostTypes").GetTournamentLobbyInfo,e("PostTypes").BlindAndPrize,e("PostTypes").BlindAndPrizeTournament,e("PostTypes").BlindAndPrizeSatellite,cc.Class({extends:a,onLoad:function(){window.TournamentLobbyHandler=this},init:function(){console.log("init")},requestTableLobbyList:function(e,t,a){ServerCom.socketIORequest(K.SocketIOAPI.Lobby.GetAllTableList,e,t,a,null,!1)},requestTournamentLobbyList:function(e,t,a){ServerCom.socketIORequest(K.SocketIOAPI.Lobby.GetAllTournamentList,e,t,a,null,!1)},requestTournamentFreeRoll:function(e,t,a){ServerCom.socketIORequest(K.SocketIOAPI.Lobby.GetAllTournamentList,{isFreeRoll:!0},t,a,null,!1)},requestTournamentSitAndGoStages:function(e,t,a){ServerCom.socketIORequest(K.SocketIOAPI.Lobby.GetSitNGoStages,e,t,a,null,!1)},requestTournamentSitAndGoInStage:function(e,t,a){ServerCom.socketIORequest(K.SocketIOAPI.Lobby.GetSitNGoTournamentsInStage,e,t,a,null,!1)},requestTournamentSitAndGoRegister:function(e,t,a){ServerCom.socketIORequest(K.SocketIOAPI.Lobby.RegisterSNG,e,t,a,null,!1,!0)},requestTournamentRegister:function(e,t,a){ServerCom.socketIORequest(K.SocketIOAPI.Lobby.RegisterTournament,e,t,a,null,!1,!0)},requestTournamentDeRegister:function(e,t,a){ServerCom.socketIORequest(K.SocketIOAPI.Lobby.DeRegisterTournament,e,t,a,null,!1,!0)},requestTournamentLateRegister:function(e,t,a){ServerCom.socketIORequest(K.SocketIOAPI.Lobby.LateRegisterTournament,e,t,a)},requestTournamentJoinTable:function(e,t,a){ServerCom.socketIORequest(K.SocketIOAPI.Lobby.TournamentJoinTable,e,t,a)},requestTournamentEnterTable:function(e,t,a,n){void 0===n&&(n=""),ServerCom.forceKeepLoading=!0,ServerCom.socketIORequest(K.SocketIOAPI.Lobby.TournamentEnterTable,e,t,a,null,!0,!0,n)},requestTournamentReEntry:function(e,t,a){ServerCom.socketIORequest(K.SocketIOAPI.Lobby.ReEntryTournament,e,t,a)},requestTournamentData:function(e,t,a){ServerCom.socketIORequest("tournamentLobbyEvent|GetTournamentData",e,t,a,null,!1)}}),cc._RF.pop()},{PostTypes:"PostTypes",ResponseTypes:"ResponseTypes",TableHandler:"TableHandler"}],TournamentLobbyInfoMain:[function(e,t){"use strict";cc._RF.push(t,"f23223FiPxDn5aYkC7pBLYX","TournamentLobbyInfoMain");var a=e("TournamentInfoBlindInfo");cc.Class({extends:cc.Component,properties:{reBuyLbl:{default:null,type:cc.Label},addOn:{default:null,type:cc.Label},vPP:{default:null,type:cc.Label},tickets:{default:null,type:cc.Label},addOnValue:{default:null,type:cc.Label},vPPValue:{default:null,type:cc.Label},bountyLbl:{default:null,type:cc.Label},breaksLbl:{default:null,type:cc.Label},minPlayersLbl:{default:null,type:cc.Label},playersPerTableLbl:{default:null,type:cc.Label},timeBreakLbl:{default:null,type:cc.Label},gameLbl:{default:null,type:cc.Label},unregistrationLbl:{default:null,type:cc.Label},lateRegistrationLbl:{default:null,type:cc.Label},chatLangLbl:{default:null,type:cc.Label},satelliteValLbl:{default:null,type:cc.Label},blindInfoOddPrefab:{default:null,type:cc.Prefab},blindInfoEvenPrefab:{default:null,type:cc.Prefab},blindInfoParent:{default:null,type:cc.Node}},onLoad:function(){},setTableData:function(e,t,a){void 0===a&&(a="");var n=0,i=0;if(this.playersPerTableLbl.string="Minimum Required "+e.minPlayersForTournament+" Maximum of "+e.maxPlayersForTournament+"players.",this.gameLbl.string=e.channelVariation,this.chatLangLbl.node.parent.active=!1,this.unregistrationLbl.string="Unregistration always allowed before the tournament starts.",this.satelliteValLbl.node.parent.active=!1,e.tournamentType!==K.TournamentType.SitNGo){this.lateRegistrationLbl.node.parent.active=!0,this.breaksLbl.node.parent.active=!0;var o;o=e.lateRegistrationAllowed?"Late registration available for the first"+e.lateRegistrationTime+" min of play.":"Late registration not allowed for this tournament.",this.lateRegistrationLbl.string=o,this.breaksLbl.string="There is a "+e.tournamentBreakTime+" minute break every"+e.tournamentBreakDuration+" minutes.",n=e.minPlayersForTournament,i=e.maxPlayersForTournament,e.tournamentType==K.TournamentType.Satellite&&(this.satelliteValLbl.node.parent.active=!0,this.satelliteValLbl.string="Qualify for "+a)}else this.lateRegistrationLbl.node.parent.active=!1,this.breaksLbl.node.parent.active=!1,n=e.minPlayers,i=e.maxPlayers;this.minPlayersLbl.string="Minimum players required are"+n+", and maximum of "+i+" players.",this.timeBreakLbl.string="There is a "+e.extraTimeAllowed+" second time bank available for this tournament",this.setBlindInfo(t)},setBlindInfo:function(e){GameManager.removeAllChildren(this.blindInfoParent);for(var t=0;t<e.list.length;t++){var n=null;n=t%2==0?cc.instantiate(this.blindInfoEvenPrefab):cc.instantiate(this.blindInfoOddPrefab),this.blindInfoParent.addChild(n),n.getComponent(a).setValues(e.list[t])}}}),cc._RF.pop()},{TournamentInfoBlindInfo:"TournamentInfoBlindInfo"}],TournamentLobbyInfoPopup:[function(e,t){"use strict";cc._RF.push(t,"8b17eUpBeVLI6IOeCMkUWWG","TournamentLobbyInfoPopup");var a=e("PopUpManager").PopUpManager,n=e("PopUpManager").PopUpType,i=e("PopUpBase"),o=(e("Checkbox"),e("TournamentLobbyInfoMain")),s=e("TournamentLobbyDetailsMain"),r=e("TournamentLobbyTableMain");e("TableContent"),cc.Class({extends:i,properties:{popUpManager:{default:null,type:a},tournNameLbl:{default:null,type:cc.Label},startsAtLbl:{default:null,type:cc.Label},startsAtHeaderLbl:{default:null,type:cc.Label},runningForLbl:{default:null,type:cc.Label},buyInLbl:{default:null,type:cc.Label},prizePoolLbl:{default:null,type:cc.Label},entriesLbl:{default:null,type:cc.Label},playersGrid:{default:null,type:cc.Node},prizeStructureGrid:{default:null,type:cc.Node},handForHandGrid:{default:null,type:cc.Node},blindStructureGrid:{default:null,type:cc.Node},tournInfoGrid:{default:null,type:cc.Node},runningTablesGrid:{default:null,type:cc.Node},playersOnTableGrid:{default:null,type:cc.Node},tablePlayersGrid:{default:null,type:cc.Node},playerData:[],blindInfo:[],prizeInfo:[],tournamentInfoTab:{default:null,type:o},tournamentDetailTab:{default:null,type:s},tournamentTableTab:{default:null,type:r},timerSchedule:null,tableId:null},onEnable:function(){pomelo.on(K.LobbyBroadcastRoute.tableUpdate,this.updateEntries.bind(this))},updateEntries:function(e){e._id==this.tableId&&(this.entriesLbl.string=e.updated.enrolledPlayers)},onDisable:function(){pomelo.off(K.LobbyBroadcastRoute.tableUpdate,this.updateEntries.bind(this))},onShow:function(e){if(this.tableId=e.tableData._id,this.startTimer(!1),this.tournamentTableTab.node.active=!1,this.tournamentDetailTab.node.active=!1,this.tournamentInfoTab.node.active=!1,null!=e){e.tableData.playersInfo=e.tableData.playersInfo?e.tableData.playersInfo:[];var t=e.lobbyInfo.result?e.lobbyInfo.result.channels:[];e.tableData.state=e.lobbyInfo.tournamentState,this.tournNameLbl.string=e.tableData.channelName,this.entriesLbl.string=e.tableData.enrolledPlayers,e.tableData.prizePool=e.tableData.prizePool?e.tableData.prizePool:e.tableData.enrolledPlayers*e.tableData.entryfees,this.prizePoolLbl.string=e.tableData.prizePool||"0",this.buyInLbl.string=e.tableData.entryfees+e.tableData.housefees+e.tableData.bountyfees,e.lobbyInfo.tournamentState==K.SitNGoState.RUNNING?(this.startTimer(!0,e.lobbyInfo.runningFor),this.runningForLbl.string="Running for "+GameManager.getTimeDuration(e.lobbyInfo.runningFor)):this.runningForLbl.string="",e.tableData.tournamentType===K.TournamentType.SitNGo?(this.startsAtHeaderLbl.node.active=!1,this.startsAtLbl.string=""):(this.startsAtHeaderLbl.node.active=!0,this.startsAtLbl.string=GameManager.getTimeByMilli(e.tableData.tournamentStartTime)),this.tournamentTableTab.setTableData(t,e.tableData.playersInfo,e.tableData,this.onPokerLobby.bind(this));var a=e.tableData.tournamentType==K.TournamentType.Satellite?e.prizeInfo.parentTournament.channelName:"";this.tournamentInfoTab.setTableData(e.tableData,e.blindInfo,a);var n=e.isPrizeDecided;this.tournamentDetailTab.setTableData(e.tableData.playersInfo,e.prizeInfo,e.tableData.prizePool,e.tableData.tournamentType,n)}this.node.getComponent("TabBtnUtil").onShowTab_03()},onHide:function(){this.startTimer(!1)},onPokerLobby:function(){this.startTimer(!1),this.popUpManager.hide(n.TournamentLobbyInfoPopup,function(){})},onDetails:function(){this.activateTab(2)},onTable:function(){this.activateTab(1)},onInformation:function(){this.activateTab(0)},onObserve:function(){},startTimer:function(e,t){void 0===t&&(t=0),e?this.timerSchedule=setInterval(function(){t+=1e3,this.runningForLbl.string="Running for "+GameManager.getTimeDuration(t)}.bind(this),1e3):this.timerSchedule&&clearInterval(this.timerSchedule)}}),cc._RF.pop()},{Checkbox:"Checkbox",PopUpBase:"PopUpBase",PopUpManager:"PopUpManager",TableContent:"TableContent",TournamentLobbyDetailsMain:"TournamentLobbyDetailsMain",TournamentLobbyInfoMain:"TournamentLobbyInfoMain",TournamentLobbyTableMain:"TournamentLobbyTableMain"}],TournamentLobbyListItem:[function(e,t,a){"use strict";cc._RF.push(t,"eb723G/aLVGeqPglc/lxwnY","TournamentLobbyListItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(s=(o<3?i(s):o>3?i(t,a,s):i(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.TOURNAMENT_ITEM_TYPE=void 0;var s=e("../../globals"),r=e("../../DataFormats/ResponseTypes"),l=e("../../Utilities/ScreensAndPopUps/PopUps/PopUpManager"),c=cc._decorator,d=c.ccclass,h=c.property;(function(e){e[e.NONE=0]="NONE",e[e.ANNOUNCED=1]="ANNOUNCED",e[e.REGISTERING=2]="REGISTERING",e[e.LATE_REG=3]="LATE_REG",e[e.RUNNING=4]="RUNNING",e[e.COMPLETED=5]="COMPLETED",e[e.CANCELLED=6]="CANCELLED"})(a.TOURNAMENT_ITEM_TYPE||(a.TOURNAMENT_ITEM_TYPE={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bg_1=null,t.bg_2=null,t.highlightBg=null,t.tournamentName=null,t.tournamentType=null,t.time=null,t.buyIn=null,t.prize=null,t.btnLabel=null,t.btnSprite=null,t.bgSprite=null,t.btnFrame=[],t.bgFrame=[],t.tournamentBuyin=null,t.dblClk=!1,t.tourItemInfo=null,t.isTableExisting=!1,t.isTournamentExisting=!1,t.tournamentIndexFound=-1,t.indexFound=-1,t}return i(t,e),t.prototype.onLoad=function(){this.setHighlight(!1);var e=this;this.node.on("touchstart",function(){e.dblClk?e.dblClk=!1:(e.dblClk=!0,setTimeout(function(){e.dblClk=!1},300))},this.node)},t.prototype.start=function(){},t.prototype.initIndex=function(){},t.prototype.initInfo=function(e){if(this.tourItemInfo=e,"SIT N GO"!=e.raw.tournamentType?this.tournamentName.string=this.tourItemInfo.tournamentName:(this.tournamentName.string=this.tourItemInfo.raw.stageName,ServerCom.socketIOBroadcast(K.SocketIOBroadcast.Lobby.TournamentLobbyResponseEvent,this.onTournamentLobbyResponseEvent.bind(this))),this.btnLabel.string=this.tourItemInfo.state,this.unschedule(this.breakEndsTimer),this.unschedule(this.startsInTimer),this.unschedule(this.endsInTimer),"SIT N GO"!=e.raw.tournamentType||(cc.find("RoomInfo/TimeGroup/TimeLabel",this.node).active=!0),"Open To Register"==this.tourItemInfo.state?(e.raw.playerData?(this.btnLabel.string="Registered",this.btnSprite.spriteFrame=this.btnFrame[1],"SIT N GO"==e.raw.tournamentType&&(e.raw.playerData.tableId?(this.btnLabel.string="Enter Table",this.btnSprite.spriteFrame=this.btnFrame[2]):(this.btnLabel.string="Deregister",this.btnSprite.spriteFrame=this.btnFrame[2]))):(e.raw.tournamentType,this.btnLabel.string="Register",this.btnSprite.spriteFrame=this.btnFrame[1]),GameManager.isMobile):"PUBLISHED"==this.tourItemInfo.state?("SIT N GO"==e.raw.tournamentType?this.btnLabel.string="Register":this.btnLabel.string="Upcoming",this.btnSprite.spriteFrame=this.btnFrame[0]):"RUNNING"==this.tourItemInfo.state?("SIT N GO"==e.raw.tournamentType?this.btnLabel.string="Running":GameManager.isMobile,this.btnSprite.spriteFrame=this.btnFrame[2],GameManager.isMobile,e.raw.playerData&&"ELIMINATED"!=this.tourItemInfo.raw.playerData.status&&("SIT N GO"==e.raw.tournamentType?this.btnLabel.string="Registered":GameManager.isMobile,this.btnSprite.spriteFrame=this.btnFrame[1],"SIT N GO"==e.raw.tournamentType&&e.raw.playerData.tableId&&(this.btnLabel.string="Enter Table",this.btnSprite.spriteFrame=this.btnFrame[2]))):"Open To Late Register"==this.tourItemInfo.state?(e.raw.tournamentType,this.btnLabel.string="Late Reg",this.btnSprite.spriteFrame=this.btnFrame[3],GameManager.isMobile):"CLOSED"!=this.tourItemInfo.state&&"CANCELED"!=this.tourItemInfo.state||(this.btnLabel.string="CLOSED"==this.tourItemInfo.state?"Closed":"Canceled",this.btnSprite.spriteFrame=this.btnFrame[4],cc.find(GameManager.isMobile?"Btn/CountDown/info":"RoomInfo/BuyInGroup/CountDown/info",this.node).getComponent(cc.Label).string="",cc.find(GameManager.isMobile?"Btn/CountDown/time":"RoomInfo/BuyInGroup/CountDown/time",this.node).getComponent(cc.Label).string=""),cc.find("RoomInfo/TimeGroup/Layout/Label1",this.node).getComponent(cc.Label).string=e.gameVariation,cc.find("RoomInfo/TimeGroup/Layout/Label2",this.node).getComponent(cc.Label).string=e.isReentryAllowed?"RE":" ",cc.find(GameManager.isMobile?"RoomInfo/TimeGroup/Layout/Label3":"RoomInfo/TimeGroup/Layout2/Label3",this.node).getComponent(cc.Label).string=e.maxPlayers,cc.find(GameManager.isMobile?"RoomInfo/TimeGroup/Layout/Label4":"RoomInfo/TimeGroup/Layout2/Label4",this.node).getComponent(cc.Label).string=e.actionTypeFullName,"SIT N GO"!=e.raw.tournamentType){var t=new Date(e.raw.tournamentStartDetails.startTime);t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2),("0"+t.getHours()).slice(-2),("0"+t.getMinutes()).slice(-2),("0"+t.getSeconds()).slice(-2),cc.find("RoomInfo/TimeGroup/TimeLabel",this.node).getComponent(cc.Label).string=t.toLocaleDateString("en-US",{day:"numeric",month:"short"})+", "+t.toLocaleTimeString("en-US").substr(0,(t.toLocaleTimeString("en-US")+" ").indexOf(" ")),"RUNNING"==this.tourItemInfo.state?cc.find("RoomInfo/NameGroup/Layout/Entries/PrizeLabel",this.node).getComponent(cc.Label).string=e.raw.playerRemainingRatio.inGamePlayers+"/"+e.raw.playerRemainingRatio.registeredPlayers:cc.find("RoomInfo/NameGroup/Layout/Entries/PrizeLabel",this.node).getComponent(cc.Label).string=e.raw.playerRemainingRatio.registeredPlayers}else cc.find("RoomInfo/NameGroup/Layout/Entries/PrizeLabel",this.node).getComponent(cc.Label).string=e.raw.playerRemainingRatio.inGamePlayers+"/"+e.raw.maxPlayers,cc.find("RoomInfo/TimeGroup/TimeLabel",this.node).getComponent(cc.Label).string="";if(cc.find("RoomInfo/BuyInGroup/BuyInLayout/Label",this.node).getComponent(cc.Label).string=(e.raw.entryFees||0)+(e.raw.houseFees||0),cc.find("RoomInfo/NameGroup/Layout/PrizeLabel",this.node).getComponent(cc.Label).string=e.guaranteedValue,cc.find(GameManager.isMobile?"Btn/CountDown/info":"RoomInfo/BuyInGroup/CountDown/info",this.node).getComponent(cc.Label).string="",cc.find(GameManager.isMobile?"Btn/CountDown/time":"RoomInfo/BuyInGroup/CountDown/time",this.node).getComponent(cc.Label).string="","SIT N GO"!=e.raw.tournamentType){if("CLOSED"==this.tourItemInfo.state||"CANCELED"==this.tourItemInfo.state);else if(this.tourItemInfo.raw.playerData)this.tourItemInfo.raw.playerData.tableId?this.tourItemInfo.raw.isInBreak?(this.btnLabel.string="Break Time",this.btnSprite.spriteFrame=this.btnFrame[1]):"ELIMINATED"==this.tourItemInfo.raw.playerData.status?(this.btnLabel.string="Eliminated",this.btnSprite.spriteFrame=this.btnFrame[1],this.unschedule(this.endsInTimer),cc.find("Btn/CountDown/time",this.node).getComponent(cc.Label).string=""):(this.btnLabel.string="Registered",this.btnSprite.spriteFrame=this.btnFrame[1]):"Open To Register"==this.tourItemInfo.state&&this.updateStartsInTimer();else if(this.tourItemInfo.raw.player_list){for(var a in this.tourItemInfo.raw.player_list)if(this.tourItemInfo.raw.player_list[a].playerId==GameManager.user.playerId&&"ACTIVE"==this.tourItemInfo.raw.player_list[a].status)break}else this.tourItemInfo.raw.isInBreak?(this.btnLabel.string="Break Time",this.btnSprite.spriteFrame=this.btnFrame[1]):this.tourItemInfo.raw.isLateEntryOpen?this.updateEndsInTimer():"Open To Register"==this.tourItemInfo.state?"SIT N GO"!=e.raw.tournamentType&&this.updateStartsInTimer():"PUBLISHED"==this.tourItemInfo.state&&this.updateRegStartsInTimer();this.btnSprite.node.getComponent(cc.Button).interactable=!1}else this.btnSprite.node.getComponent(cc.Button).interactable=!0;if(cc.find("RoomInfo/TimeGroup/TimeLabel",this.node).active=!0,cc.find("RoomInfo/TimeGroup/TimeLabel",this.node).getComponent(cc.Label).string=e.raw.payoutType,this.tourItemInfo.btnLabel=this.btnLabel,this.tourItemInfo.node=this.node,cc.find("icon",this.node).active=!1,this.tourItemInfo.raw.roomImage){var n=this;cc.loader.load(K.ServerAddress.assets_server_s+this.tourItemInfo.raw.roomImage,function(e,t){e||(cc.find("icon",n.node).active=!0,cc.find("icon",n.node).getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t))})}},t.prototype.updateBreakEndsTimer=function(){this.unschedule(this.startsInTimer),this.unschedule(this.endsInTimer),this.unschedule(this.regStartsInTimer),this.unschedule(this.breakEndsTimer),this.breakEndsTimer(),this.schedule(this.breakEndsTimer,1)},t.prototype.breakEndsTimer=function(){var e=GameManager.getMTimeDuration(Number(this.tourItemInfo.raw.currentTournamentBreak.breakEndTime));cc.find(GameManager.isMobile?"Btn/CountDown/info":"RoomInfo/BuyInGroup/CountDown/info",this.node).getComponent(cc.Label).string="Ends in:",cc.find(GameManager.isMobile?"Btn/CountDown/time":"RoomInfo/BuyInGroup/CountDown/time",this.node).getComponent(cc.Label).string=e},t.prototype.updateRegStartsInTimer=function(){this.unschedule(this.startsInTimer),this.unschedule(this.endsInTimer),this.unschedule(this.regStartsInTimer),this.unschedule(this.breakEndsTimer),this.regStartsInTimer(),this.schedule(this.regStartsInTimer,1)},t.prototype.regStartsInTimer=function(){var e=GameManager.getMTimeDuration(Number(new Date(this.tourItemInfo.raw.registrationBeforeStarttime))),t=new Date(this.tourItemInfo.raw.registrationBeforeStarttime);e=t.toDateString().split(" ")[1]+" "+t.getDate()+" "+e,cc.find(GameManager.isMobile?"Btn/CountDown/info":"RoomInfo/BuyInGroup/CountDown/info",this.node).getComponent(cc.Label).string="Reg opens in:",cc.find(GameManager.isMobile?"Btn/CountDown/time":"RoomInfo/BuyInGroup/CountDown/time",this.node).getComponent(cc.Label).string=e},t.prototype.updateStartsInTimer=function(){this.unschedule(this.startsInTimer),this.unschedule(this.endsInTimer),this.unschedule(this.regStartsInTimer),this.unschedule(this.breakEndsTimer),this.startsInTimer(),this.schedule(this.startsInTimer,1)},t.prototype.startsInTimer=function(){var e=GameManager.getMTimeDuration(Number(this.tourItemInfo.raw.tournamentStartDetails.startTime)),t=new Date(this.tourItemInfo.raw.tournamentStartDetails.startTime);e=t.toDateString().split(" ")[1]+" "+t.getDate()+" "+e,cc.find(GameManager.isMobile?"Btn/CountDown/info":"RoomInfo/BuyInGroup/CountDown/info",this.node).getComponent(cc.Label).string="Reg ends in:",cc.find(GameManager.isMobile?"Btn/CountDown/time":"RoomInfo/BuyInGroup/CountDown/time",this.node).getComponent(cc.Label).string=e},t.prototype.updateEndsInTimer=function(){this.unschedule(this.startsInTimer),this.unschedule(this.endsInTimer),this.unschedule(this.regStartsInTimer),this.unschedule(this.breakEndsTimer),this.endsInTimer(),this.schedule(this.endsInTimer,1)},t.prototype.endsInTimer=function(){var e=GameManager.getMTimeDuration(1e3*Number(this.tourItemInfo.raw.lateRegistrationEndTime)),t=new Date(1e3*Number(this.tourItemInfo.raw.lateRegistrationEndTime));e=t.toDateString().split(" ")[1]+" "+t.getDate()+" "+e,cc.find(GameManager.isMobile?"Btn/CountDown/info":"RoomInfo/BuyInGroup/CountDown/info",this.node).getComponent(cc.Label).string="Reg ends in:",cc.find(GameManager.isMobile?"Btn/CountDown/time":"RoomInfo/BuyInGroup/CountDown/time",this.node).getComponent(cc.Label).string=e},t.prototype.setHighlight=function(e){this.highlightBg.active=e},t.prototype.onTournamentItemSecondClick=function(){cc.systemEvent.emit(K.SocketIOEvent.Lobby.TournamentSelect,this.tourItemInfo)},t.prototype.onClick=function(){if(this.highlightBg.active){if("SIT N GO"==this.tourItemInfo.raw.tournamentType)return;this.onTournamentItemSecondClick()}else s.default.TournamentLobbyListPresenter.removeHighlightAll(),this.setHighlight(!0);cc.systemEvent.emit("TournamentItemPicked",this.tourItemInfo)},t.prototype.onClickButton=function(e){if(console.log("onClickButton",this.tourItemInfo),console.log("onClickButton",e),"SIT N GO"==this.tourItemInfo.raw.tournamentType)if("Enter Table"==e.target.children[0].getComponent(cc.Label).string){var t="";for(var a in this.tourItemInfo.raw.player_list)if(this.tourItemInfo.raw.player_list[a].playerId==GameManager.user.playerId){t=this.tourItemInfo.raw.player_list[a].tableId;break}""==t&&this.tourItemInfo.raw.playerData&&(t=this.tourItemInfo.raw.playerData.tableId),this.isTableExisting=!1,this.isTournamentExisting=!1,this.indexFound=-1,this.tournamentIndexFound=-1;for(var n=0;n<GameManager.gameModel.activePokerModels.length;n++){var i=GameManager.gameModel.activePokerModels[n].roomConfig._id;if((t||this.tourItemInfo.raw.playerData.tableId)===i){this.indexFound=n,this.isTableExisting=!0;break}}if(this.isTableExisting)return ServerCom.loading.active=!1,void(GameManager.isMobile||K.GoToTable?ScreenManager.showScreen(K.ScreenEnum.GamePlayScreen,this.indexFound,function(){}):window.versions.new({name:this.tourData.id,url:"?GoToTable=1&accesstoken="+K.Token.access_token+"&channelid="+this.tourData.id+"&playerId="+GameManager.user.playerId+"&playerName="+GameManager.user.userName+"&networkIp="+window.ipV4Address+"&realChips="+GameManager.user.realChips+"&isTournament=true"}));ServerCom.socketIOBroadcast(t+":"+GameManager.user.playerId,this.onTournamentTableUserBroadcast.bind(this)),window.TournamentLobbyHandler.requestTournamentEnterTable({tournamentId:this.tourItemInfo.id},function(){},function(){},"Enter table, please wait ......")}else if("Open To Register"==this.tourItemInfo.state)if(this.tourItemInfo.raw.playerData)window.TournamentLobbyHandler.requestTournamentDeRegister({tournamentId:this.tourItemInfo.id},function(){},function(){});else{this.tournamentBuyin.active=!1,this.tournamentBuyin.getComponent("TournamentBuyin").setData(this.tourItemInfo,4),this.tournamentBuyin.active=!0;var o=this.tournamentBuyin.getComponent("AnimBase");null!==o&&o.play("showPopUp",function(){})}else if("RUNNING"==this.tourItemInfo.state)for(var t in this.tourItemInfo.raw.tablesStack){t=t.slice(1),socketIO.socket.off(t+":"+GameManager.user.playerId),ServerCom.socketIOBroadcast(t+":"+GameManager.user.playerId,this.onTournamentTableUserBroadcast.bind(this)),window.TournamentLobbyHandler.requestTournamentJoinTable({channelId:t},function(e){console.log("data",e)},function(e){console.log("error",e)});break}},t.prototype.onTournamentLobbyResponseEvent=function(e){if("Res-RegisterSNG"===e.eventName&&(ServerCom.forceKeepLoading=!1,ServerCom.loading.active=!1,e&&e.data&&e.data.success&&e.data.requestedTournamentId==this.tourItemInfo.id)){var t=K.SocketIOBroadcast.Lobby.TournamentNewTable.replace("<TournamentId>",e.data.requestedTournamentId).replace("<PlayerId>",e.data.requesterPlayerId);socketIO.socket.off(t),ServerCom.socketIOBroadcast(t,this.onTournamentNewTable.bind(this)),GameManager.popUpManager.show(l.PopUpType.RegDialog,1,function(){})}},t.prototype.onTournamentTableUserBroadcast=function(e){if(console.log(">>>>>>>>>>>>>>>>>>>>>>>onTournamentTableUserBroadcast",e),"joinChannelResponse"==e.eventName||"enterChannelResponse"==e.eventName)if(e.data.success){GameManager.popUpManager.hideAllPopUps(),cc.systemEvent.emit("HideTournamentNotification"),socketIO.socket.off(e.eventTo),socketIO.socket.off(e.channelId+":"+e.playerId);var t=K.SocketIOBroadcast.Lobby.TournamentElimination.replace("<TournamentId>",this.tourItemInfo.id).replace("<PlayerId>",e.playerId);if(socketIO.socket.off(t),!GameManager.isActive)return ServerCom.forceKeepLoading=!1,void(ServerCom.loading.active=!1);e.data.gameData=new r.GameData(e.data),e.data.tourData=this.tourItemInfo,this.isTournamentExisting?GameManager.gameModel.activePokerModels[this.tournamentIndexFound].initiliazePoker(e.data):GameManager.isMobile||K.GoToTable?ScreenManager.showScreen(K.ScreenEnum.GamePlayScreen,e.data,function(){}):window.versions.new({name:this.tourItemInfo.id,url:"?GoToTable=1&accesstoken="+K.Token.access_token+"&channelid="+this.tourItemInfo.id+"&tableid="+e.channelId+"&playerId="+GameManager.user.playerId+"&playerName="+GameManager.user.userName+"&networkIp="+window.ipV4Address+"&realChips="+GameManager.user.realChips+"&isTournament=true"}),this.scheduleOnce(function(){ServerCom.forceKeepLoading=!1,ServerCom.loading.active=!1},1.2)}else ServerCom.forceKeepLoading=!1,ServerCom.loading.active=!1,GameManager.popUpManager.show(l.PopUpType.CommonDialog,{title:"Error!",content:e.data.info?e.data.info:e.data.response},function(){})},t.prototype.onTournamentNewTable=function(e){console.log("onTournamentNewTable",e),ServerCom.socketIOBroadcast(e.eventData.tableId+":"+GameManager.user.playerId,this.onTournamentTableUserBroadcast.bind(this)),GameManager.tableStartTime=e.eventData.tableStartTime,GameManager.isActive&&window.TournamentLobbyHandler.requestTournamentEnterTable({tournamentId:this.tourItemInfo.id},function(){},function(){},"Enter table, please wait ......")},o([h(cc.Node)],t.prototype,"bg_1",void 0),o([h(cc.Node)],t.prototype,"bg_2",void 0),o([h(cc.Node)],t.prototype,"highlightBg",void 0),o([h(cc.Label)],t.prototype,"tournamentName",void 0),o([h(cc.Label)],t.prototype,"tournamentType",void 0),o([h(cc.Label)],t.prototype,"time",void 0),o([h(cc.Label)],t.prototype,"buyIn",void 0),o([h(cc.Label)],t.prototype,"prize",void 0),o([h(cc.Label)],t.prototype,"btnLabel",void 0),o([h(cc.Sprite)],t.prototype,"btnSprite",void 0),o([h(cc.Sprite)],t.prototype,"bgSprite",void 0),o([h(cc.SpriteFrame)],t.prototype,"btnFrame",void 0),o([h(cc.SpriteFrame)],t.prototype,"bgFrame",void 0),o([h(cc.Node)],t.prototype,"tournamentBuyin",void 0),o([d],t)}(cc.Component);a.default=u,cc._RF.pop()},{"../../DataFormats/ResponseTypes":"ResponseTypes","../../Utilities/ScreensAndPopUps/PopUps/PopUpManager":"PopUpManager","../../globals":"globals"}],TournamentLobbyListPresenter:[function(e,t,a){"use strict";cc._RF.push(t,"1eb0co0CnFPCIyrT10KRNtb","TournamentLobbyListPresenter");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(s=(o<3?i(s):o>3?i(t,a,s):i(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.TournamentLobbyListPresenter=a.TOURNAMENT_TYPE=void 0;var s,r=e("../../globals"),l=e("./TournamentLobbyListItem"),c=e("./TournamentLobbyPresenter"),d=e("../data/TournamentResponseTypes"),h=e("../../Utilities/DropDowns/DropDown"),u=cc._decorator,p=u.ccclass,m=u.property;(function(e){e[e.ALL=0]="ALL",e[e.SITNGO=1]="SITNGO",e[e.KCOIN=2]="KCOIN",e[e.NFT=3]="NFT",e[e.NONE=4]="NONE"})(s=a.TOURNAMENT_TYPE||(a.TOURNAMENT_TYPE={}));var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.comingSoon=null,t.top=null,t.top2=null,t.filterLabel=null,t.gameTypeDropdown=null,t.activeSprite=null,t.inactiveSprite=null,t.activeColor=null,t.inactiveColor=null,t.tabs=null,t.tournamentNotification=null,t.scrollView=null,t.contentCashierAll=null,t.contentHolderAll=null,t.contentHolderSitNGo=null,t.contentHolderFreeroll=null,t.contentHolderKCoin=null,t.contentHolderNFT=null,t.tournamentItem=null,t.tournamentLobbyPresenter=null,t.tabNodes=[],t.tabBtns0=[],t.tabBtns=[],t.tabBtns2=[],t.header0=null,t.header1=null,t.header2=null,t.tabPage=[],t.tabBtnSprite=[],t.labeActiveColor=[],t.selectedTableDetails=null,t.selectedTableDetailsTour=null,t.curTab=s.NONE,t.isInitDone=!1,t.currentTab=0,t.currentTabSNG=0,t.lockClick=!1,t.filterTab=1,t.tournamentData=[],t.currentTableData=[],t.tourList=[],t.tournamentSitNGoData=[],t.currentTableSitNGoData=[],t.tourSitNGoList=[],t.tournamentNFTData=[],t.currentTableNFTData=[],t.tourNFTList=[],t.tournamentAllData=[],t.currentTableAllData=[],t.tourAllList=[],t.selectedTournament=null,t.typeFilter=0,t.typeFilterSNG=0,t}var a;return i(t,e),a=t,t.prototype.onTabChange=function(){},t.prototype.setTabActive=function(){},t.prototype.onBtnClick=function(e,t){parseInt(t),this.setTabActive(t)},t.prototype.setButtonActive=function(){},t.prototype.onLoad=function(){a._instance||(a._instance=this),r.default.TournamentLobbyListPresenter=this,window.TournamentLobbyListPresenter=this},t.prototype.onHideTournamentNotification=function(){},t.prototype.onEnable=function(){console.log("onEnableonEnableonEnable"),this.curTab==s.NFT?(this.top.active=!1,this.top2.active=!0):(this.top.active=!0,this.top2.active=!1),socketIO.socket.off(K.SocketIOBroadcast.Lobby.TournamentRefresh),ServerCom.socketIOBroadcast(K.SocketIOBroadcast.Lobby.TournamentRefresh,this.onTournamentRefresh.bind(this)),GameManager.isMobile||this.refreshSideTable(null),"DIAMOND"==GameManager.user.category?this.comingSoon.active=!1:this.comingSoon.active=!0,this.animate(.02)},t.prototype.onTournamentSelect=function(e){this.tournamentLobbyPresenter.enterLobby(e)},t.prototype.onTournamentItemUnPicked=function(e){console.log("onTournamentItemUnPicked",e),GameManager.isMobile||this.refreshSideTable(e)},t.prototype.onTournamentItemPicked=function(e){console.log("onTournamentItemPicked",e),GameManager.isMobile||this.refreshSideTable(e)},t.prototype.onBreakEndsTimer=function(){GameManager.isMobile},t.prototype.onRegStartsInTimer=function(){GameManager.isMobile},t.prototype.onStartsInTimer=function(){GameManager.isMobile},t.prototype.onEndsInTimer=function(){GameManager.isMobile},t.prototype.refreshSideTable=function(){GameManager.isMobile},t.prototype.onTournamentLobbyButton=function(){this.selectedTournament&&this.tournamentLobbyPresenter.enterLobby(this.selectedTournament)},t.prototype.refreshIndex=function(){for(var e=0;e<this.contentHolderKCoin.children.length;e++)this.contentHolderKCoin.children[e].getComponent(l.default).initIndex(e);for(e=0;e<this.contentHolderNFT.children.length;e++)this.contentHolderNFT.children[e].getComponent(l.default).initIndex(e);for(e=0;e<this.contentHolderAll.children.length;e++)this.contentHolderAll.children[e].getComponent(l.default).initIndex(e);for(e=0;e<this.contentHolderSitNGo.children.length;e++)this.contentHolderSitNGo.children[e].getComponent(l.default).initIndex(e)},t.prototype.createTournamentList=function(e){for(var t in this.tourList=[],this.contentHolderKCoin.removeAllChildren(),this.contentHolderNFT.removeAllChildren(),e){var a=e[t];if("freeRoll"!=a.tournamentType){(i=cc.instantiate(this.tournamentItem)).setPosition(0,0),i.active=!0,this.contentHolderKCoin.insertChild(i,0);var n=i.getComponent(l.default);this.tourList.push(n),n.initInfo(new d.Tournament(e[t]))}else{var i;(i=cc.instantiate(this.tournamentItem)).setPosition(0,0),i.active=!0,this.contentHolderNFT.insertChild(i,0),n=i.getComponent(l.default),this.tourNFTList.push(n),n.initInfo(new d.Tournament(e[t]))}if("freeRoll"!=a.tournamentType){var o=cc.instantiate(this.tournamentItem);o.setPosition(0,0),o.active=!0,this.contentHolderAll.insertChild(o,0),o.getComponent(l.default).initInfo(new d.Tournament(a))}console.log("tournamentInfo",a)}this.refreshIndex(),this.updateTablesFilterType()},t.prototype.onTournamentTurnBroadcast=function(e){if(console.log("onTournamentTurnBroadcast",e),ScreenManager.currentScreen!=K.ScreenEnum.GamePlayScreen){for(var t=null,a=0;a<this.tourList.length;a++)if(console.log("this.tourList",this.tourList[a].tourItemInfo),e.eventData.tournamentId==this.tourList[a].tourItemInfo.id){t=this.tourList[a].tourItemInfo;break}if(!t)for(a=0;a<this.tourSitNGoList.length;a++)if(console.log("this.tourSitNGoList",this.tourSitNGoList[a].tourItemInfo),e.eventData.tournamentId==this.tourSitNGoList[a].tourItemInfo.id){t=this.tourSitNGoList[a].tourItemInfo;break}}},t.prototype.createTournamentSitNGoList=function(e){this.tourSitNGoList=[],this.contentHolderSitNGo.removeAllChildren();for(var t=0;t<e.length;t++){var a=e[t];if(!(a.tournaments.length<=0))for(var n=0;n<a.tournaments.length;n++){var i=a.tournaments[n],o=(i._id,cc.instantiate(this.tournamentItem));o.setPosition(0,0),o.active=!0,this.contentHolderSitNGo.insertChild(o,0);var s=o.getComponent(l.default);this.tourSitNGoList.push(s),s.initInfo(new d.Tournament(i));var r=cc.instantiate(this.tournamentItem);r.setPosition(0,0),r.active=!0,this.contentHolderAll.insertChild(r,this.tourList.length),r.getComponent(l.default).initInfo(new d.Tournament(i))}}this.refreshIndex(),this.updateTablesFilterType()},t.prototype.removeHighlightAll=function(){this.tourList.forEach(function(e){e.setHighlight(!1)}),this.tourNFTList.forEach(function(e){e.setHighlight(!1)}),this.tourSitNGoList.forEach(function(e){e.setHighlight(!1)}),this.tourAllList.forEach(function(e){e.setHighlight(!1)})},t.prototype.onTournamentList=function(e){"Res-GetUserProfile"===e.eventName?e&&e.data&&e.data.response:"Res-GetAllTournamentList"===e.eventName?e&&e.data&&e.data.response&&(this.isInitDone=!0,this.createTournamentList(e.data.response),window.TournamentLobbyHandler.requestTournamentSitAndGoStages({},function(){},function(){})):"Res-GetSitNGoStages"===e.eventName&&e&&e.data&&e.data.response&&(console.log("Res-GetSitNGoStages"),this.isInitDone=!0,this.createTournamentSitNGoList(e.data.response))},t.prototype.onTournamentLobbyEvent=function(){},t.prototype.onTournamentUpdated=function(e){console.log(">>>>>>>>>> onTournamentUpdated in lobby"),console.log(e)},t.prototype.onTournamentClosed=function(e){this.onTournamentRefresh(e)},t.prototype.onTournamentRemoved=function(e){if(this.isInitDone){for(var t=!1,a=0;a<this.contentHolderAll.children.length;a++){var n=this.contentHolderAll.children[a].getComponent(l.default).tourItemInfo;e.tournamentId==n.id&&(t=!0,this.contentHolderAll.children[a].removeFromParent(!0))}if(t){for(a=0;a<this.contentHolderKCoin.children.length;a++)if(n=this.contentHolderKCoin.children[a].getComponent(l.default).tourItemInfo,e.tournamentId==n.id){this.contentHolderKCoin.children[a].removeFromParent(!0);break}for(a=0;a<this.contentHolderNFT.children.length;a++)if(n=this.contentHolderNFT.children[a].getComponent(l.default).tourItemInfo,e.tournamentId==n.id){this.contentHolderKCoin.children[a].removeFromParent(!0);break}for(a=0;a<this.contentHolderSitNGo.children.length;a++)if(n=this.contentHolderSitNGo.children[a].getComponent(l.default).tourItemInfo,e.tournamentId==n.id){this.contentHolderSitNGo.children[a].removeFromParent(!0);break}}}},t.prototype.onTournamentRefresh=function(e){if(!K.GoToTable&&this.isInitDone){cc.systemEvent.emit(K.SocketIOEvent.Lobby.TournamentRefresh,e),console.log(">>>>>>>>>> onTournamentRefresh in lobby");for(var t=!1,a=0;a<this.contentHolderAll.children.length;a++){var n=this.contentHolderAll.children[a].getComponent(l.default).tourItemInfo;if(e._id==n.id){t=!0,this.contentHolderAll.children[a].getComponent(l.default).initInfo(new d.Tournament(e));break}}if(!t)for(a=0;a<this.contentHolderNFT.children.length;a++)if(n=this.contentHolderNFT.children[a].getComponent(l.default).tourItemInfo,e._id==n.id){t=!0,this.contentHolderNFT.children[a].getComponent(l.default).initInfo(new d.Tournament(e));break}if(t){if("SIT N GO"!=e.tournamentType){for(a=0;a<this.contentHolderKCoin.children.length;a++)if(n=this.contentHolderKCoin.children[a].getComponent(l.default).tourItemInfo,e._id==n.id){this.contentHolderKCoin.children[a].getComponent(l.default).initInfo(new d.Tournament(e)),this.selectedTournament&&this.selectedTournament.id==n.id&&this.refreshSideTable(this.selectedTournament);break}}else for(a=0;a<this.contentHolderSitNGo.children.length;a++)if(n=this.contentHolderSitNGo.children[a].getComponent(l.default).tourItemInfo,e._id==n.id){this.contentHolderSitNGo.children[a].getComponent(l.default).initInfo(new d.Tournament(e)),this.selectedTournament&&this.selectedTournament.id==n.id&&this.refreshSideTable(this.selectedTournament);break}}else if("SIT N GO"!=e.tournamentType){var i;"freeRoll"!=e.tournamentType?((i=cc.instantiate(this.tournamentItem)).setPosition(0,0),i.active=!0,this.contentHolderKCoin.insertChild(i,0),i.getComponent(l.default).initInfo(new d.Tournament(e))):((i=cc.instantiate(this.tournamentItem)).setPosition(0,0),i.active=!0,this.contentHolderNFT.insertChild(i,0),i.getComponent(l.default).initInfo(new d.Tournament(e))),"freeRoll"!=e.tournamentType&&((o=cc.instantiate(this.tournamentItem)).setPosition(0,0),o.active=!0,this.contentHolderAll.insertChild(o,0),o.getComponent(l.default).initInfo(new d.Tournament(e)))}else{var o,s=cc.instantiate(this.tournamentItem);s.setPosition(0,0),s.active=!0,this.contentHolderSitNGo.insertChild(s,0),s.getComponent(l.default).initInfo(new d.Tournament(e)),(o=cc.instantiate(this.tournamentItem)).setPosition(0,0),o.active=!0,this.contentHolderAll.insertChild(o,0),o.getComponent(l.default).initInfo(new d.Tournament(e))}this.updateTablesFilterType()}},t.prototype.animate=function(e){void 0===e&&(e=.05);for(var t=function(t){var n=a.scrollView.content.children[t];n.opacity=0,a.scheduleOnce(function(){console.log("animate"),n.opacity=255,n.x=1e3,n.runAction(cc.sequence(cc.moveTo(.3,cc.v2(0,n.y)),cc.callFunc(function(){console.log("animate done")})))},e*t)},a=this,n=0;n<this.scrollView.content.children.length;n++)t(n)},t.prototype.onShowAll=function(){var e=this;this.lockClick||(this.lockClick=!0,this.scheduleOnce(function(){e.lockClick=!1},1),2!=GameManager.lobbyListType&&(this.setActiveButton(this.tabBtns0[0],this.tabBtns0[1]),this.setActiveButton(this.tabBtns0[0],this.tabBtns0[2]),this.setActiveButton(this.tabBtns0[0],this.tabBtns0[3]),this.curTab=s.ALL,this.contentHolderAll.active=!0,this.contentHolderKCoin.active=!1,this.contentHolderSitNGo.active=!1,this.contentHolderNFT.active=!1,this.contentCashierAll.active=!1,this.scrollView.content=this.contentHolderAll,GameManager.playSound(K.Sounds.click),this.animate()))},t.prototype.onShowTournament=function(){var e=this;this.lockClick||(this.lockClick=!0,this.scheduleOnce(function(){e.lockClick=!1},1),this.gameTypeDropdown&&(this.gameTypeDropdown.node.parent.active=!0),this.setActiveButton(this.tabBtns0[1],this.tabBtns0[0]),this.setActiveButton(this.tabBtns0[1],this.tabBtns0[2]),this.setActiveButton(this.tabBtns0[1],this.tabBtns0[3]),this.refreshSideTable(null),this.curTab=s.KCOIN,this.contentHolderAll.active=!1,this.contentHolderKCoin.active=!0,this.contentHolderSitNGo.active=!1,this.contentHolderNFT.active=!1,this.contentCashierAll.active=!1,this.scrollView.content=this.contentHolderKCoin,GameManager.playSound(K.Sounds.click),this.animate())},t.prototype.onShowSitNGo=function(){var e=this;this.lockClick||(this.lockClick=!0,this.scheduleOnce(function(){e.lockClick=!1},1),GameManager.isMobile,this.gameTypeDropdown&&(this.gameTypeDropdown.node.parent.active=!1),this.setActiveButton(this.tabBtns0[2],this.tabBtns0[0]),this.setActiveButton(this.tabBtns0[2],this.tabBtns0[1]),this.setActiveButton(this.tabBtns0[2],this.tabBtns0[3]),this.refreshSideTable(null),this.curTab=s.SITNGO,this.contentHolderAll.active=!1,this.contentHolderKCoin.active=!1,this.contentHolderSitNGo.active=!0,this.contentCashierAll.active=!1,this.contentHolderNFT.active=!1,this.scrollView.content=this.contentHolderSitNGo,GameManager.playSound(K.Sounds.click),this.animate())},t.prototype.onShowTournamentNFT=function(){var e=this;this.lockClick||(this.lockClick=!0,this.scheduleOnce(function(){e.lockClick=!1},1),this.refreshSideTable(null),this.curTab=s.NFT,this.contentHolderAll.active=!1,this.contentHolderKCoin.active=!1,this.contentHolderSitNGo.active=!1,this.contentHolderNFT.active=!0,this.contentCashierAll.active=!1,this.scrollView.content=this.contentHolderNFT,GameManager.playSound(K.Sounds.click),this.setActiveButton(this.tabBtns0[3],this.tabBtns0[0]),this.setActiveButton(this.tabBtns0[3],this.tabBtns0[1]),this.setActiveButton(this.tabBtns0[3],this.tabBtns0[2]),this.animate())},t.prototype.onTournamentLobbyResponseEvent=function(e){"Res-GetTournamentData"===e.eventName&&this.onTournamentRefresh(e.data.response)},t.prototype.onFreeroll=function(){this.typeFilter=1,this.setActiveButton(this.tabBtns[1],this.tabBtns[this.currentTab]),this.updateTablesFilterType(),this.currentTab=1},t.prototype.onGaurenteed=function(){this.typeFilter=2,this.setActiveButton(this.tabBtns[2],this.tabBtns[this.currentTab]),this.updateTablesFilterType(),this.currentTab=2},t.prototype.onAll=function(){this.typeFilter=0,this.setActiveButton(this.tabBtns[0],this.tabBtns[this.currentTab]),this.updateTablesFilterType(),this.currentTab=0},t.prototype.onAllSNG=function(){this.typeFilterSNG=0,this.setActiveButton(this.tabBtns2[0],this.tabBtns2[this.currentTabSNG]),this.updateTablesFilterType(),this.currentTabSNG=0},t.prototype.onHolemSNG=function(){this.typeFilterSNG=1,this.setActiveButton(this.tabBtns2[1],this.tabBtns2[this.currentTabSNG]),this.updateTablesFilterType(),this.currentTabSNG=1},t.prototype.onOhamaSNG=function(){this.typeFilterSNG=2,this.setActiveButton(this.tabBtns2[2],this.tabBtns2[this.currentTabSNG]),this.updateTablesFilterType(),this.currentTabSNG=2},t.prototype.updateTablesFilterType=function(){for(var e=0;e<this.contentHolderKCoin.children.length;e++){(a=this.contentHolderKCoin.children[e]).active=!0;var t=a.getComponent(l.default).tourItemInfo;console.log("contentHolderKCoin tourItemInfo",t),1==this.typeFilter?"freeRoll"!=t.tournamentType&&(a.active=!1):2==this.typeFilter&&(t.isGtdEnabled||(a.active=!1)),2==this.typeFilterSNG?"PLO"==t.gameVariation&&(a.active=!1):1==this.typeFilterSNG&&"NLH"==t.gameVariation&&(a.active=!1)}for(e=0;e<this.contentHolderSitNGo.children.length;e++){var a;(a=this.contentHolderSitNGo.children[e]).active=!0,t=a.getComponent(l.default).tourItemInfo,console.log("contentHolderSitNGo tourItemInfo",t),1==this.typeFilterSNG?"Omaha"==t.gameVariation&&(a.active=!1):2==this.typeFilterSNG&&"Texas Hold\u2019em"==t.gameVariation&&(a.active=!1)}},t.prototype.onFilter=function(){this.filterTab+=1,this.filterTab>2&&(this.filterTab=1),1==this.filterTab?(this.header0.active=!0,this.header1.active=!1,this.header2.active=!1):2==this.filterTab?(this.header0.active=!1,this.header1.active=!0,this.header2.active=!1):3==this.filterTab&&(this.header0.active=!1,this.header1.active=!1,this.header2.active=!0)},t.prototype.onFilterHoldem=function(){},t.prototype.onFilterOhama=function(){},t.prototype.onFilterAll=function(){},t.prototype.setActiveButton=function(e,t){null!==t&&(t.getChildByName("pressed").active=!1,t.getChildByName("Label").color=(new cc.Color).fromHEX("#FFFFFF")),e.getChildByName("pressed").active=!0,e.getChildByName("Label").color=(new cc.Color).fromHEX("#531400")},t.prototype.applyFilter=function(){this.updateTablesFilterType()},t._instance=null,o([m(cc.Node)],t.prototype,"comingSoon",void 0),o([m(cc.Node)],t.prototype,"top",void 0),o([m(cc.Node)],t.prototype,"top2",void 0),o([m(cc.Label)],t.prototype,"filterLabel",void 0),o([m(h)],t.prototype,"gameTypeDropdown",void 0),o([m(cc.SpriteFrame)],t.prototype,"activeSprite",void 0),o([m(cc.SpriteFrame)],t.prototype,"inactiveSprite",void 0),o([m(cc.Color)],t.prototype,"activeColor",void 0),o([m(cc.Color)],t.prototype,"inactiveColor",void 0),o([m(cc.Node)],t.prototype,"tabs",void 0),o([m(cc.Node)],t.prototype,"tournamentNotification",void 0),o([m(cc.ScrollView)],t.prototype,"scrollView",void 0),o([m(cc.Node)],t.prototype,"contentCashierAll",void 0),o([m(cc.Node)],t.prototype,"contentHolderAll",void 0),o([m(cc.Node)],t.prototype,"contentHolderSitNGo",void 0),o([m(cc.Node)],t.prototype,"contentHolderFreeroll",void 0),o([m(cc.Node)],t.prototype,"contentHolderKCoin",void 0),o([m(cc.Node)],t.prototype,"contentHolderNFT",void 0),o([m(cc.Node)],t.prototype,"tournamentItem",void 0),o([m(c.TournamentLobbyPresenter)],t.prototype,"tournamentLobbyPresenter",void 0),o([m(cc.Node)],t.prototype,"tabNodes",void 0),o([m(cc.Node)],t.prototype,"tabBtns0",void 0),o([m(cc.Node)],t.prototype,"tabBtns",void 0),o([m(cc.Node)],t.prototype,"tabBtns2",void 0),o([m(cc.Node)],t.prototype,"header0",void 0),o([m(cc.Node)],t.prototype,"header1",void 0),o([m(cc.Node)],t.prototype,"header2",void 0),o([m(cc.Node)],t.prototype,"tabPage",void 0),o([m(cc.SpriteFrame)],t.prototype,"tabBtnSprite",void 0),o([m(cc.Color)],t.prototype,"labeActiveColor",void 0),o([m(cc.Node)],t.prototype,"selectedTableDetails",void 0),o([m(cc.Node)],t.prototype,"selectedTableDetailsTour",void 0),a=o([p],t)}(cc.Component);a.TournamentLobbyListPresenter=g,cc._RF.pop()},{"../../Utilities/DropDowns/DropDown":"DropDown","../../globals":"globals","../data/TournamentResponseTypes":"TournamentResponseTypes","./TournamentLobbyListItem":"TournamentLobbyListItem","./TournamentLobbyPresenter":"TournamentLobbyPresenter"}],TournamentLobbyPresenter:[function(e,t,a){"use strict";cc._RF.push(t,"1debcMIG5FNn4mdsyE7HcIi","TournamentLobbyPresenter");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(s=(o<3?i(s):o>3?i(t,a,s):i(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.TournamentLobbyPresenter=a.TOUR_LOBBY_TAB=void 0;var s,r=e("../../DataFormats/ResponseTypes"),l=e("../data/TournamentResponseTypes"),c=e("../../Utilities/ScreensAndPopUps/PopUps/PopUpManager"),d=cc._decorator,h=d.ccclass,u=d.property;(function(e){e[e.INFO=0]="INFO",e[e.TABLE=1]="TABLE",e[e.BLIND_STRUCT=2]="BLIND_STRUCT"})(s=a.TOUR_LOBBY_TAB||(a.TOUR_LOBBY_TAB={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.header1=null,t.header2=null,t.header3=null,t.reentryBtn=null,t.enterTableBtn=null,t.deRegisterTableBtn=null,t.lateRegisterBtn=null,t.registerBtn=null,t.stateBtn=null,t.CountDown=null,t.CountDowninfo=null,t.CountDowntime=null,t.desc=null,t.late=null,t.minmaxPlayers=null,t.curBlindInfo=null,t.nextBlindInfo=null,t.timerBlindInfo=null,t.playerPerTables=null,t.isReentryAllowed=null,t.isRebuyAllowed=null,t.isAddonAllowed=null,t.registrationBeforeStarttime=null,t.tournamentStartTime=null,t.startingChips=null,t.status=null,t.gameType=null,t.tournamentName=null,t.guaranteedValue=null,t.entryFees=null,t.uniqueEntries=null,t.reentriesCount=null,t.highestStack=null,t.lowestStack=null,t.avarageStack=null,t.tabBtns=[],t.tabPage=[],t.labeActiveColor=[],t.btnFrame=[],t.blindAndPayout=null,t.tournamentBuyin=null,t.tournamentResultPlacement=null,t.tournamentResultWinner=null,t._curTab=s.INFO,t.playerFilter="",t.isTableExisting=!1,t.isTournamentExisting=!1,t.tournamentIndexFound=-1,t.indexFound=-1,t}var a;return i(t,e),a=t,t.prototype.setTabActive=function(e){this.setButtonActive(e),this.tabPage.forEach(function(t,a){t.active=e==a})},t.prototype.setButtonActive=function(e){var t=this;this.tabBtns.forEach(function(a,n){var i=e==n?0:1;a.children[0].color=t.labeActiveColor[i],a.children[0].getComponent(cc.Label).enableUnderline=e==n})},t.prototype.getInstance=function(){return a._instance||(a._instance=this),a._instance},t.prototype.onLoad=function(){a._instance||(a._instance=this),this.setTabActive(s.INFO),cc.systemEvent.on(K.SocketIOEvent.Lobby.TournamentRefresh,this.onTournamentRefresh.bind(this),this.node),ServerCom.socketIOBroadcast(K.SocketIOBroadcast.Lobby.TournamentClosed,this.onTournamentClosed.bind(this)),cc.systemEvent.on("leaveLobby",this.leaveLobby,this)},t.prototype.onEnable=function(){this.blindAndPayout.active=!1,this.setTabActive(s.INFO),this.tourData&&this.tourData.id&&window.TournamentLobbyHandler.requestTournamentData({tournamentId:this.tourData.id},function(e){console.log("data",e)},function(e){console.log("error",e)})},t.prototype.onBtnClick=function(e,t){this.blindAndPayout.active=!1,parseInt(t),this.setTabActive(t)},t.prototype.onBackBtnClick=function(){this.node.active=!1},t.prototype.enterLobby=function(e){this.tourData=e,this.node.active=!0,this.updateData()},t.prototype.leaveLobby=function(){this.node.active=!1},t.prototype.updateData=function(e){void 0===e&&(e=!1),this.updateInfo(e),this.updateTables(),this.updatePrize(),this.updatePositionPaid(),this.updateBlindAndPayout()},t.prototype.updateInfo=function(e){if(void 0===e&&(e=!1),this.unschedule(this.startsInTimer),this.unschedule(this.endsInTimer),this.unschedule(this.breakTimer),this.unschedule(this.blindTimer),this.unschedule(this.breakEndsTimer),this.unschedule(this.regStartsInTimer),this.header1.string=this.tourData.gameVariation,this.reentryBtn.active=!1,this.enterTableBtn.active=!1,this.deRegisterTableBtn.active=!1,this.lateRegisterBtn.active=!1,this.registerBtn.active=!1,this.stateBtn.active=!1,this.CountDowninfo.string="",this.CountDowntime.string="","CLOSED"==this.tourData.state)this.stateBtn.active=!0,cc.find("Label",this.stateBtn).getComponent(cc.Label).string="Closed";else if("CANCELED"==this.tourData.state)this.stateBtn.active=!0,cc.find("Label",this.stateBtn).getComponent(cc.Label).string="Canceled";else if(this.tourData.raw.playerData)if(this.tourData.raw.playerData.tableId){if(this.tourData.raw.isInBreak)"ELIMINATED"==this.tourData.raw.playerData.status?this.tourData.raw.isReEntryOpen&&this.tourData.raw.isReentryAllowed&&this.tourData.raw.playerData.reentries<this.tourData.raw.numberOfReentry?(this.stateBtn.active=!0,cc.find("Label",this.stateBtn).getComponent(cc.Label).string="Break Time",this.updateBreakEndsTimer()):(this.stateBtn.active=!0,cc.find("Label",this.stateBtn).getComponent(cc.Label).string="Running"):(this.stateBtn.active=!0,cc.find("Label",this.stateBtn).getComponent(cc.Label).string="Break Time",this.updateBreakEndsTimer());else if("ELIMINATED"==this.tourData.raw.playerData.status)this.tourData.raw.isReEntryOpen&&this.tourData.raw.isReentryAllowed&&this.tourData.raw.playerData.reentries<this.tourData.raw.numberOfReentry?this.reentryBtn.active=!0:(this.stateBtn.active=!0,cc.find("Label",this.stateBtn).getComponent(cc.Label).string="Eliminated");else if(this.enterTableBtn.active=!0,this.newTableData={},this.newTableData.eventData={playerId:this.tourData.raw.playerData.playerId,tableId:this.tourData.raw.playerData.tableId},!e){var t=K.SocketIOBroadcast.Lobby.TournamentNewTable.replace("<TournamentId>",this.tourData.id).replace("<PlayerId>",this.tourData.raw.playerData.playerId);socketIO.socket.off(t),ServerCom.socketIOBroadcast(t,this.onTournamentNewTable.bind(this))}}else"Open To Register"==this.tourData.state?(this.updateStartsInTimer(),this.deRegisterTableBtn.active=!0):"Registration Freezed"==this.tourData.state?(this.stateBtn.active=!0,cc.find("Label",this.stateBtn).getComponent(cc.Label).string="Registration Freezed"):(this.stateBtn.active=!0,cc.find("Label",this.stateBtn).getComponent(cc.Label).string="Registered");else this.tourData.raw.isLateEntryOpen?(this.lateRegisterBtn.active=!0,this.updateEndsInTimer()):"Open To Register"==this.tourData.state?(this.updateStartsInTimer(),this.registerBtn.active=!0,this.tourData.raw.playerRemainingRatio&&this.tourData.raw.playerRemainingRatio.registeredPlayers>=this.tourData.raw.maxPlayersAllowed?(this.registerBtn,this.tabPage[0],getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial("2d-gray-sprite")),this.registerBtn,this.tabPage[0],getComponent(cc.Button).interactable=!1):(this.registerBtn.getComponent(cc.Sprite).setMaterial(0,cc.Material.getBuiltinMaterial("2d-sprite")),this.registerBtn.getComponent(cc.Button).interactable=!0)):("PUBLISHED"==this.tourData.state&&this.updateRegStartsInTimer(),this.stateBtn.active=!0,cc.find("Label",this.stateBtn).getComponent(cc.Label).string="PUBLISHED"==this.tourData.state?"Register":this.tourData.state);this.playerPerTables.string=this.tourData.raw.playerPerTables,this.minmaxPlayers.string=this.tourData.raw.minPlayersToStart+"/"+this.tourData.raw.maxPlayersAllowed,this.isReentryAllowed.string=this.tourData.isReentryAllowed?this.tourData.numberOfReentry+" times @ Rs. "+(this.tourData.raw.reentry.reentryPrice.reentryAmount+this.tourData.raw.reentry.reentryPrice.reentryHouseFee):"N/A",this.isRebuyAllowed.string="N/A",this.isAddonAllowed.string="N/A",this.tourData.raw.addOn.addOnTime.length>0&&this.tourData.raw.rebuyChips>0?(this.isRebuyAllowed.string="Rebuy Allowed",this.isAddonAllowed.string="Addon Allowed"):this.tourData.raw.addOn.addOnTime.length>0?this.isAddonAllowed.string="Addon Allowed":this.tourData.raw.rebuyChips>0&&(this.isRebuyAllowed.string="Rebuy Allowed"),this.tournamentName.string=this.tourData.tournamentName,this.guaranteedValue.string=this.tourData.guaranteedValue,this.entryFees.string=(this.tourData.raw.entryFees||0)+(this.tourData.raw.houseFees||0),this.status.string=this.tourData.state;var a=new Date(this.tourData.raw.registrationBeforeStarttime);this.registrationBeforeStarttime.string=a.toLocaleDateString("en-US",{day:"numeric",month:"short"})+", "+a.toLocaleTimeString("en-US").substr(0,(a.toLocaleTimeString("en-US")+" ").indexOf(" ")),a=new Date(this.tourData.raw.tournamentStartTime),this.tournamentStartTime.string=a.toLocaleDateString("en-US",{day:"numeric",month:"short"})+", "+a.toLocaleTimeString("en-US").substr(0,(a.toLocaleTimeString("en-US")+" ").indexOf(" ")),this.header2.string=a.toLocaleDateString("en-US",{day:"numeric",month:"short"}),this.header3.string=a.toLocaleTimeString("en-US").substr(0,(a.toLocaleTimeString("en-US")+" ").indexOf(" ")),this.desc.string=this.tournamentStartTime.string+"("+this.tourData.gameVariation+")",this.uniqueEntries.string=this.tourData.raw.uniqueEntries,this.reentriesCount.string=(this.tourData.raw.totalRebuy||0)+"/"+this.tourData.raw.reentriesCount,this.late.string=this.tourData.raw.lateRegistrationAllowed?"Till Blind Level "+this.tourData.lateRegistrationTime:"N/A",this.curBlindInfo.string=this.tourData.currentBlindLevel.smallBlind+"/"+this.tourData.currentBlindLevel.bigBlind+"/"+this.tourData.currentBlindLevel.ante+"("+this.tourData.currentBlindLevel.level+")",this.tourData.raw.isInBreak||"RUNNING"!=this.tourData.state&&"Open To Late Register"!=this.tourData.state?this.timerBlindInfo.string="00:00":(this.updateBreakTimer(),this.tourData.currentBlindLevel.nextBlindLevelTime>0?this.updateBlindTimer():this.timerBlindInfo.string="00:00"),this.nextBlindInfo.string=this.tourData.nextBlindLevel.smallBlind+"/"+this.tourData.nextBlindLevel.bigBlind+"/"+this.tourData.nextBlindLevel.ante+"("+this.tourData.nextBlindLevel.level+")",this.highestStack.string=0==this.tourData.tablesStack.length?"N/A":this.tourData.maxStack,this.lowestStack.string=0==this.tourData.tablesStack.length?"N/A":this.tourData.minStack,this.avarageStack.string=0==this.tourData.tablesStack.length?"N/A":this.tourData.avgStack,this.gameType.string=this.tourData.gameVariation,this.startingChips.string=this.tourData.noOfChipsAtGameStart},t.prototype.updateBreakEndsTimer=function(){this.unschedule(this.breakEndsTimer),this.breakEndsTimer(),this.schedule(this.breakEndsTimer,1)},t.prototype.breakEndsTimer=function(){var e=GameManager.getMTimeDuration(Number(this.tourData.raw.currentTournamentBreak.breakEndTime));this.CountDowninfo.string="Ends in:",this.CountDowntime.string=e,"00:00"==e&&(this.CountDowninfo.string="",this.CountDowntime.string="")},t.prototype.updateStartsInTimer=function(){this.unschedule(this.startsInTimer),this.startsInTimer(),this.schedule(this.startsInTimer,1)},t.prototype.updateRegStartsInTimer=function(){this.unschedule(this.regStartsInTimer),this.regStartsInTimer(),this.schedule(this.regStartsInTimer,1)},t.prototype.regStartsInTimer=function(){var e=GameManager.getMTimeDuration(Number(new Date(this.tourData.raw.registrationBeforeStarttime)));this.CountDowninfo.string="Reg opens in:",this.CountDowntime.string=e,"00:00"==e&&(this.CountDowninfo.string="",this.CountDowntime.string="")},t.prototype.startsInTimer=function(){var e=GameManager.getMTimeDuration(Number(this.tourData.raw.tournamentStartDetails.startTime));this.CountDowninfo.string="Reg ends in:",this.CountDowntime.string=e,"00:00"==e&&(this.CountDowninfo.string="",this.CountDowntime.string="")},t.prototype.updateEndsInTimer=function(){this.unschedule(this.endsInTimer),this.endsInTimer(),this.schedule(this.endsInTimer,1)},t.prototype.endsInTimer=function(){var e=GameManager.getMTimeDuration(1e3*Number(this.tourData.raw.lateRegistrationEndTime));this.CountDowninfo.string="Ends in:",this.CountDowntime.string=e,"00:00"==e&&(this.CountDowninfo.string="",this.CountDowntime.string="")},t.prototype.updateBreakTimer=function(){this.unschedule(this.breakTimer),this.breakTimer(),this.schedule(this.breakTimer,1)},t.prototype.breakTimer=function(){GameManager.getMTimeDuration(Number(this.tourData.raw.nextBreakDetails.breakStartTime))},t.prototype.updateBlindTimer=function(){this.unschedule(this.blindTimer),this.blindTimer(),this.schedule(this.blindTimer,1)},t.prototype.blindTimer=function(){var e=GameManager.getMTimeDuration(1e3*Number(this.tourData.currentBlindLevel.nextBlindLevelTime));this.timerBlindInfo.string=e},t.prototype.onClickTableToView=function(e,t){console.log(e,t),this.tourData.raw.playerData&&this.tourData.raw.playerData.tableId&&this.tourData.raw.playerData.tableId==e.target.___tableId?this.onEnterTableButton(null,this.tourData.raw.playerData.tableId,this.tourData.raw._id):this.tourData.raw.playerData&&this.tourData.raw.playerData.tableId&&"ELIMINATED"!=this.tourData.raw.playerData.status?GameManager.popUpManager.show(c.PopUpType.CommonDialog,{title:"Warning",content:"You are not allowed to observe the other tables now."},function(){}):(socketIO.socket.off(e.target.___tableId+":"+GameManager.user.playerId),ServerCom.socketIOBroadcast(e.target.___tableId+":"+GameManager.user.playerId,this.onTournamentTableUserBroadcast.bind(this)),window.TournamentLobbyHandler.requestTournamentJoinTable({channelId:e.target.___tableId},function(e){console.log("data",e)},function(e){console.log("error",e)}))},t.prototype.updateTables=function(){cc.find("scrollView/view/content",this.tabPage[5]).removeAllChildren();for(var e=0;e<this.tourData.tablesStack.length;e++){var t=this.tourData.tablesStack[e];if(!(t.playersCount<=0)){var a=null;(a=e%2==0?cc.instantiate(cc.find("scrollView/view/rule_base",this.tabPage[5])):cc.instantiate(cc.find("scrollView/view/rule_base2",this.tabPage[5]))).setPosition(0,0),a.active=!0,cc.find("scrollView/view/content",this.tabPage[5]).addChild(a),cc.find("tableId/frame/tableId",a).getComponent(cc.Label).string=t.tableMockName,cc.find("players/players",a).getComponent(cc.Label).string=t.playersCount,cc.find("min/min",a).getComponent(cc.Label).string=t.minStack,cc.find("max/max",a).getComponent(cc.Label).string=t.maxStack,a.___tableId=t.id.slice(1)}}},t.prototype.updatePrize=function(){function e(e){return["st","nd","rd"][((e+90)%100-10)%10-1]||"th"}cc.find("info_top/v",this.tabPage[3]).getComponent(cc.Label).string=this.tourData.guaranteedValue,cc.find("info_top/v1",this.tabPage[3]).getComponent(cc.Label).string=this.tourData.playersPayout.length,cc.find("scrollView/view/content",this.tabPage[3]).removeAllChildren();for(var t=null,a=0;a<this.tourData.raw.playersPayout.length;a++){var n=this.tourData.raw.playersPayout[a];this.tourData.raw.payoutType;var i=null;(i=a%2==0?cc.instantiate(cc.find("scrollView/view/list",this.tabPage[3])):cc.instantiate(cc.find("scrollView/view/list2",this.tabPage[3]))).setPosition(0,0),i.active=!0,cc.find("scrollView/view/content",this.tabPage[3]).addChild(i),cc.find("viewTitle/rank/rank",i).getComponent(cc.Label).string=n.rank,cc.find("viewTitle/userName/userName",i).getComponent(cc.Label).string=n.playerName,cc.find("viewTitle/value/value",i).getComponent(cc.Label).string=n.payout*this.tourData.guaranteedValue/100,t||"-"==n.playerId||(t=0==a?"end":this.tourData.raw.playersPayout[a-1])}this.tourData.raw.payoutType,cc.find("info_top/v2",this.tabPage[3]).getComponent(cc.Label).string=t?"end"!=t?t.rank+e(t.rank)+"-"+t.payoutAmount:"--":this.tourData.raw.playersPayout[this.tourData.raw.playersPayout.length-1].rank+e(this.tourData.raw.playersPayout[this.tourData.raw.playersPayout.length-1].rank)+"-"+this.tourData.raw.playersPayout[this.tourData.raw.playersPayout.length-1].payoutAmount},t.prototype.searchPlayerTextChanged=function(e){this.playerFilter=e.trim(),this.updatePositionPaid()},t.prototype.getUsernameRe=function(e,t){for(var a=0,n=e+1;n<this.tourData.leaderBoard.length;n++)this.tourData.leaderBoard[n].playerName==t&&(a+=1);return 0==a?t:t+"("+a+")"},t.prototype.updatePositionPaid=function(){cc.find("scrollView/view/content",this.tabPage[4]).removeAllChildren();for(var e=0,t=0;t<this.tourData.leaderBoard.length;t++){var a=this.tourData.leaderBoard[t];if(0==e&&a.playerId==GameManager.user.playerId&&(e=t+1),""==this.playerFilter||-1!=a.playerName.indexOf(this.playerFilter)){var n=null;(n=t%2==0?cc.instantiate(cc.find("scrollView/view/list",this.tabPage[4])):cc.instantiate(cc.find("scrollView/view/list2",this.tabPage[4]))).setPosition(0,0),n.active=!0,cc.find("scrollView/view/content",this.tabPage[4]).addChild(n),"Open To Register"==this.tourData.state?cc.find("viewTitle/rank/rank",n).getComponent(cc.Label).string="1":cc.find("viewTitle/rank/rank",n).getComponent(cc.Label).string=t+1,cc.find("viewTitle/userName/userName",n).getComponent(cc.Label).string=this.getUsernameRe(t,a.playerName),cc.find("viewTitle/value/value",n).getComponent(cc.Label).string=a.chips}}"Open To Register"==this.tourData.state?cc.find("info_top/v",this.tabPage[4]).getComponent(cc.Label).string="-/"+this.tourData.leaderBoard.length:cc.find("info_top/v",this.tabPage[4]).getComponent(cc.Label).string=(0==e?"-":e)+"/"+this.tourData.leaderBoard.length},t.prototype.updateBlindAndPayout=function(){cc.find("BlindStruct/ScrollView/view/content",this.tabPage[1]).removeAllChildren();for(var e=0;e<this.tourData.blindRule.blindRuleArr.length;e++){var t=this.tourData.blindRule.blindRuleArr[e],a=null;(a=e%2==0?cc.instantiate(cc.find("BlindStruct/ScrollView/view/rule_base",this.tabPage[1])):cc.instantiate(cc.find("BlindStruct/ScrollView/view/rule_base2",this.tabPage[1]))).setPosition(0,0),a.active=!0,cc.find("BlindStruct/ScrollView/view/content",this.tabPage[1]).addChild(a),cc.find("level/level",a).getComponent(cc.Label).string=t.level,cc.find("blind/blind",a).getComponent(cc.Label).string=t.smallBlind+"/"+t.bigBlind,cc.find("ante/ante",a).getComponent(cc.Label).string=t.ante,cc.find("duration/duration",a).getComponent(cc.Label).string=60*t.minutes}for(cc.find("BlindStruct/ScrollView/view/content",this.tabPage[2]).removeAllChildren(),e=0;e<this.tourData.raw.allPayoutStructures.length;e++){var n=this.tourData.raw.allPayoutStructures[e];this.tourData.raw.payoutType,a=null,(a=e%2==0?cc.instantiate(cc.find("BlindStruct/ScrollView/view/rule_base",this.tabPage[2])):cc.instantiate(cc.find("BlindStruct/ScrollView/view/rule_base2",this.tabPage[2]))).setPosition(0,0),a.active=!0,cc.find("BlindStruct/ScrollView/view/content",this.tabPage[2]).addChild(a),cc.find("entries/entries",a).getComponent(cc.Label).string=n.playerRange,cc.find("paid/paid",a).getComponent(cc.Label).string=n.numberOfWinners}},t.prototype.onBlindAndPayout=function(){this.blindAndPayout.active=!0},t.prototype.onCloseBlindAndPayout=function(){this.blindAndPayout.active=!1},t.prototype.onRegisterButton=function(){this.tournamentBuyin.active=!1,this.tournamentBuyin.getComponent("TournamentBuyin").setData(this.tourData,1),this.tournamentBuyin.active=!0;var e=this.tournamentBuyin.getComponent("AnimBase");null!==e&&(this.tournamentBuyin.opacity=0,e.play("showPopUp",function(){}))},t.prototype.onDeRegisterButton=function(){window.TournamentLobbyHandler.requestTournamentDeRegister({tournamentId:this.tourData.id},function(){},function(){})},t.prototype.onReEntryButton=function(){this.tournamentBuyin.active=!1,this.tournamentBuyin.getComponent("TournamentBuyin").setData(this.tourData,3),this.tournamentBuyin.active=!0},t.prototype.onLateRegisterButton=function(){this.tournamentBuyin.active=!1,this.tournamentBuyin.getComponent("TournamentBuyin").setData(this.tourData,2),this.tournamentBuyin.active=!0},t.prototype.onEnterTableButton=function(e,t,a){console.log(";;;;;; onEnterTableButton",t,a),a||(a=this.tourData.id),this.isTableExisting=!1,this.isTournamentExisting=!1,this.indexFound=-1,this.tournamentIndexFound=-1;for(var n=0;n<GameManager.gameModel.activePokerModels.length;n++)if(GameManager.gameModel.activePokerModels[n].tourData&&a===(i=GameManager.gameModel.activePokerModels[n].tourData.id)){this.isTournamentExisting=!0,this.tournamentIndexFound=n;break}for(n=0;n<GameManager.gameModel.activePokerModels.length;n++){var i=GameManager.gameModel.activePokerModels[n].roomConfig._id;if((t||this.tourData.raw.playerData.tableId)===i){this.indexFound=n,this.isTableExisting=!0;break}}if(this.isTableExisting)return console.log(";;;;;; onEnterTableButton2"),ServerCom.loading.active=!1,void(GameManager.isMobile||K.GoToTable?(this.node.active=!1,ScreenManager.showScreen(K.ScreenEnum.GamePlayScreen,this.indexFound,function(){})):window.versions.new({name:this.tourData.id,url:"?GoToTable=1&accesstoken="+K.Token.access_token+"&channelid="+this.tourData.id+"&playerId="+GameManager.user.playerId+"&playerName="+GameManager.user.userName+"&networkIp="+window.ipV4Address+"&realChips="+GameManager.user.realChips+"&isTournament=true"}));this.isTournamentExisting&&(console.log(";;;;;; onEnterTableButton3"),this.node.active=!1,GameManager.gameModel.activePokerModels[this.tournamentIndexFound].leave(),GameManager.gameModel.activePokerModels[this.tournamentIndexFound].presenter.resetGameForReshuffle(),GameManager.gameModel.activePokerModels[this.tournamentIndexFound].resetGameForReshuffle()),socketIO.socket.off((t||this.tourData.raw.playerData.tableId)+":"+this.tourData.raw.playerData.playerId),ServerCom.socketIOBroadcast((t||this.tourData.raw.playerData.tableId)+":"+this.tourData.raw.playerData.playerId,this.onTournamentTableUserBroadcast.bind(this)),window.TournamentLobbyHandler.requestTournamentEnterTable({tournamentId:a},function(){},function(){},this.isTournamentExisting?"Table reshuffling, please wait ......":"Enter table, please wait ......")},t.prototype.start=function(){ServerCom.socketIOBroadcast(K.SocketIOBroadcast.Lobby.TournamentLobbyResponseEvent,this.onTournamentLobbyResponseEvent.bind(this))},t.prototype.onTournamentRefresh=function(e){e._id==this.tourData.id&&(this.tourData=new l.Tournament(e),this.updateData(!0))},t.prototype.onTournamentClosed=function(e){this.onTournamentRefresh(e)},t.prototype.onTournamentLobbyResponseEvent=function(e){if("Res-Register"===e.eventName||"Res-ReEntry"===e.eventName)if(ServerCom.forceKeepLoading=!1,ServerCom.loading.active=!1,e&&e.data&&e.data.success){var t=K.SocketIOBroadcast.Lobby.TournamentNewTable.replace("<TournamentId>",e.data.requestedTournamentId).replace("<PlayerId>",e.data.requesterPlayerId);socketIO.socket.off(t),ServerCom.socketIOBroadcast(t,this.onTournamentNewTable.bind(this));var a=K.SocketIOBroadcast.Lobby.TournamentElimination.replace("<TournamentId>",e.data.requestedTournamentId).replace("<PlayerId>",e.data.requesterPlayerId);ServerCom.socketIOBroadcast(a,this.onTournamentElimination.bind(this)),GameManager.popUpManager.show(c.PopUpType.RegDialog,1,function(){})}else GameManager.popUpManager.show(c.PopUpType.CommonDialog,{title:"Error!",content:e.data.info?e.data.info:e.data.response},function(){});else"Res-Deregister"===e.eventName?e&&e.data&&e.data.success?(t=K.SocketIOBroadcast.Lobby.TournamentNewTable.replace("<TournamentId>",e.data.requestedTournamentId).replace("<PlayerId>",e.data.requesterPlayerId),socketIO.socket.off(t),a=K.SocketIOBroadcast.Lobby.TournamentElimination.replace("<TournamentId>",e.data.requestedTournamentId).replace("<PlayerId>",e.data.requesterPlayerId),socketIO.socket.off(a)):GameManager.popUpManager.show(c.PopUpType.CommonDialog,{title:"Error!",content:e.data.info?e.data.info:e.data.response},function(){}):"Res-LateRegister"===e.eventName?e&&e.data&&e.data.success?(t=K.SocketIOBroadcast.Lobby.TournamentNewTable.replace("<TournamentId>",e.data.requestedTournamentId).replace("<PlayerId>",e.data.requesterPlayerId),socketIO.socket.off(t),ServerCom.socketIOBroadcast(t,this.onTournamentNewTable.bind(this)),a=K.SocketIOBroadcast.Lobby.TournamentElimination.replace("<TournamentId>",e.data.requestedTournamentId).replace("<PlayerId>",e.data.requesterPlayerId),ServerCom.socketIOBroadcast(a,this.onTournamentElimination.bind(this)),GameManager.popUpManager.show(c.PopUpType.RegDialog,1,function(){})):GameManager.popUpManager.show(c.PopUpType.CommonDialog,{title:"Error!",content:e.data.info?e.data.info:e.data.response},function(){}):"Res-GetTournamentData"===e.eventName&&e.data.response._id==this.tourData.id&&(this.tourData=new l.Tournament(e.data.response),this.updateData(!0))},t.prototype.onTournamentElimination=function(e){this.tournamentResultWinner.active=!1,this.tournamentResultPlacement.getComponent("TournamentResultsPlacement").setData(e),this.tournamentResultPlacement.active=!0},t.prototype.onTournamentNewTable=function(e){console.log(";;;;;; onTournamentNewTable",e),this.newTableData=e,socketIO.socket.off(e.eventData.tableId+":"+e.eventData.playerId),ServerCom.socketIOBroadcast(e.eventData.tableId+":"+e.eventData.playerId,this.onTournamentTableUserBroadcast.bind(this)),e.eventData.tournamentId==this.tourData.id&&(this.enterTableBtn.active=!1,this.deRegisterTableBtn.active=!1,this.lateRegisterBtn.active=!1,this.registerBtn.active=!1,this.stateBtn.active=!1,this.enterTableBtn.active=!0),GameManager.isActive&&(GameManager.popUpManager.hideAllPopUps(),GameManager.tableStartTime=this.newTableData.eventData.tableStartTime,this.onEnterTableButton(null,this.newTableData.eventData.tableId,this.newTableData.eventData.tournamentId))},t.prototype.onTournamentTableBroadcast=function(){},t.prototype.onTournamentTableUserBroadcast=function(e){if(console.log(";;;;;; GameManager.isActive",GameManager.isActive),console.log(";;;;;; onTournamentTableUserBroadcast",e),"joinChannelResponse"==e.eventName||"enterChannelResponse"==e.eventName)if(e.data.success){cc.systemEvent.emit("HideTournamentNotification"),GameManager.popUpManager.hideAllPopUps();for(var t=null,a=0;a<TournamentLobbyListPresenter.contentHolderAll.children.length;a++){var n=TournamentLobbyListPresenter.contentHolderAll.children[a];if(n.getComponent("TournamentLobbyListItem").tourItemInfo.id==e.data.tournamentId){t=n.getComponent("TournamentLobbyListItem").tourItemInfo;break}}socketIO.socket.off(e.channelId+":"+e.playerId);var i=K.SocketIOBroadcast.Lobby.TournamentElimination.replace("<TournamentId>",e.data.tournamentId).replace("<PlayerId>",e.playerId);if(socketIO.socket.off(i),socketIO.socket.off(e.eventTo),!GameManager.isActive)return ServerCom.forceKeepLoading=!1,void(ServerCom.loading.active=!1);if(t||console.warn("correctInfocorrectInfocorrectInfo"),e.data.gameData=new r.GameData(e.data),e.data.tourData=t||this.tourData,this.isTournamentExisting)console.log(";;;;;; onTournamentTableUserBroadcast2"),this.node.active=!1,ServerCom.forceKeepLoading=!1,GameManager.gameModel.activePokerModels[this.tournamentIndexFound].initiliazePoker(e.data);else{if(console.log(";;;;;; onTournamentTableUserBroadcast3"),!GameManager.isMobile&&!K.GoToTable)return void window.versions.new({name:this.tourData.id,url:"?GoToTable=1&accesstoken="+K.Token.access_token+"&channelid="+this.tourData.id+"&tableid="+e.channelId+"&playerId="+GameManager.user.playerId+"&playerName="+GameManager.user.userName+"&networkIp="+window.ipV4Address+"&realChips="+GameManager.user.realChips+"&isTournament=true"});this.node.active=!1,ScreenManager.showScreen(K.ScreenEnum.GamePlayScreen,e.data,function(){})}this.scheduleOnce(function(){ServerCom.forceKeepLoading=!1,ServerCom.loading.active=!1},1)}else ServerCom.forceKeepLoading=!1,ServerCom.loading.active=!1,GameManager.popUpManager.show(c.PopUpType.CommonDialog,{title:"Error!",content:e.data.info},function(){});else"tournamentWinner"==e.eventName&&(this.tournamentResultPlacement.active=!1,this.tournamentResultWinner.getComponent("TournamentResultsPlacement").setData(e),this.tournamentResultWinner.active=!0)},t._instance=null,o([u(cc.Label)],t.prototype,"header1",void 0),o([u(cc.Label)],t.prototype,"header2",void 0),o([u(cc.Label)],t.prototype,"header3",void 0),o([u(cc.Node)],t.prototype,"reentryBtn",void 0),o([u(cc.Node)],t.prototype,"enterTableBtn",void 0),o([u(cc.Node)],t.prototype,"deRegisterTableBtn",void 0),o([u(cc.Node)],t.prototype,"lateRegisterBtn",void 0),o([u(cc.Node)],t.prototype,"registerBtn",void 0),o([u(cc.Node)],t.prototype,"stateBtn",void 0),o([u(cc.Node)],t.prototype,"CountDown",void 0),o([u(cc.Label)],t.prototype,"CountDowninfo",void 0),o([u(cc.Label)],t.prototype,"CountDowntime",void 0),o([u(cc.Label)],t.prototype,"desc",void 0),o([u(cc.Label)],t.prototype,"late",void 0),o([u(cc.Label)],t.prototype,"minmaxPlayers",void 0),o([u(cc.Label)],t.prototype,"curBlindInfo",void 0),o([u(cc.Label)],t.prototype,"nextBlindInfo",void 0),o([u(cc.Label)],t.prototype,"timerBlindInfo",void 0),o([u(cc.Label)],t.prototype,"playerPerTables",void 0),o([u(cc.Label)],t.prototype,"isReentryAllowed",void 0),o([u(cc.Label)],t.prototype,"isRebuyAllowed",void 0),o([u(cc.Label)],t.prototype,"isAddonAllowed",void 0),o([u(cc.Label)],t.prototype,"registrationBeforeStarttime",void 0),o([u(cc.Label)],t.prototype,"tournamentStartTime",void 0),o([u(cc.Label)],t.prototype,"startingChips",void 0),o([u(cc.Label)],t.prototype,"status",void 0),o([u(cc.Label)],t.prototype,"gameType",void 0),o([u(cc.Label)],t.prototype,"tournamentName",void 0),o([u(cc.Label)],t.prototype,"guaranteedValue",void 0),o([u(cc.Label)],t.prototype,"entryFees",void 0),o([u(cc.Label)],t.prototype,"uniqueEntries",void 0),o([u(cc.Label)],t.prototype,"reentriesCount",void 0),o([u(cc.Label)],t.prototype,"highestStack",void 0),o([u(cc.Label)],t.prototype,"lowestStack",void 0),o([u(cc.Label)],t.prototype,"avarageStack",void 0),o([u(cc.Node)],t.prototype,"tabBtns",void 0),o([u(cc.Node)],t.prototype,"tabPage",void 0),o([u(cc.Color)],t.prototype,"labeActiveColor",void 0),o([u(cc.SpriteFrame)],t.prototype,"btnFrame",void 0),o([u(cc.Node)],t.prototype,"blindAndPayout",void 0),o([u(cc.Node)],t.prototype,"tournamentBuyin",void 0),o([u(cc.Node)],t.prototype,"tournamentResultPlacement",void 0),o([u(cc.Node)],t.prototype,"tournamentResultWinner",void 0),a=o([h],t)}(cc.Component);a.TournamentLobbyPresenter=p,cc._RF.pop()},{"../../DataFormats/ResponseTypes":"ResponseTypes","../../Utilities/ScreensAndPopUps/PopUps/PopUpManager":"PopUpManager","../data/TournamentResponseTypes":"TournamentResponseTypes"}],TournamentLobbyTableMain:[function(e,t){"use strict";cc._RF.push(t,"2917dGmGz5Ghp4zoVhAiTus","TournamentLobbyTableMain");var a=e("TournamentTableRunningTableInfo"),n=e("TournamentTablePlayersOnTableInfo"),i=e("TournamentTablePlayersInfo");e("ResponseTypes").GameData,cc.Class({extends:cc.Component,properties:{tableData:null,runningInfoOddPrefab:{default:null,type:cc.Prefab},runningInfoEvenPrefab:{default:null,type:cc.Prefab},runningInfoGrid:{default:null,type:cc.Node},specificTableInfoOddPrefab:{default:null,type:cc.Prefab},specificTableInfoEvenPrefab:{default:null,type:cc.Prefab},specificTableInfoGrid:{default:null,type:cc.Node},PlayersInfoOddPrefab:{default:null,type:cc.Prefab},PlayersInfoEvenPrefab:{default:null,type:cc.Prefab},PlayersInfoGrid:{default:null,type:cc.Node},selection:-1,tableDataMain:null,cancelPopup:null,observeBtn:{default:null,type:cc.Button},warningLbl:{default:null,type:cc.Label},setPlayersRankFunc:null,checkData:null},onLoad:function(){this.setPlayersRankFunc=this.setPlayersRank1.bind(this),this.checkData=this.destroyData.bind(this),ServerCom.pomeloBroadcast(K.LobbyBroadcastRoute.tableView,this.setPlayersRankFunc),ServerCom.pomeloBroadcast(K.LobbyBroadcastRoute.tournament,this.destroyData.bind(this))},destroyData:function(e){if(TableContent.prevSelection&&TableContent.prevSelection.channelData._id==e.tournamentId)for(var t=0;t<this.tableData.length;t++)if(e.updated.channelId==this.tableData[t].channelId){this.tableData.splice(t,1),this.modifyTableData(this.tableData);break}},onDestroy:function(){pomelo.off(K.LobbyBroadcastRoute.tableView,this.setPlayersRankFunc)},setPlayersRank1:function(e){e.tournamentId==TableContent.prevSelection.channelData._id&&this.updateTotalPlayers(e.updated.ranks)},allowObserve:function(){var e=!(-1==this.selection||this.tableDataMain.state!==K.GameState.Running);return this.warningLbl.node.active=!e,e||-1!=this.selection||this.tableDataMain.state!==K.GameState.Running||(this.warningLbl.string="No table selected"),e},onEnable:function(){this.observeBtn.interactable=this.allowObserve()},setTableData:function(e,t,a,n){this.tableDataMain=a,this.cancelPopup=n,this.updateTotalPlayers(t),this.tableData=e,this.modifyTableData(e)},onPlayerShufffle:function(e){var t,a,n=-1;if(TableContent.prevSelection&&TableContent.prevSelection.channelData._id==e.tournamentId){for(var i=0;i<this.tableData.length;i++)if(e.updated.fromChannelId==this.tableData[i].channelId){t=i;for(var o=0;o<this.tableData[i].players.length;o++)if(e.updated.playerId==this.tableData[i].players[o].channelId){a=o;break}}else e.updated.toChannelId==this.tableData[i].channelId&&(n=i);t>=0&&n>=0&&a>=0&&(this.tableData[n].players.push(this.tableData[t].players[a]),this.tableData[t].players.splice(a,1),this.modifyTableData(this.tableData))}},modifyTableData:function(e){GameManager.removeAllChildren(this.runningInfoGrid);for(var t=0,n=0;n<e.length;n++)if(this.selection==e[n].channelId&&(t=n),0!==e[n].players.length){var i=null;i=n%2==0?cc.instantiate(this.runningInfoEvenPrefab):cc.instantiate(this.runningInfoOddPrefab),this.runningInfoGrid.addChild(i),i.getComponent(a).setValues(e[n],n),i.getComponent(a).callback=this.updateTableDetails.bind(this)}e.length>0&&this.runningInfoGrid.children[t].getComponent(a).onClick()},updateTableDetails:function(e,t){this.selection=t,this.removePrevSelection(t),this.observeBtn.interactable=this.allowObserve(),GameManager.removeAllChildren(this.specificTableInfoGrid);for(var a=0;a<e.length;a++){var i=null;i=a%2==0?cc.instantiate(this.specificTableInfoEvenPrefab):cc.instantiate(this.specificTableInfoOddPrefab),this.specificTableInfoGrid.addChild(i),i.getComponent(n).setValues(e[a],t)}},removePrevSelection:function(e){for(var t=0;t<this.runningInfoGrid.children.length;t++){var n=this.runningInfoGrid.children[t].getComponent(a);n.id!==e&&n.removeSelection()}},updateTotalPlayers:function(e){GameManager.removeAllChildren(this.PlayersInfoGrid);for(var t=0;t<e.length;t++){var a=null;a=t%2==0?cc.instantiate(this.PlayersInfoEvenPrefab):cc.instantiate(this.PlayersInfoOddPrefab),this.PlayersInfoGrid.addChild(a),a.getComponent(i).setValues(e[t])}},observeTable:function(){if(-1!=this.selection&&this.tableDataMain.state===K.GameState.Running){var e=this.tableData,t={};t.channelId=e[this.selection].channelId,t.channelType="TOURNAMENT",t.tableId="",t.isRequested=!0,GameManager.join(t.channelId,K.PomeloAPI.joinChannel,t)&&this.cancelPopup()}}}),cc._RF.pop()},{ResponseTypes:"ResponseTypes",TournamentTablePlayersInfo:"TournamentTablePlayersInfo",TournamentTablePlayersOnTableInfo:"TournamentTablePlayersOnTableInfo",TournamentTableRunningTableInfo:"TournamentTableRunningTableInfo"}],TournamentModelHandler:[function(e,t){"use strict";cc._RF.push(t,"f1ff8eS5YJEMYr2ySsUHMew","TournamentModelHandler");var a=e("PopUpManager").PopUpType,n=(e("../../DataFormats/PostTypes").SitOutData,cc.Enum({SitOutNextHand:1,SitOueNextBB:2,None:-1}));function i(){}i.prototype.setModel=function(e){e.resetGameForReshuffle=function(){e.gameModel.removeBroadcastCallbacks(e.gameData.channelId),socketIO.socket.off(e.gameData.channelId),socketIO.socket.off(e.gameData.channelId+":"+e.gameData.playerId),socketIO.socket.off(K.SocketIOBroadcast.Lobby.TournamentUpdated),cc.systemEvent.off(K.SocketIOEvent.Lobby.TournamentRefresh)},e.onDestroy=function(){e.kickPlayerOutOfTheGame(e),cc.director.getActionManager().removeAllActions(),e.gameModel.removeBroadcastCallbacks(e.gameData.channelId),socketIO.socket.off(e.gameData.channelId),socketIO.socket.off(e.gameData.channelId+":"+e.gameData.playerId),socketIO.socket.off(K.SocketIOBroadcast.Lobby.TournamentUpdated),cc.systemEvent.off(K.SocketIOEvent.Lobby.TournamentRefresh)},e.sitOutNextHand=function(t){ServerCom.socketIORequest(K.SocketIOAPI.Game.TournamentSitOut,{channelId:e.gameData.channelId,playerId:e.gameData.playerId,isRequested:!0},function(a){a.success&&(e.sitOutValue=n.SitOutNextHand),null!=t&&t(a)},null,5e3,!1)},e.resetSitout=function(t){ServerCom.socketIORequest(K.SocketIOAPI.Game.TournamentResetSitout,{channelId:e.gameData.channelId,playerId:e.gameData.playerId,isRequested:!0},function(a){a.success&&(e.sitOutValue=n.None),null!=t&&t(a)},null,5e3,!1)},e.makeMove=function(t,a){ServerCom.socketIORequest(K.SocketIOAPI.Game.TournamentMakeMove,{channelId:e.gameData.channelId,amount:t,action:a},null,null,5e3,!1)},e.fireMuckHandEvent=function(){ServerCom.socketIORequest(K.SocketIOAPI.Game.TournamentFire,{channelId:e.gameData.channelId,seatIndex:e.getMyPlayer().seatIndex,channelType:"TOURNAMENT",route:"fireEvent",playerId:e.gameData.playerId,isRequested:!0},null,null,5e3,!1)},e.resume=function(t){ServerCom.socketIORequest(K.SocketIOAPI.Game.TournamentResume,{channelId:e.gameData.channelId,playerId:e.gameData.playerId,isRequested:!0},function(a){if(a.success){e.sitOutValue=3;var n=e.gameData.tableDetails.players[e.getPlayerById(e.gameData.playerId)];n.isTournamentSitout=!1,n.state=K.PlayerState.Playing,null!=t&&t()}},null,5e3,!1)},e.onTournamentRefresh=function(t){console.log("%c[pokerModel.onTournamentRefresh] %s %o","color: blue;",t),e.gameData&&(t._id==e.gameData.raw.tournamentId&&"CLOSED"==t.state&&e.emit(K.SocketIOEvent.Game.TournamentClosed,t),t.lastTableId&&""!=t.lastTableId&&e.gameData.channelId==t.lastTableId&&(e.gameData.raw.tourData.raw.lastTableId=t.lastTableId,e.presenter.changeTableFinal()),t._id==e.gameData.raw.tournamentId&&(e.gameData.raw.tourData.raw.currentBlindLevel=t.currentBlindLevel))},e.onTournamentTableBroadcast=function(t){if(console.log("%c[pokerModel.onTournamentTableBroadcast] %s %o","color: blue;",t.eventName,t),t.eventName==K.BroadcastRoute.dealerrChat)e.onDealerChat(t.data);else if(t.eventName==K.BroadcastRoute.blindDeduction)e.onBlindDeducted(t.data);else if(t.eventName==K.BroadcastRoute.gamePlayers)e.onGamePlayers(t.data);else if(t.eventName==K.BroadcastRoute.startGame)e.onGameStart(t.data);else if(t.eventName==K.BroadcastRoute.turn)e.onMoveMade(t.data);else if(t.eventName==K.BroadcastRoute.roundOver)e.onRoundOver(t.data);else if(t.eventName==K.BroadcastRoute.gameOver)e.onGameOver(t.data);else if(t.eventName==K.BroadcastRoute.playerState)e.onPlayerStateChange(t.data);else if(t.eventName==K.BroadcastRoute.breakTime)e.onBreakTime(t.data);else if(t.eventName==K.BroadcastRoute.sit)e.onSit(t.data);else if(t.eventName==K.BroadcastRoute.onTimeBank)e.onTimeBank(t.data);else if(t.eventName==K.BroadcastRoute.handTab)e.onHandTab(t.data);else if("emoji"==t.eventName)e.onSendSticker(t.data);else if("message"==t.eventName)e.onChat(t.data);else if("startDisconnectTime"==t.eventName)e.onDisconnectTime(t.data);else if("tableDestroyed"==t.eventName)e.onTableDestroyed(t.data);else if("fireEvent"==t.eventName)e.onFireEvent(t.data);else if("addonBreakTime"==t.eventName)e.onAddonBreakTime(t.data);else if("addonBreakTimeOver"==t.eventName)e.onAddonBreakTimeOver(t.data);else if("leave"==t.eventName){var a=null,n=this.getPlayerById(t.data.playerId);-1!==n&&(a=this.gameData.tableDetails.players.splice(n,1),e.emit(K.PokerEvents.OnLeave,a))}},e.onTournamentTableUserBroadcast=function(t){console.log("%c[pokerModel.onTournamentTableUserBroadcast] %s %o","color: blue;",t.eventName,t),t.eventName==K.BroadcastRoute.connectionAck?e.onConnectionAck(t.data):t.eventName==K.BroadcastRoute.playerCards?e.onPlayerCards(t.data):t.eventName==K.BroadcastRoute.preCheck?e.onPreCheck(t.data):t.eventName==K.BroadcastRoute.eliminated?e.onEliminated(t.data):t.eventName==K.BroadcastRoute.tournamentWinner?e.onTournamentWinner(t.data):t.eventName==K.BroadcastRoute.bestHands?e.onBestHands(t.data):"rebuyActivated"==t.eventName?e.onRebuyActivated(t.data):"rebuyDeactivated"==t.eventName?e.onRebuyDeactivated(t.data):"Res-Rebuy"==t.eventName?e.onResRebuy(t):"Res-AddOn"==t.eventName?e.onResAddon(t.data):"inactiveKicked"==t.eventName?e.onInactiveKicked(t.data):"tournamentCancelled"==t.eventName&&e.onTournamentCancelled(t.data)},e.onEliminatedBroadcast=function(t){e.onEliminated(t.data)},e.onInitializePoker=function(){ServerCom.socketIOBroadcast(e.gameData.channelId,this.onTournamentTableBroadcast.bind(this)),ServerCom.socketIOBroadcast(e.gameData.channelId+":"+e.gameData.playerId,this.onTournamentTableUserBroadcast.bind(this)),cc.systemEvent.on(K.SocketIOEvent.Lobby.TournamentRefresh,this.onTournamentRefresh.bind(this),this.node),ServerCom.socketIOBroadcast(K.SocketIOBroadcast.Lobby.TournamentUpdated,this.onTournamentUpdated.bind(this)),ServerCom.socketIOBroadcast("Tournament:Break",this.onTournamentsBreakStarts.bind(this))},e.onTournamentsBreakStarts=function(t){"TournamentsBreakStarts"==t.eventType&&e.emit("TournamentsBreakStarts",t)},e.onTableDestroyed=function(t){t.tableId==e.gameData.raw.channelId&&e.emit(K.SocketIOEvent.Game.TableDestroyed,t)},e.onDisconnectTime=function(t){e.emit(K.SocketIOEvent.Game.DisconnectTime,t)},e.onEliminated=function(t){e.emit(K.SocketIOEvent.Game.Eliminated,t)},e.onTournamentWinner=function(t){e.emit(K.SocketIOEvent.Game.TournamentWinner,t)},e.onBreakTime=function(t){e.emit(K.SocketIOEvent.Game.BreakTime,t)},e.onAddonBreakTime=function(t){e.emit("addonBreakTime",t)},e.onAddonBreakTimeOver=function(t){e.emit("addonBreakTimeOver",t)},e.onTournamentUpdated=function(t){e.emit(K.SocketIOEvent.Game.TournamentUpdated,t)},e.leave=function(t){GameManager.playerRequestedToLeaveTable[e.gameData.raw.tournamentId]=!0,e.alreadyKickingOut=!0,t&&e.kickPlayerOutOfTheGame(e)}},i.prototype.setPresenter=function(e){e.onTournamentUpdated=function(t){if("TournamentBlindUpdate"==t.eventName&&t.tournamentId==e.model.gameData.raw.tournamentId){if(e.node.getChildByName("winnerBannerBg2")){var a=e.node.getChildByName("winnerBannerBg2");a.active=!0,a.getChildByName("winningText").getComponent(cc.Label).string="New Blind Level - "+t.data.smallBlind+"/"+t.data.bigBlind,cc.director.getScheduler().schedule(function(){a.active=!1},e,1.3)}e.model.gameData.raw.tourData.raw.currentBlindLevel=t.data,e.updateBlind()}},e.onTournamentClosed=function(){e.tournamentResultPlacement.active||e.isObserver()&&(e.tournamentKickInfo.active=!0,e.tournamentKickInfo.getComponent("TournamentInfo").setData({title:"Information",content:"The tournament is closed."}))},e.onTableDestroyed=function(){e.tournamentResultPlacement.active||e.isObserver()&&(e.tournamentKickInfo.active=!0,e.tournamentKickInfo.getComponent("TournamentInfo").setData({title:"Information",content:"The table is closed."}))},e.onDisconnectTime=function(t){e.model.startTimerTick(t.disconnectTime);var a=e.playerHand[e.getRotatedSeatIndex(e.model.gameData.tableDetails.currentMoveIndex)];a.playerData&&(a.timeBank.active=!1,a.onDisconnectTime(t.disconnectTime))},e.onBreakTime=function(t){console.log("onBreakTime",t),e.tournamentResultPlacement.active||(t.isInBreak?(e.breakInfoNode.active=!1,e.breakInfoPopupNode.active=!1,e.tournamentBreakTime.active=!0,e.mobileGamePlayOptionsVisible&&e.mobileGamePlayOptions(),e.model.gameData.raw.tourData.raw.isInBreak=!0,e.tournamentBreakTime.getComponent("TournamentBreakTime").setData(t)):(e.model.gameData.raw.tourData.raw.isInBreak=!1,e.tournamentBreakTime.active=!1))},e.onAddonBreakTime=function(t){e.tournamentBreakTimeAddon.active=!0,e.tournamentBreakTimeAddon.getComponent("TournamentBreakTimeAddon").setData(t)},e.onAddonBreakTimeOver=function(){e.tournamentBreakTimeAddon.active=!1},e.onResRebuy=function(t){e.updateRebuyChips(t)},e.onResAddon=function(t){e.tournamentBreakTimeAddon.getComponent("TournamentBreakTimeAddon").addonDone(t)},e.onInactiveKicked=function(t){t.playerId==GameManager.user.playerId&&(e.tournamentKickInfo.active=!0,e.tournamentKickInfo.getComponent("TournamentInfo").setData({title:"Information",content:"Your have been elimnated for being inactive."}))},e.onTournamentCancelled=function(){e.tournamentKickInfo.active=!0,e.tournamentKickInfo.getComponent("TournamentInfo").setData({title:"Information",content:"The tournament has been cancelled."})},e.onEliminated=function(t){e.tournamentBreakTime.active=!1,e.tournamentKickInfo.active=!1,e.tournamentResultWinner.active=!1,e.tournamentResultPlacement.getComponent("TournamentResultsPlacement").setData(t),e.tournamentResultPlacement.active=!0,e.model.gameModel.removeBroadcastCallbacks(e.model.gameData.channelId),socketIO.socket.off(e.model.gameData.channelId),socketIO.socket.off(e.model.gameData.channelId+":"+e.model.gameData.playerId),socketIO.socket.off(K.SocketIOBroadcast.Lobby.TournamentUpdated),cc.systemEvent.off(K.SocketIOEvent.Lobby.TournamentRefresh)},e.onTournamentWinner=function(t){e.tournamentKickInfo.active=!1,e.tournamentResultPlacement.active=!1,e.tournamentResultPlacement.getComponent("TournamentResultsPlacement").setData(t),e.tournamentResultPlacement.active=!0},e.onSitnGoElimination=function(t){t.playerId==GameManager.user.playerId&&(t.pokerPresenter=e,setTimeout(function(){e&&e.popUpManager.show(a.SitNGoResultPopup,t,function(){})},2e3))},e.tempOnLoad=function(){e.model.on(K.SocketIOEvent.Game.Eliminated,e.onEliminated.bind(e)),e.model.on(K.SocketIOEvent.Game.TournamentWinner,e.onTournamentWinner.bind(e)),e.model.on(K.SocketIOEvent.Game.BreakTime,e.onBreakTime.bind(e)),e.model.on("addonBreakTime",e.onAddonBreakTime.bind(e)),e.model.on("addonBreakTimeOver",e.onAddonBreakTimeOver.bind(e)),e.model.on("resRebuy",e.onResRebuy.bind(e)),e.model.on("resAddon",e.onResAddon.bind(e)),e.model.on("inactiveKicked",e.onInactiveKicked.bind(e)),e.model.on("TournamentCancelled",e.onTournamentCancelled.bind(e)),e.model.on(K.SocketIOEvent.Game.TournamentUpdated,e.onTournamentUpdated.bind(e)),e.model.on(K.SocketIOEvent.Game.TournamentClosed,e.onTournamentClosed.bind(e)),e.model.on(K.SocketIOEvent.Game.TableDestroyed,e.onTableDestroyed.bind(e)),e.model.on(K.SocketIOEvent.Game.DisconnectTime,e.onDisconnectTime.bind(e)),e.model.on("TournamentsBreakStarts",e.onTournamentsBreakStarts.bind(e))},e.onTournamentsBreakStarts=function(){"SIT N GO"!=this.model.gameData.raw.tourData.raw.tournamentType&&(e.mobileGamePlayOptionsVisible&&e.mobileGamePlayOptions(),e.breakInfoNode.active=!0,e.breakInfoPopupNode.active=!1)},e.tempOnJoinSuccess=function(){if(this.model.roomConfig.tournamentType==this.model.K.TournamentType.Normal&&(this.setCheckBoxValues(),this.rebuyBtn.active=this.model.gameData.tableDetails.isRebuy&&!this.model.gameData.tableDetails.isAutoAddOn),this.tournamentAlreadyOver(),this.model.gameData.tableDetails.isOnBreak){var e=this.model.gameData.tableDetails.breakEnds;this.startBreakTimer(void 0!==e&&e)}},e.setCheckBoxValues=function(){this.sitOutNextBBCheckBox.node.parent.active=!1,this.autoAddOnCheckBox.node.parent.active=!0,this.autoBuyInCheckBox.node.parent.active=!0,this.autoAddOnCheckBox.setSelection(this.model.gameData.tableDetails.isAutoAddOn),this.autoBuyInCheckBox.setSelection(this.model.gameData.tableDetails.isAutoRebuy)},e.resetView=function(){e.indexOffset=0;for(var t=0;t<e.playerHand.length;t++)e.playerHand[t].resetSeat();e.allocateSeat(),e.playerHand.forEach(function(e){e.seatState===K.SeatState.Free&&e.disableView()},e)},e.onBreakTimeStart=function(t){e.startBreakTimer(t.breakTime)},e.onRebuyStatus=function(t){e.rebuyBtn.active=t.status},e.startBreakTimer=function(e){this.tournamentInfo.parent.active=!0,this.tournamentInfo.active=!0;var t,a=this.tournamentInfo.getComponent(cc.Label);e||(a.string="This table is on Break"),t=e>1e3?parseInt(parseInt(e)/1e3):60*parseInt(e),this.timerSchedule=setInterval(function(){a.string="Break Time Starts...\nTime Left : "+parseInt(t/60)+":"+t%60,--t<=0&&(clearInterval(this.timerSchedule.bind(this)),this.tournamentInfo.parent.active=!1)}.bind(this),1e3)},e.playerLeft=function(t){null!==t&&(t[0].playerId===e.model.gameData.playerId&&(this.handleSitOutBtns(!0),e.resetView()),e.playerHand[e.getRotatedSeatIndex(t[0].seatIndex)].disableView(),this.scheduleOnce(function(){if(0==e.model.gameData.tableDetails.players.length){var t={};t.pokerPresenter=e,e.popUpManager.show(a.SitNGoResultPopup,t,function(){})}},5))},e.notifyBlindsChanged=function(){var t;e.notificationBox.active=!0,e.model.gameData.tableDetails.nextSmallBlind<=0?e.stopBlindsChangeNotification():(t="",t+="Next Blinds "+e.model.roomConfig.nextSmallBlind+"/"+e.model.roomConfig.nextBigBlind+"Next Ante "+e.model.roomConfig.nextAnte),e.notificationBox.getChildByName("Message").getComponent(cc.Label).string=t},e.stopBlindsChangeNotification=function(){e.notificationBox.active=!1},e.onAddonChanged=function(){this.addonBtn.active=this.model.gameData.tableDetails.isAddon},e.onAddOnCheckBox=function(){var t=e.autoAddOnCheckBox.getSelection();this.model.gameData.isAutoRebuy=t,this.model.setAddOnCheckbox(t,function(e){e.success||(this.model.gameData.isAutoRebuy=!t),this.addOnCheckCB.bind(this)}.bind(this))},e.addOnCheckCB=function(){this.autoAddOnCheckBox.setSelection(this.model.gameData.isAutoRebuy)},e.onRebuyCheckBox=function(){var t=e.autoBuyInCheckBox.getSelection();this.model.setRebuyCheckBox(t,function(e){e.success||(this.model.gameData.isAutoRebuy=!t),this.reBuyCheckCB.bind(this)}.bind(this))},e.reBuyCheckCB=function(){e.autoBuyInCheckBox.setSelection(this.model.gameData.isAutoRebuy)}},t.exports={TournamentModelHandler:i},cc._RF.pop()},{"../../DataFormats/PostTypes":"PostTypes",PopUpManager:"PopUpManager"}],TournamentNotification:[function(e,t){"use strict";var a;cc._RF.push(t,"490a3+YSBhBtL37WZNym5Hg","TournamentNotification");var n=e("GameConfig").K,i=e("../../Utilities/ScreensAndPopUps/PopUps/PopUpManager").PopUpType,o=e("../../DataFormats/ResponseTypes").GameData;cc.Class(((a={extends:cc.Component,properties:{nameLabel:{default:null,type:cc.Label},isTableExisting:!1,isTournamentExisting:!1,tournamentIndexFound:-1,indexFound:-1,data:null,tourData:null,index:-1},onLoad:function(){},onDisable:function(){},onEnable:function(){},onClose:function(){this.node.active=!1},setData:function(e,t,a){console.log(e),this.data=e.eventData,this.tourData=t,this.index=a,this.nameLabel.string=t.tournamentName},onGoToTable:function(){this.onEnterTableButton(this.data.tournamentId)}}).onClose=function(){this.hide()},a.show=function(){this.node.active=!0},a.hide=function(){this.node.active=!1},a.onEnterTableButton=function(){cc.systemEvent.emit("HideTournamentNotification"),console.log("onEnterTableButton"),this.hide(),this.isTableExisting=!1,this.isTournamentExisting=!1,this.indexFound=-1,this.tournamentIndexFound=-1;for(var e=0;e<GameManager.gameModel.activePokerModels.length;e++)if(GameManager.gameModel.activePokerModels[e].tourData){var t=GameManager.gameModel.activePokerModels[e].tourData.id;if(this.data.tournamentId===t){this.isTournamentExisting=!0,this.tournamentIndexFound=e;break}}for(e=0;e<GameManager.gameModel.activePokerModels.length;e++)if(t=GameManager.gameModel.activePokerModels[e].roomConfig._id,this.data.tableId===t){this.indexFound=e,this.isTableExisting=!0;break}if(this.isTableExisting)return ServerCom.loading.active=!1,ScreenManager.showScreen(n.ScreenEnum.GamePlayScreen,this.indexFound,function(){}),this.data=null,void(this.tourData=null);socketIO.socket.off(this.data.tableId+":"+GameManager.user.playerId),ServerCom.socketIOBroadcast(this.data.tableId+":"+GameManager.user.playerId,this.onTournamentTableUserBroadcast.bind(this)),window.TournamentLobbyHandler.requestTournamentEnterTable({tournamentId:this.data.tournamentId},function(){},function(){},"Enter table, please wait ......"),this.data=null},a.onTournamentTableUserBroadcast=function(e){if(console.log("GameManager.isActive",GameManager.isActive),console.log(">>>>>>>>>>>>>>>>>>>>>>>onTournamentTableUserBroadcast",e),"enterChannelResponse"==e.eventName)if(e.data.success){if(GameManager.popUpManager.hideAllPopUps(),socketIO.socket.off(e.channelId+":"+e.playerId),socketIO.socket.off(e.eventTo),!GameManager.isActive)return ServerCom.forceKeepLoading=!1,void(ServerCom.loading.active=!1);e.data.gameData=new o(e.data),e.data.tourData=this.tourData,this.isTournamentExisting?GameManager.gameModel.activePokerModels[this.tournamentIndexFound].initiliazePoker(e.data):ScreenManager.showScreen(n.ScreenEnum.GamePlayScreen,e.data,function(){}),this.scheduleOnce(function(){ServerCom.forceKeepLoading=!1,ServerCom.loading.active=!1},1.2)}else ServerCom.forceKeepLoading=!1,ServerCom.loading.active=!1,GameManager.popUpManager.show(i.CommonDialog,{title:"Error!",content:e.data.info},function(){})},a)),cc._RF.pop()},{"../../DataFormats/ResponseTypes":"ResponseTypes","../../Utilities/ScreensAndPopUps/PopUps/PopUpManager":"PopUpManager",GameConfig:"GameConfig"}],TournamentResponseTypes:[function(e,t){"use strict";function a(e){this.playerId=e.playerId,this.playerName=e.playerName,this.payout=e.payout,this.rank=e.rank}function n(e){this.playerId=e.playerId,this.chips=e.chips,this.playerName=e.playerName,this.updatedAt=e.updatedAt}function i(e,t){this.id=e,this.minStack=t.minStack,this.maxStack=t.maxStack,this.playersCount=t.playersCount,this.tableMockName=t.tableMockName}function o(e){this.level=e?e.level:0,this.smallBlind=e?e.smallBlind:0,this.bigBlind=e?e.bigBlind:0,this.ante=e?e.ante:0,this.minutes=e?e.minutes:0,this.levelIndex=e?e.levelIndex:0,this.nextBlindLevelTime=e?e.nextBlindLevelTime:0}function s(e){this.playerRank=e.playerRank,this.playerPayout=e.playerPayout}function r(e){this.id=e._id,this.playerRange=e.playerRange,this.createdAt=e.createdAt,this.noOfWinners=e.noOfWinners,this.minPlayer=e.minPlayer,this.maxPlayer=e.maxPlayer;var t=[];e.payoutRecord.forEach(function(e){t.push(new s(e))},this),this.payoutRecord=t,this.payoutStructureId=e.payoutStructureId}function l(e){this.level=e.level,this.smallBlind=e.smallBlind,this.bigBlind=e.bigBlind,this.ante=e.ante,this.minutes=e.minutes,this.levelIndex=e.levelIndex}function c(e){this.id=e._id,this.ruleName=e.ruleName,this.description=e.description;var t=[];e.blindRuleArr.forEach(function(e){t.push(new l(e))},this),this.blindRuleArr=t}function d(e){this.playerId=e.playerId,this.playerName=e.playerName,this.chips=e.chips,this.updatedAt=e.updatedAt}function h(e){this.playerId=e.playerId,this.status=e.status}function u(e){this.tableId=e.tableId,this.status=e.status,this.reShuffleStatus=e.reShuffleStatus,this.gameStatus=e.gameStatus;var t=[];e.seats.forEach(function(e){t.push(new h(e))},this),this.seats=t}function p(e){this.userId=e.userId,this.playerId=e.playerId,this.firstName=e.firstName,this.lastName=e.lastName,this.reentries=e.reentries,this.status=e.status,this.tableId=e.tableId}function m(e){this.chips=e.chips,this.vipPoints=e.vipPoints,this.tickets=e.tickets,this.reentryChips=e.reentryChips,this.reentryHouseChips=e.reentryHouseChips}cc._RF.push(t,"42f55JyD7tD5qnvr3Vvp7Xb","TournamentResponseTypes"),t.exports={Tournament:function(e){this.raw=e,this.id=e._id,this.index=0,this.addonBlindLevel=e.addonBlindLevel,this.rebuyPrice=e.rebuyPrice,e.reentryPrice&&(this.reentryPrice=new m(e.reentryPrice)),this.tournamentName=e.tournamentName,this.gameVariation=e.gameVariation,"NLH"==this.gameVariation?this.gameVariationFullName="No Limit Holdem":"PLO"==this.gameVariation?this.gameVariationFullName="Pot Limit Omaha":this.gameVariationFullName="????",this.tournamentType=e.tournamentType,this.isRealMoney=e.isRealMoney,this.isGtdEnabled=e.isGtdEnabled,this.guaranteedValue=e.guaranteedValue,this.noOfChipsAtGameStart=e.noOfChipsAtGameStart,this.turnTime=e.turnTime,10==this.turnTime?(this.actionType="HT",this.actionTypeFullName="HYPER TURBO"):15==this.turnTime?(this.actionType="T",this.actionTypeFullName="TURBO"):20==this.turnTime?(this.actionType="M",this.actionTypeFullName="MEDIUM"):30==this.turnTime?(this.actionType="S",this.actionTypeFullName="STANDARD"):(this.actionType="?",this.actionTypeFullName="??????"),this.minPlayersToStart=e.minPlayersToStart,this.maxPlayersForTournament=e.maxPlayersForTournament,this.maxPlayers=e.maxPlayers,this.registrationBeforeStarttime=e.registrationBeforeStarttime,this.tournamentStartTime=e.tournamentStartTime,this.displayStartTime=e.tournamentStartDetails?e.tournamentStartDetails.displayStartTime:"",this.regCuttOffTime=e.regCuttOffTime,this.blindRuleId=e.blindRuleId,this.extraTimeAllowed=e.extraTimeAllowed,this.isAddonTimeEnabled=e.isAddonTimeEnabled,this.lateRegistrationAllowed=e.lateRegistrationAllowed,this.lateRegistrationTime=e.lateRegistrationTime,this.isRebuyAllowed=e.isRebuyAllowed,this.isReentryAllowed=e.isReentryAllowed,this.reentryChips=e.reentryChips,this.numberOfReentry=e.numberOfReentry,this.reentryTime=e.reentryTime,this.totalReentryChips=e.totalReentryChips,this.payoutType=e.payoutType,this.payoutId=e.payoutId,this.isAddonEnabled=e.isAddonEnabled,this.freezeout=e.freezeout,this.state=e.state,this.createdAt=e.createdAt,this.tournamentId=e.tournamentId,this.blindLevel=e.blindLevel;var t=[];for(var s in e.player_list)t.push(new p(e.player_list[s]));this.player_list=t;var l=[];for(var h in e.tables)l.push(new u(e.tables[h]));this.tables=l;var g=[];e.leaderBoard.forEach(function(e){g.push(new d(e))},this),this.leaderBoard=g,this.inGamePlayers=e.playerRemainingRatio?e.playerRemainingRatio.inGamePlayers:0,this.registeredPlayers=e.playerRemainingRatio?e.playerRemainingRatio.registeredPlayers:0,this.playerAction=e.playerAction,this.totalEntryFees=e.totalEntryFees,this.isInBreak=e.isInBreak,this.breakStartTimeToDisplay=e.breakStartTimeToDisplay,this.breakStartTime=e.breakStartTime,this.breakEndTimeToDisplay=e.breakEndTimeToDisplay,this.breakEndTime=e.breakEndTime,this.blindRule=new c(e.blindRule),this.timeBankRule=e.timeBankRule,this.payoutStructure=new r(e.payoutStructure),this.baseTableId=e.baseTableId,this.currentBlindLevel=new o(e.currentBlindLevel),this.nextBlindLevel=new o(e.nextBlindLevel);var f=[];for(var y in e.tablesStack)f.push(new i(y,e.tablesStack[y]));this.tablesStack=f,this.minStack=e.alltableStack?e.alltableStack.minStack:0,this.maxStack=e.alltableStack?e.alltableStack.maxStack:0,this.avgStack=e.alltableStack?e.alltableStack.avgStack:0;var b=[];for(var v in e.playersChip)b.push(new n(e.playersChip[v]));this.playersChip=b;var C=[];e.playersPayout.forEach(function(e){C.push(new a(e))},this),this.playersPayout=C}},cc._RF.pop()},{}],TournamentResultsPlacement:[function(e,t){"use strict";cc._RF.push(t,"f6c86B3gbRC/r3945I1Vs5V","TournamentResultsPlacement"),e("GameConfig").K,cc.Class({extends:cc.Component,properties:{settingAvatar:{default:null,type:cc.Node},playerName:{default:null,type:cc.Label},tournamentName:{default:null,type:cc.Label},pokerPresenter:{default:null,type:cc.Node}},onLoad:function(){},onDisable:function(){},onEnable:function(){},onClose:function(){this.node.active=!1,this.pokerPresenter.getComponent("PokerPresenter").model.kickPlayerOutOfTheGame(this.pokerPresenter.getComponent("PokerPresenter").model),this.pokerPresenter.getComponent("PokerPresenter").leaveTable()},setData:function(e){var t=this.pokerPresenter.getComponent("PokerPresenter").model.gameData.raw.tourData.raw;cc.find("PositionResult/Rectangle 1661/place",this.node).getComponent(cc.Label).string="Eliminated",cc.find("Nameplate/PlayerName",this.node).getComponent(cc.Label).string=GameManager.user.userName,cc.find("Avatar/Frame/Mask/avatarSprite",this.node).getComponent(cc.Sprite).spriteFrame=GameManager.user.urlImg?GameManager.user.urlImg:GameManager.avatarImages[0];var a,n,i,o=GameManager.getMTimeDuration3(t.tournamentStartDetails.startTime);cc.find("Info/Info/title",this.node).getComponent(cc.Label).string=t.tournamentName,cc.find("Info/Info/date",this.node).getComponent(cc.Label).string=t.tournamentStartDetails.displayStartTime,cc.find("Info/Info/playTimeValue",this.node).getComponent(cc.Label).string=o+"",cc.find("Info/Info/place",this.node).getComponent(cc.Label).string=e.playerRank+"/"+(e.totalPlayers||0),cc.find("Info/Info/placement",this.node).getComponent(cc.Label).string=(i=(a=e.playerRank)%100,1==(n=a%10)&&11!=i?a+"st":2==n&&12!=i?a+"nd":3==n&&13!=i?a+"rd":a+"th"),this.settingAvatar.getComponent(cc.Sprite).spriteFrame=GameManager.user.urlImg,this.playerName.string=GameManager.user.userName,this.tournamentName.string=t.tournamentName}}),cc._RF.pop()},{GameConfig:"GameConfig"}],TournamentResultsWinner:[function(e,t){"use strict";cc._RF.push(t,"c854avEwcpInIKgIv2gJhzi","TournamentResultsWinner"),e("GameConfig").K,cc.Class({extends:cc.Component,properties:{pokerPresenter:{default:null,type:cc.Node}},onLoad:function(){},onDisable:function(){},onEnable:function(){},onClose:function(){this.node.active=!1,this.pokerPresenter.getComponent("PokerPresenter").model.kickPlayerOutOfTheGame(this.pokerPresenter.getComponent("PokerPresenter").model),this.pokerPresenter.getComponent("PokerPresenter").leaveTable()},setData:function(e){var t=this.pokerPresenter.getComponent("PokerPresenter").model.gameData.raw.tourData.raw;cc.find("Nameplate/PlayerName",this.node).getComponent(cc.Label).string=GameManager.user.userName,cc.find("Avatar/Frame/Mask/avatarSprite",this.node).getComponent(cc.Sprite).spriteFrame=GameManager.user.urlImg?GameManager.user.urlImg:GameManager.avatarImages[0];var a=GameManager.getMTimeDuration3(t.tournamentStartDetails.startTime);cc.find("Info/Info/title",this.node).getComponent(cc.Label).string=t.tournamentName,cc.find("Info/Info/date",this.node).getComponent(cc.Label).string=t.tournamentStartDetails.displayStartTime,cc.find("Info/Info/playTimeValue",this.node).getComponent(cc.Label).string=a+"",cc.find("Info/Info/place",this.node).getComponent(cc.Label).string="1/"+(e.totalPlayers||0)}}),cc._RF.pop()},{GameConfig:"GameConfig"}],TournamentTablePlayersInfo:[function(e,t){"use strict";cc._RF.push(t,"2eb3eBEhmBNEavyjhUQ/rUg","TournamentTablePlayersInfo"),cc.Class({extends:cc.Component,properties:{rankLbl:{default:null,type:cc.Label},playerIdLbl:{default:null,type:cc.Label},chipsLbl:{default:null,type:cc.Label}},onLoad:function(){},setValues:function(e){this.rankLbl.string=e.rank||"",this.playerIdLbl.string=e.userName||"",this.chipsLbl.string=e.chipsWon}}),cc._RF.pop()},{}],TournamentTablePlayersOnTableInfo:[function(e,t){"use strict";cc._RF.push(t,"d1707pgS01J1Z1WKJ40O5uG","TournamentTablePlayersOnTableInfo"),cc.Class({extends:cc.Component,properties:{playerIdLbl:{default:null,type:cc.Label},chipsLbl:{default:null,type:cc.Label},setPlayersRankFunc:null,id:null},onLoad:function(){this.setPlayersRankFunc=this.setData.bind(this),ServerCom.pomeloBroadcast(K.LobbyBroadcastRoute.tournamentLobby,this.setPlayersRankFunc)},setData:function(e){e.playerId==this.id&&(this.playerIdLbl.string=e.updated.playerName,this.chipsLbl.string=e.updated.chips)},setValues:function(e,t){this.id=t,this.playerIdLbl.string=e.userName||"",this.chipsLbl.string=e.chips||""}}),cc._RF.pop()},{}],TournamentTableRunningTableInfo:[function(e,t){"use strict";cc._RF.push(t,"6559aHgTORJGqWczBnR1uoS","TournamentTableRunningTableInfo"),cc.Class({extends:cc.Component,properties:{id:-1,tableLbl:{default:null,type:cc.Label},playersLbl:{default:null,type:cc.Label},largestStackLbl:{default:null,type:cc.Label},smallestStackLbl:{default:null,type:cc.Label},players:null,callback:null,baseColor:new cc.color,setPlayersDataFunc:null},onLoad:function(){this.setPlayersDataFunc=this.setData.bind(this),ServerCom.pomeloBroadcast(K.LobbyBroadcastRoute.tournamentLobby,this.setPlayersDataFunc)},setData:function(e){this.id==e._id&&(this.largestStackLbl.string=e.updated.largestStack,this.smallestStackLbl.string=e.updated.smallestStack)},onDestroy:function(){pomelo.off(K.LobbyBroadcastRoute.tournamentLobby,this.setPlayersDataFunc)},setValues:function(e,t){this.id=t,this.players=e.players,this.tableLbl.string=t+1,this.playersLbl.string=e.players.length||"",this.largestStackLbl.string=e.largestStack&&e.largestStack.chips||"",this.smallestStackLbl.string=e.smallestStack&&e.smallestStack.chips||"",this.baseColor=this.node.getChildByName("Base").color},onClick:function(){this.callback(this.players,this.id),this.node.getChildByName("Base").color=new cc.color(72,70,38)},removeSelection:function(){this.node.getChildByName("Base").color=this.baseColor}}),cc._RF.pop()},{}],TourneyTablePresenter:[function(e,t){"use strict";cc._RF.push(t,"0d42e2iz9JFaaMJFlsIhP/D","TourneyTablePresenter");var a=e("PostTypes").JoinChannel,n=e("Table"),i=e("TableContent"),o=e("Checkbox"),s=e("DropDown"),r=e("PopUpManager").PopUpType;cc.Class({extends:n,properties:{registerBtn:{default:null,type:cc.Node},deregisterBtn:{default:null,type:cc.Node},joinBtn:{default:null,type:cc.Node},gameTypeDropdown:{default:null,type:s},stakesDropdown:{default:null,type:s},maxPlayersDropdown:{default:null,type:s},hideFullTablesCB:{default:null,type:o},channelNameLbl:{default:null,type:cc.Label},prizePoolLbl:{default:null,type:cc.Label},startsAtLbl:{default:null,type:cc.Label},startsInLbl:{default:null,type:cc.Label},lateRegisterationLbl:{default:null,type:cc.Label},lateRegTillTimeLbl:{default:null,type:cc.Label},favTableCB:{default:null,type:o},favPrimaryCB:{default:null,type:o},sideTableInfo:{default:null,type:cc.Node},stateViewNode:{default:null,type:cc.Node}},addTable:function(e){e.updated.channelType==K.ChannelType.Tournament&&e.updated.tournamentType!=K.TournamentType.SitNGo&&this._super(e)},onLoad:function(){this._super(),ServerCom.pomeloBroadcast(K.LobbyBroadcastRoute.tableView,function(e){"PRIZEPOOL"==e.event&&this.setPrizePoolLbel(e.updated.prizePool)})},makeContent:function(e){if(this.variation==K.Variation.OpenFaceChinesePoker)var t=[e.channelName,e.chipsPointRatio,e.channelVariation,GameManager.getGameTypeByValue(e.turnTime),e.minBuyIn,e.maxBuyIn,e.playingPlayers+"/"+e.maxPlayers];else t=[e.channelName,e.channelVariation,e.buyIn,GameManager.getTimeByMilli(e.tournamentStartTime),e.prizePool||"-",GameManager.getGameTypeByValue(e.turnTime),this.capitalizeFirstLetter(e.state),e.enrolledPlayers];return t},filterByTournamentType:function(e,t,a){return void 0===t&&(t=!0),void 0===a&&(a=!0),this._super(e,!1,!1)},onGetTableData:function(){this._super(K.ChannelType.Tournament)},onTournamentLobbyInfo:function(){null!==i.prevSelection&&this.handler.tournamentLobbyInfo(i.prevSelection.channelData,function(e){e.tableData&&this.popUpManager.show(r.TournamentLobbyInfoPopup,e,function(){})}.bind(this),function(){}.bind(this))},tableContentClick:function(){if(null!=i.prevSelection){var e=this;this.handler.checkRegistration(i.prevSelection.channelData,function(t){t.success&&(e.switchButtons(t.result.isRegistered,t.result.tournamentState,i.prevSelection.channelData.isLateRegistrationOpened,t.result.isEliminated),e.tempSelection=e.contentPool.indexOf(i.prevSelection.node))},function(){}),this.refreshSideTable()}},refreshSideTable:function(e){void 0===e&&(e=!0),this._super(!1)},setSideTableData:function(){var e=i.prevSelection.channelData;this.channelNameLbl.string=e.channelName,this.prizePoolLbl.string=e.prizePool,this.startsAtLbl.string=GameManager.getTimeByMilli(e.tournamentStartTime)+" IST",this.startsInLbl.string=GameManager.getTimeDuration(e.tournamentStartTime,!1);var t=e.lateRegistration?e.tournamentStartTime+e.lateRegistrationTime:e.tournamentStartTime,a=e.tournamentStartTime-6e4*e.registrationBeforeStarttime;this.lateRegisterationLbl.string=GameManager.getTimeByMilli(a)+" IST",this.lateRegTillTimeLbl.string=GameManager.getTimeDuration(t,!1)},OnRegisterTournament:function(){if(null!==i.prevSelection){var e=this,t=!1;K.TournamentType.Normal==i.prevSelection.channelData.tournamentType&&i.prevSelection.channelData.state==K.SitNGoState.RUNNING&&i.prevSelection.channelData.isLateRegistrationOpened&&i.prevSelection.channelData.lateRegistrationAllowed&&(t=!0),this.handler.registerTournament(i.prevSelection.channelData,function(t){return t.success?(e.switchButtons(!0),e.refreshSideTable(),!1):"user already registered in this tournament"===t.info&&(e.refreshSideTable(),!0)},function(){},t)}},OnDeRegisterTournament:function(){if(null!==i.prevSelection){var e=this;this.handler.deRegisterTournament(i.prevSelection.channelData,function(t){t.success&&e.switchButtons(!1)},function(){}),this.refreshSideTable()}},onJoinTournament:function(){if(null!==i.prevSelection){var e=new a(i.prevSelection.channelData);e.tableId=i.prevSelection.channelData._id,e.channelId="",GameManager.join(e.tableId,K.PomeloAPI.joinChannel,e)}},switchButtons:function(e,t,a,n){if(this.registerBtn.active=!e,this.deregisterBtn.active=e,t)switch(t){case K.SitNGoState.RUNNING:this.registerBtn.active=a,this.joinBtn.active=e&&!n,this.deregisterBtn.active=!1;break;case K.SitNGoState.REGISTER:this.joinBtn.active=!1;break;case K.SitNGoState.FINISHED:case K.SitNGoState.UPCOMING:this.joinBtn.active=this.registerBtn.active=this.registerBtn.active=!1}},setPrizePoolLbel:function(e){this.prizePoolLbl=e}}),cc._RF.pop()},{Checkbox:"Checkbox",DropDown:"DropDown",PopUpManager:"PopUpManager",PostTypes:"PostTypes",Table:"Table",TableContent:"TableContent"}],Transition:[function(e,t){"use strict";cc._RF.push(t,"c2d65MEylNJqY3dGEMns4OF","Transition");var a=e("EventEmitter");cc.Class({extends:a,properties:{toState:{default:null},fromState:{default:null}},triggerTransition:function(){this.emit("onTransition",this)}}),cc._RF.pop()},{EventEmitter:"EventEmitter"}],TutorialManager:[function(e,t,a){"use strict";cc._RF.push(t,"c1624RPAllCooJdPEcAqheh","TutorialManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(s=(o<3?i(s):o>3?i(t,a,s):i(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0}),a.TutorialManager=void 0;var s=cc._decorator,r=s.ccclass,l=s.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tutoSteps=[],t.gotItNode=null,t.nextNode=null,t.skipNode=null,t.curStep=0,t.finishedTuto="FINISH_TUTORIAL",t}return i(t,e),t.prototype.start=function(){this.showSteps(-1),this.gotItNode.active=this.skipNode.active=this.nextNode.active=!1,this.isFinishTuto()?this.node.active=!1:this.startTuto()},t.prototype.startTuto=function(){this.curStep=0,this.gotItNode.active=!1,this.skipNode.active=this.nextNode.active=!0,this.showSteps(this.curStep)},t.prototype.onClickNextBtn=function(){window.GameManager.playSound(K.Sounds.click),this.curStep++,this.showSteps(this.curStep)},t.prototype.showSteps=function(e){this.tutoSteps.forEach(function(t,a){t.active=a===e}),this.curStep===this.tutoSteps.length-1&&(this.gotItNode.active=!0,this.skipNode.active=this.nextNode.active=!1)},t.prototype.onClickSkipBtn=function(){window.GameManager.playSound(K.Sounds.click),this.markTutoDone()},t.prototype.onClickGotItBtn=function(){window.GameManager.playSound(K.Sounds.click),this.markTutoDone()},t.prototype.markTutoDone=function(){localStorage.setItem(this.finishedTuto,"true"),this.node.active=!1},t.prototype.isFinishTuto=function(){var e=localStorage.getItem(this.finishedTuto);return!!e&&"true"===e},o([l(cc.Node)],t.prototype,"tutoSteps",void 0),o([l(cc.Node)],t.prototype,"gotItNode",void 0),o([l(cc.Node)],t.prototype,"nextNode",void 0),o([l(cc.Node)],t.prototype,"skipNode",void 0),o([r],t)}(cc.Component);a.TutorialManager=c,cc._RF.pop()},{}],UpdateCategory:[function(e,t){"use strict";cc._RF.push(t,"bb577o+bQdDw53LT6ZhB3Iy","UpdateCategory"),e("PopUpManager").PopUpManager;var a=e("PopUpManager").PopUpType,n=e("PopUpBase");cc.Class({extends:n,properties:{title:{default:null,type:cc.Label}},onLoad:function(){},onShow:function(e){this.title.string=e.message},onOkBtn:function(){null!=this.soundValue&&0!=this.soundValue||GameManager.playSound(K.Sounds.click),GameManager.popUpManager.hide(a.NotificationPopup,function(){}),GameManager.popUpManager.hide(a.OnLogOutPopup,function(){}),GameManager.logout()}}),cc._RF.pop()},{PopUpBase:"PopUpBase",PopUpManager:"PopUpManager"}],UpdatePopup:[function(e,t){"use strict";cc._RF.push(t,"27528T15CtKSJf/oJzgsrHI","UpdatePopup");var a,n,i,o,s,r,l,c,d,h,u=e("PopUpBase");cc.Class({extends:u,properties:{updateNode:{default:null,type:cc.Node}},start:function(){a=this.updateNode.getChildByName("Downloading").getChildByName("progressBar").getComponent(cc.ProgressBar),n=this.updateNode.getChildByName("Downloading"),i=this.updateNode.getChildByName("Downloaded"),o=null,s=this.updateNode.getChildByName("FailedNode"),r=65e4,l=0,c=0,d=null;var e=this.updateNode.getChildByName("ProgressPercent");e&&(h=e.getComponent(cc.Label))},onUpdateApp:function(){if(cc.sys.os===cc.sys.OS_IOS||cc.sys.isBrowser)cc.sys.os===cc.sys.OS_IOS&&cc.sys.os!=cc.sys.isBrowser&&cc.sys.openURL("https://apps.apple.com/us/app/pokerbuddy365/id1588847992");else{cc.sys.isBrowser||cc.sys.os!==cc.sys.OS_WINDOWS||cc.game.end(),this.updateNode.active=!0,n.active=!0,i.active=!1,s.active=!1,a.progress=0;var e=function(){c==l?(n.active=!1,s.active=!0):(c=l,o=setTimeout(e,r))}.bind(this);o=setTimeout(e,r),jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","updateApp","()V")}},progress:function(e){a.progress=e/100,h.string=String(e)+"%",console.log("progress bar called",a.progress),1==a.progress&&(clearInterval(d),clearTimeout(o),n.active=!1,i.active=!0)},retryInstall:function(){jsb.reflection.callStaticMethod("org/cocos2dx/javascript/DownloadService","retryInstall","()V")}}),cc._RF.pop()},{PopUpBase:"PopUpBase"}],Utils:[function(e,t){"use strict";cc._RF.push(t,"20b3eUiuKdDO4Judu8fYImm","Utils"),t.exports={isBust:function(e){for(var t=0,a=0;a<e.length;a++){var n=e[a];t+=Math.min(10,n.point)}return t>21},getMinMaxPoint:function(e){for(var t=!1,a=0,n=0;n<e.length;n++){var i=e[n];1===i.point&&(t=!0),a+=Math.min(10,i.point)}var o=a;return t&&a+10<=21&&(o+=10),{min:a,max:o}},isMobile:function(){return cc.sys.isMobile}},cc._RF.pop()},{}],VideoPopup:[function(e,t){"use strict";cc._RF.push(t,"166c57X+CRJgrvOfUwUZu3F","VideoPopup"),e("PokerPresenter"),e("PopUpManager").PopUpManager;var a=e("PopUpBase"),n=e("SitNGoModelHandler").SitNGoModelHandler,i=e("PopUpManager").PopUpType,o=e("OFCResponseTypes").GameData,s=(e("PostTypes").JoinChannel,e("ResponseTypes").GameData),r=new cc.Enum({PAUSED:1,RUNNING:2,STOPPED:3,NONE:4,RESTART:5});cc.Class({extends:a,properties:{sitNGoModelHandler:{default:null,type:n},texasHoldemPrefab:{default:null,type:cc.Prefab},ofcPrefab:{default:null,type:cc.Prefab},contentHolder:{default:null,type:cc.Node},videoDuration:0,videoEvents:[],videoID:"0",speed:1,state:{default:r.NONE,type:r},currentTime:0,currentEventIdx:0,pokerModel:null,resetEvent:null,progressBar:{type:cc.ProgressBar,default:null},presenter:null,oneXBtn:{default:null,type:cc.Node},twoXBtn:{default:null,type:cc.Node},threeXBtn:{default:null,type:cc.Node},playBtn:{default:null,type:cc.Node},pauseBtn:{default:null,type:cc.Node},nextVideoBtn:{default:null,type:cc.Button},prevVideoBtn:{default:null,type:cc.Button},activeSprite:{default:null,type:cc.SpriteFrame},deactiveSprite:{default:null,type:cc.SpriteFrame},activeFontColor:cc.Color,deactiveFontColor:cc.Color,knob:{default:null,type:cc.Node},refModel:null,onShowData:null},onShow:function(e){GameManager.removeAllChildren(this.contentHolder),this.removeAllListeners(),this.refModel=e.refModel,this.onShowData=e,this.pauseBtn.active=!1,this.playBtn.active=!0;var t={playerId:GameManager.user.playerId,playerName:GameManager.user.userName,videoId:e.currentId,isRequested:!0};ServerCom.pomeloRequest(K.PomeloAPI.getVideo,t,function(e){e.success&&this.onVideoLoaded(e)}.bind(this)),this.nextVideoBtn.interactable=this.refModel.handTabs.length-1>this.onShowData.id,this.prevVideoBtn.interactable=0<this.onShowData.id},onVideoLoaded:function(e){var t=e;this.speed=1,this.state=r.NONE,this.handHistoryId=t.handHistoryId,this.videoDuration=t.duration,this.videoEvents=t.broadcasts,this.videoID=t.roundId,this.resetEvent=t.gamePlayers,"Open Face Chinese Poker"===(e=t.joinResponse).roomConfig.channelVariation?e.gameData=new o(e):e.gameData=new s(e),e.gameData.channelType=e.roomConfig.channelType,e.roomConfig.channelType==K.ChannelType.Tournament&&(e.type=1,e.roomConfig.isRebuyOpened=!1);var a=null;"Open Face Chinese Poker"==e.roomConfig.channelVariation?(a=cc.instantiate(this.ofcPrefab),this.pokerModel=a.getComponent("OFCModel"),this.presenter=a.children[0].getComponent("OFCPresenter")):(a=cc.instantiate(this.texasHoldemPrefab),this.pokerModel=a.getComponent("PokerModel"),this.presenter=a.children[0].getComponent("PokerPresenter")),a.scaleX=.7,a.scaleY=.7,"Omaha"===e.roomConfig.channelVariation||"Omaha Hi-Lo"===e.roomConfig.channelVariation?this.pokerModel.dummyCardsCount=4:this.pokerModel.dummyCardsCount=2,this.pokerModel.isVideo=!0,e.type&&1==e.type&&(this.sitNGoModelHandler=new n,this.sitNGoModelHandler.setSitNGoModel(this.pokerModel),this.sitNGoModelHandler.setSitNGoPresenter(this.presenter),this.pokerModel.playerNewChannel=function(){},this.pokerModel.onInitializePoker=this.sitNgoInitializePoker.bind(this)),this.contentHolder.addChild(a),this.pokerModel.registerBroadcasts=this.registerBroadcasts.bind(this),this.pokerModel.onDestroy=function(){},this.pokerModel.startTimerTick=function(){},this.myVideoData=e,this.changeState(r.STOPPED)},sitNgoInitializePoker:function(){this.on(K.BroadcastRoute.playerNewChannel,this.pokerModel.playerNewChannel.bind(this.pokerModel)),this.on(K.BroadcastRoute.playerElimination,this.pokerModel.playerElimination.bind(this.pokerModel)),this.on(K.BroadcastRoute.breakTime,this.pokerModel.onBreakTime.bind(this.pokerModel)),this.on(K.BroadcastRoute.breakTimerStart,this.pokerModel.onBreakTimeStart.bind(this.pokerModel)),this.on(K.BroadcastRoute.rebuyStatus,this.pokerModel.onRebuyStatus.bind(this.pokerModel))},registerBroadcasts:function(){this.on(this.pokerModel.K.BroadcastRoute.sit,this.pokerModel.onSit.bind(this.pokerModel)),this.on(this.pokerModel.K.BroadcastRoute.blindDeduction,this.pokerModel.onBlindDeducted.bind(this.pokerModel)),this.on(this.pokerModel.K.BroadcastRoute.bankrupt,this.pokerModel.onBankrupt.bind(this.pokerModel)),this.on(this.pokerModel.K.BroadcastRoute.gamePlayers,this.pokerModel.onGamePlayers.bind(this.pokerModel)),this.on(this.pokerModel.K.BroadcastRoute.dealerrChat,this.pokerModel.onDealerChat.bind(this.pokerModel)),this.on(this.pokerModel.K.BroadcastRoute.startGame,this.pokerModel.onGameStart.bind(this.pokerModel)),this.on(this.pokerModel.K.BroadcastRoute.turn,this.pokerModel.onMoveMade.bind(this.pokerModel)),this.on(this.pokerModel.K.BroadcastRoute.roundOver,this.pokerModel.onRoundOver.bind(this.pokerModel)),this.on(this.pokerModel.K.BroadcastRoute.gameOver,this.pokerModel.onGameOver.bind(this.pokerModel)),this.on(this.pokerModel.K.BroadcastRoute.leave,this.pokerModel.onLeft.bind(this.pokerModel)),this.on(this.pokerModel.K.BroadcastRoute.chat,this.pokerModel.onChat.bind(this.pokerModel)),this.on(this.pokerModel.K.BroadcastRoute.playerCards,this.pokerModel.onPlayerCards.bind(this.pokerModel)),this.on(this.pokerModel.K.BroadcastRoute.playerState,this.pokerModel.onPlayerStateChange.bind(this.pokerModel)),this.on(this.pokerModel.K.BroadcastRoute.connectionAck,this.pokerModel.onConnectionAck.bind(this.pokerModel)),this.on(this.pokerModel.K.BroadcastRoute.preCheck,this.pokerModel.onPreCheck.bind(this.pokerModel)),this.on(this.pokerModel.K.BroadcastRoute.playerCoins,this.pokerModel.onPlayerCoins.bind(this.pokerModel)),this.on(this.pokerModel.K.BroadcastRoute.avatarChange,this.pokerModel.onAvatarChange.bind(this.pokerModel)),this.on(this.pokerModel.K.BroadcastRoute.handTab,this.pokerModel.onHandTab.bind(this.pokerModel)),this.on(this.pokerModel.K.BroadcastRoute.bestHands,this.pokerModel.onBestHands.bind(this.pokerModel)),this.on(this.pokerModel.K.BroadcastRoute.onTimeBank,this.pokerModel.onTimeBank.bind(this.pokerModel))},update:function(e){switch(this.state){case r.STOPPED:this.updateStopped(e);break;case r.RUNNING:this.updateRunning(e);break;case r.PAUSED:this.updatePaused(e)}},updateRunning:function(e){this.currentTime+=e*this.speed,this.progressBar.progress=this.currentTime/this.videoDuration;var t=this.progressBar.progress*this.progressBar.totalLength-this.progressBar.totalLength/2;t>-this.progressBar.totalLength/2&&t<this.progressBar.totalLength/2&&(this.knob.x=t),this.currentEventIdx<this.videoEvents.length&&this.currentTime>=this.videoEvents[this.currentEventIdx].timestamp&&(this.emit(this.videoEvents[this.currentEventIdx].data.route,this.videoEvents[this.currentEventIdx].data),this.currentEventIdx++,this.resetView())},updateStopped:function(){},updatePaused:function(){},changeState:function(e){if(this.state!=e)switch(this.state=e,this.state){case r.STOPPED:this.pokerModel.initiliazePoker(this.myVideoData),this.presenter.setTiledView(!1),this.currentTime=0,this.currentEventIdx=0,this.progressBar.progress=0,this.knob.x=-this.progressBar.totalLength/2,this.emit(this.resetEvent.data.route,this.resetEvent.data),this.resetView();break;case r.RUNNING:this.onOneXSpeed();break;case r.PAUSED:break;case r.RESTART:this.onClose(),this.pokerModel.emit("clearTimers",null),GameManager.popUpManager.show(i.VideoPlayerPopup,this.onShowData,function(){})}},resetView:function(){this.presenter.unTiledView.getChildByName("SettingsButton").active=!1,this.presenter.unTiledView.getChildByName("Tile_Untile").active=!1,this.presenter.unTiledView.getChildByName("AddChipsButton").active=!1,this.presenter.sitOutNextHandCheckBox.node.parent.active=!1,this.presenter.postBigBlindCheckBox.node.parent.active=!1,this.presenter.resumeBtn.active=!1,this.presenter.runItTwiceCB.node.parent.active=!1,this.presenter.chatPanel.active=!1,this.presenter.unTiledView.getChildByName("ReplayButton").active=!1},onPlay:function(){this.changeState(r.RUNNING),this.pauseBtn.active=!0,this.playBtn.active=!1,GameManager.playSound(K.Sounds.click)},onStop:function(){this.pauseBtn.active=!1,this.playBtn.active=!0,this.changeState(r.RESTART),GameManager.playSound(K.Sounds.click)},onPause:function(){this.changeState(r.PAUSED),this.pauseBtn.active=!1,this.playBtn.active=!0,GameManager.playSound(K.Sounds.click)},increaseSpeed:function(){this.speed<3&&this.speed++},onOneXSpeed:function(){this.resetSpeedView(),this.speed=1,this.pokerModel.videoSpeed=1,this.oneXBtn.getComponent(cc.Sprite).spriteFrame=this.activeSprite,this.oneXBtn.children[0].color=this.activeFontColor,this.oneXBtn.children.length>1&&(this.oneXBtn.children[1].color=this.activeFontColor),GameManager.playSound(K.Sounds.click)},onTwoXSpeed:function(){this.resetSpeedView(),this.speed=2,this.pokerModel.videoSpeed=2,this.twoXBtn.getComponent(cc.Sprite).spriteFrame=this.activeSprite,this.twoXBtn.children[0].color=this.activeFontColor,this.twoXBtn.children.length>1&&(this.twoXBtn.children[1].color=this.activeFontColor),GameManager.playSound(K.Sounds.click)},onThreeXSpeed:function(){this.resetSpeedView(),this.speed=3,this.pokerModel.videoSpeed=3,this.threeXBtn.getComponent(cc.Sprite).spriteFrame=this.activeSprite,this.threeXBtn.children[0].color=this.activeFontColor,this.threeXBtn.children.length>1&&(this.threeXBtn.children[1].color=this.activeFontColor),GameManager.playSound(K.Sounds.click)},resetSpeedView:function(){this.oneXBtn.getComponent(cc.Sprite).spriteFrame=this.deactiveSprite,this.twoXBtn.getComponent(cc.Sprite).spriteFrame=this.deactiveSprite,this.threeXBtn.getComponent(cc.Sprite).spriteFrame=this.deactiveSprite,this.oneXBtn.children[0].color=this.deactiveFontColor,this.oneXBtn.children.length>1&&(this.oneXBtn.children[1].color=this.deactiveFontColor),this.twoXBtn.children[0].color=this.deactiveFontColor,this.twoXBtn.children.length>1&&(this.twoXBtn.children[1].color=this.deactiveFontColor),this.threeXBtn.children[0].color=this.deactiveFontColor,this.threeXBtn.children.length>1&&(this.threeXBtn.children[1].color=this.deactiveFontColor)},decreaseSpeed:function(){this.speed>1&&this.speed--},onNextVideo:function(){if(this.onShowData.id<this.refModel.handTabs.length-1){var e={};e.currentId=this.refModel.handTabs[this.onShowData.id+1].videoId,e.refModel=this.refModel,e.id=this.onShowData.id+1,this.onClose(),GameManager.popUpManager.show(i.VideoPlayerPopup,e,function(){})}GameManager.playSound(K.Sounds.click)},onPrevVideo:function(){if(this.onShowData.id>0){var e={};e.currentId=this.refModel.handTabs[this.onShowData.id-1].videoId,e.refModel=this.refModel,e.id=this.onShowData.id-1,this.onClose(),GameManager.popUpManager.show(i.VideoPlayerPopup,e,function(){})}},nextFrame:function(){this.currentTime=this.videoEvents[this.currentEventIdx].timestamp},onHide:function(){},showTabHistory:function(){this.pokerModel.getHandHistory(this.handHistoryId)},onClose:function(){GameManager.playSound(K.Sounds.click),GameManager.popUpManager.hide(i.VideoPlayerPopup,function(){})}}),cc._RF.pop()},{OFCResponseTypes:"OFCResponseTypes",PokerPresenter:"PokerPresenter",PopUpBase:"PopUpBase",PopUpManager:"PopUpManager",PostTypes:"PostTypes",ResponseTypes:"ResponseTypes",SitNGoModelHandler:"SitNGoModelHandler"}],ViewGroupNesting:[function(e,t,a){"use strict";cc._RF.push(t,"1fd25c6h2xEO6usFxiZ3n93","ViewGroupNesting");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])})(e,t)},function(e,t){function a(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}),o=this&&this.__decorate||function(e,t,a,n){var i,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,a):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,a,n);else for(var r=e.length-1;r>=0;r--)(i=e[r])&&(s=(o<3?i(s):o>3?i(t,a,s):i(t,a))||s);return o>3&&s&&Object.defineProperty(t,a,s),s};Object.defineProperty(a,"__esModule",{value:!0});var s=cc._decorator,r=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.events=[],t}return i(t,e),t.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchHandle,this,!0),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchHandle,this,!0),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchHandle,this,!0),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchHandle,this,!0)},t.prototype.onTouchHandle=function(e){if(!e.sham&&!e.simulate&&e.target!==this.node){var t=new cc.Event.EventTouch(e.getTouches(),e.bubbles);t.type=e.type,t.touch=e.touch,t.sham=!0,this.events.push(t)}},t.prototype.update=function(){if(0!==this.events.length){for(var e=0;e<this.events.length;e++)this.node.dispatchEvent(this.events[e]);this.events.length=0}},o([r],t)}(cc.Component));a.default=l,cc._RF.pop()},{}],WebImageUpload:[function(e,t){"use strict";var a;cc._RF.push(t,"85f48C1IQpBxYqbkR2LcniG","WebImageUpload"),cc.Class({extends:cc.Component,properties:{base64Data:null,imageLoaded:null,spriteLoaded:null},onLoad:function(){window.WebImageUpload=this},loadImage:function(e){var t=document.createElement("INPUT");t.setAttribute("type","file"),t.setAttribute("value","Click me"),t.setAttribute("id","Upload"),t.setAttribute("hidden","true"),t.setAttribute("accept","image/*"),a=this,t.onchange=function(){a.readURL(this)},document.body.appendChild(t),this.imageLoaded=e,document.getElementById("Upload").click()},readURL:function(e){if(e.files&&e.files[0]){var t=new FileReader;t.onload=function(e){a.base64Data=e.target.result;var t=new Image;t.src=e.target.result,a.scheduleOnce(function(){var e=a._resize(t,500,500);0!=e?(a.base64Data=e,a.scheduleOnce(function(){var e=new cc.Texture2D;e.initWithElement(t),e.handleLoadedTexture(),a.spriteLoaded=new cc.SpriteFrame(e),a.imageLoaded(a.spriteLoaded)},.2)):alert("There was a problem, please upload again")},.2)},t.readAsDataURL(e.files[0])}},_resize:function(e,t,a){var n=1,i=document.createElement("canvas");i.style.display="none",document.body.appendChild(i);var o=document.createElement("canvas");o.style.display="none",document.body.appendChild(o);var s=i.getContext("2d"),r=o.getContext("2d");e.width>t?n=t/e.width:e.height>a&&(n=a/e.height),o.width=e.width,o.height=e.height;try{r.drawImage(e,0,0)}catch(c){return alert("There was a problem - please reupload your image"),!1}i.width=e.width*n,i.height=e.height*n,s.drawImage(o,0,0,i.width,i.height);var l=i.toDataURL("image/png");return document.body.removeChild(i),document.body.removeChild(o),l}}),cc._RF.pop()},{}],ae_keep_click:[function(e,t){"use strict";cc._RF.push(t,"fc621tt+EhA3LqY7/KQD+Fg","ae_keep_click"),cc.Class({extends:cc.Component,properties:{safeTime:{default:1.5,tooltip:"\u6309\u94ae\u4fdd\u62a4\u65f6\u95f4\uff0c\u6307\u5b9a\u95f4\u9694\u5185\u53ea\u80fd\u70b9\u51fb\u4e00\u6b21."}},start:function(){var e=this,t=this.getComponent(cc.Button);t&&(this.clickEvents=t.clickEvents,this.node.on("click",function(){t.clickEvents=[],e.scheduleOnce(function(){t.clickEvents=e.clickEvents},e.safeTime)},this))}}),cc._RF.pop()},{}],capture_to_native:[function(e,t){"use strict";cc._RF.push(t,"4d2b7Q9hOJAqqSFfGIIF0Nd","capture_to_native"),cc.Class({extends:e("./textureRenderUtils"),properties:{_width:0,_height:0},start:function(){},initImage:function(){var e=this.texture.readPixels();return this._width=this.texture.width,this._height=this.texture.height,this.filpYImage(e,this._width,this._height)},createCanvas:function(e){var t=new cc.Texture2D;t.initWithData(e,32,this._width,this._height);var a=new cc.SpriteFrame;a.setTexture(t);var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=a,n.zIndex=cc.macro.MAX_ZINDEX,n.parent=cc.director.getScene();var i=cc.winSize.width,o=cc.winSize.height;n.x=i/2,n.y=o/2,n.on(cc.Node.EventType.TOUCH_START,function(){n.parent=null,n.destroy()}),this.captureAction(n,i,o)},saveFile:function(){},filpYImage:function(e,t,a){for(var n=new Uint8Array(t*a*4),i=4*t,o=0;o<a;o++)for(var s=(a-1-o)*t*4,r=o*t*4,l=0;l<i;l++)n[r+l]=e[s+l];return n}}),cc._RF.pop()},{"./textureRenderUtils":"textureRenderUtils"}],capture_to_web:[function(e,t){"use strict";cc._RF.push(t,"a3bd2YeLnlLlYe7zsG6dokc","capture_to_web"),cc.Class({extends:e("./textureRenderUtils"),start:function(){}}),cc._RF.pop()},{"./textureRenderUtils":"textureRenderUtils"}],c:[function(e,t){"use strict";cc._RF.push(t,"04772wfNcpBG5gndu3ntWj1","c"),e("PopUpManager").PopUpManager,e("PopUpManager").PopUpType;var a=e("PopUpBase");e("SliderTouch"),e("CustomEditBox"),e("EditBoxUtil"),e("PostTypes").SetPlayerValData,cc.Class({extends:a,properties:{minStake:{default:null,type:cc.EditBox},maxStake:{default:null,type:cc.EditBox},buyInUltraLow:{default:null,type:cc.Node},buyInLow:{default:null,type:cc.Node},buyInMedium:{default:null,type:cc.Node},buyInHiigh:{default:null,type:cc.Node},player2:{default:null,type:cc.Node},player3:{default:null,type:cc.Node},player4:{default:null,type:cc.Node},player5:{default:null,type:cc.Node},player6:{default:null,type:cc.Node},player7:{default:null,type:cc.Node},player8:{default:null,type:cc.Node},player9:{default:null,type:cc.Node},rit:{default:null,type:cc.Node},noLimit:{default:null,type:cc.Node},limit:{default:null,type:cc.Node}},onDestroy:function(){},onEnable:function(){},onLoad:function(){},onShow:function(){},onClearAll:function(){},onApply:function(){var e=this;ServerCom.pomeloRequest("connector.entryHandler.getLobbyTables",{isRealMoney:!0,channelVariation:"All",playerId:GameManager.user.playerId,isLoggedIn:!0,access_token:K.Token.access_token},function(t){console.log("TABLE DATA IS ",JSON.parse(JSON.stringify(t))),t.success&&t.result&&e.populateTable(t.result)},null,5e3,!1)},onClose:function(){this.node.active=!1}}),cc._RF.pop()},{CustomEditBox:"CustomEditBox",EditBoxUtil:"EditBoxUtil",PopUpBase:"PopUpBase",PopUpManager:"PopUpManager",PostTypes:"PostTypes",SliderTouch:"SliderTouch"}],globals:[function(e,t,a){"use strict";cc._RF.push(t,"fc85dCz8NhEe489BL2pnfdz","globals"),Object.defineProperty(a,"__esModule",{value:!0}),a.default={TournamentLobbyListPresenter:null,TournamentLobbyPresenter:null,BingoTournamentLobbyListPresenter:null,BingoTournamentLobbyPresenter:null},cc._RF.pop()},{}],main:[function(e,t,a){"use strict";cc._RF.push(t,"9a0cb+o3c9K9KBlVu8r+vBC","main"),function(e){e([],function(){var e=function(e){return Number.prototype.toString.call(e,36).toUpperCase()},t=function(e){return parseInt(e,36)},a=Array.prototype.indexOf||function(e,t){for(var a=t||0,n=this.length;a<n;a++)if(this[a]===e)return a;return-1};return{JSON:JSON,pack:function(t,n){var i=(n=n||{}).verbose||!1;i&&console.log("Normalize the JSON Object"),t="string"==typeof t?this.JSON.parse(t):t,i&&console.log("Creating a empty dictionary");var o={strings:[],integers:[],floats:[]};i&&console.log("Creating the AST");var s=function t(n){i&&console.log("Calling recursiveAstBuilder with "+this.JSON.stringify(n));var s,r,l=typeof n;if(null===n)return{type:"null",index:-3};if(void 0===n)return{type:"undefined",index:-5};if(n instanceof Array){var c=["@"];for(var d in n)n.hasOwnProperty(d)&&c.push(t(n[d]));return c}if("object"===l){for(var h in c=["$"],n)n.hasOwnProperty(h)&&(c.push(t(h)),c.push(t(n[h])));return c}if(""===n)return{type:"empty",index:-4};if("string"===l)return-1==(s=a.call(o.strings,n))&&(o.strings.push("string"!=typeof(r=n)?r:r.replace(/[\+ \|\^\%]/g,function(e){return{" ":"+","+":"%2B","|":"%7C","^":"%5E","%":"%25"}[e]})),s=o.strings.length-1),{type:"strings",index:s};if("number"===l&&n%1==0)return-1==(s=a.call(o.integers,n))&&(o.integers.push(e(n)),s=o.integers.length-1),{type:"integers",index:s};if("number"===l)return-1==(s=a.call(o.floats,n))&&(o.floats.push(n),s=o.floats.length-1),{type:"floats",index:s};if("boolean"===l)return{type:"boolean",index:n?-1:-2};throw new Error("Unexpected argument of type "+typeof n)}(t),r=o.strings.length,l=o.integers.length;o.floats.length,i&&console.log("Parsing the dictionary");var c=o.strings.join("|");return c+="^"+o.integers.join("|"),c+="^"+o.floats.join("|"),i&&console.log("Parsing the structure"),c+="^"+function t(a){if(i&&console.log("Calling a recursiveParser with "+this.JSON.stringify(a)),a instanceof Array){var n=a.shift();for(var o in a)a.hasOwnProperty(o)&&(n+=t(a[o])+"|");return("|"===n[n.length-1]?n.slice(0,-1):n)+"]"}var s=a.type,c=a.index;if("strings"===s)return e(c);if("integers"===s)return e(r+c);if("floats"===s)return e(r+l+c);if("boolean"===s)return a.index;if("null"===s)return-3;if("undefined"===s)return-5;if("empty"===s)return-4;throw new TypeError("The item is alien!")}(s),i&&console.log("Ending parser"),n.debug?{dictionary:o,ast:s,packed:c}:c},unpack:function(e,a){a=a||{};var n=e.split("^");a.verbose&&console.log("Building dictionary");var i,o=[],s=n[0];if(""!==s){s=s.split("|"),a.verbose&&console.log("Parse the strings dictionary");for(var r=0,l=s.length;r<l;r++)o.push("string"!=typeof(i=s[r])?i:i.replace(/\+|%2B|%7C|%5E|%25/g,function(e){return{"+":" ","%2B":"+","%7C":"|","%5E":"^","%25":"%"}[e]}))}if(""!==(s=n[1]))for(s=s.split("|"),a.verbose&&console.log("Parse the integers dictionary"),r=0,l=s.length;r<l;r++)o.push(t(s[r]));if(""!==(s=n[2]))for(s=s.split("|"),a.verbose&&console.log("Parse the floats dictionary"),r=0,l=s.length;r<l;r++)o.push(parseFloat(s[r]));s=null,a.verbose&&console.log("Tokenizing the structure");var c="",d=[],h=n[3].length;for(r=0;r<h;r++){var u=n[3].charAt(r);"|"===u||"$"===u||"@"===u||"]"===u?(c&&(d.push(t(c)),c=""),"|"!==u&&d.push(u)):c+=u}var p=d.length,m=0;return a.verbose&&console.log("Starting recursive parser"),function e(){var t=d[m++];if(a.verbose&&console.log("Reading collection type "+("$"===t?"object":"Array")),"@"===t){for(var n=[];m<p;m++){var i=d[m];if(a.verbose&&console.log("Read "+i+" symbol"),"]"===i)return n;if("@"===i||"$"===i)n.push(e());else switch(i){case-1:n.push(!0);break;case-2:n.push(!1);break;case-3:n.push(null);break;case-5:n.push(void 0);break;case-4:n.push("");break;default:n.push(o[i])}}return a.verbose&&console.log("Parsed "+this.JSON.stringify(n)),n}if("$"===t){for(n={};m<p;m++){var s=d[m];if("]"===s)return n;if(s=-4===s?"":o[s],"@"===(i=d[++m])||"$"===i)n[s]=e();else switch(i){case-1:n[s]=!0;break;case-2:n[s]=!1;break;case-3:n[s]=null;break;case-5:n[s]=void 0;break;case-4:n[s]="";break;default:n[s]=o[i]}}return a.verbose&&console.log("Parsed "+this.JSON.stringify(n)),n}throw new TypeError("Bad token "+t+" isn't a type")}()}}})}("undefined"!=typeof define&&define.amd?define:function(e,t){var n=t();if(void 0!==a)for(var i in n)a[i]=n[i];else window.jsonpack=n}),cc._RF.pop()},{}],scrollBarHandler:[function(e,t){"use strict";cc._RF.push(t,"af8daUif6JBU6KV6ThmPtbl","scrollBarHandler"),cc.Class({extends:cc.Component,properties:{container:{default:null,type:cc.Node},scrollView:null},onLoad:function(){},onEnable:function(){this.scrollIt(),this.registerUPandDOWN()},scrollIt:function(){this.scrollView=this.node.getComponent(cc.ScrollView),this.handle=this.node.getChildByName("scrollBar").getChildByName("bar"),this.handle.on(cc.Node.EventType.TOUCH_MOVE,function(e){e.bubbles=!1,e.stopPropagation();var t=e.getDeltaY(),a=this.scrollView.getScrollOffset();if(new cc.Vec2(0,0),t>0){var n=cc.v2(0,a.y-10);this.scrollView.scrollToOffset(n)}else t<0&&(n=cc.v2(0,a.y+10),this.scrollView.scrollToOffset(n))}.bind(this))},onUpScrollClick:function(){var e=this.getComponent(cc.ScrollView),t=e.getScrollOffset(),a=(e.content.children.length,cc.v2(0,t.y-26));this.scrollView.scrollToOffset(a,.2)},onDownScrollClick:function(){var e=this.getComponent(cc.ScrollView).getScrollOffset(),t=cc.v2(0,e.y+26);this.scrollView.scrollToOffset(t,.2)},registerUPandDOWN:function(){}}),cc._RF.pop()},{}],"socket-service":[function(e,t){"use strict";cc._RF.push(t,"288f0GhN6VFNrs9KhSQvqxS","socket-service");var a=function(){this.promiseData={}};window.SocketService=a,a.prototype.io=function(e,t){this.socket=io(e,t);var a=this;this.socket.onAny(function(e,t){console.log(ServerCom.getFormattedTime(),"Network [onAny] Socket",e,t),"commonEventResponse"===e&&"room.channelHandler.joinChannel"==t.eventOrigin?(a.promiseData[t.eventOrigin+"|"+t.data.channelId].resolve&&a.promiseData[t.eventOrigin+"|"+t.data.channelId].resolve(t),delete a.promiseData[t.eventOrigin+"|"+t.data.channelId]):"commonEventResponse"===e&&a.promiseData[t.eventOrigin]?(a.promiseData[t.eventOrigin].resolve&&a.promiseData[t.eventOrigin].resolve(t),a.promiseData[t.eventOrigin]?delete a.promiseData[t.eventOrigin]:t.data&&t.data.channelId&&delete a.promiseData[t.eventOrigin+"|"+t.data.channelId]):a.onAny&&a.onAny(e,t)})},a.prototype.emit=function(e,t,a){this.socket.emit(e,t,a);var n=this;return new Promise(function(e,a){"room.channelHandler.joinChannel"==t.eventName?n.promiseData[t.eventName+"|"+t.data.channelId]={resolve:e,reject:a}:n.promiseData[t.eventName]={resolve:e,reject:a},setTimeout(function(){n.promiseData[t.eventName]&&n.promiseData[t.eventName].reject},1e4)})},a.prototype.onAny=function(e){this.onAny=e},cc._RF.pop()},{}],testPack:[function(e,t){"use strict";cc._RF.push(t,"54bd2vr2jZKnJHBwwwVWwRV","testPack"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){jsonpack.pack({type:"world",name:"earth",children:[{type:"continent",name:"America",children:[{type:"country",name:"Chile",children:[{type:"commune",name:"Antofagasta"}]}]},{type:"continent",name:"Europe"}]})}}),cc._RF.pop()},{}],textureRenderUtils:[function(e,t){"use strict";cc._RF.push(t,"f55ebW8plpEeIgthwlvCLbJ","textureRenderUtils"),cc.Class({extends:cc.Component,properties:{camera:cc.Camera,_canvas:null},init:function(){var e=new cc.RenderTexture;e.initWithSize(cc.visibleRect.width,cc.visibleRect.height,cc.gfx.RB_FMT_S8),this.camera.targetTexture=e,this.texture=e},createImg:function(){var e=this._canvas.toDataURL("image/png"),t=document.createElement("img");return t.src=e,t},createCanvas:function(){var e=this.texture.width,t=this.texture.height;this._canvas?this.clearCanvas():(this._canvas=document.createElement("canvas"),this._canvas.width=e,this._canvas.height=t);var a=this._canvas.getContext("2d");this.camera.render();for(var n=this.texture.readPixels(),i=4*e,o=0;o<t;o++){for(var s=t-1-o,r=a.createImageData(e,1),l=s*e*4,c=0;c<i;c++)r.data[c]=n[l+c];a.putImageData(r,0,o)}return this._canvas},showImage:function(e){var t=new cc.Texture2D;t.initWithElement(e);var a=new cc.SpriteFrame;a.setTexture(t);var n=new cc.Node;n.addComponent(cc.Sprite).spriteFrame=a,n.zIndex=cc.macro.MAX_ZINDEX,n.parent=cc.director.getScene();var i=cc.winSize.width,o=cc.winSize.height;n.x=i/2,n.y=o/2,this.captureAction(n,i,o)},captureAction:function(e,t,a){var n=cc.scaleTo(.5,.3),i=cc.v2(t-t/6,a/4),o=cc.moveTo(.5,i),s=cc.spawn(n,o);e.runAction(cc.sequence(s,cc.delayTime(1),cc.callFunc(function(){e.parent=null,e.destroy()})));var r=cc.blink(.4,1);this.node.runAction(r)},clearCanvas:function(){this._canvas.getContext("2d").clearRect(0,0,this._canvas.width,this._canvas.height)}}),cc._RF.pop()},{}]},{},["AnimBase","BuddiesItemContent","BuddiesItemIngame","BuddiesPopup","BuddiesTablePresenter","BuildTime","GameConfig","OFCConfigs","FramesController","GameManager","BetBtnUtil","ChatInfoPanel","ChatPanel","DealerChatPanel","HandHistoryTab","HandPanel","JohnyChat","NotePanel","TableInfoPanel","OptionalPlayerInput","PokerChipsView","PotSplitter","TableTab","QSTournamentDetail","TournamentDetailsHandInfo","TournamentDetailsPlayerInfo","TournamentDetailsPrizeInfo","TournamentLobbyDetailsMain","TournamentInfoBlindInfo","TournamentLobbyInfoMain","TournamentLobbyTableMain","TournamentTablePlayersInfo","TournamentTablePlayersOnTableInfo","TournamentTableRunningTableInfo","CountryCodes","OFCPostTypes","OFCResponseTypes","PostTypes","ResponseTypes","DisableScrollOnButton","NestablePageView_Outer","NestableScrollView_Inner","NestableScrollView_Outer","NtPageView","NtScrollView","NtScrollViewIn","NtScrollViewOut","Profile","SitTournComingSoon","Launch","LocalizedLabel","LocalizedManager","LocalizedSprite","LocalizedUI","NewLaunch","AdminNoticePopup","Advancefilter","AvatarPopup","AvatarSelection","BlindsChangedPopUp","BuyInPopup","CashierPopUp","CashoutPopup","CommonPopup","ConfirmQuickSeatSitNGo","DepositOne","DisconnectPopup","EnterPasswordPopup","ForgotPasswordPopUp","FreeBuyInPopup","FriendsList","FundTransferPopup","GamePreferencesPopup","GameResult","GameVariationPopup","GeneralBtnsPopup","HandHistoryDetailPopup","HandHistoryPopup","InGamePreferencesPopup","InSufficientChipsPopup","InfoPopup","InstructionPopup","InviteToPlayPopup","InvliteFriendsList","JoinGamePopup","JoinPrivateTablePopup","ListNotifications","LobbySettingsPopup","MaxTablesPopup","MobileNotePopup","MultiLoginPopup","NewPlayerInfoPopup","NewVersionPopup","NotificationPopup","OnLogOutPopup","PlayerAccountPopup","PlayerInfoPopup","PrivateTablePopup","QuickSeatPopup","RegPopup","RemoveDataPopup","ReportBug","ResultPopup","SeatPreferencesPopup","SitNGoResultPopup","TableColorSelectionPopup","TableTheme","TournamentLobbyInfoPopup","UpdateCategory","UpdatePopup","VideoPopup","c","ProfileHandler","ProfilePresenter","RoundRectMask","OFCModel","OFCPresenter","PokerModel","PokerPresenter","SitNGoModelHandler","GameModel","GameScreen","OFCPlayerPresenter","PlayerPresenter","IP-SelectionScreen","LobbyHandler","LobbyPresenter","CashRoom","CashTablePresenter","FreeRollContent","FreeRollPresenter","NewTable","PrivateTableContent","SitTablePresenter","Table","TableContent","TableHandler","TableOld","TournamentHandler","TourneyTablePresenter","ViewGroupNesting","ForgotPassword","LoginHandler","LoginScreen","SignupScreen","StickerBase","StickerController","StickersPopup","TournamentResponseTypes","TournamentModelHandler","TournamentInGameInfo","TournamentLobbyHandler","TournamentLobbyListItem","TournamentLobbyListPresenter","TournamentLobbyPresenter","TournamentBreakTime","TournamentBreakTimeAddon","TournamentBuyin","TournamentInfo","TournamentNotification","TournamentResultsPlacement","TournamentResultsWinner","TutorialManager","ActivateFullScreen","AdjustSpriteOrder","CClick","Card","CardDistributer","CardMovement","CardPool","CardTypes","Decks","DragManager","Utils","Checkbox","CustomEditBox","DropDown","DropDownOption","DropList","EditBoxUtil","EventEmitter","ExceptionHandler","Extensions","FBService","Movement","PlatformAdapterUtil","Queue.src","ScaleTween","ScreenResPolicyUtil","PopUpBase","PopUpManager","AbstractScreen","ScreenData","ScreenManager","ServerCom","SliderTouch","SliderTouchV","State","StateMachine","AState","AToB","BState","TestSM","Transition","SuperCustomEditBox","TabBtnUtil","TableSwiper","TimerUtil","Toggle","WebImageUpload","capture_to_native","capture_to_web","scrollBarHandler","textureRenderUtils","ae_keep_click","globals","main","testPack","Emitter","socket-service"]);